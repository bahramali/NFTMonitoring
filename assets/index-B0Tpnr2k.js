(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ps(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _b={exports:{}},Cd={};var vC;function jU(){if(vC)return Cd;vC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:c,ref:i!==void 0?i:null,props:o}}return Cd.Fragment=t,Cd.jsx=n,Cd.jsxs=n,Cd}var bC;function NU(){return bC||(bC=1,_b.exports=jU()),_b.exports}var a=NU(),xb={exports:{}},Ut={};var _C;function AU(){if(_C)return Ut;_C=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function S(M,q,z){this.props=M,this.context=q,this.refs=_,this.updater=z||x}S.prototype.isReactComponent={},S.prototype.setState=function(M,q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,q,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function j(){}j.prototype=S.prototype;function A(M,q,z){this.props=M,this.context=q,this.refs=_,this.updater=z||x}var E=A.prototype=new j;E.constructor=A,w(E,S.prototype),E.isPureReactComponent=!0;var C=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function R(M,q,z,V,Y,Z){return z=Z.ref,{$$typeof:e,type:M,key:q,ref:z!==void 0?z:null,props:Z}}function k(M,q){return R(M.type,q,void 0,void 0,void 0,M.props)}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function H(M){var q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(z){return q[z]})}var K=/\/+/g;function B(M,q){return typeof M=="object"&&M!==null&&M.key!=null?H(""+M.key):q.toString(36)}function U(){}function I(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(U,U):(M.status="pending",M.then(function(q){M.status==="pending"&&(M.status="fulfilled",M.value=q)},function(q){M.status==="pending"&&(M.status="rejected",M.reason=q)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function L(M,q,z,V,Y){var Z=typeof M;(Z==="undefined"||Z==="boolean")&&(M=null);var ee=!1;if(M===null)ee=!0;else switch(Z){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(M.$$typeof){case e:case t:ee=!0;break;case h:return ee=M._init,L(ee(M._payload),q,z,V,Y)}}if(ee)return Y=Y(M),ee=V===""?"."+B(M,0):V,C(Y)?(z="",ee!=null&&(z=ee.replace(K,"$&/")+"/"),L(Y,q,z,"",function(X){return X})):Y!=null&&(P(Y)&&(Y=k(Y,z+(Y.key==null||M&&M.key===Y.key?"":(""+Y.key).replace(K,"$&/")+"/")+ee)),q.push(Y)),1;ee=0;var ie=V===""?".":V+":";if(C(M))for(var xe=0;xe<M.length;xe++)V=M[xe],Z=ie+B(V,xe),ee+=L(V,q,z,Z,Y);else if(xe=v(M),typeof xe=="function")for(M=xe.call(M),xe=0;!(V=M.next()).done;)V=V.value,Z=ie+B(V,xe++),ee+=L(V,q,z,Z,Y);else if(Z==="object"){if(typeof M.then=="function")return L(I(M),q,z,V,Y);throw q=String(M),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ee}function $(M,q,z){if(M==null)return M;var V=[],Y=0;return L(M,V,"","",function(Z){return q.call(z,Z,Y++)}),V}function G(M){if(M._status===-1){var q=M._result;q=q(),q.then(function(z){(M._status===0||M._status===-1)&&(M._status=1,M._result=z)},function(z){(M._status===0||M._status===-1)&&(M._status=2,M._result=z)}),M._status===-1&&(M._status=0,M._result=q)}if(M._status===1)return M._result.default;throw M._result}var te=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function re(){}return Ut.Children={map:$,forEach:function(M,q,z){$(M,function(){q.apply(this,arguments)},z)},count:function(M){var q=0;return $(M,function(){q++}),q},toArray:function(M){return $(M,function(q){return q})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ut.Component=S,Ut.Fragment=n,Ut.Profiler=i,Ut.PureComponent=A,Ut.StrictMode=r,Ut.Suspense=f,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(M){return T.H.useMemoCache(M)}},Ut.cache=function(M){return function(){return M.apply(null,arguments)}},Ut.cloneElement=function(M,q,z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var V=w({},M.props),Y=M.key,Z=void 0;if(q!=null)for(ee in q.ref!==void 0&&(Z=void 0),q.key!==void 0&&(Y=""+q.key),q)!O.call(q,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&q.ref===void 0||(V[ee]=q[ee]);var ee=arguments.length-2;if(ee===1)V.children=z;else if(1<ee){for(var ie=Array(ee),xe=0;xe<ee;xe++)ie[xe]=arguments[xe+2];V.children=ie}return R(M.type,Y,void 0,void 0,Z,V)},Ut.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Ut.createElement=function(M,q,z){var V,Y={},Z=null;if(q!=null)for(V in q.key!==void 0&&(Z=""+q.key),q)O.call(q,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(Y[V]=q[V]);var ee=arguments.length-2;if(ee===1)Y.children=z;else if(1<ee){for(var ie=Array(ee),xe=0;xe<ee;xe++)ie[xe]=arguments[xe+2];Y.children=ie}if(M&&M.defaultProps)for(V in ee=M.defaultProps,ee)Y[V]===void 0&&(Y[V]=ee[V]);return R(M,Z,void 0,void 0,null,Y)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(M){return{$$typeof:d,render:M}},Ut.isValidElement=P,Ut.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:G}},Ut.memo=function(M,q){return{$$typeof:m,type:M,compare:q===void 0?null:q}},Ut.startTransition=function(M){var q=T.T,z={};T.T=z;try{var V=M(),Y=T.S;Y!==null&&Y(z,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(re,te)}catch(Z){te(Z)}finally{T.T=q}},Ut.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ut.use=function(M){return T.H.use(M)},Ut.useActionState=function(M,q,z){return T.H.useActionState(M,q,z)},Ut.useCallback=function(M,q){return T.H.useCallback(M,q)},Ut.useContext=function(M){return T.H.useContext(M)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(M,q){return T.H.useDeferredValue(M,q)},Ut.useEffect=function(M,q,z){var V=T.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(M,q)},Ut.useId=function(){return T.H.useId()},Ut.useImperativeHandle=function(M,q,z){return T.H.useImperativeHandle(M,q,z)},Ut.useInsertionEffect=function(M,q){return T.H.useInsertionEffect(M,q)},Ut.useLayoutEffect=function(M,q){return T.H.useLayoutEffect(M,q)},Ut.useMemo=function(M,q){return T.H.useMemo(M,q)},Ut.useOptimistic=function(M,q){return T.H.useOptimistic(M,q)},Ut.useReducer=function(M,q,z){return T.H.useReducer(M,q,z)},Ut.useRef=function(M){return T.H.useRef(M)},Ut.useState=function(M){return T.H.useState(M)},Ut.useSyncExternalStore=function(M,q,z){return T.H.useSyncExternalStore(M,q,z)},Ut.useTransition=function(){return T.H.useTransition()},Ut.version="19.1.0",Ut}var xC;function pu(){return xC||(xC=1,xb.exports=AU()),xb.exports}var p=pu();const my=ps(p);var Sb={exports:{}},Td={},wb={exports:{}},jb={};var SC;function EU(){return SC||(SC=1,(function(e){function t($,G){var te=$.length;$.push(G);e:for(;0<te;){var re=te-1>>>1,M=$[re];if(0<i(M,G))$[re]=G,$[te]=M,te=re;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],te=$.pop();if(te!==G){$[0]=te;e:for(var re=0,M=$.length,q=M>>>1;re<q;){var z=2*(re+1)-1,V=$[z],Y=z+1,Z=$[Y];if(0>i(V,te))Y<M&&0>i(Z,V)?($[re]=Z,$[Y]=te,re=Y):($[re]=V,$[z]=te,re=z);else if(Y<M&&0>i(Z,te))$[re]=Z,$[Y]=te,re=Y;else break e}}return G}function i($,G){var te=$.sortIndex-G.sortIndex;return te!==0?te:$.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var f=[],m=[],h=1,g=null,v=3,x=!1,w=!1,_=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C($){for(var G=n(m);G!==null;){if(G.callback===null)r(m);else if(G.startTime<=$)r(m),G.sortIndex=G.expirationTime,t(f,G);else break;G=n(m)}}function T($){if(_=!1,C($),!w)if(n(f)!==null)w=!0,O||(O=!0,B());else{var G=n(m);G!==null&&L(T,G.startTime-$)}}var O=!1,R=-1,k=5,P=-1;function H(){return S?!0:!(e.unstable_now()-P<k)}function K(){if(S=!1,O){var $=e.unstable_now();P=$;var G=!0;try{e:{w=!1,_&&(_=!1,A(R),R=-1),x=!0;var te=v;try{t:{for(C($),g=n(f);g!==null&&!(g.expirationTime>$&&H());){var re=g.callback;if(typeof re=="function"){g.callback=null,v=g.priorityLevel;var M=re(g.expirationTime<=$);if($=e.unstable_now(),typeof M=="function"){g.callback=M,C($),G=!0;break t}g===n(f)&&r(f),C($)}else r(f);g=n(f)}if(g!==null)G=!0;else{var q=n(m);q!==null&&L(T,q.startTime-$),G=!1}}break e}finally{g=null,v=te,x=!1}G=void 0}}finally{G?B():O=!1}}}var B;if(typeof E=="function")B=function(){E(K)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,I=U.port2;U.port1.onmessage=K,B=function(){I.postMessage(null)}}else B=function(){j(K,0)};function L($,G){R=j(function(){$(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function($){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var te=v;v=G;try{return $()}finally{v=te}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=v;v=$;try{return G()}finally{v=te}},e.unstable_scheduleCallback=function($,G,te){var re=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?re+te:re):te=re,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=te+M,$={id:h++,callback:G,priorityLevel:$,startTime:te,expirationTime:M,sortIndex:-1},te>re?($.sortIndex=te,t(m,$),n(f)===null&&$===n(m)&&(_?(A(R),R=-1):_=!0,L(T,te-re))):($.sortIndex=M,t(f,$),w||x||(w=!0,O||(O=!0,B()))),$},e.unstable_shouldYield=H,e.unstable_wrapCallback=function($){var G=v;return function(){var te=v;v=G;try{return $.apply(this,arguments)}finally{v=te}}}})(jb)),jb}var wC;function CU(){return wC||(wC=1,wb.exports=EU()),wb.exports}var Nb={exports:{}},Lr={};var jC;function TU(){if(jC)return Lr;jC=1;var e=pu();function t(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)m+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,m,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:m,implementation:h}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Lr.createPortal=function(f,m){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(f,m,null,h)},Lr.flushSync=function(f){var m=c.T,h=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=m,r.p=h,r.d.f()}},Lr.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},Lr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Lr.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var h=m.as,g=d(h,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;h==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):h==="script"&&r.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Lr.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var h=d(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},Lr.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var h=m.as,g=d(h,m.crossOrigin);r.d.L(f,h,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Lr.preloadModule=function(f,m){if(typeof f=="string")if(m){var h=d(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},Lr.requestFormReset=function(f){r.d.r(f)},Lr.unstable_batchedUpdates=function(f,m){return f(m)},Lr.useFormState=function(f,m,h){return c.H.useFormState(f,m,h)},Lr.useFormStatus=function(){return c.H.useHostTransitionStatus()},Lr.version="19.1.0",Lr}var NC;function II(){if(NC)return Nb.exports;NC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Nb.exports=TU(),Nb.exports}var AC;function kU(){if(AC)return Td;AC=1;var e=CU(),t=pu(),n=II();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,u=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(u=l.return),s=l.return;while(s)}return l.tag===3?u:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(r(188))}function f(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(r(188));return l!==s?null:s}for(var u=s,y=l;;){var b=u.return;if(b===null)break;var N=b.alternate;if(N===null){if(y=b.return,y!==null){u=y;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===u)return d(b),s;if(N===y)return d(b),l;N=N.sibling}throw Error(r(188))}if(u.return!==y.return)u=b,y=N;else{for(var D=!1,F=b.child;F;){if(F===u){D=!0,u=b,y=N;break}if(F===y){D=!0,y=b,u=N;break}F=F.sibling}if(!D){for(F=N.child;F;){if(F===u){D=!0,u=N,y=b;break}if(F===y){D=!0,y=N,u=b;break}F=F.sibling}if(!D)throw Error(r(189))}}if(u.alternate!==y)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function I(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case E:return(s.displayName||"Context")+".Provider";case A:return(s._context.displayName||"Context")+".Consumer";case C:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return l=s.displayName||null,l!==null?l:I(s.type)||"Memo";case k:l=s._payload,s=s._init;try{return I(s(l))}catch{}}return null}var L=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},re=[],M=-1;function q(s){return{current:s}}function z(s){0>M||(s.current=re[M],re[M]=null,M--)}function V(s,l){M++,re[M]=s.current,s.current=l}var Y=q(null),Z=q(null),ee=q(null),ie=q(null);function xe(s,l){switch(V(ee,l),V(Z,s),V(Y,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?KE(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=KE(l),s=GE(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}z(Y),V(Y,s)}function X(){z(Y),z(Z),z(ee)}function Ae(s){s.memoizedState!==null&&V(ie,s);var l=Y.current,u=GE(l,s.type);l!==u&&(V(Z,s),V(Y,u))}function he(s){Z.current===s&&(z(Y),z(Z)),ie.current===s&&(z(ie),wd._currentValue=te)}var ue=Object.prototype.hasOwnProperty,Xe=e.unstable_scheduleCallback,Ue=e.unstable_cancelCallback,ye=e.unstable_shouldYield,je=e.unstable_requestPaint,Ee=e.unstable_now,qe=e.unstable_getCurrentPriorityLevel,W=e.unstable_ImmediatePriority,fe=e.unstable_UserBlockingPriority,we=e.unstable_NormalPriority,de=e.unstable_LowPriority,ve=e.unstable_IdlePriority,se=e.log,Re=e.unstable_setDisableYieldValue,Je=null,le=null;function Oe(s){if(typeof se=="function"&&Re(s),le&&typeof le.setStrictMode=="function")try{le.setStrictMode(Je,s)}catch{}}var Le=Math.clz32?Math.clz32:Ge,ne=Math.log,Se=Math.LN2;function Ge(s){return s>>>=0,s===0?32:31-(ne(s)/Se|0)|0}var vt=256,Dt=4194304;function Ne(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function We(s,l,u){var y=s.pendingLanes;if(y===0)return 0;var b=0,N=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var F=y&134217727;return F!==0?(y=F&~N,y!==0?b=Ne(y):(D&=F,D!==0?b=Ne(D):u||(u=F&~s,u!==0&&(b=Ne(u))))):(F=y&~N,F!==0?b=Ne(F):D!==0?b=Ne(D):u||(u=y&~s,u!==0&&(b=Ne(u)))),b===0?0:l!==0&&l!==b&&(l&N)===0&&(N=b&-b,u=l&-l,N>=u||N===32&&(u&4194048)!==0)?l:b}function ze(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function lt(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bt(){var s=vt;return vt<<=1,(vt&4194048)===0&&(vt=256),s}function Qt(){var s=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),s}function kn(s){for(var l=[],u=0;31>u;u++)l.push(s);return l}function Ir(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function xs(s,l,u,y,b,N){var D=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var F=s.entanglements,J=s.expirationTimes,pe=s.hiddenUpdates;for(u=D&~u;0<u;){var Me=31-Le(u),$e=1<<Me;F[Me]=0,J[Me]=-1;var ge=pe[Me];if(ge!==null)for(pe[Me]=null,Me=0;Me<ge.length;Me++){var be=ge[Me];be!==null&&(be.lane&=-536870913)}u&=~$e}y!==0&&Dr(s,y,0),N!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=N&~(D&~l))}function Dr(s,l,u){s.pendingLanes|=l,s.suspendedLanes&=~l;var y=31-Le(l);s.entangledLanes|=l,s.entanglements[y]=s.entanglements[y]|1073741824|u&4194090}function er(s,l){var u=s.entangledLanes|=l;for(s=s.entanglements;u;){var y=31-Le(u),b=1<<y;b&l|s[y]&l&&(s[y]|=l),u&=~b}}function rn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Us(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ss(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:fC(s.type))}function ai(s,l){var u=G.p;try{return G.p=s,l()}finally{G.p=u}}var Yr=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Yr,An="__reactProps$"+Yr,za="__reactContainer$"+Yr,ba="__reactEvents$"+Yr,_a="__reactListeners$"+Yr,Ce="__reactHandles$"+Yr,et="__reactResources$"+Yr,Mt="__reactMarker$"+Yr;function $t(s){delete s[Fn],delete s[An],delete s[ba],delete s[_a],delete s[Ce]}function At(s){var l=s[Fn];if(l)return l;for(var u=s.parentNode;u;){if(l=u[za]||u[Fn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(s=QE(s);s!==null;){if(u=s[Fn])return u;s=QE(s)}return l}s=u,u=s.parentNode}return null}function Jt(s){if(s=s[Fn]||s[za]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function pr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function nn(s){var l=s[et];return l||(l=s[et]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function vn(s){s[Mt]=!0}var xa=new Set,Fa={};function Xr(s,l){Be(s,l),Be(s+"Capture",l)}function Be(s,l){for(Fa[s]=l,s=0;s<l.length;s++)xa.add(l[s])}var Ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},an={};function Wn(s){return ue.call(an,s)?!0:ue.call(Lt,s)?!1:Ot.test(s)?an[s]=!0:(Lt[s]=!0,!1)}function Qr(s,l,u){if(Wn(l))if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var y=l.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+u)}}function Sa(s,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+u)}}function In(s,l,u,y){if(y===null)s.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(l,u,""+y)}}var Q,_e;function ot(s){if(Q===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Q=l&&l[1]||"",_e=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+s+_e}var rt=!1;function _t(s,l){if(!s||rt)return"";rt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(be){var ge=be}Reflect.construct(s,[],$e)}else{try{$e.call()}catch(be){ge=be}s.call($e.prototype)}}else{try{throw Error()}catch(be){ge=be}($e=s())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(be){if(be&&ge&&typeof be.stack=="string")return[be.stack,ge.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=y.DetermineComponentFrameRoot(),D=N[0],F=N[1];if(D&&F){var J=D.split(`
`),pe=F.split(`
`);for(b=y=0;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;for(;b<pe.length&&!pe[b].includes("DetermineComponentFrameRoot");)b++;if(y===J.length||b===pe.length)for(y=J.length-1,b=pe.length-1;1<=y&&0<=b&&J[y]!==pe[b];)b--;for(;1<=y&&0<=b;y--,b--)if(J[y]!==pe[b]){if(y!==1||b!==1)do if(y--,b--,0>b||J[y]!==pe[b]){var Me=`
`+J[y].replace(" at new "," at ");return s.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",s.displayName)),Me}while(1<=y&&0<=b);break}}}finally{rt=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?ot(u):""}function it(s){switch(s.tag){case 26:case 27:case 5:return ot(s.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return _t(s.type,!1);case 11:return _t(s.type.render,!1);case 1:return _t(s.type,!0);case 31:return ot("Activity");default:return""}}function mt(s){try{var l="";do l+=it(s),s=s.return;while(s);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function en(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function tr(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function si(s){var l=tr(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),y=""+s[l];if(!s.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var b=u.get,N=u.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(D){y=""+D,N.call(this,D)}}),Object.defineProperty(s,l,{enumerable:u.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function nr(s){s._valueTracker||(s._valueTracker=si(s))}function Du(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var u=l.getValue(),y="";return s&&(y=tr(s)?s.checked?"true":"false":s.value),s=y,s!==u?(l.setValue(s),!0):!1}function ec(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Zi=/[\n"\\]/g;function Pr(s){return s.replace(Zi,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function tc(s,l,u,y,b,N,D,F){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),l!=null?D==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+en(l)):s.value!==""+en(l)&&(s.value=""+en(l)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),l!=null?wa(s,D,en(l)):u!=null?wa(s,D,en(u)):y!=null&&s.removeAttribute("value"),b==null&&N!=null&&(s.defaultChecked=!!N),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+en(F):s.removeAttribute("name")}function vg(s,l,u,y,b,N,D,F){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.type=N),l!=null||u!=null){if(!(N!=="submit"&&N!=="reset"||l!=null))return;u=u!=null?""+en(u):"",l=l!=null?""+en(l):u,F||l===s.value||(s.value=l),s.defaultValue=l}y=y??b,y=typeof y!="function"&&typeof y!="symbol"&&!!y,s.checked=F?s.checked:!!y,s.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D)}function wa(s,l,u){l==="number"&&ec(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ws(s,l,u,y){if(s=s.options,l){l={};for(var b=0;b<u.length;b++)l["$"+u[b]]=!0;for(u=0;u<s.length;u++)b=l.hasOwnProperty("$"+s[u].value),s[u].selected!==b&&(s[u].selected=b),b&&y&&(s[u].defaultSelected=!0)}else{for(u=""+en(u),l=null,b=0;b<s.length;b++){if(s[b].value===u){s[b].selected=!0,y&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function tl(s,l,u){if(l!=null&&(l=""+en(l),l!==s.value&&(s.value=l),u==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=u!=null?""+en(u):""}function rm(s,l,u,y){if(l==null){if(y!=null){if(u!=null)throw Error(r(92));if(L(y)){if(1<y.length)throw Error(r(93));y=y[0]}u=y}u==null&&(u=""),l=u}u=en(l),s.defaultValue=u,y=s.textContent,y===u&&y!==""&&y!==null&&(s.value=y)}function Ji(s,l){if(l){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=l;return}}s.textContent=l}var x5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kj(s,l,u){var y=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?y?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":y?s.setProperty(l,u):typeof u!="number"||u===0||x5.has(l)?l==="float"?s.cssFloat=u:s[l]=(""+u).trim():s[l]=u+"px"}function Gj(s,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,u!=null){for(var y in u)!u.hasOwnProperty(y)||l!=null&&l.hasOwnProperty(y)||(y.indexOf("--")===0?s.setProperty(y,""):y==="float"?s.cssFloat="":s[y]="");for(var b in l)y=l[b],l.hasOwnProperty(b)&&u[b]!==y&&Kj(s,b,y)}else for(var N in l)l.hasOwnProperty(N)&&Kj(s,N,l[N])}function bg(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),w5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function am(s){return w5.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var _g=null;function xg(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var nc=null,rc=null;function Wj(s){var l=Jt(s);if(l&&(s=l.stateNode)){var u=s[An]||null;e:switch(s=l.stateNode,l.type){case"input":if(tc(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Pr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var y=u[l];if(y!==s&&y.form===s.form){var b=y[An]||null;if(!b)throw Error(r(90));tc(y,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<u.length;l++)y=u[l],y.form===s.form&&Du(y)}break e;case"textarea":tl(s,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&ws(s,!!u.multiple,l,!1)}}}var Sg=!1;function Yj(s,l,u){if(Sg)return s(l,u);Sg=!0;try{var y=s(l);return y}finally{if(Sg=!1,(nc!==null||rc!==null)&&(Fm(),nc&&(l=nc,s=rc,rc=nc=null,Wj(l),s)))for(l=0;l<s.length;l++)Wj(s[l])}}function Pu(s,l){var u=s.stateNode;if(u===null)return null;var y=u[An]||null;if(y===null)return null;u=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wg=!1;if(ii)try{var $u={};Object.defineProperty($u,"passive",{get:function(){wg=!0}}),window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{wg=!1}var eo=null,jg=null,sm=null;function Xj(){if(sm)return sm;var s,l=jg,u=l.length,y,b="value"in eo?eo.value:eo.textContent,N=b.length;for(s=0;s<u&&l[s]===b[s];s++);var D=u-s;for(y=1;y<=D&&l[u-y]===b[N-y];y++);return sm=b.slice(s,1<y?1-y:void 0)}function im(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function om(){return!0}function Qj(){return!1}function ia(s){function l(u,y,b,N,D){this._reactName=u,this._targetInst=b,this.type=y,this.nativeEvent=N,this.target=D,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(u=s[F],this[F]=u?u(N):N[F]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?om:Qj,this.isPropagationStopped=Qj,this}return h(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=om)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=om)},persist:function(){},isPersistent:om}),l}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lm=ia(nl),Lu=h({},nl,{view:0,detail:0}),j5=ia(Lu),Ng,Ag,Bu,cm=h({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cg,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bu&&(Bu&&s.type==="mousemove"?(Ng=s.screenX-Bu.screenX,Ag=s.screenY-Bu.screenY):Ag=Ng=0,Bu=s),Ng)},movementY:function(s){return"movementY"in s?s.movementY:Ag}}),Zj=ia(cm),N5=h({},cm,{dataTransfer:0}),A5=ia(N5),E5=h({},Lu,{relatedTarget:0}),Eg=ia(E5),C5=h({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),T5=ia(C5),k5=h({},nl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),O5=ia(k5),R5=h({},nl,{data:0}),Jj=ia(R5),M5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P5(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=D5[s])?!!l[s]:!1}function Cg(){return P5}var $5=h({},Lu,{key:function(s){if(s.key){var l=M5[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=im(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?I5[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cg,charCode:function(s){return s.type==="keypress"?im(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?im(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),L5=ia($5),B5=h({},cm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eN=ia(B5),U5=h({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cg}),q5=ia(U5),z5=h({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),F5=ia(z5),H5=h({},cm,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),V5=ia(H5),K5=h({},nl,{newState:0,oldState:0}),G5=ia(K5),W5=[9,13,27,32],Tg=ii&&"CompositionEvent"in window,Uu=null;ii&&"documentMode"in document&&(Uu=document.documentMode);var Y5=ii&&"TextEvent"in window&&!Uu,tN=ii&&(!Tg||Uu&&8<Uu&&11>=Uu),nN=" ",rN=!1;function aN(s,l){switch(s){case"keyup":return W5.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sN(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ac=!1;function X5(s,l){switch(s){case"compositionend":return sN(l);case"keypress":return l.which!==32?null:(rN=!0,nN);case"textInput":return s=l.data,s===nN&&rN?null:s;default:return null}}function Q5(s,l){if(ac)return s==="compositionend"||!Tg&&aN(s,l)?(s=Xj(),sm=jg=eo=null,ac=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tN&&l.locale!=="ko"?null:l.data;default:return null}}var Z5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iN(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Z5[s.type]:l==="textarea"}function oN(s,l,u,y){nc?rc?rc.push(y):rc=[y]:nc=y,l=Ym(l,"onChange"),0<l.length&&(u=new lm("onChange","change",null,u,y),s.push({event:u,listeners:l}))}var qu=null,zu=null;function J5(s){qE(s,0)}function um(s){var l=pr(s);if(Du(l))return s}function lN(s,l){if(s==="change")return l}var cN=!1;if(ii){var kg;if(ii){var Og="oninput"in document;if(!Og){var uN=document.createElement("div");uN.setAttribute("oninput","return;"),Og=typeof uN.oninput=="function"}kg=Og}else kg=!1;cN=kg&&(!document.documentMode||9<document.documentMode)}function dN(){qu&&(qu.detachEvent("onpropertychange",fN),zu=qu=null)}function fN(s){if(s.propertyName==="value"&&um(zu)){var l=[];oN(l,zu,s,xg(s)),Yj(J5,l)}}function e4(s,l,u){s==="focusin"?(dN(),qu=l,zu=u,qu.attachEvent("onpropertychange",fN)):s==="focusout"&&dN()}function t4(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return um(zu)}function n4(s,l){if(s==="click")return um(l)}function r4(s,l){if(s==="input"||s==="change")return um(l)}function a4(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ja=typeof Object.is=="function"?Object.is:a4;function Fu(s,l){if(ja(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var u=Object.keys(s),y=Object.keys(l);if(u.length!==y.length)return!1;for(y=0;y<u.length;y++){var b=u[y];if(!ue.call(l,b)||!ja(s[b],l[b]))return!1}return!0}function mN(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function hN(s,l){var u=mN(s);s=0;for(var y;u;){if(u.nodeType===3){if(y=s+u.textContent.length,s<=l&&y>=l)return{node:u,offset:l-s};s=y}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=mN(u)}}function pN(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?pN(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function yN(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ec(s.document);l instanceof s.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)s=l.contentWindow;else break;l=ec(s.document)}return l}function Rg(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var s4=ii&&"documentMode"in document&&11>=document.documentMode,sc=null,Mg=null,Hu=null,Ig=!1;function gN(s,l,u){var y=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ig||sc==null||sc!==ec(y)||(y=sc,"selectionStart"in y&&Rg(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Hu&&Fu(Hu,y)||(Hu=y,y=Ym(Mg,"onSelect"),0<y.length&&(l=new lm("onSelect","select",null,l,u),s.push({event:l,listeners:y}),l.target=sc)))}function rl(s,l){var u={};return u[s.toLowerCase()]=l.toLowerCase(),u["Webkit"+s]="webkit"+l,u["Moz"+s]="moz"+l,u}var ic={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionrun:rl("Transition","TransitionRun"),transitionstart:rl("Transition","TransitionStart"),transitioncancel:rl("Transition","TransitionCancel"),transitionend:rl("Transition","TransitionEnd")},Dg={},vN={};ii&&(vN=document.createElement("div").style,"AnimationEvent"in window||(delete ic.animationend.animation,delete ic.animationiteration.animation,delete ic.animationstart.animation),"TransitionEvent"in window||delete ic.transitionend.transition);function al(s){if(Dg[s])return Dg[s];if(!ic[s])return s;var l=ic[s],u;for(u in l)if(l.hasOwnProperty(u)&&u in vN)return Dg[s]=l[u];return s}var bN=al("animationend"),_N=al("animationiteration"),xN=al("animationstart"),i4=al("transitionrun"),o4=al("transitionstart"),l4=al("transitioncancel"),SN=al("transitionend"),wN=new Map,Pg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pg.push("scrollEnd");function js(s,l){wN.set(s,l),Xr(l,[s])}var jN=new WeakMap;function Ha(s,l){if(typeof s=="object"&&s!==null){var u=jN.get(s);return u!==void 0?u:(l={value:s,source:l,stack:mt(l)},jN.set(s,l),l)}return{value:s,source:l,stack:mt(l)}}var Va=[],oc=0,$g=0;function dm(){for(var s=oc,l=$g=oc=0;l<s;){var u=Va[l];Va[l++]=null;var y=Va[l];Va[l++]=null;var b=Va[l];Va[l++]=null;var N=Va[l];if(Va[l++]=null,y!==null&&b!==null){var D=y.pending;D===null?b.next=b:(b.next=D.next,D.next=b),y.pending=b}N!==0&&NN(u,b,N)}}function fm(s,l,u,y){Va[oc++]=s,Va[oc++]=l,Va[oc++]=u,Va[oc++]=y,$g|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Lg(s,l,u,y){return fm(s,l,u,y),mm(s)}function lc(s,l){return fm(s,null,null,l),mm(s)}function NN(s,l,u){s.lanes|=u;var y=s.alternate;y!==null&&(y.lanes|=u);for(var b=!1,N=s.return;N!==null;)N.childLanes|=u,y=N.alternate,y!==null&&(y.childLanes|=u),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(b=!0)),s=N,N=N.return;return s.tag===3?(N=s.stateNode,b&&l!==null&&(b=31-Le(u),s=N.hiddenUpdates,y=s[b],y===null?s[b]=[l]:y.push(l),l.lane=u|536870912),N):null}function mm(s){if(50<pd)throw pd=0,Hv=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var cc={};function c4(s,l,u,y){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(s,l,u,y){return new c4(s,l,u,y)}function Bg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function oi(s,l){var u=s.alternate;return u===null?(u=Na(s.tag,l,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=l,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,l=s.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function AN(s,l){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,l=u.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function hm(s,l,u,y,b,N){var D=0;if(y=s,typeof s=="function")Bg(s)&&(D=1);else if(typeof s=="string")D=dU(s,u,Y.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Na(31,u,l,b),s.elementType=P,s.lanes=N,s;case w:return sl(u.children,b,N,l);case _:D=8,b|=24;break;case S:return s=Na(12,u,l,b|2),s.elementType=S,s.lanes=N,s;case T:return s=Na(13,u,l,b),s.elementType=T,s.lanes=N,s;case O:return s=Na(19,u,l,b),s.elementType=O,s.lanes=N,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:case E:D=10;break e;case A:D=9;break e;case C:D=11;break e;case R:D=14;break e;case k:D=16,y=null;break e}D=29,u=Error(r(130,s===null?"null":typeof s,"")),y=null}return l=Na(D,u,l,b),l.elementType=s,l.type=y,l.lanes=N,l}function sl(s,l,u,y){return s=Na(7,s,y,l),s.lanes=u,s}function Ug(s,l,u){return s=Na(6,s,null,l),s.lanes=u,s}function qg(s,l,u){return l=Na(4,s.children!==null?s.children:[],s.key,l),l.lanes=u,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var uc=[],dc=0,pm=null,ym=0,Ka=[],Ga=0,il=null,li=1,ci="";function ol(s,l){uc[dc++]=ym,uc[dc++]=pm,pm=s,ym=l}function EN(s,l,u){Ka[Ga++]=li,Ka[Ga++]=ci,Ka[Ga++]=il,il=s;var y=li;s=ci;var b=32-Le(y)-1;y&=~(1<<b),u+=1;var N=32-Le(l)+b;if(30<N){var D=b-b%5;N=(y&(1<<D)-1).toString(32),y>>=D,b-=D,li=1<<32-Le(l)+b|u<<b|y,ci=N+s}else li=1<<N|u<<b|y,ci=s}function zg(s){s.return!==null&&(ol(s,1),EN(s,1,0))}function Fg(s){for(;s===pm;)pm=uc[--dc],uc[dc]=null,ym=uc[--dc],uc[dc]=null;for(;s===il;)il=Ka[--Ga],Ka[Ga]=null,ci=Ka[--Ga],Ka[Ga]=null,li=Ka[--Ga],Ka[Ga]=null}var Zr=null,Hn=null,cn=!1,ll=null,qs=!1,Hg=Error(r(519));function cl(s){var l=Error(r(418,""));throw Gu(Ha(l,s)),Hg}function CN(s){var l=s.stateNode,u=s.type,y=s.memoizedProps;switch(l[Fn]=s,l[An]=y,u){case"dialog":Wt("cancel",l),Wt("close",l);break;case"iframe":case"object":case"embed":Wt("load",l);break;case"video":case"audio":for(u=0;u<gd.length;u++)Wt(gd[u],l);break;case"source":Wt("error",l);break;case"img":case"image":case"link":Wt("error",l),Wt("load",l);break;case"details":Wt("toggle",l);break;case"input":Wt("invalid",l),vg(l,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),nr(l);break;case"select":Wt("invalid",l);break;case"textarea":Wt("invalid",l),rm(l,y.value,y.defaultValue,y.children),nr(l)}u=y.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||y.suppressHydrationWarning===!0||VE(l.textContent,u)?(y.popover!=null&&(Wt("beforetoggle",l),Wt("toggle",l)),y.onScroll!=null&&Wt("scroll",l),y.onScrollEnd!=null&&Wt("scrollend",l),y.onClick!=null&&(l.onclick=Xm),l=!0):l=!1,l||cl(s)}function TN(s){for(Zr=s.return;Zr;)switch(Zr.tag){case 5:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:Zr=Zr.return}}function Vu(s){if(s!==Zr)return!1;if(!cn)return TN(s),cn=!0,!1;var l=s.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||ib(s.type,s.memoizedProps)),u=!u),u&&Hn&&cl(s),TN(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(l===0){Hn=As(s.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;s=s.nextSibling}Hn=null}}else l===27?(l=Hn,go(s.type)?(s=ub,ub=null,Hn=s):Hn=l):Hn=Zr?As(s.stateNode.nextSibling):null;return!0}function Ku(){Hn=Zr=null,cn=!1}function kN(){var s=ll;return s!==null&&(ca===null?ca=s:ca.push.apply(ca,s),ll=null),s}function Gu(s){ll===null?ll=[s]:ll.push(s)}var Vg=q(null),ul=null,ui=null;function to(s,l,u){V(Vg,l._currentValue),l._currentValue=u}function di(s){s._currentValue=Vg.current,z(Vg)}function Kg(s,l,u){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===u)break;s=s.return}}function Gg(s,l,u,y){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var N=b.dependencies;if(N!==null){var D=b.child;N=N.firstContext;e:for(;N!==null;){var F=N;N=b;for(var J=0;J<l.length;J++)if(F.context===l[J]){N.lanes|=u,F=N.alternate,F!==null&&(F.lanes|=u),Kg(N.return,u,s),y||(D=null);break e}N=F.next}}else if(b.tag===18){if(D=b.return,D===null)throw Error(r(341));D.lanes|=u,N=D.alternate,N!==null&&(N.lanes|=u),Kg(D,u,s),D=null}else D=b.child;if(D!==null)D.return=b;else for(D=b;D!==null;){if(D===s){D=null;break}if(b=D.sibling,b!==null){b.return=D.return,D=b;break}D=D.return}b=D}}function Wu(s,l,u,y){s=null;for(var b=l,N=!1;b!==null;){if(!N){if((b.flags&524288)!==0)N=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var D=b.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=b.type;ja(b.pendingProps.value,D.value)||(s!==null?s.push(F):s=[F])}}else if(b===ie.current){if(D=b.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(wd):s=[wd])}b=b.return}s!==null&&Gg(l,s,u,y),l.flags|=262144}function gm(s){for(s=s.firstContext;s!==null;){if(!ja(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function dl(s){ul=s,ui=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $r(s){return ON(ul,s)}function vm(s,l){return ul===null&&dl(s),ON(s,l)}function ON(s,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},ui===null){if(s===null)throw Error(r(308));ui=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ui=ui.next=l;return u}var u4=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(u,y){s.push(y)}};this.abort=function(){l.aborted=!0,s.forEach(function(u){return u()})}},d4=e.unstable_scheduleCallback,f4=e.unstable_NormalPriority,ur={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wg(){return{controller:new u4,data:new Map,refCount:0}}function Yu(s){s.refCount--,s.refCount===0&&d4(f4,function(){s.controller.abort()})}var Xu=null,Yg=0,fc=0,mc=null;function m4(s,l){if(Xu===null){var u=Xu=[];Yg=0,fc=Qv(),mc={status:"pending",value:void 0,then:function(y){u.push(y)}}}return Yg++,l.then(RN,RN),l}function RN(){if(--Yg===0&&Xu!==null){mc!==null&&(mc.status="fulfilled");var s=Xu;Xu=null,fc=0,mc=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function h4(s,l){var u=[],y={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return s.then(function(){y.status="fulfilled",y.value=l;for(var b=0;b<u.length;b++)(0,u[b])(l)},function(b){for(y.status="rejected",y.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),y}var MN=$.S;$.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&m4(s,l),MN!==null&&MN(s,l)};var fl=q(null);function Xg(){var s=fl.current;return s!==null?s:En.pooledCache}function bm(s,l){l===null?V(fl,fl.current):V(fl,l.pool)}function IN(){var s=Xg();return s===null?null:{parent:ur._currentValue,pool:s}}var Qu=Error(r(460)),DN=Error(r(474)),_m=Error(r(542)),Qg={then:function(){}};function PN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function xm(){}function $N(s,l,u){switch(u=s[u],u===void 0?s.push(l):u!==l&&(l.then(xm,xm),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,BN(s),s;default:if(typeof l.status=="string")l.then(xm,xm);else{if(s=En,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(y){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=y}},function(y){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,BN(s),s}throw Zu=l,Qu}}var Zu=null;function LN(){if(Zu===null)throw Error(r(459));var s=Zu;return Zu=null,s}function BN(s){if(s===Qu||s===_m)throw Error(r(483))}var no=!1;function Zg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ro(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ao(s,l,u){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(hn&2)!==0){var b=y.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),y.pending=l,l=mm(s),NN(s,null,u),l}return fm(s,y,l,u),mm(s)}function Ju(s,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var y=l.lanes;y&=s.pendingLanes,u|=y,l.lanes=u,er(s,u)}}function ev(s,l){var u=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,u===y)){var b=null,N=null;if(u=u.firstBaseUpdate,u!==null){do{var D={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};N===null?b=N=D:N=N.next=D,u=u.next}while(u!==null);N===null?b=N=l:N=N.next=l}else b=N=l;u={baseState:y.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:y.shared,callbacks:y.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=l}var tv=!1;function ed(){if(tv){var s=mc;if(s!==null)throw s}}function td(s,l,u,y){tv=!1;var b=s.updateQueue;no=!1;var N=b.firstBaseUpdate,D=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var J=F,pe=J.next;J.next=null,D===null?N=pe:D.next=pe,D=J;var Me=s.alternate;Me!==null&&(Me=Me.updateQueue,F=Me.lastBaseUpdate,F!==D&&(F===null?Me.firstBaseUpdate=pe:F.next=pe,Me.lastBaseUpdate=J))}if(N!==null){var $e=b.baseState;D=0,Me=pe=J=null,F=N;do{var ge=F.lane&-536870913,be=ge!==F.lane;if(be?(tn&ge)===ge:(y&ge)===ge){ge!==0&&ge===fc&&(tv=!0),Me!==null&&(Me=Me.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Tt=s,Et=F;ge=l;var xn=u;switch(Et.tag){case 1:if(Tt=Et.payload,typeof Tt=="function"){$e=Tt.call(xn,$e,ge);break e}$e=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Et.payload,ge=typeof Tt=="function"?Tt.call(xn,$e,ge):Tt,ge==null)break e;$e=h({},$e,ge);break e;case 2:no=!0}}ge=F.callback,ge!==null&&(s.flags|=64,be&&(s.flags|=8192),be=b.callbacks,be===null?b.callbacks=[ge]:be.push(ge))}else be={lane:ge,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Me===null?(pe=Me=be,J=$e):Me=Me.next=be,D|=ge;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;be=F,F=be.next,be.next=null,b.lastBaseUpdate=be,b.shared.pending=null}}while(!0);Me===null&&(J=$e),b.baseState=J,b.firstBaseUpdate=pe,b.lastBaseUpdate=Me,N===null&&(b.shared.lanes=0),mo|=D,s.lanes=D,s.memoizedState=$e}}function UN(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function qN(s,l){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)UN(u[s],l)}var hc=q(null),Sm=q(0);function zN(s,l){s=vi,V(Sm,s),V(hc,l),vi=s|l.baseLanes}function nv(){V(Sm,vi),V(hc,hc.current)}function rv(){vi=Sm.current,z(hc),z(Sm)}var so=0,Ft=null,bn=null,rr=null,wm=!1,pc=!1,ml=!1,jm=0,nd=0,yc=null,p4=0;function Yn(){throw Error(r(321))}function av(s,l){if(l===null)return!1;for(var u=0;u<l.length&&u<s.length;u++)if(!ja(s[u],l[u]))return!1;return!0}function sv(s,l,u,y,b,N){return so=N,Ft=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=s===null||s.memoizedState===null?NA:AA,ml=!1,N=u(y,b),ml=!1,pc&&(N=HN(l,u,y,b)),FN(s),N}function FN(s){$.H=km;var l=bn!==null&&bn.next!==null;if(so=0,rr=bn=Ft=null,wm=!1,nd=0,yc=null,l)throw Error(r(300));s===null||yr||(s=s.dependencies,s!==null&&gm(s)&&(yr=!0))}function HN(s,l,u,y){Ft=s;var b=0;do{if(pc&&(yc=null),nd=0,pc=!1,25<=b)throw Error(r(301));if(b+=1,rr=bn=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}$.H=S4,N=l(u,y)}while(pc);return N}function y4(){var s=$.H,l=s.useState()[0];return l=typeof l.then=="function"?rd(l):l,s=s.useState()[0],(bn!==null?bn.memoizedState:null)!==s&&(Ft.flags|=1024),l}function iv(){var s=jm!==0;return jm=0,s}function ov(s,l,u){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~u}function lv(s){if(wm){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}wm=!1}so=0,rr=bn=Ft=null,pc=!1,nd=jm=0,yc=null}function oa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?Ft.memoizedState=rr=s:rr=rr.next=s,rr}function ar(){if(bn===null){var s=Ft.alternate;s=s!==null?s.memoizedState:null}else s=bn.next;var l=rr===null?Ft.memoizedState:rr.next;if(l!==null)rr=l,bn=s;else{if(s===null)throw Ft.alternate===null?Error(r(467)):Error(r(310));bn=s,s={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},rr===null?Ft.memoizedState=rr=s:rr=rr.next=s}return rr}function cv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rd(s){var l=nd;return nd+=1,yc===null&&(yc=[]),s=$N(yc,s,l),l=Ft,(rr===null?l.memoizedState:rr.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?NA:AA),s}function Nm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return rd(s);if(s.$$typeof===E)return $r(s)}throw Error(r(438,String(s)))}function uv(s){var l=null,u=Ft.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var y=Ft.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=cv(),Ft.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(s),y=0;y<s;y++)u[y]=H;return l.index++,u}function fi(s,l){return typeof l=="function"?l(s):l}function Am(s){var l=ar();return dv(l,bn,s)}function dv(s,l,u){var y=s.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var b=s.baseQueue,N=y.pending;if(N!==null){if(b!==null){var D=b.next;b.next=N.next,N.next=D}l.baseQueue=b=N,y.pending=null}if(N=s.baseState,b===null)s.memoizedState=N;else{l=b.next;var F=D=null,J=null,pe=l,Me=!1;do{var $e=pe.lane&-536870913;if($e!==pe.lane?(tn&$e)===$e:(so&$e)===$e){var ge=pe.revertLane;if(ge===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),$e===fc&&(Me=!0);else if((so&ge)===ge){pe=pe.next,ge===fc&&(Me=!0);continue}else $e={lane:0,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},J===null?(F=J=$e,D=N):J=J.next=$e,Ft.lanes|=ge,mo|=ge;$e=pe.action,ml&&u(N,$e),N=pe.hasEagerState?pe.eagerState:u(N,$e)}else ge={lane:$e,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},J===null?(F=J=ge,D=N):J=J.next=ge,Ft.lanes|=$e,mo|=$e;pe=pe.next}while(pe!==null&&pe!==l);if(J===null?D=N:J.next=F,!ja(N,s.memoizedState)&&(yr=!0,Me&&(u=mc,u!==null)))throw u;s.memoizedState=N,s.baseState=D,s.baseQueue=J,y.lastRenderedState=N}return b===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function fv(s){var l=ar(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var y=u.dispatch,b=u.pending,N=l.memoizedState;if(b!==null){u.pending=null;var D=b=b.next;do N=s(N,D.action),D=D.next;while(D!==b);ja(N,l.memoizedState)||(yr=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),u.lastRenderedState=N}return[N,y]}function VN(s,l,u){var y=Ft,b=ar(),N=cn;if(N){if(u===void 0)throw Error(r(407));u=u()}else u=l();var D=!ja((bn||b).memoizedState,u);D&&(b.memoizedState=u,yr=!0),b=b.queue;var F=WN.bind(null,y,b,s);if(ad(2048,8,F,[s]),b.getSnapshot!==l||D||rr!==null&&rr.memoizedState.tag&1){if(y.flags|=2048,gc(9,Em(),GN.bind(null,y,b,u,l),null),En===null)throw Error(r(349));N||(so&124)!==0||KN(y,l,u)}return u}function KN(s,l,u){s.flags|=16384,s={getSnapshot:l,value:u},l=Ft.updateQueue,l===null?(l=cv(),Ft.updateQueue=l,l.stores=[s]):(u=l.stores,u===null?l.stores=[s]:u.push(s))}function GN(s,l,u,y){l.value=u,l.getSnapshot=y,YN(l)&&XN(s)}function WN(s,l,u){return u(function(){YN(l)&&XN(s)})}function YN(s){var l=s.getSnapshot;s=s.value;try{var u=l();return!ja(s,u)}catch{return!0}}function XN(s){var l=lc(s,2);l!==null&&ka(l,s,2)}function mv(s){var l=oa();if(typeof s=="function"){var u=s;if(s=u(),ml){Oe(!0);try{u()}finally{Oe(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:s},l}function QN(s,l,u,y){return s.baseState=u,dv(s,bn,typeof y=="function"?y:fi)}function g4(s,l,u,y,b){if(Tm(s))throw Error(r(485));if(s=l.action,s!==null){var N={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){N.listeners.push(D)}};$.T!==null?u(!0):N.isTransition=!1,y(N),u=l.pending,u===null?(N.next=l.pending=N,ZN(l,N)):(N.next=u.next,l.pending=u.next=N)}}function ZN(s,l){var u=l.action,y=l.payload,b=s.state;if(l.isTransition){var N=$.T,D={};$.T=D;try{var F=u(b,y),J=$.S;J!==null&&J(D,F),JN(s,l,F)}catch(pe){hv(s,l,pe)}finally{$.T=N}}else try{N=u(b,y),JN(s,l,N)}catch(pe){hv(s,l,pe)}}function JN(s,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(y){eA(s,l,y)},function(y){return hv(s,l,y)}):eA(s,l,u)}function eA(s,l,u){l.status="fulfilled",l.value=u,tA(l),s.state=u,l=s.pending,l!==null&&(u=l.next,u===l?s.pending=null:(u=u.next,l.next=u,ZN(s,u)))}function hv(s,l,u){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=u,tA(l),l=l.next;while(l!==y)}s.action=null}function tA(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function nA(s,l){return l}function rA(s,l){if(cn){var u=En.formState;if(u!==null){e:{var y=Ft;if(cn){if(Hn){t:{for(var b=Hn,N=qs;b.nodeType!==8;){if(!N){b=null;break t}if(b=As(b.nextSibling),b===null){b=null;break t}}N=b.data,b=N==="F!"||N==="F"?b:null}if(b){Hn=As(b.nextSibling),y=b.data==="F!";break e}}cl(y)}y=!1}y&&(l=u[0])}}return u=oa(),u.memoizedState=u.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nA,lastRenderedState:l},u.queue=y,u=SA.bind(null,Ft,y),y.dispatch=u,y=mv(!1),N=bv.bind(null,Ft,!1,y.queue),y=oa(),b={state:l,dispatch:null,action:s,pending:null},y.queue=b,u=g4.bind(null,Ft,b,N,u),b.dispatch=u,y.memoizedState=s,[l,u,!1]}function aA(s){var l=ar();return sA(l,bn,s)}function sA(s,l,u){if(l=dv(s,l,nA)[0],s=Am(fi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var y=rd(l)}catch(D){throw D===Qu?_m:D}else y=l;l=ar();var b=l.queue,N=b.dispatch;return u!==l.memoizedState&&(Ft.flags|=2048,gc(9,Em(),v4.bind(null,b,u),null)),[y,N,s]}function v4(s,l){s.action=l}function iA(s){var l=ar(),u=bn;if(u!==null)return sA(l,u,s);ar(),l=l.memoizedState,u=ar();var y=u.queue.dispatch;return u.memoizedState=s,[l,y,!1]}function gc(s,l,u,y){return s={tag:s,create:u,deps:y,inst:l,next:null},l=Ft.updateQueue,l===null&&(l=cv(),Ft.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=s.next=s:(y=u.next,u.next=s,s.next=y,l.lastEffect=s),s}function Em(){return{destroy:void 0,resource:void 0}}function oA(){return ar().memoizedState}function Cm(s,l,u,y){var b=oa();y=y===void 0?null:y,Ft.flags|=s,b.memoizedState=gc(1|l,Em(),u,y)}function ad(s,l,u,y){var b=ar();y=y===void 0?null:y;var N=b.memoizedState.inst;bn!==null&&y!==null&&av(y,bn.memoizedState.deps)?b.memoizedState=gc(l,N,u,y):(Ft.flags|=s,b.memoizedState=gc(1|l,N,u,y))}function lA(s,l){Cm(8390656,8,s,l)}function cA(s,l){ad(2048,8,s,l)}function uA(s,l){return ad(4,2,s,l)}function dA(s,l){return ad(4,4,s,l)}function fA(s,l){if(typeof l=="function"){s=s();var u=l(s);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function mA(s,l,u){u=u!=null?u.concat([s]):null,ad(4,4,fA.bind(null,l,s),u)}function pv(){}function hA(s,l){var u=ar();l=l===void 0?null:l;var y=u.memoizedState;return l!==null&&av(l,y[1])?y[0]:(u.memoizedState=[s,l],s)}function pA(s,l){var u=ar();l=l===void 0?null:l;var y=u.memoizedState;if(l!==null&&av(l,y[1]))return y[0];if(y=s(),ml){Oe(!0);try{s()}finally{Oe(!1)}}return u.memoizedState=[y,l],y}function yv(s,l,u){return u===void 0||(so&1073741824)!==0?s.memoizedState=l:(s.memoizedState=u,s=vE(),Ft.lanes|=s,mo|=s,u)}function yA(s,l,u,y){return ja(u,l)?u:hc.current!==null?(s=yv(s,u,y),ja(s,l)||(yr=!0),s):(so&42)===0?(yr=!0,s.memoizedState=u):(s=vE(),Ft.lanes|=s,mo|=s,l)}function gA(s,l,u,y,b){var N=G.p;G.p=N!==0&&8>N?N:8;var D=$.T,F={};$.T=F,bv(s,!1,l,u);try{var J=b(),pe=$.S;if(pe!==null&&pe(F,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Me=h4(J,y);sd(s,l,Me,Ta(s))}else sd(s,l,y,Ta(s))}catch($e){sd(s,l,{then:function(){},status:"rejected",reason:$e},Ta())}finally{G.p=N,$.T=D}}function b4(){}function gv(s,l,u,y){if(s.tag!==5)throw Error(r(476));var b=vA(s).queue;gA(s,b,l,te,u===null?b4:function(){return bA(s),u(y)})}function vA(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:te},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:u},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function bA(s){var l=vA(s).next.queue;sd(s,l,{},Ta())}function vv(){return $r(wd)}function _A(){return ar().memoizedState}function xA(){return ar().memoizedState}function _4(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var u=Ta();s=ro(u);var y=ao(l,s,u);y!==null&&(ka(y,l,u),Ju(y,l,u)),l={cache:Wg()},s.payload=l;return}l=l.return}}function x4(s,l,u){var y=Ta();u={lane:y,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Tm(s)?wA(l,u):(u=Lg(s,l,u,y),u!==null&&(ka(u,s,y),jA(u,l,y)))}function SA(s,l,u){var y=Ta();sd(s,l,u,y)}function sd(s,l,u,y){var b={lane:y,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Tm(s))wA(l,b);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var D=l.lastRenderedState,F=N(D,u);if(b.hasEagerState=!0,b.eagerState=F,ja(F,D))return fm(s,l,b,0),En===null&&dm(),!1}catch{}if(u=Lg(s,l,b,y),u!==null)return ka(u,s,y),jA(u,l,y),!0}return!1}function bv(s,l,u,y){if(y={lane:2,revertLane:Qv(),action:y,hasEagerState:!1,eagerState:null,next:null},Tm(s)){if(l)throw Error(r(479))}else l=Lg(s,u,y,2),l!==null&&ka(l,s,2)}function Tm(s){var l=s.alternate;return s===Ft||l!==null&&l===Ft}function wA(s,l){pc=wm=!0;var u=s.pending;u===null?l.next=l:(l.next=u.next,u.next=l),s.pending=l}function jA(s,l,u){if((u&4194048)!==0){var y=l.lanes;y&=s.pendingLanes,u|=y,l.lanes=u,er(s,u)}}var km={readContext:$r,use:Nm,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn},NA={readContext:$r,use:Nm,useCallback:function(s,l){return oa().memoizedState=[s,l===void 0?null:l],s},useContext:$r,useEffect:lA,useImperativeHandle:function(s,l,u){u=u!=null?u.concat([s]):null,Cm(4194308,4,fA.bind(null,l,s),u)},useLayoutEffect:function(s,l){return Cm(4194308,4,s,l)},useInsertionEffect:function(s,l){Cm(4,2,s,l)},useMemo:function(s,l){var u=oa();l=l===void 0?null:l;var y=s();if(ml){Oe(!0);try{s()}finally{Oe(!1)}}return u.memoizedState=[y,l],y},useReducer:function(s,l,u){var y=oa();if(u!==void 0){var b=u(l);if(ml){Oe(!0);try{u(l)}finally{Oe(!1)}}}else b=l;return y.memoizedState=y.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},y.queue=s,s=s.dispatch=x4.bind(null,Ft,s),[y.memoizedState,s]},useRef:function(s){var l=oa();return s={current:s},l.memoizedState=s},useState:function(s){s=mv(s);var l=s.queue,u=SA.bind(null,Ft,l);return l.dispatch=u,[s.memoizedState,u]},useDebugValue:pv,useDeferredValue:function(s,l){var u=oa();return yv(u,s,l)},useTransition:function(){var s=mv(!1);return s=gA.bind(null,Ft,s.queue,!0,!1),oa().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,u){var y=Ft,b=oa();if(cn){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),En===null)throw Error(r(349));(tn&124)!==0||KN(y,l,u)}b.memoizedState=u;var N={value:u,getSnapshot:l};return b.queue=N,lA(WN.bind(null,y,N,s),[s]),y.flags|=2048,gc(9,Em(),GN.bind(null,y,N,u,l),null),u},useId:function(){var s=oa(),l=En.identifierPrefix;if(cn){var u=ci,y=li;u=(y&~(1<<32-Le(y)-1)).toString(32)+u,l=""+l+"R"+u,u=jm++,0<u&&(l+="H"+u.toString(32)),l+=""}else u=p4++,l=""+l+"r"+u.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:vv,useFormState:rA,useActionState:rA,useOptimistic:function(s){var l=oa();l.memoizedState=l.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=bv.bind(null,Ft,!0,u),u.dispatch=l,[s,l]},useMemoCache:uv,useCacheRefresh:function(){return oa().memoizedState=_4.bind(null,Ft)}},AA={readContext:$r,use:Nm,useCallback:hA,useContext:$r,useEffect:cA,useImperativeHandle:mA,useInsertionEffect:uA,useLayoutEffect:dA,useMemo:pA,useReducer:Am,useRef:oA,useState:function(){return Am(fi)},useDebugValue:pv,useDeferredValue:function(s,l){var u=ar();return yA(u,bn.memoizedState,s,l)},useTransition:function(){var s=Am(fi)[0],l=ar().memoizedState;return[typeof s=="boolean"?s:rd(s),l]},useSyncExternalStore:VN,useId:_A,useHostTransitionStatus:vv,useFormState:aA,useActionState:aA,useOptimistic:function(s,l){var u=ar();return QN(u,bn,s,l)},useMemoCache:uv,useCacheRefresh:xA},S4={readContext:$r,use:Nm,useCallback:hA,useContext:$r,useEffect:cA,useImperativeHandle:mA,useInsertionEffect:uA,useLayoutEffect:dA,useMemo:pA,useReducer:fv,useRef:oA,useState:function(){return fv(fi)},useDebugValue:pv,useDeferredValue:function(s,l){var u=ar();return bn===null?yv(u,s,l):yA(u,bn.memoizedState,s,l)},useTransition:function(){var s=fv(fi)[0],l=ar().memoizedState;return[typeof s=="boolean"?s:rd(s),l]},useSyncExternalStore:VN,useId:_A,useHostTransitionStatus:vv,useFormState:iA,useActionState:iA,useOptimistic:function(s,l){var u=ar();return bn!==null?QN(u,bn,s,l):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:uv,useCacheRefresh:xA},vc=null,id=0;function Om(s){var l=id;return id+=1,vc===null&&(vc=[]),$N(vc,s,l)}function od(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Rm(s,l){throw l.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function EA(s){var l=s._init;return l(s._payload)}function CA(s){function l(ce,ae){if(s){var me=ce.deletions;me===null?(ce.deletions=[ae],ce.flags|=16):me.push(ae)}}function u(ce,ae){if(!s)return null;for(;ae!==null;)l(ce,ae),ae=ae.sibling;return null}function y(ce){for(var ae=new Map;ce!==null;)ce.key!==null?ae.set(ce.key,ce):ae.set(ce.index,ce),ce=ce.sibling;return ae}function b(ce,ae){return ce=oi(ce,ae),ce.index=0,ce.sibling=null,ce}function N(ce,ae,me){return ce.index=me,s?(me=ce.alternate,me!==null?(me=me.index,me<ae?(ce.flags|=67108866,ae):me):(ce.flags|=67108866,ae)):(ce.flags|=1048576,ae)}function D(ce){return s&&ce.alternate===null&&(ce.flags|=67108866),ce}function F(ce,ae,me,Pe){return ae===null||ae.tag!==6?(ae=Ug(me,ce.mode,Pe),ae.return=ce,ae):(ae=b(ae,me),ae.return=ce,ae)}function J(ce,ae,me,Pe){var ut=me.type;return ut===w?Me(ce,ae,me.props.children,Pe,me.key):ae!==null&&(ae.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===k&&EA(ut)===ae.type)?(ae=b(ae,me.props),od(ae,me),ae.return=ce,ae):(ae=hm(me.type,me.key,me.props,null,ce.mode,Pe),od(ae,me),ae.return=ce,ae)}function pe(ce,ae,me,Pe){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==me.containerInfo||ae.stateNode.implementation!==me.implementation?(ae=qg(me,ce.mode,Pe),ae.return=ce,ae):(ae=b(ae,me.children||[]),ae.return=ce,ae)}function Me(ce,ae,me,Pe,ut){return ae===null||ae.tag!==7?(ae=sl(me,ce.mode,Pe,ut),ae.return=ce,ae):(ae=b(ae,me),ae.return=ce,ae)}function $e(ce,ae,me){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=Ug(""+ae,ce.mode,me),ae.return=ce,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return me=hm(ae.type,ae.key,ae.props,null,ce.mode,me),od(me,ae),me.return=ce,me;case x:return ae=qg(ae,ce.mode,me),ae.return=ce,ae;case k:var Pe=ae._init;return ae=Pe(ae._payload),$e(ce,ae,me)}if(L(ae)||B(ae))return ae=sl(ae,ce.mode,me,null),ae.return=ce,ae;if(typeof ae.then=="function")return $e(ce,Om(ae),me);if(ae.$$typeof===E)return $e(ce,vm(ce,ae),me);Rm(ce,ae)}return null}function ge(ce,ae,me,Pe){var ut=ae!==null?ae.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ut!==null?null:F(ce,ae,""+me,Pe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case v:return me.key===ut?J(ce,ae,me,Pe):null;case x:return me.key===ut?pe(ce,ae,me,Pe):null;case k:return ut=me._init,me=ut(me._payload),ge(ce,ae,me,Pe)}if(L(me)||B(me))return ut!==null?null:Me(ce,ae,me,Pe,null);if(typeof me.then=="function")return ge(ce,ae,Om(me),Pe);if(me.$$typeof===E)return ge(ce,ae,vm(ce,me),Pe);Rm(ce,me)}return null}function be(ce,ae,me,Pe,ut){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return ce=ce.get(me)||null,F(ae,ce,""+Pe,ut);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case v:return ce=ce.get(Pe.key===null?me:Pe.key)||null,J(ae,ce,Pe,ut);case x:return ce=ce.get(Pe.key===null?me:Pe.key)||null,pe(ae,ce,Pe,ut);case k:var Kt=Pe._init;return Pe=Kt(Pe._payload),be(ce,ae,me,Pe,ut)}if(L(Pe)||B(Pe))return ce=ce.get(me)||null,Me(ae,ce,Pe,ut,null);if(typeof Pe.then=="function")return be(ce,ae,me,Om(Pe),ut);if(Pe.$$typeof===E)return be(ce,ae,me,vm(ae,Pe),ut);Rm(ae,Pe)}return null}function Tt(ce,ae,me,Pe){for(var ut=null,Kt=null,gt=ae,Ct=ae=0,vr=null;gt!==null&&Ct<me.length;Ct++){gt.index>Ct?(vr=gt,gt=null):vr=gt.sibling;var sn=ge(ce,gt,me[Ct],Pe);if(sn===null){gt===null&&(gt=vr);break}s&&gt&&sn.alternate===null&&l(ce,gt),ae=N(sn,ae,Ct),Kt===null?ut=sn:Kt.sibling=sn,Kt=sn,gt=vr}if(Ct===me.length)return u(ce,gt),cn&&ol(ce,Ct),ut;if(gt===null){for(;Ct<me.length;Ct++)gt=$e(ce,me[Ct],Pe),gt!==null&&(ae=N(gt,ae,Ct),Kt===null?ut=gt:Kt.sibling=gt,Kt=gt);return cn&&ol(ce,Ct),ut}for(gt=y(gt);Ct<me.length;Ct++)vr=be(gt,ce,Ct,me[Ct],Pe),vr!==null&&(s&&vr.alternate!==null&&gt.delete(vr.key===null?Ct:vr.key),ae=N(vr,ae,Ct),Kt===null?ut=vr:Kt.sibling=vr,Kt=vr);return s&&gt.forEach(function(So){return l(ce,So)}),cn&&ol(ce,Ct),ut}function Et(ce,ae,me,Pe){if(me==null)throw Error(r(151));for(var ut=null,Kt=null,gt=ae,Ct=ae=0,vr=null,sn=me.next();gt!==null&&!sn.done;Ct++,sn=me.next()){gt.index>Ct?(vr=gt,gt=null):vr=gt.sibling;var So=ge(ce,gt,sn.value,Pe);if(So===null){gt===null&&(gt=vr);break}s&&gt&&So.alternate===null&&l(ce,gt),ae=N(So,ae,Ct),Kt===null?ut=So:Kt.sibling=So,Kt=So,gt=vr}if(sn.done)return u(ce,gt),cn&&ol(ce,Ct),ut;if(gt===null){for(;!sn.done;Ct++,sn=me.next())sn=$e(ce,sn.value,Pe),sn!==null&&(ae=N(sn,ae,Ct),Kt===null?ut=sn:Kt.sibling=sn,Kt=sn);return cn&&ol(ce,Ct),ut}for(gt=y(gt);!sn.done;Ct++,sn=me.next())sn=be(gt,ce,Ct,sn.value,Pe),sn!==null&&(s&&sn.alternate!==null&&gt.delete(sn.key===null?Ct:sn.key),ae=N(sn,ae,Ct),Kt===null?ut=sn:Kt.sibling=sn,Kt=sn);return s&&gt.forEach(function(wU){return l(ce,wU)}),cn&&ol(ce,Ct),ut}function xn(ce,ae,me,Pe){if(typeof me=="object"&&me!==null&&me.type===w&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case v:e:{for(var ut=me.key;ae!==null;){if(ae.key===ut){if(ut=me.type,ut===w){if(ae.tag===7){u(ce,ae.sibling),Pe=b(ae,me.props.children),Pe.return=ce,ce=Pe;break e}}else if(ae.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===k&&EA(ut)===ae.type){u(ce,ae.sibling),Pe=b(ae,me.props),od(Pe,me),Pe.return=ce,ce=Pe;break e}u(ce,ae);break}else l(ce,ae);ae=ae.sibling}me.type===w?(Pe=sl(me.props.children,ce.mode,Pe,me.key),Pe.return=ce,ce=Pe):(Pe=hm(me.type,me.key,me.props,null,ce.mode,Pe),od(Pe,me),Pe.return=ce,ce=Pe)}return D(ce);case x:e:{for(ut=me.key;ae!==null;){if(ae.key===ut)if(ae.tag===4&&ae.stateNode.containerInfo===me.containerInfo&&ae.stateNode.implementation===me.implementation){u(ce,ae.sibling),Pe=b(ae,me.children||[]),Pe.return=ce,ce=Pe;break e}else{u(ce,ae);break}else l(ce,ae);ae=ae.sibling}Pe=qg(me,ce.mode,Pe),Pe.return=ce,ce=Pe}return D(ce);case k:return ut=me._init,me=ut(me._payload),xn(ce,ae,me,Pe)}if(L(me))return Tt(ce,ae,me,Pe);if(B(me)){if(ut=B(me),typeof ut!="function")throw Error(r(150));return me=ut.call(me),Et(ce,ae,me,Pe)}if(typeof me.then=="function")return xn(ce,ae,Om(me),Pe);if(me.$$typeof===E)return xn(ce,ae,vm(ce,me),Pe);Rm(ce,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ae!==null&&ae.tag===6?(u(ce,ae.sibling),Pe=b(ae,me),Pe.return=ce,ce=Pe):(u(ce,ae),Pe=Ug(me,ce.mode,Pe),Pe.return=ce,ce=Pe),D(ce)):u(ce,ae)}return function(ce,ae,me,Pe){try{id=0;var ut=xn(ce,ae,me,Pe);return vc=null,ut}catch(gt){if(gt===Qu||gt===_m)throw gt;var Kt=Na(29,gt,null,ce.mode);return Kt.lanes=Pe,Kt.return=ce,Kt}}}var bc=CA(!0),TA=CA(!1),Wa=q(null),zs=null;function io(s){var l=s.alternate;V(dr,dr.current&1),V(Wa,s),zs===null&&(l===null||hc.current!==null||l.memoizedState!==null)&&(zs=s)}function kA(s){if(s.tag===22){if(V(dr,dr.current),V(Wa,s),zs===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(zs=s)}}else oo()}function oo(){V(dr,dr.current),V(Wa,Wa.current)}function mi(s){z(Wa),zs===s&&(zs=null),z(dr)}var dr=q(0);function Mm(s){for(var l=s;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||cb(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function _v(s,l,u,y){l=s.memoizedState,u=u(y,l),u=u==null?l:h({},l,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var xv={enqueueSetState:function(s,l,u){s=s._reactInternals;var y=Ta(),b=ro(y);b.payload=l,u!=null&&(b.callback=u),l=ao(s,b,y),l!==null&&(ka(l,s,y),Ju(l,s,y))},enqueueReplaceState:function(s,l,u){s=s._reactInternals;var y=Ta(),b=ro(y);b.tag=1,b.payload=l,u!=null&&(b.callback=u),l=ao(s,b,y),l!==null&&(ka(l,s,y),Ju(l,s,y))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var u=Ta(),y=ro(u);y.tag=2,l!=null&&(y.callback=l),l=ao(s,y,u),l!==null&&(ka(l,s,u),Ju(l,s,u))}};function OA(s,l,u,y,b,N,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,N,D):l.prototype&&l.prototype.isPureReactComponent?!Fu(u,y)||!Fu(b,N):!0}function RA(s,l,u,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,y),l.state!==s&&xv.enqueueReplaceState(l,l.state,null)}function hl(s,l){var u=l;if("ref"in l){u={};for(var y in l)y!=="ref"&&(u[y]=l[y])}if(s=s.defaultProps){u===l&&(u=h({},u));for(var b in s)u[b]===void 0&&(u[b]=s[b])}return u}var Im=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function MA(s){Im(s)}function IA(s){console.error(s)}function DA(s){Im(s)}function Dm(s,l){try{var u=s.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function PA(s,l,u){try{var y=s.onCaughtError;y(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Sv(s,l,u){return u=ro(u),u.tag=3,u.payload={element:null},u.callback=function(){Dm(s,l)},u}function $A(s){return s=ro(s),s.tag=3,s}function LA(s,l,u,y){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var N=y.value;s.payload=function(){return b(N)},s.callback=function(){PA(l,u,y)}}var D=u.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){PA(l,u,y),typeof b!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var F=y.stack;this.componentDidCatch(y.value,{componentStack:F!==null?F:""})})}function w4(s,l,u,y,b){if(u.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=u.alternate,l!==null&&Wu(l,u,b,!0),u=Wa.current,u!==null){switch(u.tag){case 13:return zs===null?Kv():u.alternate===null&&Vn===0&&(Vn=3),u.flags&=-257,u.flags|=65536,u.lanes=b,y===Qg?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([y]):l.add(y),Wv(s,y,b)),!1;case 22:return u.flags|=65536,y===Qg?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([y]):u.add(y)),Wv(s,y,b)),!1}throw Error(r(435,u.tag))}return Wv(s,y,b),Kv(),!1}if(cn)return l=Wa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,y!==Hg&&(s=Error(r(422),{cause:y}),Gu(Ha(s,u)))):(y!==Hg&&(l=Error(r(423),{cause:y}),Gu(Ha(l,u))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,y=Ha(y,u),b=Sv(s.stateNode,y,b),ev(s,b),Vn!==4&&(Vn=2)),!1;var N=Error(r(520),{cause:y});if(N=Ha(N,u),hd===null?hd=[N]:hd.push(N),Vn!==4&&(Vn=2),l===null)return!0;y=Ha(y,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,s=b&-b,u.lanes|=s,s=Sv(u.stateNode,y,s),ev(u,s),!1;case 1:if(l=u.type,N=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ho===null||!ho.has(N))))return u.flags|=65536,b&=-b,u.lanes|=b,b=$A(b),LA(b,s,u,y),ev(u,b),!1}u=u.return}while(u!==null);return!1}var BA=Error(r(461)),yr=!1;function Nr(s,l,u,y){l.child=s===null?TA(l,null,u,y):bc(l,s.child,u,y)}function UA(s,l,u,y,b){u=u.render;var N=l.ref;if("ref"in y){var D={};for(var F in y)F!=="ref"&&(D[F]=y[F])}else D=y;return dl(l),y=sv(s,l,u,D,N,b),F=iv(),s!==null&&!yr?(ov(s,l,b),hi(s,l,b)):(cn&&F&&zg(l),l.flags|=1,Nr(s,l,y,b),l.child)}function qA(s,l,u,y,b){if(s===null){var N=u.type;return typeof N=="function"&&!Bg(N)&&N.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=N,zA(s,l,N,y,b)):(s=hm(u.type,null,y,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(N=s.child,!kv(s,b)){var D=N.memoizedProps;if(u=u.compare,u=u!==null?u:Fu,u(D,y)&&s.ref===l.ref)return hi(s,l,b)}return l.flags|=1,s=oi(N,y),s.ref=l.ref,s.return=l,l.child=s}function zA(s,l,u,y,b){if(s!==null){var N=s.memoizedProps;if(Fu(N,y)&&s.ref===l.ref)if(yr=!1,l.pendingProps=y=N,kv(s,b))(s.flags&131072)!==0&&(yr=!0);else return l.lanes=s.lanes,hi(s,l,b)}return wv(s,l,u,y,b)}function FA(s,l,u){var y=l.pendingProps,b=y.children,N=s!==null?s.memoizedState:null;if(y.mode==="hidden"){if((l.flags&128)!==0){if(y=N!==null?N.baseLanes|u:u,s!==null){for(b=l.child=s.child,N=0;b!==null;)N=N|b.lanes|b.childLanes,b=b.sibling;l.childLanes=N&~y}else l.childLanes=0,l.child=null;return HA(s,l,y,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&bm(l,N!==null?N.cachePool:null),N!==null?zN(l,N):nv(),kA(l);else return l.lanes=l.childLanes=536870912,HA(s,l,N!==null?N.baseLanes|u:u,u)}else N!==null?(bm(l,N.cachePool),zN(l,N),oo(),l.memoizedState=null):(s!==null&&bm(l,null),nv(),oo());return Nr(s,l,b,u),l.child}function HA(s,l,u,y){var b=Xg();return b=b===null?null:{parent:ur._currentValue,pool:b},l.memoizedState={baseLanes:u,cachePool:b},s!==null&&bm(l,null),nv(),kA(l),s!==null&&Wu(s,l,y,!0),null}function Pm(s,l){var u=l.ref;if(u===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(l.flags|=4194816)}}function wv(s,l,u,y,b){return dl(l),u=sv(s,l,u,y,void 0,b),y=iv(),s!==null&&!yr?(ov(s,l,b),hi(s,l,b)):(cn&&y&&zg(l),l.flags|=1,Nr(s,l,u,b),l.child)}function VA(s,l,u,y,b,N){return dl(l),l.updateQueue=null,u=HN(l,y,u,b),FN(s),y=iv(),s!==null&&!yr?(ov(s,l,N),hi(s,l,N)):(cn&&y&&zg(l),l.flags|=1,Nr(s,l,u,N),l.child)}function KA(s,l,u,y,b){if(dl(l),l.stateNode===null){var N=cc,D=u.contextType;typeof D=="object"&&D!==null&&(N=$r(D)),N=new u(y,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=xv,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=y,N.state=l.memoizedState,N.refs={},Zg(l),D=u.contextType,N.context=typeof D=="object"&&D!==null?$r(D):cc,N.state=l.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(_v(l,u,D,y),N.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(D=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),D!==N.state&&xv.enqueueReplaceState(N,N.state,null),td(l,y,N,b),ed(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(s===null){N=l.stateNode;var F=l.memoizedProps,J=hl(u,F);N.props=J;var pe=N.context,Me=u.contextType;D=cc,typeof Me=="object"&&Me!==null&&(D=$r(Me));var $e=u.getDerivedStateFromProps;Me=typeof $e=="function"||typeof N.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,Me||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(F||pe!==D)&&RA(l,N,y,D),no=!1;var ge=l.memoizedState;N.state=ge,td(l,y,N,b),ed(),pe=l.memoizedState,F||ge!==pe||no?(typeof $e=="function"&&(_v(l,u,$e,y),pe=l.memoizedState),(J=no||OA(l,u,J,y,ge,pe,D))?(Me||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=pe),N.props=y,N.state=pe,N.context=D,y=J):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{N=l.stateNode,Jg(s,l),D=l.memoizedProps,Me=hl(u,D),N.props=Me,$e=l.pendingProps,ge=N.context,pe=u.contextType,J=cc,typeof pe=="object"&&pe!==null&&(J=$r(pe)),F=u.getDerivedStateFromProps,(pe=typeof F=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(D!==$e||ge!==J)&&RA(l,N,y,J),no=!1,ge=l.memoizedState,N.state=ge,td(l,y,N,b),ed();var be=l.memoizedState;D!==$e||ge!==be||no||s!==null&&s.dependencies!==null&&gm(s.dependencies)?(typeof F=="function"&&(_v(l,u,F,y),be=l.memoizedState),(Me=no||OA(l,u,Me,y,ge,be,J)||s!==null&&s.dependencies!==null&&gm(s.dependencies))?(pe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(y,be,J),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(y,be,J)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||D===s.memoizedProps&&ge===s.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ge===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=be),N.props=y,N.state=be,N.context=J,y=Me):(typeof N.componentDidUpdate!="function"||D===s.memoizedProps&&ge===s.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ge===s.memoizedState||(l.flags|=1024),y=!1)}return N=y,Pm(s,l),y=(l.flags&128)!==0,N||y?(N=l.stateNode,u=y&&typeof u.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,s!==null&&y?(l.child=bc(l,s.child,null,b),l.child=bc(l,null,u,b)):Nr(s,l,u,b),l.memoizedState=N.state,s=l.child):s=hi(s,l,b),s}function GA(s,l,u,y){return Ku(),l.flags|=256,Nr(s,l,u,y),l.child}var jv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nv(s){return{baseLanes:s,cachePool:IN()}}function Av(s,l,u){return s=s!==null?s.childLanes&~u:0,l&&(s|=Ya),s}function WA(s,l,u){var y=l.pendingProps,b=!1,N=(l.flags&128)!==0,D;if((D=N)||(D=s!==null&&s.memoizedState===null?!1:(dr.current&2)!==0),D&&(b=!0,l.flags&=-129),D=(l.flags&32)!==0,l.flags&=-33,s===null){if(cn){if(b?io(l):oo(),cn){var F=Hn,J;if(J=F){e:{for(J=F,F=qs;J.nodeType!==8;){if(!F){F=null;break e}if(J=As(J.nextSibling),J===null){F=null;break e}}F=J}F!==null?(l.memoizedState={dehydrated:F,treeContext:il!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},J=Na(18,null,null,0),J.stateNode=F,J.return=l,l.child=J,Zr=l,Hn=null,J=!0):J=!1}J||cl(l)}if(F=l.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return cb(F)?l.lanes=32:l.lanes=536870912,null;mi(l)}return F=y.children,y=y.fallback,b?(oo(),b=l.mode,F=$m({mode:"hidden",children:F},b),y=sl(y,b,u,null),F.return=l,y.return=l,F.sibling=y,l.child=F,b=l.child,b.memoizedState=Nv(u),b.childLanes=Av(s,D,u),l.memoizedState=jv,y):(io(l),Ev(l,F))}if(J=s.memoizedState,J!==null&&(F=J.dehydrated,F!==null)){if(N)l.flags&256?(io(l),l.flags&=-257,l=Cv(s,l,u)):l.memoizedState!==null?(oo(),l.child=s.child,l.flags|=128,l=null):(oo(),b=y.fallback,F=l.mode,y=$m({mode:"visible",children:y.children},F),b=sl(b,F,u,null),b.flags|=2,y.return=l,b.return=l,y.sibling=b,l.child=y,bc(l,s.child,null,u),y=l.child,y.memoizedState=Nv(u),y.childLanes=Av(s,D,u),l.memoizedState=jv,l=b);else if(io(l),cb(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var pe=D.dgst;D=pe,y=Error(r(419)),y.stack="",y.digest=D,Gu({value:y,source:null,stack:null}),l=Cv(s,l,u)}else if(yr||Wu(s,l,u,!1),D=(u&s.childLanes)!==0,yr||D){if(D=En,D!==null&&(y=u&-u,y=(y&42)!==0?1:rn(y),y=(y&(D.suspendedLanes|u))!==0?0:y,y!==0&&y!==J.retryLane))throw J.retryLane=y,lc(s,y),ka(D,s,y),BA;F.data==="$?"||Kv(),l=Cv(s,l,u)}else F.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=J.treeContext,Hn=As(F.nextSibling),Zr=l,cn=!0,ll=null,qs=!1,s!==null&&(Ka[Ga++]=li,Ka[Ga++]=ci,Ka[Ga++]=il,li=s.id,ci=s.overflow,il=l),l=Ev(l,y.children),l.flags|=4096);return l}return b?(oo(),b=y.fallback,F=l.mode,J=s.child,pe=J.sibling,y=oi(J,{mode:"hidden",children:y.children}),y.subtreeFlags=J.subtreeFlags&65011712,pe!==null?b=oi(pe,b):(b=sl(b,F,u,null),b.flags|=2),b.return=l,y.return=l,y.sibling=b,l.child=y,y=b,b=l.child,F=s.child.memoizedState,F===null?F=Nv(u):(J=F.cachePool,J!==null?(pe=ur._currentValue,J=J.parent!==pe?{parent:pe,pool:pe}:J):J=IN(),F={baseLanes:F.baseLanes|u,cachePool:J}),b.memoizedState=F,b.childLanes=Av(s,D,u),l.memoizedState=jv,y):(io(l),u=s.child,s=u.sibling,u=oi(u,{mode:"visible",children:y.children}),u.return=l,u.sibling=null,s!==null&&(D=l.deletions,D===null?(l.deletions=[s],l.flags|=16):D.push(s)),l.child=u,l.memoizedState=null,u)}function Ev(s,l){return l=$m({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function $m(s,l){return s=Na(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Cv(s,l,u){return bc(l,s.child,null,u),s=Ev(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function YA(s,l,u){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Kg(s.return,l,u)}function Tv(s,l,u,y,b){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:u,tailMode:b}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=u,N.tailMode=b)}function XA(s,l,u){var y=l.pendingProps,b=y.revealOrder,N=y.tail;if(Nr(s,l,y.children,u),y=dr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&YA(s,u,l);else if(s.tag===19)YA(s,u,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(V(dr,y),b){case"forwards":for(u=l.child,b=null;u!==null;)s=u.alternate,s!==null&&Mm(s)===null&&(b=u),u=u.sibling;u=b,u===null?(b=l.child,l.child=null):(b=u.sibling,u.sibling=null),Tv(l,!1,b,u,N);break;case"backwards":for(u=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&Mm(s)===null){l.child=b;break}s=b.sibling,b.sibling=u,u=b,b=s}Tv(l,!0,u,null,N);break;case"together":Tv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function hi(s,l,u){if(s!==null&&(l.dependencies=s.dependencies),mo|=l.lanes,(u&l.childLanes)===0)if(s!==null){if(Wu(s,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,u=oi(s,s.pendingProps),l.child=u,u.return=l;s.sibling!==null;)s=s.sibling,u=u.sibling=oi(s,s.pendingProps),u.return=l;u.sibling=null}return l.child}function kv(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&gm(s)))}function j4(s,l,u){switch(l.tag){case 3:xe(l,l.stateNode.containerInfo),to(l,ur,s.memoizedState.cache),Ku();break;case 27:case 5:Ae(l);break;case 4:xe(l,l.stateNode.containerInfo);break;case 10:to(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(io(l),l.flags|=128,null):(u&l.child.childLanes)!==0?WA(s,l,u):(io(l),s=hi(s,l,u),s!==null?s.sibling:null);io(l);break;case 19:var b=(s.flags&128)!==0;if(y=(u&l.childLanes)!==0,y||(Wu(s,l,u,!1),y=(u&l.childLanes)!==0),b){if(y)return XA(s,l,u);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),V(dr,dr.current),y)break;return null;case 22:case 23:return l.lanes=0,FA(s,l,u);case 24:to(l,ur,s.memoizedState.cache)}return hi(s,l,u)}function QA(s,l,u){if(s!==null)if(s.memoizedProps!==l.pendingProps)yr=!0;else{if(!kv(s,u)&&(l.flags&128)===0)return yr=!1,j4(s,l,u);yr=(s.flags&131072)!==0}else yr=!1,cn&&(l.flags&1048576)!==0&&EN(l,ym,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var y=l.elementType,b=y._init;if(y=b(y._payload),l.type=y,typeof y=="function")Bg(y)?(s=hl(y,s),l.tag=1,l=KA(null,l,y,s,u)):(l.tag=0,l=wv(null,l,y,s,u));else{if(y!=null){if(b=y.$$typeof,b===C){l.tag=11,l=UA(null,l,y,s,u);break e}else if(b===R){l.tag=14,l=qA(null,l,y,s,u);break e}}throw l=I(y)||y,Error(r(306,l,""))}}return l;case 0:return wv(s,l,l.type,l.pendingProps,u);case 1:return y=l.type,b=hl(y,l.pendingProps),KA(s,l,y,b,u);case 3:e:{if(xe(l,l.stateNode.containerInfo),s===null)throw Error(r(387));y=l.pendingProps;var N=l.memoizedState;b=N.element,Jg(s,l),td(l,y,null,u);var D=l.memoizedState;if(y=D.cache,to(l,ur,y),y!==N.cache&&Gg(l,[ur],u,!0),ed(),y=D.element,N.isDehydrated)if(N={element:y,isDehydrated:!1,cache:D.cache},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){l=GA(s,l,y,u);break e}else if(y!==b){b=Ha(Error(r(424)),l),Gu(b),l=GA(s,l,y,u);break e}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Hn=As(s.firstChild),Zr=l,cn=!0,ll=null,qs=!0,u=TA(l,null,y,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ku(),y===b){l=hi(s,l,u);break e}Nr(s,l,y,u)}l=l.child}return l;case 26:return Pm(s,l),s===null?(u=tC(l.type,null,l.pendingProps,null))?l.memoizedState=u:cn||(u=l.type,s=l.pendingProps,y=Qm(ee.current).createElement(u),y[Fn]=l,y[An]=s,Er(y,u,s),vn(y),l.stateNode=y):l.memoizedState=tC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ae(l),s===null&&cn&&(y=l.stateNode=ZE(l.type,l.pendingProps,ee.current),Zr=l,qs=!0,b=Hn,go(l.type)?(ub=b,Hn=As(y.firstChild)):Hn=b),Nr(s,l,l.pendingProps.children,u),Pm(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&cn&&((b=y=Hn)&&(y=Z4(y,l.type,l.pendingProps,qs),y!==null?(l.stateNode=y,Zr=l,Hn=As(y.firstChild),qs=!1,b=!0):b=!1),b||cl(l)),Ae(l),b=l.type,N=l.pendingProps,D=s!==null?s.memoizedProps:null,y=N.children,ib(b,N)?y=null:D!==null&&ib(b,D)&&(l.flags|=32),l.memoizedState!==null&&(b=sv(s,l,y4,null,null,u),wd._currentValue=b),Pm(s,l),Nr(s,l,y,u),l.child;case 6:return s===null&&cn&&((s=u=Hn)&&(u=J4(u,l.pendingProps,qs),u!==null?(l.stateNode=u,Zr=l,Hn=null,s=!0):s=!1),s||cl(l)),null;case 13:return WA(s,l,u);case 4:return xe(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=bc(l,null,y,u):Nr(s,l,y,u),l.child;case 11:return UA(s,l,l.type,l.pendingProps,u);case 7:return Nr(s,l,l.pendingProps,u),l.child;case 8:return Nr(s,l,l.pendingProps.children,u),l.child;case 12:return Nr(s,l,l.pendingProps.children,u),l.child;case 10:return y=l.pendingProps,to(l,l.type,y.value),Nr(s,l,y.children,u),l.child;case 9:return b=l.type._context,y=l.pendingProps.children,dl(l),b=$r(b),y=y(b),l.flags|=1,Nr(s,l,y,u),l.child;case 14:return qA(s,l,l.type,l.pendingProps,u);case 15:return zA(s,l,l.type,l.pendingProps,u);case 19:return XA(s,l,u);case 31:return y=l.pendingProps,u=l.mode,y={mode:y.mode,children:y.children},s===null?(u=$m(y,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=oi(s.child,y),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return FA(s,l,u);case 24:return dl(l),y=$r(ur),s===null?(b=Xg(),b===null&&(b=En,N=Wg(),b.pooledCache=N,N.refCount++,N!==null&&(b.pooledCacheLanes|=u),b=N),l.memoizedState={parent:y,cache:b},Zg(l),to(l,ur,b)):((s.lanes&u)!==0&&(Jg(s,l),td(l,null,null,u),ed()),b=s.memoizedState,N=l.memoizedState,b.parent!==y?(b={parent:y,cache:y},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),to(l,ur,y)):(y=N.cache,to(l,ur,y),y!==b.cache&&Gg(l,[ur],u,!0))),Nr(s,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function pi(s){s.flags|=4}function ZA(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!iC(l)){if(l=Wa.current,l!==null&&((tn&4194048)===tn?zs!==null:(tn&62914560)!==tn&&(tn&536870912)===0||l!==zs))throw Zu=Qg,DN;s.flags|=8192}}function Lm(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Qt():536870912,s.lanes|=l,wc|=l)}function ld(s,l){if(!cn)switch(s.tailMode){case"hidden":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Un(s){var l=s.alternate!==null&&s.alternate.child===s.child,u=0,y=0;if(l)for(var b=s.child;b!==null;)u|=b.lanes|b.childLanes,y|=b.subtreeFlags&65011712,y|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)u|=b.lanes|b.childLanes,y|=b.subtreeFlags,y|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=y,s.childLanes=u,l}function N4(s,l,u){var y=l.pendingProps;switch(Fg(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(l),null;case 1:return Un(l),null;case 3:return u=l.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),di(ur),X(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Vu(l)?pi(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,kN())),Un(l),null;case 26:return u=l.memoizedState,s===null?(pi(l),u!==null?(Un(l),ZA(l,u)):(Un(l),l.flags&=-16777217)):u?u!==s.memoizedState?(pi(l),Un(l),ZA(l,u)):(Un(l),l.flags&=-16777217):(s.memoizedProps!==y&&pi(l),Un(l),l.flags&=-16777217),null;case 27:he(l),u=ee.current;var b=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==y&&pi(l);else{if(!y){if(l.stateNode===null)throw Error(r(166));return Un(l),null}s=Y.current,Vu(l)?CN(l):(s=ZE(b,y,u),l.stateNode=s,pi(l))}return Un(l),null;case 5:if(he(l),u=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==y&&pi(l);else{if(!y){if(l.stateNode===null)throw Error(r(166));return Un(l),null}if(s=Y.current,Vu(l))CN(l);else{switch(b=Qm(ee.current),s){case 1:s=b.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=b.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=b.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof y.is=="string"?b.createElement("select",{is:y.is}):b.createElement("select"),y.multiple?s.multiple=!0:y.size&&(s.size=y.size);break;default:s=typeof y.is=="string"?b.createElement(u,{is:y.is}):b.createElement(u)}}s[Fn]=l,s[An]=y;e:for(b=l.child;b!==null;){if(b.tag===5||b.tag===6)s.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===l)break e;for(;b.sibling===null;){if(b.return===null||b.return===l)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}l.stateNode=s;e:switch(Er(s,u,y),u){case"button":case"input":case"select":case"textarea":s=!!y.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&pi(l)}}return Un(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==y&&pi(l);else{if(typeof y!="string"&&l.stateNode===null)throw Error(r(166));if(s=ee.current,Vu(l)){if(s=l.stateNode,u=l.memoizedProps,y=null,b=Zr,b!==null)switch(b.tag){case 27:case 5:y=b.memoizedProps}s[Fn]=l,s=!!(s.nodeValue===u||y!==null&&y.suppressHydrationWarning===!0||VE(s.nodeValue,u)),s||cl(l)}else s=Qm(s).createTextNode(y),s[Fn]=l,l.stateNode=s}return Un(l),null;case 13:if(y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Vu(l),y!==null&&y.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Fn]=l}else Ku(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Un(l),b=!1}else b=kN(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(mi(l),l):(mi(l),null)}if(mi(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=y!==null,s=s!==null&&s.memoizedState!==null,u){y=l.child,b=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(b=y.alternate.memoizedState.cachePool.pool);var N=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(N=y.memoizedState.cachePool.pool),N!==b&&(y.flags|=2048)}return u!==s&&u&&(l.child.flags|=8192),Lm(l,l.updateQueue),Un(l),null;case 4:return X(),s===null&&tb(l.stateNode.containerInfo),Un(l),null;case 10:return di(l.type),Un(l),null;case 19:if(z(dr),b=l.memoizedState,b===null)return Un(l),null;if(y=(l.flags&128)!==0,N=b.rendering,N===null)if(y)ld(b,!1);else{if(Vn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(N=Mm(s),N!==null){for(l.flags|=128,ld(b,!1),s=N.updateQueue,l.updateQueue=s,Lm(l,s),l.subtreeFlags=0,s=u,u=l.child;u!==null;)AN(u,s),u=u.sibling;return V(dr,dr.current&1|2),l.child}s=s.sibling}b.tail!==null&&Ee()>qm&&(l.flags|=128,y=!0,ld(b,!1),l.lanes=4194304)}else{if(!y)if(s=Mm(N),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Lm(l,s),ld(b,!0),b.tail===null&&b.tailMode==="hidden"&&!N.alternate&&!cn)return Un(l),null}else 2*Ee()-b.renderingStartTime>qm&&u!==536870912&&(l.flags|=128,y=!0,ld(b,!1),l.lanes=4194304);b.isBackwards?(N.sibling=l.child,l.child=N):(s=b.last,s!==null?s.sibling=N:l.child=N,b.last=N)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Ee(),l.sibling=null,s=dr.current,V(dr,y?s&1|2:s&1),l):(Un(l),null);case 22:case 23:return mi(l),rv(),y=l.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(u&536870912)!==0&&(l.flags&128)===0&&(Un(l),l.subtreeFlags&6&&(l.flags|=8192)):Un(l),u=l.updateQueue,u!==null&&Lm(l,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==u&&(l.flags|=2048),s!==null&&z(fl),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),di(ur),Un(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function A4(s,l){switch(Fg(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return di(ur),X(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return he(l),null;case 13:if(mi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ku()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return z(dr),null;case 4:return X(),null;case 10:return di(l.type),null;case 22:case 23:return mi(l),rv(),s!==null&&z(fl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return di(ur),null;case 25:return null;default:return null}}function JA(s,l){switch(Fg(l),l.tag){case 3:di(ur),X();break;case 26:case 27:case 5:he(l);break;case 4:X();break;case 13:mi(l);break;case 19:z(dr);break;case 10:di(l.type);break;case 22:case 23:mi(l),rv(),s!==null&&z(fl);break;case 24:di(ur)}}function cd(s,l){try{var u=l.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var b=y.next;u=b;do{if((u.tag&s)===s){y=void 0;var N=u.create,D=u.inst;y=N(),D.destroy=y}u=u.next}while(u!==b)}}catch(F){wn(l,l.return,F)}}function lo(s,l,u){try{var y=l.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var N=b.next;y=N;do{if((y.tag&s)===s){var D=y.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,b=l;var J=u,pe=F;try{pe()}catch(Me){wn(b,J,Me)}}}y=y.next}while(y!==N)}}catch(Me){wn(l,l.return,Me)}}function eE(s){var l=s.updateQueue;if(l!==null){var u=s.stateNode;try{qN(l,u)}catch(y){wn(s,s.return,y)}}}function tE(s,l,u){u.props=hl(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(y){wn(s,l,y)}}function ud(s,l){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var y=s.stateNode;break;case 30:y=s.stateNode;break;default:y=s.stateNode}typeof u=="function"?s.refCleanup=u(y):u.current=y}}catch(b){wn(s,l,b)}}function Fs(s,l){var u=s.ref,y=s.refCleanup;if(u!==null)if(typeof y=="function")try{y()}catch(b){wn(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){wn(s,l,b)}else u.current=null}function nE(s){var l=s.type,u=s.memoizedProps,y=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&y.focus();break e;case"img":u.src?y.src=u.src:u.srcSet&&(y.srcset=u.srcSet)}}catch(b){wn(s,s.return,b)}}function Ov(s,l,u){try{var y=s.stateNode;G4(y,s.type,u,l),y[An]=l}catch(b){wn(s,s.return,b)}}function rE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&go(s.type)||s.tag===4}function Rv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&go(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Mv(s,l,u){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(s),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Xm));else if(y!==4&&(y===27&&go(s.type)&&(u=s.stateNode,l=null),s=s.child,s!==null))for(Mv(s,l,u),s=s.sibling;s!==null;)Mv(s,l,u),s=s.sibling}function Bm(s,l,u){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?u.insertBefore(s,l):u.appendChild(s);else if(y!==4&&(y===27&&go(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Bm(s,l,u),s=s.sibling;s!==null;)Bm(s,l,u),s=s.sibling}function aE(s){var l=s.stateNode,u=s.memoizedProps;try{for(var y=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Er(l,y,u),l[Fn]=s,l[An]=u}catch(N){wn(s,s.return,N)}}var yi=!1,Xn=!1,Iv=!1,sE=typeof WeakSet=="function"?WeakSet:Set,gr=null;function E4(s,l){if(s=s.containerInfo,ab=rh,s=yN(s),Rg(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var y=u.getSelection&&u.getSelection();if(y&&y.rangeCount!==0){u=y.anchorNode;var b=y.anchorOffset,N=y.focusNode;y=y.focusOffset;try{u.nodeType,N.nodeType}catch{u=null;break e}var D=0,F=-1,J=-1,pe=0,Me=0,$e=s,ge=null;t:for(;;){for(var be;$e!==u||b!==0&&$e.nodeType!==3||(F=D+b),$e!==N||y!==0&&$e.nodeType!==3||(J=D+y),$e.nodeType===3&&(D+=$e.nodeValue.length),(be=$e.firstChild)!==null;)ge=$e,$e=be;for(;;){if($e===s)break t;if(ge===u&&++pe===b&&(F=D),ge===N&&++Me===y&&(J=D),(be=$e.nextSibling)!==null)break;$e=ge,ge=$e.parentNode}$e=be}u=F===-1||J===-1?null:{start:F,end:J}}else u=null}u=u||{start:0,end:0}}else u=null;for(sb={focusedElem:s,selectionRange:u},rh=!1,gr=l;gr!==null;)if(l=gr,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,gr=s;else for(;gr!==null;){switch(l=gr,N=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&N!==null){s=void 0,u=l,b=N.memoizedProps,N=N.memoizedState,y=u.stateNode;try{var Tt=hl(u.type,b,u.elementType===u.type);s=y.getSnapshotBeforeUpdate(Tt,N),y.__reactInternalSnapshotBeforeUpdate=s}catch(Et){wn(u,u.return,Et)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,u=s.nodeType,u===9)lb(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":lb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,gr=s;break}gr=l.return}}function iE(s,l,u){var y=u.flags;switch(u.tag){case 0:case 11:case 15:co(s,u),y&4&&cd(5,u);break;case 1:if(co(s,u),y&4)if(s=u.stateNode,l===null)try{s.componentDidMount()}catch(D){wn(u,u.return,D)}else{var b=hl(u.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(D){wn(u,u.return,D)}}y&64&&eE(u),y&512&&ud(u,u.return);break;case 3:if(co(s,u),y&64&&(s=u.updateQueue,s!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{qN(s,l)}catch(D){wn(u,u.return,D)}}break;case 27:l===null&&y&4&&aE(u);case 26:case 5:co(s,u),l===null&&y&4&&nE(u),y&512&&ud(u,u.return);break;case 12:co(s,u);break;case 13:co(s,u),y&4&&cE(s,u),y&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=P4.bind(null,u),eU(s,u))));break;case 22:if(y=u.memoizedState!==null||yi,!y){l=l!==null&&l.memoizedState!==null||Xn,b=yi;var N=Xn;yi=y,(Xn=l)&&!N?uo(s,u,(u.subtreeFlags&8772)!==0):co(s,u),yi=b,Xn=N}break;case 30:break;default:co(s,u)}}function oE(s){var l=s.alternate;l!==null&&(s.alternate=null,oE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&$t(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Dn=null,la=!1;function gi(s,l,u){for(u=u.child;u!==null;)lE(s,l,u),u=u.sibling}function lE(s,l,u){if(le&&typeof le.onCommitFiberUnmount=="function")try{le.onCommitFiberUnmount(Je,u)}catch{}switch(u.tag){case 26:Xn||Fs(u,l),gi(s,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Xn||Fs(u,l);var y=Dn,b=la;go(u.type)&&(Dn=u.stateNode,la=!1),gi(s,l,u),bd(u.stateNode),Dn=y,la=b;break;case 5:Xn||Fs(u,l);case 6:if(y=Dn,b=la,Dn=null,gi(s,l,u),Dn=y,la=b,Dn!==null)if(la)try{(Dn.nodeType===9?Dn.body:Dn.nodeName==="HTML"?Dn.ownerDocument.body:Dn).removeChild(u.stateNode)}catch(N){wn(u,l,N)}else try{Dn.removeChild(u.stateNode)}catch(N){wn(u,l,N)}break;case 18:Dn!==null&&(la?(s=Dn,XE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Ed(s)):XE(Dn,u.stateNode));break;case 4:y=Dn,b=la,Dn=u.stateNode.containerInfo,la=!0,gi(s,l,u),Dn=y,la=b;break;case 0:case 11:case 14:case 15:Xn||lo(2,u,l),Xn||lo(4,u,l),gi(s,l,u);break;case 1:Xn||(Fs(u,l),y=u.stateNode,typeof y.componentWillUnmount=="function"&&tE(u,l,y)),gi(s,l,u);break;case 21:gi(s,l,u);break;case 22:Xn=(y=Xn)||u.memoizedState!==null,gi(s,l,u),Xn=y;break;default:gi(s,l,u)}}function cE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ed(s)}catch(u){wn(l,l.return,u)}}function C4(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new sE),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new sE),l;default:throw Error(r(435,s.tag))}}function Dv(s,l){var u=C4(s);l.forEach(function(y){var b=$4.bind(null,s,y);u.has(y)||(u.add(y),y.then(b,b))})}function Aa(s,l){var u=l.deletions;if(u!==null)for(var y=0;y<u.length;y++){var b=u[y],N=s,D=l,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(go(F.type)){Dn=F.stateNode,la=!1;break e}break;case 5:Dn=F.stateNode,la=!1;break e;case 3:case 4:Dn=F.stateNode.containerInfo,la=!0;break e}F=F.return}if(Dn===null)throw Error(r(160));lE(N,D,b),Dn=null,la=!1,N=b.alternate,N!==null&&(N.return=null),b.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)uE(l,s),l=l.sibling}var Ns=null;function uE(s,l){var u=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Aa(l,s),Ea(s),y&4&&(lo(3,s,s.return),cd(3,s),lo(5,s,s.return));break;case 1:Aa(l,s),Ea(s),y&512&&(Xn||u===null||Fs(u,u.return)),y&64&&yi&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?y:u.concat(y))));break;case 26:var b=Ns;if(Aa(l,s),Ea(s),y&512&&(Xn||u===null||Fs(u,u.return)),y&4){var N=u!==null?u.memoizedState:null;if(y=s.memoizedState,u===null)if(y===null)if(s.stateNode===null){e:{y=s.type,u=s.memoizedProps,b=b.ownerDocument||b;t:switch(y){case"title":N=b.getElementsByTagName("title")[0],(!N||N[Mt]||N[Fn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=b.createElement(y),b.head.insertBefore(N,b.querySelector("head > title"))),Er(N,y,u),N[Fn]=s,vn(N),y=N;break e;case"link":var D=aC("link","href",b).get(y+(u.href||""));if(D){for(var F=0;F<D.length;F++)if(N=D[F],N.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&N.getAttribute("rel")===(u.rel==null?null:u.rel)&&N.getAttribute("title")===(u.title==null?null:u.title)&&N.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){D.splice(F,1);break t}}N=b.createElement(y),Er(N,y,u),b.head.appendChild(N);break;case"meta":if(D=aC("meta","content",b).get(y+(u.content||""))){for(F=0;F<D.length;F++)if(N=D[F],N.getAttribute("content")===(u.content==null?null:""+u.content)&&N.getAttribute("name")===(u.name==null?null:u.name)&&N.getAttribute("property")===(u.property==null?null:u.property)&&N.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&N.getAttribute("charset")===(u.charSet==null?null:u.charSet)){D.splice(F,1);break t}}N=b.createElement(y),Er(N,y,u),b.head.appendChild(N);break;default:throw Error(r(468,y))}N[Fn]=s,vn(N),y=N}s.stateNode=y}else sC(b,s.type,s.stateNode);else s.stateNode=rC(b,y,s.memoizedProps);else N!==y?(N===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):N.count--,y===null?sC(b,s.type,s.stateNode):rC(b,y,s.memoizedProps)):y===null&&s.stateNode!==null&&Ov(s,s.memoizedProps,u.memoizedProps)}break;case 27:Aa(l,s),Ea(s),y&512&&(Xn||u===null||Fs(u,u.return)),u!==null&&y&4&&Ov(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Aa(l,s),Ea(s),y&512&&(Xn||u===null||Fs(u,u.return)),s.flags&32){b=s.stateNode;try{Ji(b,"")}catch(be){wn(s,s.return,be)}}y&4&&s.stateNode!=null&&(b=s.memoizedProps,Ov(s,b,u!==null?u.memoizedProps:b)),y&1024&&(Iv=!0);break;case 6:if(Aa(l,s),Ea(s),y&4){if(s.stateNode===null)throw Error(r(162));y=s.memoizedProps,u=s.stateNode;try{u.nodeValue=y}catch(be){wn(s,s.return,be)}}break;case 3:if(eh=null,b=Ns,Ns=Zm(l.containerInfo),Aa(l,s),Ns=b,Ea(s),y&4&&u!==null&&u.memoizedState.isDehydrated)try{Ed(l.containerInfo)}catch(be){wn(s,s.return,be)}Iv&&(Iv=!1,dE(s));break;case 4:y=Ns,Ns=Zm(s.stateNode.containerInfo),Aa(l,s),Ea(s),Ns=y;break;case 12:Aa(l,s),Ea(s);break;case 13:Aa(l,s),Ea(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(qv=Ee()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Dv(s,y)));break;case 22:b=s.memoizedState!==null;var J=u!==null&&u.memoizedState!==null,pe=yi,Me=Xn;if(yi=pe||b,Xn=Me||J,Aa(l,s),Xn=Me,yi=pe,Ea(s),y&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(u===null||J||yi||Xn||pl(s)),u=null,l=s;;){if(l.tag===5||l.tag===26){if(u===null){J=u=l;try{if(N=J.stateNode,b)D=N.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=J.stateNode;var $e=J.memoizedProps.style,ge=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;F.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(be){wn(J,J.return,be)}}}else if(l.tag===6){if(u===null){J=l;try{J.stateNode.nodeValue=b?"":J.memoizedProps}catch(be){wn(J,J.return,be)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}y&4&&(y=s.updateQueue,y!==null&&(u=y.retryQueue,u!==null&&(y.retryQueue=null,Dv(s,u))));break;case 19:Aa(l,s),Ea(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Dv(s,y)));break;case 30:break;case 21:break;default:Aa(l,s),Ea(s)}}function Ea(s){var l=s.flags;if(l&2){try{for(var u,y=s.return;y!==null;){if(rE(y)){u=y;break}y=y.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var b=u.stateNode,N=Rv(s);Bm(s,N,b);break;case 5:var D=u.stateNode;u.flags&32&&(Ji(D,""),u.flags&=-33);var F=Rv(s);Bm(s,F,D);break;case 3:case 4:var J=u.stateNode.containerInfo,pe=Rv(s);Mv(s,pe,J);break;default:throw Error(r(161))}}catch(Me){wn(s,s.return,Me)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function dE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;dE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function co(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)iE(s,l.alternate,l),l=l.sibling}function pl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:lo(4,l,l.return),pl(l);break;case 1:Fs(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&tE(l,l.return,u),pl(l);break;case 27:bd(l.stateNode);case 26:case 5:Fs(l,l.return),pl(l);break;case 22:l.memoizedState===null&&pl(l);break;case 30:pl(l);break;default:pl(l)}s=s.sibling}}function uo(s,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,b=s,N=l,D=N.flags;switch(N.tag){case 0:case 11:case 15:uo(b,N,u),cd(4,N);break;case 1:if(uo(b,N,u),y=N,b=y.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(pe){wn(y,y.return,pe)}if(y=N,b=y.updateQueue,b!==null){var F=y.stateNode;try{var J=b.shared.hiddenCallbacks;if(J!==null)for(b.shared.hiddenCallbacks=null,b=0;b<J.length;b++)UN(J[b],F)}catch(pe){wn(y,y.return,pe)}}u&&D&64&&eE(N),ud(N,N.return);break;case 27:aE(N);case 26:case 5:uo(b,N,u),u&&y===null&&D&4&&nE(N),ud(N,N.return);break;case 12:uo(b,N,u);break;case 13:uo(b,N,u),u&&D&4&&cE(b,N);break;case 22:N.memoizedState===null&&uo(b,N,u),ud(N,N.return);break;case 30:break;default:uo(b,N,u)}l=l.sibling}}function Pv(s,l){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Yu(u))}function $v(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Yu(s))}function Hs(s,l,u,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)fE(s,l,u,y),l=l.sibling}function fE(s,l,u,y){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Hs(s,l,u,y),b&2048&&cd(9,l);break;case 1:Hs(s,l,u,y);break;case 3:Hs(s,l,u,y),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Yu(s)));break;case 12:if(b&2048){Hs(s,l,u,y),s=l.stateNode;try{var N=l.memoizedProps,D=N.id,F=N.onPostCommit;typeof F=="function"&&F(D,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(J){wn(l,l.return,J)}}else Hs(s,l,u,y);break;case 13:Hs(s,l,u,y);break;case 23:break;case 22:N=l.stateNode,D=l.alternate,l.memoizedState!==null?N._visibility&2?Hs(s,l,u,y):dd(s,l):N._visibility&2?Hs(s,l,u,y):(N._visibility|=2,_c(s,l,u,y,(l.subtreeFlags&10256)!==0)),b&2048&&Pv(D,l);break;case 24:Hs(s,l,u,y),b&2048&&$v(l.alternate,l);break;default:Hs(s,l,u,y)}}function _c(s,l,u,y,b){for(b=b&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var N=s,D=l,F=u,J=y,pe=D.flags;switch(D.tag){case 0:case 11:case 15:_c(N,D,F,J,b),cd(8,D);break;case 23:break;case 22:var Me=D.stateNode;D.memoizedState!==null?Me._visibility&2?_c(N,D,F,J,b):dd(N,D):(Me._visibility|=2,_c(N,D,F,J,b)),b&&pe&2048&&Pv(D.alternate,D);break;case 24:_c(N,D,F,J,b),b&&pe&2048&&$v(D.alternate,D);break;default:_c(N,D,F,J,b)}l=l.sibling}}function dd(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=s,y=l,b=y.flags;switch(y.tag){case 22:dd(u,y),b&2048&&Pv(y.alternate,y);break;case 24:dd(u,y),b&2048&&$v(y.alternate,y);break;default:dd(u,y)}l=l.sibling}}var fd=8192;function xc(s){if(s.subtreeFlags&fd)for(s=s.child;s!==null;)mE(s),s=s.sibling}function mE(s){switch(s.tag){case 26:xc(s),s.flags&fd&&s.memoizedState!==null&&mU(Ns,s.memoizedState,s.memoizedProps);break;case 5:xc(s);break;case 3:case 4:var l=Ns;Ns=Zm(s.stateNode.containerInfo),xc(s),Ns=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=fd,fd=16777216,xc(s),fd=l):xc(s));break;default:xc(s)}}function hE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function md(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var y=l[u];gr=y,yE(y,s)}hE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)pE(s),s=s.sibling}function pE(s){switch(s.tag){case 0:case 11:case 15:md(s),s.flags&2048&&lo(9,s,s.return);break;case 3:md(s);break;case 12:md(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Um(s)):md(s);break;default:md(s)}}function Um(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var y=l[u];gr=y,yE(y,s)}hE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:lo(8,l,l.return),Um(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Um(l));break;default:Um(l)}s=s.sibling}}function yE(s,l){for(;gr!==null;){var u=gr;switch(u.tag){case 0:case 11:case 15:lo(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var y=u.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Yu(u.memoizedState.cache)}if(y=u.child,y!==null)y.return=u,gr=y;else e:for(u=s;gr!==null;){y=gr;var b=y.sibling,N=y.return;if(oE(y),y===u){gr=null;break e}if(b!==null){b.return=N,gr=b;break e}gr=N}}}var T4={getCacheForType:function(s){var l=$r(ur),u=l.data.get(s);return u===void 0&&(u=s(),l.data.set(s,u)),u}},k4=typeof WeakMap=="function"?WeakMap:Map,hn=0,En=null,Gt=null,tn=0,pn=0,Ca=null,fo=!1,Sc=!1,Lv=!1,vi=0,Vn=0,mo=0,yl=0,Bv=0,Ya=0,wc=0,hd=null,ca=null,Uv=!1,qv=0,qm=1/0,zm=null,ho=null,Ar=0,po=null,jc=null,Nc=0,zv=0,Fv=null,gE=null,pd=0,Hv=null;function Ta(){if((hn&2)!==0&&tn!==0)return tn&-tn;if($.T!==null){var s=fc;return s!==0?s:Qv()}return Ss()}function vE(){Ya===0&&(Ya=(tn&536870912)===0||cn?Bt():536870912);var s=Wa.current;return s!==null&&(s.flags|=32),Ya}function ka(s,l,u){(s===En&&(pn===2||pn===9)||s.cancelPendingCommit!==null)&&(Ac(s,0),yo(s,tn,Ya,!1)),Ir(s,u),((hn&2)===0||s!==En)&&(s===En&&((hn&2)===0&&(yl|=u),Vn===4&&yo(s,tn,Ya,!1)),Vs(s))}function bE(s,l,u){if((hn&6)!==0)throw Error(r(327));var y=!u&&(l&124)===0&&(l&s.expiredLanes)===0||ze(s,l),b=y?M4(s,l):Gv(s,l,!0),N=y;do{if(b===0){Sc&&!y&&yo(s,l,0,!1);break}else{if(u=s.current.alternate,N&&!O4(u)){b=Gv(s,l,!1),N=!1;continue}if(b===2){if(N=l,s.errorRecoveryDisabledLanes&N)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){l=D;e:{var F=s;b=hd;var J=F.current.memoizedState.isDehydrated;if(J&&(Ac(F,D).flags|=256),D=Gv(F,D,!1),D!==2){if(Lv&&!J){F.errorRecoveryDisabledLanes|=N,yl|=N,b=4;break e}N=ca,ca=b,N!==null&&(ca===null?ca=N:ca.push.apply(ca,N))}b=D}if(N=!1,b!==2)continue}}if(b===1){Ac(s,0),yo(s,l,0,!0);break}e:{switch(y=s,N=b,N){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:yo(y,l,Ya,!fo);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=qv+300-Ee(),10<b)){if(yo(y,l,Ya,!fo),We(y,0,!0)!==0)break e;y.timeoutHandle=WE(_E.bind(null,y,u,ca,zm,Uv,l,Ya,yl,wc,fo,N,2,-0,0),b);break e}_E(y,u,ca,zm,Uv,l,Ya,yl,wc,fo,N,0,-0,0)}}break}while(!0);Vs(s)}function _E(s,l,u,y,b,N,D,F,J,pe,Me,$e,ge,be){if(s.timeoutHandle=-1,$e=l.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(Sd={stylesheets:null,count:0,unsuspend:fU},mE(l),$e=hU(),$e!==null)){s.cancelPendingCommit=$e(EE.bind(null,s,l,N,u,y,b,D,F,J,Me,1,ge,be)),yo(s,N,D,!pe);return}EE(s,l,N,u,y,b,D,F,J)}function O4(s){for(var l=s;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var y=0;y<u.length;y++){var b=u[y],N=b.getSnapshot;b=b.value;try{if(!ja(N(),b))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function yo(s,l,u,y){l&=~Bv,l&=~yl,s.suspendedLanes|=l,s.pingedLanes&=~l,y&&(s.warmLanes|=l),y=s.expirationTimes;for(var b=l;0<b;){var N=31-Le(b),D=1<<N;y[N]=-1,b&=~D}u!==0&&Dr(s,u,l)}function Fm(){return(hn&6)===0?(yd(0),!1):!0}function Vv(){if(Gt!==null){if(pn===0)var s=Gt.return;else s=Gt,ui=ul=null,lv(s),vc=null,id=0,s=Gt;for(;s!==null;)JA(s.alternate,s),s=s.return;Gt=null}}function Ac(s,l){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,Y4(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Vv(),En=s,Gt=u=oi(s.current,null),tn=l,pn=0,Ca=null,fo=!1,Sc=ze(s,l),Lv=!1,wc=Ya=Bv=yl=mo=Vn=0,ca=hd=null,Uv=!1,(l&8)!==0&&(l|=l&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=l;0<y;){var b=31-Le(y),N=1<<b;l|=s[b],y&=~N}return vi=l,dm(),u}function xE(s,l){Ft=null,$.H=km,l===Qu||l===_m?(l=LN(),pn=3):l===DN?(l=LN(),pn=4):pn=l===BA?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ca=l,Gt===null&&(Vn=1,Dm(s,Ha(l,s.current)))}function SE(){var s=$.H;return $.H=km,s===null?km:s}function wE(){var s=$.A;return $.A=T4,s}function Kv(){Vn=4,fo||(tn&4194048)!==tn&&Wa.current!==null||(Sc=!0),(mo&134217727)===0&&(yl&134217727)===0||En===null||yo(En,tn,Ya,!1)}function Gv(s,l,u){var y=hn;hn|=2;var b=SE(),N=wE();(En!==s||tn!==l)&&(zm=null,Ac(s,l)),l=!1;var D=Vn;e:do try{if(pn!==0&&Gt!==null){var F=Gt,J=Ca;switch(pn){case 8:Vv(),D=6;break e;case 3:case 2:case 9:case 6:Wa.current===null&&(l=!0);var pe=pn;if(pn=0,Ca=null,Ec(s,F,J,pe),u&&Sc){D=0;break e}break;default:pe=pn,pn=0,Ca=null,Ec(s,F,J,pe)}}R4(),D=Vn;break}catch(Me){xE(s,Me)}while(!0);return l&&s.shellSuspendCounter++,ui=ul=null,hn=y,$.H=b,$.A=N,Gt===null&&(En=null,tn=0,dm()),D}function R4(){for(;Gt!==null;)jE(Gt)}function M4(s,l){var u=hn;hn|=2;var y=SE(),b=wE();En!==s||tn!==l?(zm=null,qm=Ee()+500,Ac(s,l)):Sc=ze(s,l);e:do try{if(pn!==0&&Gt!==null){l=Gt;var N=Ca;t:switch(pn){case 1:pn=0,Ca=null,Ec(s,l,N,1);break;case 2:case 9:if(PN(N)){pn=0,Ca=null,NE(l);break}l=function(){pn!==2&&pn!==9||En!==s||(pn=7),Vs(s)},N.then(l,l);break e;case 3:pn=7;break e;case 4:pn=5;break e;case 7:PN(N)?(pn=0,Ca=null,NE(l)):(pn=0,Ca=null,Ec(s,l,N,7));break;case 5:var D=null;switch(Gt.tag){case 26:D=Gt.memoizedState;case 5:case 27:var F=Gt;if(!D||iC(D)){pn=0,Ca=null;var J=F.sibling;if(J!==null)Gt=J;else{var pe=F.return;pe!==null?(Gt=pe,Hm(pe)):Gt=null}break t}}pn=0,Ca=null,Ec(s,l,N,5);break;case 6:pn=0,Ca=null,Ec(s,l,N,6);break;case 8:Vv(),Vn=6;break e;default:throw Error(r(462))}}I4();break}catch(Me){xE(s,Me)}while(!0);return ui=ul=null,$.H=y,$.A=b,hn=u,Gt!==null?0:(En=null,tn=0,dm(),Vn)}function I4(){for(;Gt!==null&&!ye();)jE(Gt)}function jE(s){var l=QA(s.alternate,s,vi);s.memoizedProps=s.pendingProps,l===null?Hm(s):Gt=l}function NE(s){var l=s,u=l.alternate;switch(l.tag){case 15:case 0:l=VA(u,l,l.pendingProps,l.type,void 0,tn);break;case 11:l=VA(u,l,l.pendingProps,l.type.render,l.ref,tn);break;case 5:lv(l);default:JA(u,l),l=Gt=AN(l,vi),l=QA(u,l,vi)}s.memoizedProps=s.pendingProps,l===null?Hm(s):Gt=l}function Ec(s,l,u,y){ui=ul=null,lv(l),vc=null,id=0;var b=l.return;try{if(w4(s,b,l,u,tn)){Vn=1,Dm(s,Ha(u,s.current)),Gt=null;return}}catch(N){if(b!==null)throw Gt=b,N;Vn=1,Dm(s,Ha(u,s.current)),Gt=null;return}l.flags&32768?(cn||y===1?s=!0:Sc||(tn&536870912)!==0?s=!1:(fo=s=!0,(y===2||y===9||y===3||y===6)&&(y=Wa.current,y!==null&&y.tag===13&&(y.flags|=16384))),AE(l,s)):Hm(l)}function Hm(s){var l=s;do{if((l.flags&32768)!==0){AE(l,fo);return}s=l.return;var u=N4(l.alternate,l,vi);if(u!==null){Gt=u;return}if(l=l.sibling,l!==null){Gt=l;return}Gt=l=s}while(l!==null);Vn===0&&(Vn=5)}function AE(s,l){do{var u=A4(s.alternate,s);if(u!==null){u.flags&=32767,Gt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(s=s.sibling,s!==null)){Gt=s;return}Gt=s=u}while(s!==null);Vn=6,Gt=null}function EE(s,l,u,y,b,N,D,F,J){s.cancelPendingCommit=null;do Vm();while(Ar!==0);if((hn&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(N=l.lanes|l.childLanes,N|=$g,xs(s,u,N,D,F,J),s===En&&(Gt=En=null,tn=0),jc=l,po=s,Nc=u,zv=N,Fv=b,gE=y,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,L4(we,function(){return RE(),null})):(s.callbackNode=null,s.callbackPriority=0),y=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||y){y=$.T,$.T=null,b=G.p,G.p=2,D=hn,hn|=4;try{E4(s,l,u)}finally{hn=D,G.p=b,$.T=y}}Ar=1,CE(),TE(),kE()}}function CE(){if(Ar===1){Ar=0;var s=po,l=jc,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var y=G.p;G.p=2;var b=hn;hn|=4;try{uE(l,s);var N=sb,D=yN(s.containerInfo),F=N.focusedElem,J=N.selectionRange;if(D!==F&&F&&F.ownerDocument&&pN(F.ownerDocument.documentElement,F)){if(J!==null&&Rg(F)){var pe=J.start,Me=J.end;if(Me===void 0&&(Me=pe),"selectionStart"in F)F.selectionStart=pe,F.selectionEnd=Math.min(Me,F.value.length);else{var $e=F.ownerDocument||document,ge=$e&&$e.defaultView||window;if(ge.getSelection){var be=ge.getSelection(),Tt=F.textContent.length,Et=Math.min(J.start,Tt),xn=J.end===void 0?Et:Math.min(J.end,Tt);!be.extend&&Et>xn&&(D=xn,xn=Et,Et=D);var ce=hN(F,Et),ae=hN(F,xn);if(ce&&ae&&(be.rangeCount!==1||be.anchorNode!==ce.node||be.anchorOffset!==ce.offset||be.focusNode!==ae.node||be.focusOffset!==ae.offset)){var me=$e.createRange();me.setStart(ce.node,ce.offset),be.removeAllRanges(),Et>xn?(be.addRange(me),be.extend(ae.node,ae.offset)):(me.setEnd(ae.node,ae.offset),be.addRange(me))}}}}for($e=[],be=F;be=be.parentNode;)be.nodeType===1&&$e.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<$e.length;F++){var Pe=$e[F];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}rh=!!ab,sb=ab=null}finally{hn=b,G.p=y,$.T=u}}s.current=l,Ar=2}}function TE(){if(Ar===2){Ar=0;var s=po,l=jc,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var y=G.p;G.p=2;var b=hn;hn|=4;try{iE(s,l.alternate,l)}finally{hn=b,G.p=y,$.T=u}}Ar=3}}function kE(){if(Ar===4||Ar===3){Ar=0,je();var s=po,l=jc,u=Nc,y=gE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ar=5:(Ar=0,jc=po=null,OE(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(ho=null),Us(u),l=l.stateNode,le&&typeof le.onCommitFiberRoot=="function")try{le.onCommitFiberRoot(Je,l,void 0,(l.current.flags&128)===128)}catch{}if(y!==null){l=$.T,b=G.p,G.p=2,$.T=null;try{for(var N=s.onRecoverableError,D=0;D<y.length;D++){var F=y[D];N(F.value,{componentStack:F.stack})}}finally{$.T=l,G.p=b}}(Nc&3)!==0&&Vm(),Vs(s),b=s.pendingLanes,(u&4194090)!==0&&(b&42)!==0?s===Hv?pd++:(pd=0,Hv=s):pd=0,yd(0)}}function OE(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Yu(l)))}function Vm(s){return CE(),TE(),kE(),RE()}function RE(){if(Ar!==5)return!1;var s=po,l=zv;zv=0;var u=Us(Nc),y=$.T,b=G.p;try{G.p=32>u?32:u,$.T=null,u=Fv,Fv=null;var N=po,D=Nc;if(Ar=0,jc=po=null,Nc=0,(hn&6)!==0)throw Error(r(331));var F=hn;if(hn|=4,pE(N.current),fE(N,N.current,D,u),hn=F,yd(0,!1),le&&typeof le.onPostCommitFiberRoot=="function")try{le.onPostCommitFiberRoot(Je,N)}catch{}return!0}finally{G.p=b,$.T=y,OE(s,l)}}function ME(s,l,u){l=Ha(u,l),l=Sv(s.stateNode,l,2),s=ao(s,l,2),s!==null&&(Ir(s,2),Vs(s))}function wn(s,l,u){if(s.tag===3)ME(s,s,u);else for(;l!==null;){if(l.tag===3){ME(l,s,u);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ho===null||!ho.has(y))){s=Ha(u,s),u=$A(2),y=ao(l,u,2),y!==null&&(LA(u,y,l,s),Ir(y,2),Vs(y));break}}l=l.return}}function Wv(s,l,u){var y=s.pingCache;if(y===null){y=s.pingCache=new k4;var b=new Set;y.set(l,b)}else b=y.get(l),b===void 0&&(b=new Set,y.set(l,b));b.has(u)||(Lv=!0,b.add(u),s=D4.bind(null,s,l,u),l.then(s,s))}function D4(s,l,u){var y=s.pingCache;y!==null&&y.delete(l),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,En===s&&(tn&u)===u&&(Vn===4||Vn===3&&(tn&62914560)===tn&&300>Ee()-qv?(hn&2)===0&&Ac(s,0):Bv|=u,wc===tn&&(wc=0)),Vs(s)}function IE(s,l){l===0&&(l=Qt()),s=lc(s,l),s!==null&&(Ir(s,l),Vs(s))}function P4(s){var l=s.memoizedState,u=0;l!==null&&(u=l.retryLane),IE(s,u)}function $4(s,l){var u=0;switch(s.tag){case 13:var y=s.stateNode,b=s.memoizedState;b!==null&&(u=b.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(l),IE(s,u)}function L4(s,l){return Xe(s,l)}var Km=null,Cc=null,Yv=!1,Gm=!1,Xv=!1,gl=0;function Vs(s){s!==Cc&&s.next===null&&(Cc===null?Km=Cc=s:Cc=Cc.next=s),Gm=!0,Yv||(Yv=!0,U4())}function yd(s,l){if(!Xv&&Gm){Xv=!0;do for(var u=!1,y=Km;y!==null;){if(s!==0){var b=y.pendingLanes;if(b===0)var N=0;else{var D=y.suspendedLanes,F=y.pingedLanes;N=(1<<31-Le(42|s)+1)-1,N&=b&~(D&~F),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(u=!0,LE(y,N))}else N=tn,N=We(y,y===En?N:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(N&3)===0||ze(y,N)||(u=!0,LE(y,N));y=y.next}while(u);Xv=!1}}function B4(){DE()}function DE(){Gm=Yv=!1;var s=0;gl!==0&&(W4()&&(s=gl),gl=0);for(var l=Ee(),u=null,y=Km;y!==null;){var b=y.next,N=PE(y,l);N===0?(y.next=null,u===null?Km=b:u.next=b,b===null&&(Cc=u)):(u=y,(s!==0||(N&3)!==0)&&(Gm=!0)),y=b}yd(s)}function PE(s,l){for(var u=s.suspendedLanes,y=s.pingedLanes,b=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var D=31-Le(N),F=1<<D,J=b[D];J===-1?((F&u)===0||(F&y)!==0)&&(b[D]=lt(F,l)):J<=l&&(s.expiredLanes|=F),N&=~F}if(l=En,u=tn,u=We(s,s===l?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y=s.callbackNode,u===0||s===l&&(pn===2||pn===9)||s.cancelPendingCommit!==null)return y!==null&&y!==null&&Ue(y),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ze(s,u)){if(l=u&-u,l===s.callbackPriority)return l;switch(y!==null&&Ue(y),Us(u)){case 2:case 8:u=fe;break;case 32:u=we;break;case 268435456:u=ve;break;default:u=we}return y=$E.bind(null,s),u=Xe(u,y),s.callbackPriority=l,s.callbackNode=u,l}return y!==null&&y!==null&&Ue(y),s.callbackPriority=2,s.callbackNode=null,2}function $E(s,l){if(Ar!==0&&Ar!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Vm()&&s.callbackNode!==u)return null;var y=tn;return y=We(s,s===En?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y===0?null:(bE(s,y,l),PE(s,Ee()),s.callbackNode!=null&&s.callbackNode===u?$E.bind(null,s):null)}function LE(s,l){if(Vm())return null;bE(s,l,!0)}function U4(){X4(function(){(hn&6)!==0?Xe(W,B4):DE()})}function Qv(){return gl===0&&(gl=Bt()),gl}function BE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:am(""+s)}function UE(s,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,s.id&&u.setAttribute("form",s.id),l.parentNode.insertBefore(u,l),s=new FormData(s),u.parentNode.removeChild(u),s}function q4(s,l,u,y,b){if(l==="submit"&&u&&u.stateNode===b){var N=BE((b[An]||null).action),D=y.submitter;D&&(l=(l=D[An]||null)?BE(l.formAction):D.getAttribute("formAction"),l!==null&&(N=l,D=null));var F=new lm("action","action",null,y,b);s.push({event:F,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(gl!==0){var J=D?UE(b,D):new FormData(b);gv(u,{pending:!0,data:J,method:b.method,action:N},null,J)}}else typeof N=="function"&&(F.preventDefault(),J=D?UE(b,D):new FormData(b),gv(u,{pending:!0,data:J,method:b.method,action:N},N,J))},currentTarget:b}]})}}for(var Zv=0;Zv<Pg.length;Zv++){var Jv=Pg[Zv],z4=Jv.toLowerCase(),F4=Jv[0].toUpperCase()+Jv.slice(1);js(z4,"on"+F4)}js(bN,"onAnimationEnd"),js(_N,"onAnimationIteration"),js(xN,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(i4,"onTransitionRun"),js(o4,"onTransitionStart"),js(l4,"onTransitionCancel"),js(SN,"onTransitionEnd"),Be("onMouseEnter",["mouseout","mouseover"]),Be("onMouseLeave",["mouseout","mouseover"]),Be("onPointerEnter",["pointerout","pointerover"]),Be("onPointerLeave",["pointerout","pointerover"]),Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gd));function qE(s,l){l=(l&4)!==0;for(var u=0;u<s.length;u++){var y=s[u],b=y.event;y=y.listeners;e:{var N=void 0;if(l)for(var D=y.length-1;0<=D;D--){var F=y[D],J=F.instance,pe=F.currentTarget;if(F=F.listener,J!==N&&b.isPropagationStopped())break e;N=F,b.currentTarget=pe;try{N(b)}catch(Me){Im(Me)}b.currentTarget=null,N=J}else for(D=0;D<y.length;D++){if(F=y[D],J=F.instance,pe=F.currentTarget,F=F.listener,J!==N&&b.isPropagationStopped())break e;N=F,b.currentTarget=pe;try{N(b)}catch(Me){Im(Me)}b.currentTarget=null,N=J}}}}function Wt(s,l){var u=l[ba];u===void 0&&(u=l[ba]=new Set);var y=s+"__bubble";u.has(y)||(zE(l,s,2,!1),u.add(y))}function eb(s,l,u){var y=0;l&&(y|=4),zE(u,s,y,l)}var Wm="_reactListening"+Math.random().toString(36).slice(2);function tb(s){if(!s[Wm]){s[Wm]=!0,xa.forEach(function(u){u!=="selectionchange"&&(H4.has(u)||eb(u,!1,s),eb(u,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Wm]||(l[Wm]=!0,eb("selectionchange",!1,l))}}function zE(s,l,u,y){switch(fC(l)){case 2:var b=gU;break;case 8:b=vU;break;default:b=pb}u=b.bind(null,l,u,s),b=void 0,!wg||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),y?b!==void 0?s.addEventListener(l,u,{capture:!0,passive:b}):s.addEventListener(l,u,!0):b!==void 0?s.addEventListener(l,u,{passive:b}):s.addEventListener(l,u,!1)}function nb(s,l,u,y,b){var N=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var F=y.stateNode.containerInfo;if(F===b)break;if(D===4)for(D=y.return;D!==null;){var J=D.tag;if((J===3||J===4)&&D.stateNode.containerInfo===b)return;D=D.return}for(;F!==null;){if(D=At(F),D===null)return;if(J=D.tag,J===5||J===6||J===26||J===27){y=N=D;continue e}F=F.parentNode}}y=y.return}Yj(function(){var pe=N,Me=xg(u),$e=[];e:{var ge=wN.get(s);if(ge!==void 0){var be=lm,Tt=s;switch(s){case"keypress":if(im(u)===0)break e;case"keydown":case"keyup":be=L5;break;case"focusin":Tt="focus",be=Eg;break;case"focusout":Tt="blur",be=Eg;break;case"beforeblur":case"afterblur":be=Eg;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Zj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=A5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=q5;break;case bN:case _N:case xN:be=T5;break;case SN:be=F5;break;case"scroll":case"scrollend":be=j5;break;case"wheel":be=V5;break;case"copy":case"cut":case"paste":be=O5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=eN;break;case"toggle":case"beforetoggle":be=G5}var Et=(l&4)!==0,xn=!Et&&(s==="scroll"||s==="scrollend"),ce=Et?ge!==null?ge+"Capture":null:ge;Et=[];for(var ae=pe,me;ae!==null;){var Pe=ae;if(me=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||me===null||ce===null||(Pe=Pu(ae,ce),Pe!=null&&Et.push(vd(ae,Pe,me))),xn)break;ae=ae.return}0<Et.length&&(ge=new be(ge,Tt,null,u,Me),$e.push({event:ge,listeners:Et}))}}if((l&7)===0){e:{if(ge=s==="mouseover"||s==="pointerover",be=s==="mouseout"||s==="pointerout",ge&&u!==_g&&(Tt=u.relatedTarget||u.fromElement)&&(At(Tt)||Tt[za]))break e;if((be||ge)&&(ge=Me.window===Me?Me:(ge=Me.ownerDocument)?ge.defaultView||ge.parentWindow:window,be?(Tt=u.relatedTarget||u.toElement,be=pe,Tt=Tt?At(Tt):null,Tt!==null&&(xn=o(Tt),Et=Tt.tag,Tt!==xn||Et!==5&&Et!==27&&Et!==6)&&(Tt=null)):(be=null,Tt=pe),be!==Tt)){if(Et=Zj,Pe="onMouseLeave",ce="onMouseEnter",ae="mouse",(s==="pointerout"||s==="pointerover")&&(Et=eN,Pe="onPointerLeave",ce="onPointerEnter",ae="pointer"),xn=be==null?ge:pr(be),me=Tt==null?ge:pr(Tt),ge=new Et(Pe,ae+"leave",be,u,Me),ge.target=xn,ge.relatedTarget=me,Pe=null,At(Me)===pe&&(Et=new Et(ce,ae+"enter",Tt,u,Me),Et.target=me,Et.relatedTarget=xn,Pe=Et),xn=Pe,be&&Tt)t:{for(Et=be,ce=Tt,ae=0,me=Et;me;me=Tc(me))ae++;for(me=0,Pe=ce;Pe;Pe=Tc(Pe))me++;for(;0<ae-me;)Et=Tc(Et),ae--;for(;0<me-ae;)ce=Tc(ce),me--;for(;ae--;){if(Et===ce||ce!==null&&Et===ce.alternate)break t;Et=Tc(Et),ce=Tc(ce)}Et=null}else Et=null;be!==null&&FE($e,ge,be,Et,!1),Tt!==null&&xn!==null&&FE($e,xn,Tt,Et,!0)}}e:{if(ge=pe?pr(pe):window,be=ge.nodeName&&ge.nodeName.toLowerCase(),be==="select"||be==="input"&&ge.type==="file")var ut=lN;else if(iN(ge))if(cN)ut=r4;else{ut=t4;var Kt=e4}else be=ge.nodeName,!be||be.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?pe&&bg(pe.elementType)&&(ut=lN):ut=n4;if(ut&&(ut=ut(s,pe))){oN($e,ut,u,Me);break e}Kt&&Kt(s,ge,pe),s==="focusout"&&pe&&ge.type==="number"&&pe.memoizedProps.value!=null&&wa(ge,"number",ge.value)}switch(Kt=pe?pr(pe):window,s){case"focusin":(iN(Kt)||Kt.contentEditable==="true")&&(sc=Kt,Mg=pe,Hu=null);break;case"focusout":Hu=Mg=sc=null;break;case"mousedown":Ig=!0;break;case"contextmenu":case"mouseup":case"dragend":Ig=!1,gN($e,u,Me);break;case"selectionchange":if(s4)break;case"keydown":case"keyup":gN($e,u,Me)}var gt;if(Tg)e:{switch(s){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else ac?aN(s,u)&&(Ct="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ct="onCompositionStart");Ct&&(tN&&u.locale!=="ko"&&(ac||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&ac&&(gt=Xj()):(eo=Me,jg="value"in eo?eo.value:eo.textContent,ac=!0)),Kt=Ym(pe,Ct),0<Kt.length&&(Ct=new Jj(Ct,s,null,u,Me),$e.push({event:Ct,listeners:Kt}),gt?Ct.data=gt:(gt=sN(u),gt!==null&&(Ct.data=gt)))),(gt=Y5?X5(s,u):Q5(s,u))&&(Ct=Ym(pe,"onBeforeInput"),0<Ct.length&&(Kt=new Jj("onBeforeInput","beforeinput",null,u,Me),$e.push({event:Kt,listeners:Ct}),Kt.data=gt)),q4($e,s,pe,u,Me)}qE($e,l)})}function vd(s,l,u){return{instance:s,listener:l,currentTarget:u}}function Ym(s,l){for(var u=l+"Capture",y=[];s!==null;){var b=s,N=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||N===null||(b=Pu(s,u),b!=null&&y.unshift(vd(s,b,N)),b=Pu(s,l),b!=null&&y.push(vd(s,b,N))),s.tag===3)return y;s=s.return}return[]}function Tc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function FE(s,l,u,y,b){for(var N=l._reactName,D=[];u!==null&&u!==y;){var F=u,J=F.alternate,pe=F.stateNode;if(F=F.tag,J!==null&&J===y)break;F!==5&&F!==26&&F!==27||pe===null||(J=pe,b?(pe=Pu(u,N),pe!=null&&D.unshift(vd(u,pe,J))):b||(pe=Pu(u,N),pe!=null&&D.push(vd(u,pe,J)))),u=u.return}D.length!==0&&s.push({event:l,listeners:D})}var V4=/\r\n?/g,K4=/\u0000|\uFFFD/g;function HE(s){return(typeof s=="string"?s:""+s).replace(V4,`
`).replace(K4,"")}function VE(s,l){return l=HE(l),HE(s)===l}function Xm(){}function _n(s,l,u,y,b,N){switch(u){case"children":typeof y=="string"?l==="body"||l==="textarea"&&y===""||Ji(s,y):(typeof y=="number"||typeof y=="bigint")&&l!=="body"&&Ji(s,""+y);break;case"className":Sa(s,"class",y);break;case"tabIndex":Sa(s,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Sa(s,u,y);break;case"style":Gj(s,y,N);break;case"data":if(l!=="object"){Sa(s,"data",y);break}case"src":case"href":if(y===""&&(l!=="a"||u!=="href")){s.removeAttribute(u);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(u);break}y=am(""+y),s.setAttribute(u,y);break;case"action":case"formAction":if(typeof y=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(u==="formAction"?(l!=="input"&&_n(s,l,"name",b.name,b,null),_n(s,l,"formEncType",b.formEncType,b,null),_n(s,l,"formMethod",b.formMethod,b,null),_n(s,l,"formTarget",b.formTarget,b,null)):(_n(s,l,"encType",b.encType,b,null),_n(s,l,"method",b.method,b,null),_n(s,l,"target",b.target,b,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(u);break}y=am(""+y),s.setAttribute(u,y);break;case"onClick":y!=null&&(s.onclick=Xm);break;case"onScroll":y!=null&&Wt("scroll",s);break;case"onScrollEnd":y!=null&&Wt("scrollend",s);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(u=y.__html,u!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":s.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){s.removeAttribute("xlink:href");break}u=am(""+y),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(u,""+y):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":y===!0?s.setAttribute(u,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(u,y):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?s.setAttribute(u,y):s.removeAttribute(u);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?s.removeAttribute(u):s.setAttribute(u,y);break;case"popover":Wt("beforetoggle",s),Wt("toggle",s),Qr(s,"popover",y);break;case"xlinkActuate":In(s,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":In(s,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":In(s,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":In(s,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":In(s,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":In(s,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":In(s,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":In(s,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":In(s,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Qr(s,"is",y);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=S5.get(u)||u,Qr(s,u,y))}}function rb(s,l,u,y,b,N){switch(u){case"style":Gj(s,y,N);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(u=y.__html,u!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof y=="string"?Ji(s,y):(typeof y=="number"||typeof y=="bigint")&&Ji(s,""+y);break;case"onScroll":y!=null&&Wt("scroll",s);break;case"onScrollEnd":y!=null&&Wt("scrollend",s);break;case"onClick":y!=null&&(s.onclick=Xm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fa.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),l=u.slice(2,b?u.length-7:void 0),N=s[An]||null,N=N!=null?N[u]:null,typeof N=="function"&&s.removeEventListener(l,N,b),typeof y=="function")){typeof N!="function"&&N!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(l,y,b);break e}u in s?s[u]=y:y===!0?s.setAttribute(u,""):Qr(s,u,y)}}}function Er(s,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wt("error",s),Wt("load",s);var y=!1,b=!1,N;for(N in u)if(u.hasOwnProperty(N)){var D=u[N];if(D!=null)switch(N){case"src":y=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_n(s,l,N,D,u,null)}}b&&_n(s,l,"srcSet",u.srcSet,u,null),y&&_n(s,l,"src",u.src,u,null);return;case"input":Wt("invalid",s);var F=N=D=b=null,J=null,pe=null;for(y in u)if(u.hasOwnProperty(y)){var Me=u[y];if(Me!=null)switch(y){case"name":b=Me;break;case"type":D=Me;break;case"checked":J=Me;break;case"defaultChecked":pe=Me;break;case"value":N=Me;break;case"defaultValue":F=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,l));break;default:_n(s,l,y,Me,u,null)}}vg(s,N,F,J,pe,D,b,!1),nr(s);return;case"select":Wt("invalid",s),y=D=N=null;for(b in u)if(u.hasOwnProperty(b)&&(F=u[b],F!=null))switch(b){case"value":N=F;break;case"defaultValue":D=F;break;case"multiple":y=F;default:_n(s,l,b,F,u,null)}l=N,u=D,s.multiple=!!y,l!=null?ws(s,!!y,l,!1):u!=null&&ws(s,!!y,u,!0);return;case"textarea":Wt("invalid",s),N=b=y=null;for(D in u)if(u.hasOwnProperty(D)&&(F=u[D],F!=null))switch(D){case"value":y=F;break;case"defaultValue":b=F;break;case"children":N=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:_n(s,l,D,F,u,null)}rm(s,y,b,N),nr(s);return;case"option":for(J in u)u.hasOwnProperty(J)&&(y=u[J],y!=null)&&(J==="selected"?s.selected=y&&typeof y!="function"&&typeof y!="symbol":_n(s,l,J,y,u,null));return;case"dialog":Wt("beforetoggle",s),Wt("toggle",s),Wt("cancel",s),Wt("close",s);break;case"iframe":case"object":Wt("load",s);break;case"video":case"audio":for(y=0;y<gd.length;y++)Wt(gd[y],s);break;case"image":Wt("error",s),Wt("load",s);break;case"details":Wt("toggle",s);break;case"embed":case"source":case"link":Wt("error",s),Wt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in u)if(u.hasOwnProperty(pe)&&(y=u[pe],y!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_n(s,l,pe,y,u,null)}return;default:if(bg(l)){for(Me in u)u.hasOwnProperty(Me)&&(y=u[Me],y!==void 0&&rb(s,l,Me,y,u,void 0));return}}for(F in u)u.hasOwnProperty(F)&&(y=u[F],y!=null&&_n(s,l,F,y,u,null))}function G4(s,l,u,y){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,N=null,D=null,F=null,J=null,pe=null,Me=null;for(be in u){var $e=u[be];if(u.hasOwnProperty(be)&&$e!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":J=$e;default:y.hasOwnProperty(be)||_n(s,l,be,null,y,$e)}}for(var ge in y){var be=y[ge];if($e=u[ge],y.hasOwnProperty(ge)&&(be!=null||$e!=null))switch(ge){case"type":N=be;break;case"name":b=be;break;case"checked":pe=be;break;case"defaultChecked":Me=be;break;case"value":D=be;break;case"defaultValue":F=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,l));break;default:be!==$e&&_n(s,l,ge,be,y,$e)}}tc(s,D,F,J,pe,Me,N,b);return;case"select":be=D=F=ge=null;for(N in u)if(J=u[N],u.hasOwnProperty(N)&&J!=null)switch(N){case"value":break;case"multiple":be=J;default:y.hasOwnProperty(N)||_n(s,l,N,null,y,J)}for(b in y)if(N=y[b],J=u[b],y.hasOwnProperty(b)&&(N!=null||J!=null))switch(b){case"value":ge=N;break;case"defaultValue":F=N;break;case"multiple":D=N;default:N!==J&&_n(s,l,b,N,y,J)}l=F,u=D,y=be,ge!=null?ws(s,!!u,ge,!1):!!y!=!!u&&(l!=null?ws(s,!!u,l,!0):ws(s,!!u,u?[]:"",!1));return;case"textarea":be=ge=null;for(F in u)if(b=u[F],u.hasOwnProperty(F)&&b!=null&&!y.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:_n(s,l,F,null,y,b)}for(D in y)if(b=y[D],N=u[D],y.hasOwnProperty(D)&&(b!=null||N!=null))switch(D){case"value":ge=b;break;case"defaultValue":be=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==N&&_n(s,l,D,b,y,N)}tl(s,ge,be);return;case"option":for(var Tt in u)ge=u[Tt],u.hasOwnProperty(Tt)&&ge!=null&&!y.hasOwnProperty(Tt)&&(Tt==="selected"?s.selected=!1:_n(s,l,Tt,null,y,ge));for(J in y)ge=y[J],be=u[J],y.hasOwnProperty(J)&&ge!==be&&(ge!=null||be!=null)&&(J==="selected"?s.selected=ge&&typeof ge!="function"&&typeof ge!="symbol":_n(s,l,J,ge,y,be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in u)ge=u[Et],u.hasOwnProperty(Et)&&ge!=null&&!y.hasOwnProperty(Et)&&_n(s,l,Et,null,y,ge);for(pe in y)if(ge=y[pe],be=u[pe],y.hasOwnProperty(pe)&&ge!==be&&(ge!=null||be!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,l));break;default:_n(s,l,pe,ge,y,be)}return;default:if(bg(l)){for(var xn in u)ge=u[xn],u.hasOwnProperty(xn)&&ge!==void 0&&!y.hasOwnProperty(xn)&&rb(s,l,xn,void 0,y,ge);for(Me in y)ge=y[Me],be=u[Me],!y.hasOwnProperty(Me)||ge===be||ge===void 0&&be===void 0||rb(s,l,Me,ge,y,be);return}}for(var ce in u)ge=u[ce],u.hasOwnProperty(ce)&&ge!=null&&!y.hasOwnProperty(ce)&&_n(s,l,ce,null,y,ge);for($e in y)ge=y[$e],be=u[$e],!y.hasOwnProperty($e)||ge===be||ge==null&&be==null||_n(s,l,$e,ge,y,be)}var ab=null,sb=null;function Qm(s){return s.nodeType===9?s:s.ownerDocument}function KE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GE(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function ib(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ob=null;function W4(){var s=window.event;return s&&s.type==="popstate"?s===ob?!1:(ob=s,!0):(ob=null,!1)}var WE=typeof setTimeout=="function"?setTimeout:void 0,Y4=typeof clearTimeout=="function"?clearTimeout:void 0,YE=typeof Promise=="function"?Promise:void 0,X4=typeof queueMicrotask=="function"?queueMicrotask:typeof YE<"u"?function(s){return YE.resolve(null).then(s).catch(Q4)}:WE;function Q4(s){setTimeout(function(){throw s})}function go(s){return s==="head"}function XE(s,l){var u=l,y=0,b=0;do{var N=u.nextSibling;if(s.removeChild(u),N&&N.nodeType===8)if(u=N.data,u==="/$"){if(0<y&&8>y){u=y;var D=s.ownerDocument;if(u&1&&bd(D.documentElement),u&2&&bd(D.body),u&4)for(u=D.head,bd(u),D=u.firstChild;D;){var F=D.nextSibling,J=D.nodeName;D[Mt]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&D.rel.toLowerCase()==="stylesheet"||u.removeChild(D),D=F}}if(b===0){s.removeChild(N),Ed(l);return}b--}else u==="$"||u==="$?"||u==="$!"?b++:y=u.charCodeAt(0)-48;else y=0;u=N}while(u);Ed(l)}function lb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":lb(u),$t(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function Z4(s,l,u,y){for(;s.nodeType===1;){var b=u;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!y&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(y){if(!s[Mt])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(N=s.getAttribute("rel"),N==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(N!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(N=s.getAttribute("src"),(N!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&N&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var N=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===N)return s}else return s;if(s=As(s.nextSibling),s===null)break}return null}function J4(s,l,u){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=As(s.nextSibling),s===null))return null;return s}function cb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function eU(s,l){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")l();else{var y=function(){l(),u.removeEventListener("DOMContentLoaded",y)};u.addEventListener("DOMContentLoaded",y),s._reactRetry=y}}function As(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var ub=null;function QE(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return s;l--}else u==="/$"&&l++}s=s.previousSibling}return null}function ZE(s,l,u){switch(l=Qm(u),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function bd(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);$t(s)}var Xa=new Map,JE=new Set;function Zm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var bi=G.d;G.d={f:tU,r:nU,D:rU,C:aU,L:sU,m:iU,X:lU,S:oU,M:cU};function tU(){var s=bi.f(),l=Fm();return s||l}function nU(s){var l=Jt(s);l!==null&&l.tag===5&&l.type==="form"?bA(l):bi.r(s)}var kc=typeof document>"u"?null:document;function eC(s,l,u){var y=kc;if(y&&typeof l=="string"&&l){var b=Pr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),JE.has(b)||(JE.add(b),s={rel:s,crossOrigin:u,href:l},y.querySelector(b)===null&&(l=y.createElement("link"),Er(l,"link",s),vn(l),y.head.appendChild(l)))}}function rU(s){bi.D(s),eC("dns-prefetch",s,null)}function aU(s,l){bi.C(s,l),eC("preconnect",s,l)}function sU(s,l,u){bi.L(s,l,u);var y=kc;if(y&&s&&l){var b='link[rel="preload"][as="'+Pr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Pr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Pr(u.imageSizes)+'"]')):b+='[href="'+Pr(s)+'"]';var N=b;switch(l){case"style":N=Oc(s);break;case"script":N=Rc(s)}Xa.has(N)||(s=h({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:s,as:l},u),Xa.set(N,s),y.querySelector(b)!==null||l==="style"&&y.querySelector(_d(N))||l==="script"&&y.querySelector(xd(N))||(l=y.createElement("link"),Er(l,"link",s),vn(l),y.head.appendChild(l)))}}function iU(s,l){bi.m(s,l);var u=kc;if(u&&s){var y=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Pr(y)+'"][href="'+Pr(s)+'"]',N=b;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Rc(s)}if(!Xa.has(N)&&(s=h({rel:"modulepreload",href:s},l),Xa.set(N,s),u.querySelector(b)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(xd(N)))return}y=u.createElement("link"),Er(y,"link",s),vn(y),u.head.appendChild(y)}}}function oU(s,l,u){bi.S(s,l,u);var y=kc;if(y&&s){var b=nn(y).hoistableStyles,N=Oc(s);l=l||"default";var D=b.get(N);if(!D){var F={loading:0,preload:null};if(D=y.querySelector(_d(N)))F.loading=5;else{s=h({rel:"stylesheet",href:s,"data-precedence":l},u),(u=Xa.get(N))&&db(s,u);var J=D=y.createElement("link");vn(J),Er(J,"link",s),J._p=new Promise(function(pe,Me){J.onload=pe,J.onerror=Me}),J.addEventListener("load",function(){F.loading|=1}),J.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Jm(D,l,y)}D={type:"stylesheet",instance:D,count:1,state:F},b.set(N,D)}}}function lU(s,l){bi.X(s,l);var u=kc;if(u&&s){var y=nn(u).hoistableScripts,b=Rc(s),N=y.get(b);N||(N=u.querySelector(xd(b)),N||(s=h({src:s,async:!0},l),(l=Xa.get(b))&&fb(s,l),N=u.createElement("script"),vn(N),Er(N,"link",s),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},y.set(b,N))}}function cU(s,l){bi.M(s,l);var u=kc;if(u&&s){var y=nn(u).hoistableScripts,b=Rc(s),N=y.get(b);N||(N=u.querySelector(xd(b)),N||(s=h({src:s,async:!0,type:"module"},l),(l=Xa.get(b))&&fb(s,l),N=u.createElement("script"),vn(N),Er(N,"link",s),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},y.set(b,N))}}function tC(s,l,u,y){var b=(b=ee.current)?Zm(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=Oc(u.href),u=nn(b).hoistableStyles,y=u.get(l),y||(y={type:"style",instance:null,count:0,state:null},u.set(l,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Oc(u.href);var N=nn(b).hoistableStyles,D=N.get(s);if(D||(b=b.ownerDocument||b,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(s,D),(N=b.querySelector(_d(s)))&&!N._p&&(D.instance=N,D.state.loading=5),Xa.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Xa.set(s,u),N||uU(b,s,u,D.state))),l&&y===null)throw Error(r(528,""));return D}if(l&&y!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Rc(u),u=nn(b).hoistableScripts,y=u.get(l),y||(y={type:"script",instance:null,count:0,state:null},u.set(l,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Oc(s){return'href="'+Pr(s)+'"'}function _d(s){return'link[rel="stylesheet"]['+s+"]"}function nC(s){return h({},s,{"data-precedence":s.precedence,precedence:null})}function uU(s,l,u,y){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?y.loading=1:(l=s.createElement("link"),y.preload=l,l.addEventListener("load",function(){return y.loading|=1}),l.addEventListener("error",function(){return y.loading|=2}),Er(l,"link",u),vn(l),s.head.appendChild(l))}function Rc(s){return'[src="'+Pr(s)+'"]'}function xd(s){return"script[async]"+s}function rC(s,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var y=s.querySelector('style[data-href~="'+Pr(u.href)+'"]');if(y)return l.instance=y,vn(y),y;var b=h({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return y=(s.ownerDocument||s).createElement("style"),vn(y),Er(y,"style",b),Jm(y,u.precedence,s),l.instance=y;case"stylesheet":b=Oc(u.href);var N=s.querySelector(_d(b));if(N)return l.state.loading|=4,l.instance=N,vn(N),N;y=nC(u),(b=Xa.get(b))&&db(y,b),N=(s.ownerDocument||s).createElement("link"),vn(N);var D=N;return D._p=new Promise(function(F,J){D.onload=F,D.onerror=J}),Er(N,"link",y),l.state.loading|=4,Jm(N,u.precedence,s),l.instance=N;case"script":return N=Rc(u.src),(b=s.querySelector(xd(N)))?(l.instance=b,vn(b),b):(y=u,(b=Xa.get(N))&&(y=h({},u),fb(y,b)),s=s.ownerDocument||s,b=s.createElement("script"),vn(b),Er(b,"link",y),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(y=l.instance,l.state.loading|=4,Jm(y,u.precedence,s));return l.instance}function Jm(s,l,u){for(var y=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=y.length?y[y.length-1]:null,N=b,D=0;D<y.length;D++){var F=y[D];if(F.dataset.precedence===l)N=F;else if(N!==b)break}N?N.parentNode.insertBefore(s,N.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(s,l.firstChild))}function db(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function fb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var eh=null;function aC(s,l,u){if(eh===null){var y=new Map,b=eh=new Map;b.set(u,y)}else b=eh,y=b.get(u),y||(y=new Map,b.set(u,y));if(y.has(s))return y;for(y.set(s,null),u=u.getElementsByTagName(s),b=0;b<u.length;b++){var N=u[b];if(!(N[Mt]||N[Fn]||s==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var D=N.getAttribute(l)||"";D=s+D;var F=y.get(D);F?F.push(N):y.set(D,[N])}}return y}function sC(s,l,u){s=s.ownerDocument||s,s.head.insertBefore(u,l==="title"?s.querySelector("head > title"):null)}function dU(s,l,u){if(u===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function iC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Sd=null;function fU(){}function mU(s,l,u){if(Sd===null)throw Error(r(475));var y=Sd;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Oc(u.href),N=s.querySelector(_d(b));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(y.count++,y=th.bind(y),s.then(y,y)),l.state.loading|=4,l.instance=N,vn(N);return}N=s.ownerDocument||s,u=nC(u),(b=Xa.get(b))&&db(u,b),N=N.createElement("link"),vn(N);var D=N;D._p=new Promise(function(F,J){D.onload=F,D.onerror=J}),Er(N,"link",u),l.instance=N}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(y.count++,l=th.bind(y),s.addEventListener("load",l),s.addEventListener("error",l))}}function hU(){if(Sd===null)throw Error(r(475));var s=Sd;return s.stylesheets&&s.count===0&&mb(s,s.stylesheets),0<s.count?function(l){var u=setTimeout(function(){if(s.stylesheets&&mb(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u)}}:null}function th(){if(this.count--,this.count===0){if(this.stylesheets)mb(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nh=null;function mb(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nh=new Map,l.forEach(pU,s),nh=null,th.call(s))}function pU(s,l){if(!(l.state.loading&4)){var u=nh.get(s);if(u)var y=u.get(null);else{u=new Map,nh.set(s,u);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<b.length;N++){var D=b[N];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(u.set(D.dataset.precedence,D),y=D)}y&&u.set(null,y)}b=l.instance,D=b.getAttribute("data-precedence"),N=u.get(D)||y,N===y&&u.set(null,b),u.set(D,b),this.count++,y=th.bind(this),b.addEventListener("load",y),b.addEventListener("error",y),N?N.parentNode.insertBefore(b,N.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var wd={$$typeof:E,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function yU(s,l,u,y,b,N,D,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.hiddenUpdates=kn(null),this.identifierPrefix=y,this.onUncaughtError=b,this.onCaughtError=N,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function oC(s,l,u,y,b,N,D,F,J,pe,Me,$e){return s=new yU(s,l,u,D,F,J,pe,$e),l=1,N===!0&&(l|=24),N=Na(3,null,null,l),s.current=N,N.stateNode=s,l=Wg(),l.refCount++,s.pooledCache=l,l.refCount++,N.memoizedState={element:y,isDehydrated:u,cache:l},Zg(N),s}function lC(s){return s?(s=cc,s):cc}function cC(s,l,u,y,b,N){b=lC(b),y.context===null?y.context=b:y.pendingContext=b,y=ro(l),y.payload={element:u},N=N===void 0?null:N,N!==null&&(y.callback=N),u=ao(s,y,l),u!==null&&(ka(u,s,l),Ju(u,s,l))}function uC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<l?u:l}}function hb(s,l){uC(s,l),(s=s.alternate)&&uC(s,l)}function dC(s){if(s.tag===13){var l=lc(s,67108864);l!==null&&ka(l,s,67108864),hb(s,67108864)}}var rh=!0;function gU(s,l,u,y){var b=$.T;$.T=null;var N=G.p;try{G.p=2,pb(s,l,u,y)}finally{G.p=N,$.T=b}}function vU(s,l,u,y){var b=$.T;$.T=null;var N=G.p;try{G.p=8,pb(s,l,u,y)}finally{G.p=N,$.T=b}}function pb(s,l,u,y){if(rh){var b=yb(y);if(b===null)nb(s,l,y,ah,u),mC(s,y);else if(_U(b,s,l,u,y))y.stopPropagation();else if(mC(s,y),l&4&&-1<bU.indexOf(s)){for(;b!==null;){var N=Jt(b);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var D=Ne(N.pendingLanes);if(D!==0){var F=N;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var J=1<<31-Le(D);F.entanglements[1]|=J,D&=~J}Vs(N),(hn&6)===0&&(qm=Ee()+500,yd(0))}}break;case 13:F=lc(N,2),F!==null&&ka(F,N,2),Fm(),hb(N,2)}if(N=yb(y),N===null&&nb(s,l,y,ah,u),N===b)break;b=N}b!==null&&y.stopPropagation()}else nb(s,l,y,null,u)}}function yb(s){return s=xg(s),gb(s)}var ah=null;function gb(s){if(ah=null,s=At(s),s!==null){var l=o(s);if(l===null)s=null;else{var u=l.tag;if(u===13){if(s=c(l),s!==null)return s;s=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return ah=s,null}function fC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case W:return 2;case fe:return 8;case we:case de:return 32;case ve:return 268435456;default:return 32}default:return 32}}var vb=!1,vo=null,bo=null,_o=null,jd=new Map,Nd=new Map,xo=[],bU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mC(s,l){switch(s){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":jd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nd.delete(l.pointerId)}}function Ad(s,l,u,y,b,N){return s===null||s.nativeEvent!==N?(s={blockedOn:l,domEventName:u,eventSystemFlags:y,nativeEvent:N,targetContainers:[b]},l!==null&&(l=Jt(l),l!==null&&dC(l)),s):(s.eventSystemFlags|=y,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function _U(s,l,u,y,b){switch(l){case"focusin":return vo=Ad(vo,s,l,u,y,b),!0;case"dragenter":return bo=Ad(bo,s,l,u,y,b),!0;case"mouseover":return _o=Ad(_o,s,l,u,y,b),!0;case"pointerover":var N=b.pointerId;return jd.set(N,Ad(jd.get(N)||null,s,l,u,y,b)),!0;case"gotpointercapture":return N=b.pointerId,Nd.set(N,Ad(Nd.get(N)||null,s,l,u,y,b)),!0}return!1}function hC(s){var l=At(s.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=c(u),l!==null){s.blockedOn=l,ai(s.priority,function(){if(u.tag===13){var y=Ta();y=rn(y);var b=lc(u,y);b!==null&&ka(b,u,y),hb(u,y)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sh(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var u=yb(s.nativeEvent);if(u===null){u=s.nativeEvent;var y=new u.constructor(u.type,u);_g=y,u.target.dispatchEvent(y),_g=null}else return l=Jt(u),l!==null&&dC(l),s.blockedOn=u,!1;l.shift()}return!0}function pC(s,l,u){sh(s)&&u.delete(l)}function xU(){vb=!1,vo!==null&&sh(vo)&&(vo=null),bo!==null&&sh(bo)&&(bo=null),_o!==null&&sh(_o)&&(_o=null),jd.forEach(pC),Nd.forEach(pC)}function ih(s,l){s.blockedOn===l&&(s.blockedOn=null,vb||(vb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xU)))}var oh=null;function yC(s){oh!==s&&(oh=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){oh===s&&(oh=null);for(var l=0;l<s.length;l+=3){var u=s[l],y=s[l+1],b=s[l+2];if(typeof y!="function"){if(gb(y||u)===null)continue;break}var N=Jt(u);N!==null&&(s.splice(l,3),l-=3,gv(N,{pending:!0,data:b,method:u.method,action:y},y,b))}}))}function Ed(s){function l(J){return ih(J,s)}vo!==null&&ih(vo,s),bo!==null&&ih(bo,s),_o!==null&&ih(_o,s),jd.forEach(l),Nd.forEach(l);for(var u=0;u<xo.length;u++){var y=xo[u];y.blockedOn===s&&(y.blockedOn=null)}for(;0<xo.length&&(u=xo[0],u.blockedOn===null);)hC(u),u.blockedOn===null&&xo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(y=0;y<u.length;y+=3){var b=u[y],N=u[y+1],D=b[An]||null;if(typeof N=="function")D||yC(u);else if(D){var F=null;if(N&&N.hasAttribute("formAction")){if(b=N,D=N[An]||null)F=D.formAction;else if(gb(b)!==null)continue}else F=D.action;typeof F=="function"?u[y+1]=F:(u.splice(y,3),y-=3),yC(u)}}}function bb(s){this._internalRoot=s}lh.prototype.render=bb.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,y=Ta();cC(u,y,s,l,null,null)},lh.prototype.unmount=bb.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;cC(s.current,2,null,s,null,null),Fm(),l[za]=null}};function lh(s){this._internalRoot=s}lh.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ss();s={blockedOn:null,target:s,priority:l};for(var u=0;u<xo.length&&l!==0&&l<xo[u].priority;u++);xo.splice(u,0,s),u===0&&hC(s)}};var gC=t.version;if(gC!=="19.1.0")throw Error(r(527,gC,"19.1.0"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var SU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{Je=ch.inject(SU),le=ch}catch{}}return Td.createRoot=function(s,l){if(!i(s))throw Error(r(299));var u=!1,y="",b=MA,N=IA,D=DA,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(N=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(F=l.unstable_transitionCallbacks)),l=oC(s,1,!1,null,null,u,y,b,N,D,F,null),s[za]=l.current,tb(s),new bb(l)},Td.hydrateRoot=function(s,l,u){if(!i(s))throw Error(r(299));var y=!1,b="",N=MA,D=IA,F=DA,J=null,pe=null;return u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(N=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(J=u.unstable_transitionCallbacks),u.formState!==void 0&&(pe=u.formState)),l=oC(s,1,!0,l,u??null,y,b,N,D,F,J,pe),l.context=lC(null),u=l.current,y=Ta(),y=rn(y),b=ro(y),b.callback=null,ao(u,b,y),u=y,l.current.lanes=u,Ir(l,u),Vs(l),s[za]=l.current,tb(s),new lh(l)},Td.version="19.1.0",Td}var EC;function OU(){if(EC)return Sb.exports;EC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sb.exports=kU(),Sb.exports}var RU=OU();const MU=ps(RU);var CC="popstate";function IU(e={}){function t(r,i){let{pathname:o,search:c,hash:d}=r.location;return W0("",{pathname:o,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:lf(i)}return PU(t,n,null,e)}function Ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ds(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DU(){return Math.random().toString(36).substring(2,10)}function TC(e,t){return{usr:e.state,key:e.key,idx:t}}function W0(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yu(t):t,state:n,key:t&&t.key||r||DU()}}function lf({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function yu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function PU(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d="POP",f=null,m=h();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function h(){return(c.state||{idx:null}).idx}function g(){d="POP";let S=h(),j=S==null?null:S-m;m=S,f&&f({action:d,location:_.location,delta:j})}function v(S,j){d="PUSH";let A=W0(_.location,S,j);m=h()+1;let E=TC(A,m),C=_.createHref(A);try{c.pushState(E,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(C)}o&&f&&f({action:d,location:_.location,delta:1})}function x(S,j){d="REPLACE";let A=W0(_.location,S,j);m=h();let E=TC(A,m),C=_.createHref(A);c.replaceState(E,"",C),o&&f&&f({action:d,location:_.location,delta:0})}function w(S){return $U(S)}let _={get action(){return d},get location(){return e(i,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(CC,g),f=S,()=>{i.removeEventListener(CC,g),f=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let j=w(S);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:x,go(S){return c.go(S)}};return _}function $U(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ln(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:lf(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function DI(e,t,n="/"){return LU(e,t,n,!1)}function LU(e,t,n,r){let i=typeof t=="string"?yu(t):t,o=Ri(i.pathname||"/",n);if(o==null)return null;let c=PI(e);BU(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let m=XU(o);d=WU(c[f],m,r)}return d}function PI(e,t=[],n=[],r="",i=!1){let o=(c,d,f=i,m)=>{let h={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&f)return;Ln(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=Ei([r,h.relativePath]),v=n.concat(h);c.children&&c.children.length>0&&(Ln(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),PI(c.children,t,v,g,f)),!(c.path==null&&!c.index)&&t.push({path:g,score:KU(g,c.index),routesMeta:v})};return e.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let f of $I(c.path))o(c,d,!0,f)}),t}function $I(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=$I(r.join("/")),d=[];return d.push(...c.map(f=>f===""?o:[o,f].join("/"))),i&&d.push(...c),d.map(f=>e.startsWith("/")&&f===""?"/":f)}function BU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:GU(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var UU=/^:[\w-]+$/,qU=3,zU=2,FU=1,HU=10,VU=-2,kC=e=>e==="*";function KU(e,t){let n=e.split("/"),r=n.length;return n.some(kC)&&(r+=VU),t&&(r+=zU),n.filter(i=>!kC(i)).reduce((i,o)=>i+(UU.test(o)?qU:o===""?FU:HU),r)}function GU(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function WU(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",c=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",g=ip({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},h),v=f.route;if(!g&&m&&n&&!r[r.length-1].route.index&&(g=ip({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:Ei([o,g.pathname]),pathnameBase:e9(Ei([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Ei([o,g.pathnameBase]))}return c}function ip(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=YU(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,{paramName:h,isOptional:g},v)=>{if(h==="*"){let w=d[v]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const x=d[v];return g&&!x?m[h]=void 0:m[h]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:e}}function YU(e,t=!1,n=!0){ds(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function XU(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ds(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ri(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var QU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ZU(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?yu(e):e,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=OC(n.substring(1),"/"):o=OC(n,t)):o=t,{pathname:o,search:t9(r),hash:n9(i)}}function OC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ab(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JU(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function f1(e){let t=JU(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function m1(e,t,n,r=!1){let i;typeof e=="string"?i=yu(e):(i={...e},Ln(!i.pathname||!i.pathname.includes("?"),Ab("?","pathname","search",i)),Ln(!i.pathname||!i.pathname.includes("#"),Ab("#","pathname","hash",i)),Ln(!i.search||!i.search.includes("#"),Ab("#","search","hash",i)));let o=e===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=n;else{let g=t.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?t[g]:"/"}let f=ZU(i,d),m=c&&c!=="/"&&c.endsWith("/"),h=(o||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||h)&&(f.pathname+="/"),f}var Ei=e=>e.join("/").replace(/\/\/+/g,"/"),e9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),t9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,n9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,r9=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function a9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function s9(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var LI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function BI(e,t){let n=e;if(typeof n!="string"||!QU.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(LI)try{let o=new URL(window.location.href),c=n.startsWith("//")?new URL(o.protocol+n):new URL(n),d=Ri(c.pathname,t);c.origin===o.origin&&d!=null?n=d+c.search+c.hash:i=!0}catch{ds(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var UI=["POST","PUT","PATCH","DELETE"];new Set(UI);var i9=["GET",...UI];new Set(i9);var gu=p.createContext(null);gu.displayName="DataRouter";var hy=p.createContext(null);hy.displayName="DataRouterState";var o9=p.createContext(!1),qI=p.createContext({isTransitioning:!1});qI.displayName="ViewTransition";var l9=p.createContext(new Map);l9.displayName="Fetchers";var c9=p.createContext(null);c9.displayName="Await";var Ua=p.createContext(null);Ua.displayName="Navigation";var If=p.createContext(null);If.displayName="Location";var ys=p.createContext({outlet:null,matches:[],isDataRoute:!1});ys.displayName="Route";var h1=p.createContext(null);h1.displayName="RouteError";var zI="REACT_ROUTER_ERROR",u9="REDIRECT",d9="ROUTE_ERROR_RESPONSE";function f9(e){if(e.startsWith(`${zI}:${u9}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function m9(e){if(e.startsWith(`${zI}:${d9}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new r9(t.status,t.statusText,t.data)}catch{}}function h9(e,{relative:t}={}){Ln(vu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=p.useContext(Ua),{hash:i,pathname:o,search:c}=Df(e,{relative:t}),d=o;return n!=="/"&&(d=o==="/"?n:Ei([n,o])),r.createHref({pathname:d,search:c,hash:i})}function vu(){return p.useContext(If)!=null}function cr(){return Ln(vu(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(If).location}var FI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HI(e){p.useContext(Ua).static||p.useLayoutEffect(e)}function Gr(){let{isDataRoute:e}=p.useContext(ys);return e?C9():p9()}function p9(){Ln(vu(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(gu),{basename:t,navigator:n}=p.useContext(Ua),{matches:r}=p.useContext(ys),{pathname:i}=cr(),o=JSON.stringify(f1(r)),c=p.useRef(!1);return HI(()=>{c.current=!0}),p.useCallback((f,m={})=>{if(ds(c.current,FI),!c.current)return;if(typeof f=="number"){n.go(f);return}let h=m1(f,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ei([t,h.pathname])),(m.replace?n.replace:n.push)(h,m.state,m)},[t,n,o,i,e])}var VI=p.createContext(null);function bu(){return p.useContext(VI)}function y9(e){let t=p.useContext(ys).outlet;return p.useMemo(()=>t&&p.createElement(VI.Provider,{value:e},t),[t,e])}function Ls(){let{matches:e}=p.useContext(ys),t=e[e.length-1];return t?t.params:{}}function Df(e,{relative:t}={}){let{matches:n}=p.useContext(ys),{pathname:r}=cr(),i=JSON.stringify(f1(n));return p.useMemo(()=>m1(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function g9(e,t){return KI(e,t)}function KI(e,t,n,r,i){Ln(vu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=p.useContext(Ua),{matches:c}=p.useContext(ys),d=c[c.length-1],f=d?d.params:{},m=d?d.pathname:"/",h=d?d.pathnameBase:"/",g=d&&d.route;{let A=g&&g.path||"";WI(m,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=cr(),x;if(t){let A=typeof t=="string"?yu(t):t;Ln(h==="/"||A.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),x=A}else x=v;let w=x.pathname||"/",_=w;if(h!=="/"){let A=h.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let S=DI(e,{pathname:_});ds(g||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ds(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=S9(S&&S.map(A=>Object.assign({},A,{params:Object.assign({},f,A.params),pathname:Ei([h,o.encodeLocation?o.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Ei([h,o.encodeLocation?o.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),c,n,r,i);return t&&j?p.createElement(If.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function v9(){let e=E9(),t=a9(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:o},"ErrorBoundary")," or"," ",p.createElement("code",{style:o},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:i},n):null,c)}var b9=p.createElement(v9,null),GI=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=m9(e.digest);n&&(e=n)}let t=e!==void 0?p.createElement(ys.Provider,{value:this.props.routeContext},p.createElement(h1.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?p.createElement(_9,{error:e},t):t}};GI.contextType=o9;var Eb=new WeakMap;function _9({children:e,error:t}){let{basename:n}=p.useContext(Ua);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=f9(t.digest);if(r){let i=Eb.get(t);if(i)throw i;let o=BI(r.location,n);if(LI&&!Eb.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Eb.set(t,c),c}return p.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function x9({routeContext:e,match:t,children:n}){let r=p.useContext(gu);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(ys.Provider,{value:e},n)}function S9(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=n?.errors;if(c!=null){let h=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);Ln(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=h),g.route.id){let{loaderData:v,errors:x}=n,w=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||w){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let m=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:s9(n.matches),errorInfo:g})}:void 0;return o.reduceRight((h,g,v)=>{let x,w=!1,_=null,S=null;n&&(x=c&&g.route.id?c[g.route.id]:void 0,_=g.route.errorElement||b9,d&&(f<0&&v===0?(WI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):f===v&&(w=!0,S=g.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,v+1)),A=()=>{let E;return x?E=_:w?E=S:g.route.Component?E=p.createElement(g.route.Component,null):g.route.element?E=g.route.element:E=h,p.createElement(x9,{match:g,routeContext:{outlet:h,matches:j,isDataRoute:n!=null},children:E})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?p.createElement(GI,{location:n.location,revalidation:n.revalidation,component:_,error:x,children:A(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:m}):A()},null)}function p1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w9(e){let t=p.useContext(gu);return Ln(t,p1(e)),t}function j9(e){let t=p.useContext(hy);return Ln(t,p1(e)),t}function N9(e){let t=p.useContext(ys);return Ln(t,p1(e)),t}function y1(e){let t=N9(e),n=t.matches[t.matches.length-1];return Ln(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function A9(){return y1("useRouteId")}function E9(){let e=p.useContext(h1),t=j9("useRouteError"),n=y1("useRouteError");return e!==void 0?e:t.errors?.[n]}function C9(){let{router:e}=w9("useNavigate"),t=y1("useNavigate"),n=p.useRef(!1);return HI(()=>{n.current=!0}),p.useCallback(async(i,o={})=>{ds(n.current,FI),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var RC={};function WI(e,t,n){!t&&!RC[e]&&(RC[e]=!0,ds(!1,n))}p.memo(T9);function T9({routes:e,future:t,state:n,onError:r}){return KI(e,void 0,n,r,t)}function Rn({to:e,replace:t,state:n,relative:r}){Ln(vu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=p.useContext(Ua);ds(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=p.useContext(ys),{pathname:c}=cr(),d=Gr(),f=m1(e,f1(o),c,r==="path"),m=JSON.stringify(f);return p.useEffect(()=>{d(JSON.parse(m),{replace:t,state:n,relative:r})},[d,m,r,t,n]),null}function _u(e){return y9(e.context)}function Ke(e){Ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k9({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:c}){Ln(!vu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),f=p.useMemo(()=>({basename:d,navigator:i,static:o,unstable_useTransitions:c,future:{}}),[d,i,o,c]);typeof n=="string"&&(n=yu(n));let{pathname:m="/",search:h="",hash:g="",state:v=null,key:x="default"}=n,w=p.useMemo(()=>{let _=Ri(m,d);return _==null?null:{location:{pathname:_,search:h,hash:g,state:v,key:x},navigationType:r}},[d,m,h,g,v,x,r]);return ds(w!=null,`<Router basename="${d}"> is not able to match the URL "${m}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:p.createElement(Ua.Provider,{value:f},p.createElement(If.Provider,{children:t,value:w}))}function O9({children:e,location:t}){return g9(Y0(e),t)}function Y0(e,t=[]){let n=[];return p.Children.forEach(e,(r,i)=>{if(!p.isValidElement(r))return;let o=[...t,i];if(r.type===p.Fragment){n.push.apply(n,Y0(r.props.children,o));return}Ln(r.type===Ke,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ln(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Y0(r.props.children,o)),n.push(c)}),n}var ep="get",tp="application/x-www-form-urlencoded";function py(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function R9(e){return py(e)&&e.tagName.toLowerCase()==="button"}function M9(e){return py(e)&&e.tagName.toLowerCase()==="form"}function I9(e){return py(e)&&e.tagName.toLowerCase()==="input"}function D9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function P9(e,t){return e.button===0&&(!t||t==="_self")&&!D9(e)}function X0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function $9(e,t){let n=X0(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}var uh=null;function L9(){if(uh===null)try{new FormData(document.createElement("form"),0),uh=!1}catch{uh=!0}return uh}var B9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cb(e){return e!=null&&!B9.has(e)?(ds(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tp}"`),null):e}function U9(e,t){let n,r,i,o,c;if(M9(e)){let d=e.getAttribute("action");r=d?Ri(d,t):null,n=e.getAttribute("method")||ep,i=Cb(e.getAttribute("enctype"))||tp,o=new FormData(e)}else if(R9(e)||I9(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||d.getAttribute("action");if(r=f?Ri(f,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||ep,i=Cb(e.getAttribute("formenctype"))||Cb(d.getAttribute("enctype"))||tp,o=new FormData(d,e),!L9()){let{name:m,type:h,value:g}=e;if(h==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,g)}}else{if(py(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ep,r=null,i=tp,c=e}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function g1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function q9(e,t,n,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:t&&Ri(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function z9(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F9(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function H9(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let c=await z9(o,n);return c.links?c.links():[]}return[]}));return W9(r.flat(1).filter(F9).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function MC(e,t,n,r,i,o){let c=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,d=(f,m)=>n[m].pathname!==f.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,m)=>c(f,m)||d(f,m)):o==="data"?t.filter((f,m)=>{let h=r.routes[f.route.id];if(!h||!h.hasLoader)return!1;if(c(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function V9(e,t,{includeHydrateFallback:n}={}){return K9(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function K9(e){return[...new Set(e)]}function G9(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function W9(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(G9(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function YI(){let e=p.useContext(gu);return g1(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Y9(){let e=p.useContext(hy);return g1(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var v1=p.createContext(void 0);v1.displayName="FrameworkContext";function XI(){let e=p.useContext(v1);return g1(e,"You must render this element inside a <HydratedRouter> element"),e}function X9(e,t){let n=p.useContext(v1),[r,i]=p.useState(!1),[o,c]=p.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:h,onTouchStart:g}=t,v=p.useRef(null);p.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let _=j=>{j.forEach(A=>{c(A.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),p.useEffect(()=>{if(r){let _=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(_)}}},[r]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return n?e!=="intent"?[o,v,{}]:[o,v,{onFocus:kd(d,x),onBlur:kd(f,w),onMouseEnter:kd(m,x),onMouseLeave:kd(h,w),onTouchStart:kd(g,x)}]:[!1,v,{}]}function kd(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Q9({page:e,...t}){let{router:n}=YI(),r=p.useMemo(()=>DI(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?p.createElement(J9,{page:e,matches:r,...t}):null}function Z9(e){let{manifest:t,routeModules:n}=XI(),[r,i]=p.useState([]);return p.useEffect(()=>{let o=!1;return H9(e,t,n).then(c=>{o||i(c)}),()=>{o=!0}},[e,t,n]),r}function J9({page:e,matches:t,...n}){let r=cr(),{future:i,manifest:o,routeModules:c}=XI(),{basename:d}=YI(),{loaderData:f,matches:m}=Y9(),h=p.useMemo(()=>MC(e,t,m,o,r,"data"),[e,t,m,o,r]),g=p.useMemo(()=>MC(e,t,m,o,r,"assets"),[e,t,m,o,r]),v=p.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,S=!1;if(t.forEach(A=>{let E=o.routes[A.route.id];!E||!E.hasLoader||(!h.some(C=>C.route.id===A.route.id)&&A.route.id in f&&c[A.route.id]?.shouldRevalidate||E.hasClientLoader?S=!0:_.add(A.route.id))}),_.size===0)return[];let j=q9(e,d,i.unstable_trailingSlashAwareDataRequests,"data");return S&&_.size>0&&j.searchParams.set("_routes",t.filter(A=>_.has(A.route.id)).map(A=>A.route.id).join(",")),[j.pathname+j.search]},[d,i.unstable_trailingSlashAwareDataRequests,f,r,o,h,t,e,c]),x=p.useMemo(()=>V9(g,o),[g,o]),w=Z9(g);return p.createElement(p.Fragment,null,v.map(_=>p.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),x.map(_=>p.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),w.map(({key:_,link:S})=>p.createElement("link",{key:_,nonce:n.nonce,...S,crossOrigin:S.crossOrigin??n.crossOrigin})))}function e7(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var t7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{t7&&(window.__reactRouterVersion="7.13.0")}catch{}function n7({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=p.useRef();i.current==null&&(i.current=IU({window:r,v5Compat:!0}));let o=i.current,[c,d]=p.useState({action:o.action,location:o.location}),f=p.useCallback(m=>{n===!1?d(m):p.startTransition(()=>d(m))},[n]);return p.useLayoutEffect(()=>o.listen(f),[o,f]),p.createElement(k9,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:n})}var QI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=p.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:d,target:f,to:m,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:v,...x},w){let{basename:_,unstable_useTransitions:S}=p.useContext(Ua),j=typeof m=="string"&&QI.test(m),A=BI(m,_);m=A.to;let E=h9(m,{relative:i}),[C,T,O]=X9(r,x),R=s7(m,{replace:c,state:d,target:f,preventScrollReset:h,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:S});function k(H){t&&t(H),H.defaultPrevented||R(H)}let P=p.createElement("a",{...x,...O,href:A.absoluteURL||E,onClick:A.isExternal||o?t:k,ref:e7(w,T),target:f,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?p.createElement(p.Fragment,null,P,p.createElement(Q9,{page:E})):P});nt.displayName="Link";var Tr=p.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:f,...m},h){let g=Df(c,{relative:m.relative}),v=cr(),x=p.useContext(hy),{navigator:w,basename:_}=p.useContext(Ua),S=x!=null&&u7(g)&&d===!0,j=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,A=v.pathname,E=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(A=A.toLowerCase(),E=E?E.toLowerCase():null,j=j.toLowerCase()),E&&_&&(E=Ri(E,_)||E);const C=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let T=A===j||!i&&A.startsWith(j)&&A.charAt(C)==="/",O=E!=null&&(E===j||!i&&E.startsWith(j)&&E.charAt(j.length)==="/"),R={isActive:T,isPending:O,isTransitioning:S},k=T?t:void 0,P;typeof r=="function"?P=r(R):P=[r,T?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let H=typeof o=="function"?o(R):o;return p.createElement(nt,{...m,"aria-current":k,className:P,ref:h,style:H,to:c,viewTransition:d},typeof f=="function"?f(R):f)});Tr.displayName="NavLink";var r7=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:c=ep,action:d,onSubmit:f,relative:m,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:v,...x},w)=>{let{unstable_useTransitions:_}=p.useContext(Ua),S=l7(),j=c7(d,{relative:m}),A=c.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&QI.test(d),C=T=>{if(f&&f(T),T.defaultPrevented)return;T.preventDefault();let O=T.nativeEvent.submitter,R=O?.getAttribute("formmethod")||c,k=()=>S(O||T.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:i,state:o,relative:m,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:v});_&&n!==!1?p.startTransition(()=>k()):k()};return p.createElement("form",{ref:w,method:A,action:j,onSubmit:r?f:C,...x,"data-discover":!E&&e==="render"?"true":void 0})});r7.displayName="Form";function a7(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZI(e){let t=p.useContext(gu);return Ln(t,a7(e)),t}function s7(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let m=Gr(),h=cr(),g=Df(e,{relative:o});return p.useCallback(v=>{if(P9(v,t)){v.preventDefault();let x=n!==void 0?n:lf(h)===lf(g),w=()=>m(e,{replace:x,state:r,preventScrollReset:i,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:d});f?p.startTransition(()=>w()):w()}},[h,m,g,n,r,t,e,i,o,c,d,f])}function xu(e){ds(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=p.useRef(X0(e)),n=p.useRef(!1),r=cr(),i=p.useMemo(()=>$9(r.search,n.current?null:t.current),[r.search]),o=Gr(),c=p.useCallback((d,f)=>{const m=X0(typeof d=="function"?d(new URLSearchParams(i)):d);n.current=!0,o("?"+m,f)},[o,i]);return[i,c]}var i7=0,o7=()=>`__${String(++i7)}__`;function l7(){let{router:e}=ZI("useSubmit"),{basename:t}=p.useContext(Ua),n=A9(),r=e.fetch,i=e.navigate;return p.useCallback(async(o,c={})=>{let{action:d,method:f,encType:m,formData:h,body:g}=U9(o,t);if(c.navigate===!1){let v=c.fetcherKey||o7();await r(v,n,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:h,body:g,formMethod:c.method||f,formEncType:c.encType||m,flushSync:c.flushSync})}else await i(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:h,body:g,formMethod:c.method||f,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,t,n])}function c7(e,{relative:t}={}){let{basename:n}=p.useContext(Ua),r=p.useContext(ys);Ln(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Df(e||".",{relative:t})},c=cr();if(e==null){o.search=c.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(h=>h==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let h=d.toString();o.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ei([n,o.pathname])),lf(o)}function u7(e,{relative:t}={}){let n=p.useContext(qI);Ln(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZI("useViewTransitionState"),i=Df(e,{relative:t});if(!n.isTransitioning)return!1;let o=Ri(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Ri(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ip(i.pathname,c)!=null||ip(i.pathname,o)!=null}var op=II();const Q0={},JI=/\/+$/;function Bn(){return(Q0?.VITE_API_BASE_URL??Q0?.VITE_API_BASE??"https://api.hydroleaf.se").replace(JI,"")}function eD(){const e=Q0?.VITE_WS_HTTP_URL;return e?e.replace(JI,""):`${Bn()}/ws`}const d7=["x-correlation-id","x-request-id","x-amzn-trace-id","x-trace-id","traceparent"],tD=e=>{const t=e?.headers;if(!t||typeof t.get!="function")return null;for(const n of d7){const r=t.get(n);if(r)return r}return null},nD=async e=>{if(e.bodyUsed)return{data:null,message:""};const t=typeof e.clone=="function"&&!e.bodyUsed?e.clone():e,n=t.headers,i=(typeof n?.get=="function"?n.get("content-type")||"":n?.["content-type"]||n?.["Content-Type"]||"").includes("application/json");try{if(i){const c=await t.json(),d=typeof c=="object"&&c!==null&&"message"in c?c.message:"";return{data:c,message:d||""}}const o=await t.text();if(!o)return{data:null,message:""};try{const c=JSON.parse(o),d=typeof c=="object"&&c!==null&&"message"in c?c.message:"";return{data:c,message:d||o}}catch{return{data:o,message:o}}}catch(o){if(e.bodyUsed||t.bodyUsed)return{data:null,message:""};if(`${o?.message}`.toLowerCase().includes("body stream already read"))return{data:null,message:""};throw o}};async function at(e,t="Request failed"){const{data:n,message:r}=await nD(e);if(!e.ok){const i=new Error(r||`${t} (${e.status})`);throw i.status=e.status,i.payload=n,i.correlationId=tD(e),i}return n}async function rD(e,t="Request failed"){const n=tD(e),{data:r,message:i}=await nD(e);if(!e.ok){const o=new Error(i||`${t} (${e.status})`);throw o.status=e.status,o.payload=r,o.correlationId=n,o}return{data:r,correlationId:n,status:e.status}}let Rs={getAccessToken:()=>null,setAccessToken:()=>{},refreshAccessToken:null,onAuthFailure:null,maxRefreshAttempts:2},dh=null,Kd=0;function f7(e={}){Rs={...Rs,...e}}function Tb(){Kd=0}const m7=e=>e?typeof e=="string"?e:e?.token||e?.accessToken||e?.jwt||null:null,h7=async()=>Rs.refreshAccessToken?(dh||(dh=Promise.resolve(Rs.refreshAccessToken()).catch(e=>{throw e}).finally(()=>{dh=null})),dh):null;async function Ve(e,t={},{token:n,retry:r=!0}={}){const i=n??Rs.getAccessToken?.(),o=t.headers instanceof Headers,c=o?t.headers:{...t.headers||{}};i&&!(o?c.has("Authorization"):c.Authorization)&&(o?c.set("Authorization",`Bearer ${i}`):c.Authorization=`Bearer ${i}`);const d=await fetch(e,{...t,headers:c});if(d.status!==401||!r||!Rs.refreshAccessToken)return d;if(Kd>=Rs.maxRefreshAttempts)return Rs.onAuthFailure?.("refresh_failed"),d;try{const f=await h7(),m=m7(f);if(!m)return Kd+=1,Rs.onAuthFailure?.("expired"),d;Rs.setAccessToken?.(m),Kd=0;const h=o?new Headers(c):{...c};return h instanceof Headers?h.set("Authorization",`Bearer ${m}`):h.Authorization=`Bearer ${m}`,fetch(e,{...t,headers:h})}catch(f){return Kd+=1,Rs.onAuthFailure?.("refresh_failed",f),d}}const Zt=e=>({...e?{Authorization:`Bearer ${e}`}:{},"Content-Type":"application/json"}),aD=Bn(),Ui=`${aD}/api/auth`,sD=`${aD}/api/me`;async function p7(e){if(!e)throw new Error("Invite token is required.");const t=await fetch(`${Ui}/accept-invite/${encodeURIComponent(e)}`);return at(t,"Failed to validate invite")}async function y7(e,t){if(!e)throw new Error("Invite token is required.");const n=await fetch(`${Ui}/accept-invite`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,password:t})});return at(n,"Failed to accept invite")}async function IC(e,{signal:t}={}){if(!e)throw new Error("Authentication is required to load the profile.");const n=await Ve(sD,{headers:Zt(e),signal:t},{token:e});return at(n,"Failed to load profile")}async function g7({signal:e}={}){const t=await Ve(sD,{credentials:"include",signal:e});return at(t,"Failed to load profile")}async function fh({signal:e}={}){const t=await Ve(`${Ui}/refresh`,{method:"POST",credentials:"include",signal:e},{retry:!1,token:!1});return at(t,"Failed to refresh session")}async function v7({signal:e}={}){const t=await Ve(`${Ui}/logout`,{method:"POST",credentials:"include",signal:e});return at(t,"Failed to log out")}async function b7(e,t){if(!e)throw new Error("Reset token is required.");const n=await fetch(`${Ui}/password-reset/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,password:t})});return at(n,"Failed to reset password")}async function iD({email:e,token:t}={}){const n={...t?{Authorization:`Bearer ${t}`}:{},"Content-Type":"application/json"},r=e?JSON.stringify({email:e}):void 0,i=await fetch(`${Ui}/password-reset`,{method:"POST",headers:n,body:r});return at(i,"Failed to request password reset")}async function _7({redirectUri:e}={}){if(!e)throw new Error("Redirect URI is required.");const t=await fetch(`${Ui}/oauth/google/start`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirectUri:e})});return at(t,"Failed to start Google sign-in")}async function x7({signal:e}={}){const t=await fetch(`${Ui}/oauth/providers`,{credentials:"include",signal:e});return at(t,"Failed to load OAuth providers")}async function S7(e,{code:t,state:n,signal:r}={}){if(!t||!n)throw new Error("OAuth callback code and state are required.");const i=new URL(`${Ui}/oauth/${encodeURIComponent(e)}/callback`);i.searchParams.set("code",t),i.searchParams.set("state",n);const o=await fetch(i.toString(),{credentials:"include",signal:r});return at(o,"Failed to complete OAuth sign-in")}function mh(e){const t=e?.user??e??{},n=t.raw??t,r=t.email??t.username??"",i=t.username??n.username??n.userName??"",o=n.fullName??t.fullName??t.displayName??"",c=n.phoneNumber??t.phoneNumber??n.phone??t.phone??"",d=o||t.displayName||t.name||t.fullName||t.nickname||r||"Customer",f=t.pictureUrl||t.picture_url||n.pictureUrl||n.picture_url||t.avatarUrl||n.avatarUrl||null;return{id:t.id??t.userId??null,email:r,username:i,fullName:o,phoneNumber:c,displayName:d,pictureUrl:f,role:t.role??"CUSTOMER",raw:n,features:t.features??t.capabilities??[]}}const b1="storefrontCartSession",Z0="storefront:reset-cart-session",w7=["storefrontCartSession","cartId","sessionId","storefrontCartId","storefrontSessionId"],j7=e=>{if(typeof document>"u"||!e)return;const t="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie=`${e}=; expires=${t}; path=/; SameSite=Lax`},oD=()=>{typeof window<"u"&&window.localStorage.removeItem(b1),w7.forEach(j7)},N7=()=>{typeof window>"u"||window.dispatchEvent(new Event(Z0))},A7=Bn(),DC=`${A7}/api/auth`,E7="Password must be at least 8 characters long.",Gd="authSession",$o={isAuthenticated:!1,token:null,userId:null,role:null,roles:[],permissions:[]},C7={...$o,profile:null,profileError:null,loadingProfile:!1,isBootstrapping:!1,authNotice:null,login:async()=>({success:!1}),register:async()=>({success:!1}),logout:()=>{},clearAuthNotice:()=>{},refreshProfile:()=>{},completeOAuthLogin:async()=>({success:!1})},lD=p.createContext(C7),T7=e=>{if(!e||typeof e!="string")return null;const t=e.split(".");if(t.length<2)return null;try{const n=JSON.parse(window.atob(t[1].replace(/-/g,"+").replace(/_/g,"/")));return n?.exp?n.exp*1e3:null}catch{return null}},hh=()=>{if(typeof window>"u")return $o;const e=window.sessionStorage.getItem(Gd);if(!e)return $o;try{const t=JSON.parse(e);return t.expiry&&t.expiry<=Date.now()?$o:{isAuthenticated:!!t.isAuthenticated,token:t.token||null,userId:t.userId||null,role:t.role||null,roles:Array.isArray(t.roles)?t.roles:[],permissions:Array.isArray(t.permissions)?t.permissions:[]}}catch{return $o}},J0=e=>e?Array.isArray(e)?e.filter(Boolean):e?[e]:[]:[],Mc=e=>{const t=e?.user??e?.profile??e?.data??e??{},n=e?.token||e?.accessToken||e?.jwt||t?.token||t?.accessToken,r=e?.userId||t?.id||t?.userId||e?.id||null,i=J0(e?.roles||t?.roles||e?.role||t?.role),o=e?.role||t?.role||i[0]||null,c=Array.isArray(e?.permissions)?e.permissions:Array.isArray(t?.permissions)?t.permissions:[];return{token:n,userId:r,role:o,roles:i,permissions:c}};function k7({children:e,initialSession:t}){const[n,r]=p.useState(()=>t?{...$o,...t}:hh()),[i,o]=p.useState(null),[c,d]=p.useState(null),[f,m]=p.useState(!1),[h,g]=p.useState(!0),[v,x]=p.useState(null),w=p.useRef(n),_=p.useRef(null),S=p.useRef(!1),j=p.useRef(!1);p.useEffect(()=>{w.current=n},[n]),p.useEffect(()=>{if(!n.isAuthenticated||!i){_.current=null;return}_.current!==i.pictureUrl&&(console.info("[Auth] User pictureUrl:",i.pictureUrl||"(none)"),_.current=i.pictureUrl)},[i,n.isAuthenticated]),p.useEffect(()=>{if(typeof window>"u")return;if(!n.isAuthenticated||!n.token){window.sessionStorage.removeItem(Gd);return}const U=T7(n.token),I={isAuthenticated:n.isAuthenticated,token:n.token,userId:n.userId,role:n.role,roles:n.roles,permissions:n.permissions,expiry:U};window.sessionStorage.setItem(Gd,JSON.stringify(I))},[n]),p.useEffect(()=>{if(n.isAuthenticated)return;const U=hh();U.isAuthenticated&&r(U)},[n.isAuthenticated]),p.useEffect(()=>{const U=I=>{if(I?.key&&I.key!==Gd)return;const L=hh(),$=w.current;if(L.isAuthenticated&&!$.isAuthenticated){r(L);return}!L.isAuthenticated&&$.isAuthenticated&&(r($o),o(null),d(null))};return window.addEventListener("storage",U),()=>{window.removeEventListener("storage",U)}},[]);const A=p.useCallback((U,{fallback:I={}}={})=>{const{token:L,userId:$,role:G,roles:te,permissions:re}=U||{},M=Array.isArray(te)?te.filter(Boolean):J0(G),q=Array.isArray(I?.roles)?I.roles:J0(I?.role),z=M.length>0?M:q,V=G||z[0]||I?.role||null,Y=L||I?.token||null,Z=$||I?.userId||null,ee=Array.isArray(re)&&re.length>0?re:Array.isArray(I?.permissions)?I.permissions:[];if(!Y||!Z||!V)return{success:!1,message:"Login response is missing required fields."};const ie={isAuthenticated:!0,token:Y,userId:Z,role:V,roles:z.length>0?z:[V],permissions:ee};return r(ie),Tb(),j.current=!1,{success:!0,role:V,roles:ie.roles,permissions:ee}},[]),E=p.useCallback(()=>x(null),[]),C=p.useCallback(U=>{r(I=>({...I,token:U||null}))},[]),T=p.useCallback(async()=>{const U=await fh(),I=Mc(U);return I.token?(C(I.token),Tb(),j.current=!1,I.token):null},[fh,C]),O=p.useCallback(async(U,I)=>{const L=U?.trim(),$=I?.trim();if(!L||!$)return{success:!1,role:null,message:"Email and password are required."};try{E();const G=await fetch(`${DC}/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:L,password:$})}),te=await G.text();let re={};if(te)try{re=JSON.parse(te)}catch{re={message:te}}return G.ok?A(Mc(re)):{success:!1,role:null,message:re?.message||`Login failed (${G.status})`}}catch(G){return{success:!1,role:null,message:G?.message||"Login failed. Please try again."}}},[E,A]),R=p.useCallback(async({signal:U}={})=>{try{E();const I=await g7({signal:U});if(U?.aborted)return{success:!1,message:"Sign-in cancelled."};const L=Mc(I),$=A(L);return $.success?(o(mh(I)),{...$,roles:L.roles}):{success:!1,message:"Sign-in failed. Please try again."}}catch(I){return I?.name==="AbortError"?{success:!1,message:"Sign-in cancelled."}:{success:!1,message:I?.message||"Sign-in failed. Please try again."}}},[E,A]),k=p.useCallback(async(U,I)=>{const L=U?.trim(),$=I?.trim();if(!L||!$)return{success:!1,message:"Email and password are required."};try{E();const G=await fetch(`${DC}/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:L,password:$})}),te=await G.text();let re={};if(te)try{re=JSON.parse(te)}catch{re={message:te}}return G.ok?A(Mc(re)):{success:!1,message:re?.message||(G.status===400?E7:"")||`Registration failed (${G.status})`}}catch(G){return{success:!1,message:G?.message||"Registration failed. Please try again."}}},[E,A]),P=p.useCallback(async(U={})=>{const{redirect:I=!0,redirectTo:L="/",clearNotice:$=!0}=U;try{await v7()}catch(G){console.warn("Logout request failed",G)}r($o),o(null),d(null),m(!1),g(!1),j.current=!1,oD(),N7(),$&&x(null),typeof window<"u"&&I&&window.location.assign(L)},[]),H=p.useCallback(U=>{if(j.current)return;j.current=!0,x({type:"error",message:U==="refresh_failed"?"Your session refresh failed. Please sign in again.":"Your session expired. Please sign in again."}),P({redirectTo:"/login",clearNotice:!1})},[P]);f7({getAccessToken:()=>{if(w.current?.token)return w.current.token;if(typeof window>"u")return null;try{const U=window.sessionStorage.getItem(Gd);return U?JSON.parse(U)?.token??null:null}catch{return null}},setAccessToken:C,refreshAccessToken:T,onAuthFailure:H,maxRefreshAttempts:2}),p.useEffect(()=>{if(!n.isAuthenticated&&!S.current){const L=hh();if(L.isAuthenticated){r(L),g(!1);return}}if(n.isAuthenticated||S.current){g(!1);return}S.current=!0;const U=new AbortController;return(async()=>{g(!0),m(!0),d(null);try{const L=await fh({signal:U.signal});if(U.signal.aborted)return;const $=Mc(L);if(!$.token)return;if(C($.token),Tb(),j.current=!1,$.userId&&($.role||$.roles?.length)){A($,{fallback:w.current}),o(mh(L));return}const G=await IC($.token,{signal:U.signal});if(U.signal.aborted)return;const te={...Mc(G),token:$.token};A(te,{fallback:w.current}).success&&o(mh(G))}catch(L){if(L?.name==="AbortError")return;const $=w.current.isAuthenticated||w.current.token;$&&(L?.status===401||L?.status===403)?x({type:"error",message:"Your session expired. Please sign in again."}):$&&L&&x({type:"error",message:"Unable to refresh your session. Please sign in again."})}finally{U.signal.aborted||(m(!1),g(!1))}})(),()=>{U.abort()}},[fh,n.isAuthenticated,A,C]);const K=p.useCallback(async U=>{if(!(!n.isAuthenticated||!n.token)){m(!0),d(null);try{const I=await IC(n.token,{signal:U});if(U?.aborted||!I)return;const L=Array.isArray(I?.roles)?I.roles:Array.isArray(I?.role)?I.role:I?.role?[I.role]:Array.isArray(I?.user?.roles)?I.user.roles:[],$=Array.isArray(I?.permissions)?I.permissions:Array.isArray(I?.user?.permissions)?I.user.permissions:[],G=I?.role||L[0]||I?.user?.role||n.role;o(mh(I)),r(te=>({...te,role:G||te.role,roles:L.length>0?L:te.roles,permissions:$.length>0?$:te.permissions}))}catch(I){if(I?.name==="AbortError")return;if(I?.status===401||I?.status===403){H("expired");return}d(I?.message||"Failed to load profile")}finally{U?.aborted||m(!1)}}},[H,n.isAuthenticated,n.role,n.token]);p.useEffect(()=>{if(!n.isAuthenticated||!n.token){o(null),d(null),m(!1);return}const U=new AbortController;return K(U.signal),()=>{U.abort()}},[K,n.isAuthenticated,n.token]);const B=p.useMemo(()=>({isAuthenticated:n.isAuthenticated,token:n.token,userId:n.userId,role:n.role,roles:n.roles,permissions:n.permissions,profile:i,profileError:c,loadingProfile:f,authNotice:v,isBootstrapping:h,login:O,register:k,logout:P,clearAuthNotice:E,refreshProfile:()=>K(),completeOAuthLogin:R}),[n.isAuthenticated,n.token,n.userId,n.role,n.roles,n.permissions,i,c,f,v,h,O,k,P,E,K,R]);return a.jsx(lD.Provider,{value:B,children:e})}function Xt(){return p.useContext(lD)}const kt={STORE_VIEW:"STORE_VIEW",CUSTOMERS_VIEW:"CUSTOMERS_VIEW",PRODUCTS_MANAGE:"PRODUCTS_MANAGE",ORDERS_MANAGE:"ORDERS_MANAGE",ADMIN_OVERVIEW_VIEW:"ADMIN_OVERVIEW_VIEW",ADMIN_PERMISSIONS_MANAGE:"ADMIN_PERMISSIONS_MANAGE",MONITORING_VIEW:"MONITORING_VIEW"},us=(e,t)=>e?.permissions?.includes(t);function O7(e=[]){return Array.isArray(e)?[kt.PRODUCTS_MANAGE,kt.CUSTOMERS_VIEW,kt.ORDERS_MANAGE].some(t=>e.includes(t)):!1}function Ur({children:e,requiredRoles:t=[],requiredPermissions:n=[]}){const{isAuthenticated:r,role:i,roles:o,permissions:c,isBootstrapping:d}=Xt(),f=cr();if(d)return null;if(!r)return a.jsx(Rn,{to:"/login",replace:!0,state:{from:f}});const m=o?.length?o:i?[i]:[],h=t.includes("SUPER_ADMIN");if(t.length>0&&!t.some(v=>m.includes(v)))return h?a.jsx(Rn,{to:"/store",replace:!0}):a.jsx(Rn,{to:"/not-authorized",replace:!0});const g=m.includes("SUPER_ADMIN");if(n.length>0&&!g){const v={permissions:c};if(!n.every(w=>us(v,w)))return a.jsx(Rn,{to:"/not-authorized",replace:!0})}return e}const ph={SUPER_ADMIN:"/admin/home",ADMIN:"/admin/overview",WORKER:"/monitoring/overview",CUSTOMER:"/store/home"};function cf({role:e,roles:t=[],permissions:n=[]}={}){const r=t?.length?t:e?[e]:[],i=r.includes("SUPER_ADMIN"),o={permissions:n};return i?ph.SUPER_ADMIN:us(o,kt.ADMIN_OVERVIEW_VIEW)?ph.ADMIN:us(o,kt.MONITORING_VIEW)?ph.WORKER:us(o,kt.STORE_VIEW)?"/store/admin/customers":r.includes("CUSTOMER")?ph.CUSTOMER:"/not-authorized"}const cD=({role:e,roles:t}={})=>{const n=Array.isArray(t)?t.filter(Boolean):[];return n.length>0?n:e?[e]:[]},Pf=({role:e,roles:t}={})=>cD({role:e,roles:t}).some(r=>r&&r!=="CUSTOMER"),R7=({role:e,roles:t}={})=>cD({role:e,roles:t}).includes("CUSTOMER")?!Pf({role:e,roles:t}):!1;function M7({children:e}){const{isAuthenticated:t,role:n,roles:r,permissions:i,loadingProfile:o,isBootstrapping:c}=Xt(),d=cr(),f=(r?.length??0)>0||!!n;if(c)return null;if(!t)return a.jsx(Rn,{to:"/login",replace:!0,state:{from:d}});if(o&&!f)return null;if(Pf({role:n,roles:r})){const m=cf({role:n,roles:r,permissions:i});return a.jsx(Rn,{to:m,replace:!0})}return R7({role:n,roles:r})?e:a.jsx(Rn,{to:"/store",replace:!0})}const I7="_page_1eilg_1",D7="_card_1eilg_25",P7="_title_1eilg_45",$7="_subtitle_1eilg_61",L7="_oauthSection_1eilg_77",B7="_divider_1eilg_91",U7="_form_1eilg_127",q7="_label_1eilg_139",z7="_labelHint_1eilg_151",F7="_input_1eilg_165",H7="_inputError_1eilg_197",V7="_fieldError_1eilg_207",K7="_forgotLink_1eilg_219",G7="_error_1eilg_243",W7="_button_1eilg_261",Y7="_helper_1eilg_303",X7="_linkRow_1eilg_343",Pt={page:I7,card:D7,title:P7,subtitle:$7,oauthSection:L7,divider:B7,form:U7,label:q7,labelHint:z7,input:F7,inputError:H7,fieldError:V7,forgotLink:K7,error:G7,button:W7,helper:Y7,linkRow:X7},Q7="_button_12nsa_1",Z7="_icon_12nsa_65",J7="_text_12nsa_93",yh={button:Q7,icon:Z7,text:J7},eq={google:"Continue with Google"},tq=()=>a.jsxs("svg",{viewBox:"0 0 48 48","aria-hidden":"true",focusable:"false",children:[a.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.5 0 6.3 1.5 8.2 3.2l6.1-6.1C34.7 3.1 29.8 1 24 1 14.6 1 6.5 6.5 2.7 14.5l7.4 5.7C11.9 13.8 17.5 9.5 24 9.5z"}),a.jsx("path",{fill:"#4285F4",d:"M46.1 24.5c0-1.6-.1-2.7-.4-3.9H24v7.4h12.6c-.3 2-1.8 5-5 7.1l7.7 5.9c4.5-4.1 7.1-10.1 7.1-16.5z"}),a.jsx("path",{fill:"#FBBC05",d:"M10.1 28.1c-.5-1.5-.9-3-.9-4.6s.3-3.1.8-4.6l-7.4-5.7C1 16.1 0 20.9 0 24.5c0 3.6 1 8.4 2.6 11.3l7.5-5.7z"}),a.jsx("path",{fill:"#34A853",d:"M24 47c6.5 0 12-2.1 16-5.7l-7.7-5.9c-2.1 1.4-4.9 2.4-8.3 2.4-6.5 0-12-4.3-14-10.4l-7.5 5.7C6.4 41.4 14.6 47 24 47z"})]}),nq={google:tq};function rq({provider:e,label:t,onClick:n,disabled:r=!1,loading:i=!1}){const o=e?.toLowerCase(),c=t||eq[o]||"Continue",d=nq[o]||null;return a.jsxs("button",{type:"button",className:`${yh.button} ${o?yh[o]:""}`,onClick:n,disabled:r||i,children:[a.jsx("span",{className:yh.icon,"aria-hidden":"true",children:d?a.jsx(d,{}):null}),a.jsx("span",{className:yh.text,children:i?"Connecting":c})]})}const aq=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,_1=e=>e?aq.test(e):!1,lp=8;function sq(){const{isAuthenticated:e,login:t,role:n,roles:r,permissions:i,authNotice:o,clearAuthNotice:c}=Xt(),d=Gr(),f=cr(),[m,h]=p.useState(""),[g,v]=p.useState(""),[x,w]=p.useState(""),[_,S]=p.useState({}),[j,A]=p.useState(""),[E,C]=p.useState(!1),[T,O]=p.useState(null),R=p.useMemo(()=>{const U=new URLSearchParams(f.search).get("returnUrl");return!U||!U.startsWith("/")?null:U},[f.search]);p.useEffect(()=>{if(e){const U=R||cf({role:n,roles:r,permissions:i});d(U,{replace:!0})}},[e,d,R,n,r,i]),p.useEffect(()=>{let U=!0;const I=new AbortController;return x7({signal:I.signal}).then(L=>{U&&O(L)}).catch(()=>{U&&O([])}),()=>{U=!1,I.abort()}},[]);const k=p.useMemo(()=>Array.isArray(T)?T.some(U=>{if(!U)return!1;if(typeof U=="string")return U.toLowerCase()==="google";const I=U.id||U.provider||U.name||U.slug||"";return typeof I=="string"&&I.toLowerCase()==="google"}):!1,[T]),P=R||f.state?.from?.pathname||null,H=U=>{const I=U?.payload,L=I?.message||I?.error||I?.code||U?.message;return L?typeof L=="string"?L:JSON.stringify(L):""},K=async()=>{A(""),C(!0),c();try{const U=P&&P.startsWith("/")?P:"",I=new URL(U,window.location.origin).toString(),L=await _7({redirectUri:I}),$=L?.authorizationUrl||L?.redirectUrl||L?.authorization_url||L?.url;if(!$)throw new Error("Missing authorization URL.");window.location.href=$}catch(U){const I=U?.status,L=H(U);L&&!0?(console.error("OAuth sign-in failed",U),A("Could not start Google sign-in. Try again.")):A(L||(I===500?"Server error, try later":I===401||I===403?"Not authorized":"Could not start Google sign-in. Try again.")),C(!1)}},B=async U=>{U.preventDefault(),c(),w("");const I=m.trim(),L=g.trim(),$={};if(I?_1(I)||($.email="Enter a valid email address."):$.email="Email is required.",L||($.password="Password is required."),Object.keys($).length>0){S($);return}Object.keys(_).length>0&&S({});const G=await t(m,g);if(!G.success){w(G.message||"Login failed. Please verify your credentials.");return}const te=G.permissions||i,re=cf({role:G.role||n,roles:r,permissions:te}),M=R||f.state?.from?.pathname||re;d(M,{replace:!0})};return a.jsxs("div",{className:Pt.page,children:[a.jsxs("div",{className:Pt.card,children:[a.jsx("h1",{className:Pt.title,children:"Sign in"}),a.jsx("p",{className:Pt.subtitle,children:"Choose a sign-in method to access your account securely and continue where you left off."}),o?.message&&a.jsx("div",{className:Pt.error,role:"status","aria-live":"polite",children:o.message}),k&&a.jsxs("div",{className:Pt.oauthSection,children:[a.jsx(rq,{provider:"google",onClick:K,loading:E,disabled:E}),j&&a.jsx("div",{className:Pt.error,children:j}),a.jsx("div",{className:Pt.divider,children:a.jsx("span",{children:"Or sign in with email"})})]}),a.jsxs("form",{className:Pt.form,onSubmit:B,autoComplete:"off",children:[a.jsx("label",{className:Pt.label,htmlFor:"email",children:"Email"}),a.jsx("input",{id:"email",className:`${Pt.input} ${_.email?Pt.inputError:""}`,type:"email",value:m,onChange:U=>{h(U.target.value),_.email&&S(I=>({...I,email:""})),x&&w("")},required:!0,autoComplete:"email","aria-invalid":!!_.email,"aria-describedby":_.email?"email-error":void 0}),_.email&&a.jsx("span",{className:Pt.fieldError,id:"email-error",role:"alert",children:_.email}),a.jsx("label",{className:Pt.label,htmlFor:"password",children:"Password"}),a.jsx("input",{id:"password",className:`${Pt.input} ${_.password?Pt.inputError:""}`,type:"password",value:g,onChange:U=>{v(U.target.value),_.password&&S(I=>({...I,password:""})),x&&w("")},autoComplete:"current-password","aria-invalid":!!_.password,"aria-describedby":_.password?"password-error":void 0}),_.password&&a.jsx("span",{className:Pt.fieldError,id:"password-error",role:"alert",children:_.password}),a.jsx(nt,{className:Pt.forgotLink,to:"/forgot-password",children:"Forgot your password?"}),x&&a.jsx("div",{className:Pt.error,children:x}),a.jsx("button",{className:Pt.button,type:"submit",children:"Sign in"}),a.jsxs("p",{className:Pt.linkRow,children:["New customer?"," ",a.jsx(nt,{to:"/register",children:"Create an account"})]})]})]}),a.jsxs("div",{className:Pt.helper,children:[a.jsx("h2",{children:"Quick rules"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Admins only see the pages the backend permissions allow."}),a.jsx("li",{children:"Workers always see Home and Worker Dashboard."}),a.jsx("li",{children:"Customers can always reach Home and My Page."})]})]})]})}const PC="/my-page";function iq(){const{isAuthenticated:e,register:t}=Xt(),n=Gr(),r=cr(),[i,o]=p.useState(""),[c,d]=p.useState(""),[f,m]=p.useState(""),[h,g]=p.useState(""),[v,x]=p.useState({}),w=`Password must be at least ${lp} characters long.`;p.useEffect(()=>{if(e){const S=r.state?.from?.pathname||PC;n(S,{replace:!0})}},[e,r.state?.from?.pathname,n]);const _=async S=>{S.preventDefault();const j=i.trim(),A=c.trim(),E=f.trim(),C={};if(j?_1(j)||(C.email="Enter a valid email address."):C.email="Email is required.",A?A.length<lp&&(C.password=w):C.password="Password is required.",A!==E&&(C.confirmPassword="Passwords do not match."),Object.keys(C).length>0){x(C);return}Object.keys(v).length>0&&x({});const T=await t(j,A);T.success?(g(""),n(PC,{replace:!0})):g(T.message||"Unable to register. Please try again.")};return a.jsxs("div",{className:Pt.page,children:[a.jsxs("div",{className:Pt.card,children:[a.jsx("h1",{className:Pt.title,children:"Create a customer account"}),a.jsx("p",{className:Pt.subtitle,children:"Register with your email and password to access your customer page. You'll be logged in as soon as your account is created."}),a.jsxs("form",{className:Pt.form,onSubmit:_,autoComplete:"off",children:[a.jsx("label",{className:Pt.label,htmlFor:"email",children:"Email"}),a.jsx("input",{id:"email",className:`${Pt.input} ${v.email?Pt.inputError:""}`,type:"email",value:i,onChange:S=>{o(S.target.value),v.email&&x(j=>({...j,email:""})),h&&g("")},required:!0,autoComplete:"email","aria-invalid":!!v.email,"aria-describedby":v.email?"register-email-error":void 0}),v.email&&a.jsx("span",{className:Pt.fieldError,id:"register-email-error",role:"alert",children:v.email}),a.jsxs("label",{className:Pt.label,htmlFor:"password",children:["Password",a.jsx("span",{className:Pt.labelHint,children:"(min. 8 characters)"})]}),a.jsx("input",{id:"password",className:`${Pt.input} ${v.password?Pt.inputError:""}`,type:"password",value:c,onChange:S=>{d(S.target.value),v.password&&x(j=>({...j,password:""})),h&&g("")},required:!0,autoComplete:"new-password","aria-invalid":!!v.password,"aria-describedby":v.password?"register-password-error":void 0}),v.password&&a.jsx("span",{className:Pt.fieldError,id:"register-password-error",role:"alert",children:v.password}),a.jsx("label",{className:Pt.label,htmlFor:"confirm-password",children:"Confirm password"}),a.jsx("input",{id:"confirm-password",className:`${Pt.input} ${v.confirmPassword?Pt.inputError:""}`,type:"password",value:f,onChange:S=>{m(S.target.value),v.confirmPassword&&x(j=>({...j,confirmPassword:""})),h&&g("")},required:!0,autoComplete:"new-password","aria-invalid":!!v.confirmPassword,"aria-describedby":v.confirmPassword?"register-confirm-error":void 0}),v.confirmPassword&&a.jsx("span",{className:Pt.fieldError,id:"register-confirm-error",role:"alert",children:v.confirmPassword}),h&&a.jsx("div",{className:Pt.error,children:h}),a.jsx("button",{className:Pt.button,type:"submit",children:"Register"}),a.jsxs("p",{className:Pt.linkRow,children:["Already have an account?"," ",a.jsx(nt,{to:"/login",children:"Back to login"})]})]})]}),a.jsxs("div",{className:Pt.helper,children:[a.jsx("h2",{children:"Why register?"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Create a dedicated customer space."}),a.jsx("li",{children:"Save your preferences securely."}),a.jsx("li",{children:"Access My Page without selecting roles manually."})]})]})]})}const oq="_page_1j77w_1",lq="_card_1j77w_19",cq="_actions_1j77w_39",uq="_button_1j77w_53",dq="_secondary_1j77w_71",Od={page:oq,card:lq,actions:cq,button:uq,secondary:dq};function fq(){return a.jsx("div",{className:Od.page,children:a.jsxs("div",{className:Od.card,children:[a.jsx("h1",{children:"Not authorized"}),a.jsx("p",{children:"You tried to open a page that your role or permissions do not allow."}),a.jsxs("div",{className:Od.actions,children:[a.jsx(nt,{to:"/store",className:Od.button,children:"Go to Store"}),a.jsx(nt,{to:"/login",className:Od.secondary,children:"Login again"})]})]})})}const mq="_page_12xo8_1",hq="_card_12xo8_13",pq="_list_12xo8_31",kb={page:mq,card:hq,list:pq};function yq(){return a.jsx("div",{className:kb.page,children:a.jsxs("div",{className:kb.card,children:[a.jsx("h1",{children:"Super Admin Tools"}),a.jsx("p",{children:"You have full access. Use the Admin Management page to decide which routes each admin can open."}),a.jsxs("ul",{className:kb.list,children:[a.jsx("li",{children:"Manage admins and their permissions."}),a.jsx("li",{children:"Review quick links to admin-only tools."}),a.jsx("li",{children:"Access any page regardless of role-specific checks."})]})]})})}const uD=Bn(),Su=`${uD}/api/super-admin/admins`,gq=`${uD}/api/admin/permissions`,Wl=e=>({"Content-Type":"application/json",Authorization:`Bearer ${e}`});async function vq(e){const t=await Ve(Su,{headers:Wl(e)},{token:e});return at(t,"Failed to load admins")}async function bq(e,t){const n=await Ve(`${Su}/invite`,{method:"POST",headers:Wl(t),body:JSON.stringify(e)},{token:t});return at(n,"Failed to send admin invite")}async function _q(e,t,n){const r=await Ve(`${Su}/${e}/permissions`,{method:"PUT",headers:Wl(n),body:JSON.stringify({permissions:t})},{token:n});return at(r,"Failed to update permissions")}async function $C(e,t,n){const r=await Ve(`${Su}/${e}/status`,{method:"PUT",headers:Wl(n),body:JSON.stringify({status:t})},{token:n});return at(r,"Failed to update status")}async function xq(e,t){const n=await Ve(`${Su}/${e}`,{method:"DELETE",headers:Wl(t)},{token:t});return at(n,"Failed to remove admin")}async function Sq(e,t){const n=await Ve(`${Su}/${e}/resend-invite`,{method:"POST",headers:Wl(t)},{token:t});return at(n,"Failed to resend invite")}async function wq(e){const t=await Ve(gq,{headers:Wl(e)},{token:e});return at(t,"Failed to load permission definitions")}const jq="_page_1b0rq_1",Nq="_header_1b0rq_13",Aq="_kicker_1b0rq_29",Eq="_subtitle_1b0rq_45",Cq="_badge_1b0rq_55",Tq="_grid_1b0rq_71",kq="_card_1b0rq_83",Oq="_cardHeader_1b0rq_99",Rq="_headerActions_1b0rq_115",Mq="_banner_1b0rq_127",Iq="_bannerSuccess_1b0rq_143",Dq="_bannerError_1b0rq_155",Pq="_label_1b0rq_167",$q="_helper_1b0rq_179",Lq="_input_1b0rq_191",Bq="_permissions_1b0rq_207",Uq="_permissionGroup_1b0rq_221",qq="_permissionGroupHeader_1b0rq_229",zq="_dangerGroupHeader_1b0rq_241",Fq="_dangerHelper_1b0rq_249",Hq="_checkboxRow_1b0rq_261",Vq="_dangerCheckboxRow_1b0rq_279",Kq="_permissionDescription_1b0rq_289",Gq="_button_1b0rq_299",Wq="_refreshButton_1b0rq_321",Yq="_notice_1b0rq_339",Xq="_tableCard_1b0rq_357",Qq="_tableWrapper_1b0rq_365",Zq="_table_1b0rq_357",Jq="_primaryText_1b0rq_413",e8="_meta_1b0rq_423",t8="_statusBadge_1b0rq_433",n8="_statusIcon_1b0rq_455",r8="_statusText_1b0rq_465",a8="_statusINVITED_1b0rq_473",s8="_statusACTIVE_1b0rq_485",i8="_statusDISABLED_1b0rq_497",o8="_chips_1b0rq_509",l8="_chip_1b0rq_509",c8="_rowActions_1b0rq_535",u8="_softDanger_1b0rq_563",d8="_danger_1b0rq_241",f8="_empty_1b0rq_591",m8="_actionsColumn_1b0rq_599",h8="_modalBackdrop_1b0rq_615",p8="_modal_1b0rq_615",y8="_modalHeader_1b0rq_653",g8="_closeButton_1b0rq_667",v8="_modalActions_1b0rq_681",b8="_dangerZone_1b0rq_695",_8="_dangerZoneLabel_1b0rq_711",x8="_subtleButton_1b0rq_731",S8="_toast_1b0rq_747",w8="_toastSuccess_1b0rq_769",j8="_toastError_1b0rq_779",N8="_statusLegend_1b0rq_789",A8="_legendItem_1b0rq_803",E8="_legendIcon_1b0rq_815",C8="_legendLabel_1b0rq_823",Ie={page:jq,header:Nq,kicker:Aq,subtitle:Eq,badge:Cq,grid:Tq,card:kq,cardHeader:Oq,headerActions:Rq,banner:Mq,bannerSuccess:Iq,bannerError:Dq,label:Pq,helper:$q,input:Lq,permissions:Bq,permissionGroup:Uq,permissionGroupHeader:qq,dangerGroupHeader:zq,dangerHelper:Fq,checkboxRow:Hq,dangerCheckboxRow:Vq,permissionDescription:Kq,button:Gq,refreshButton:Wq,notice:Yq,tableCard:Xq,tableWrapper:Qq,table:Zq,primaryText:Jq,meta:e8,statusBadge:t8,statusIcon:n8,statusText:r8,statusINVITED:a8,statusACTIVE:s8,statusDISABLED:i8,chips:o8,chip:l8,rowActions:c8,softDanger:u8,danger:d8,empty:f8,actionsColumn:m8,modalBackdrop:h8,modal:p8,modalHeader:y8,closeButton:g8,modalActions:v8,dangerZone:b8,dangerZoneLabel:_8,subtleButton:x8,toast:S8,toastSuccess:w8,toastError:j8,statusLegend:N8,legendItem:A8,legendIcon:E8,legendLabel:C8},T8=[{value:"72",label:"72 hours (recommended)"},{value:"24",label:"24 hours"},{value:"48",label:"48 hours"},{value:"168",label:"7 days"},{value:"",label:"No expiry override"}],LC={INVITED:{icon:"",label:"Invited",description:"Email sent, password not set"},ACTIVE:{icon:"",label:"Active",description:"Login allowed"},DISABLED:{icon:"",label:"Disabled",description:"Login blocked"}},Jd=new Set(["ADMIN_PERMISSIONS_MANAGE","ADMIN_DISABLE"]),BC=[{value:"ADMIN_STANDARD",label:"Admin (Standard)"},{value:"OPERATOR_READ_ONLY",label:"Operator (Read-only)"},{value:"ADMIN_STORE_ONLY",label:"Admin (Store only)"},{value:"ADMIN_MONITORING_ONLY",label:"Admin (Monitoring only)"},{value:"CUSTOM",label:"Custom"}],UC={email:"",displayName:"",expiresInHours:""},k8=({available:e,selectedPermissionCodes:t,onToggle:n})=>{const r=e.reduce((o,c)=>{if(!c?.key||Jd.has(c.key))return o;const d=c?.group||c?.domain||c?.category||"Other";return o.has(d)||o.set(d,[]),o.get(d).push(c),o},new Map),i=e.filter(o=>Jd.has(o?.key));return a.jsxs(a.Fragment,{children:[Array.from(r.entries()).map(([o,c])=>a.jsxs("div",{className:Ie.permissionGroup,children:[a.jsx("div",{className:Ie.permissionGroupHeader,children:o}),a.jsx("div",{className:Ie.permissions,children:c.map((d,f)=>a.jsxs("label",{className:Ie.checkboxRow,title:d.description||void 0,children:[a.jsx("input",{type:"checkbox",checked:t.includes(d.key),onChange:()=>n(d.key)}),a.jsxs("div",{children:[a.jsx("div",{children:d.label||d.key}),d.description?a.jsx("div",{className:Ie.permissionDescription,children:d.description}):null]})]},d.key||d.label||`${o}-permission-${f}`))})]},o)),i.length>0&&a.jsxs("div",{className:Ie.permissionGroup,children:[a.jsx("div",{className:`${Ie.permissionGroupHeader} ${Ie.dangerGroupHeader}`,children:"Danger zone"}),a.jsx("p",{className:Ie.dangerHelper,children:"These permissions can disable admins or manage other admins. Confirm before enabling."}),a.jsx("div",{className:Ie.permissions,children:i.map((o,c)=>a.jsxs("label",{className:`${Ie.checkboxRow} ${Ie.dangerCheckboxRow}`,title:o.description||void 0,children:[a.jsx("input",{type:"checkbox",checked:t.includes(o.key),onChange:()=>n(o.key)}),a.jsxs("div",{children:[a.jsx("div",{children:o.label||o.key}),o.description?a.jsx("div",{className:Ie.permissionDescription,children:o.description}):null]})]},o.key||o.label||`danger-permission-${c}`))})]})]})};function O8(){const{token:e}=Xt(),[t,n]=p.useState([]),[r,i]=p.useState(!1),[o,c]=p.useState([]),[d,f]=p.useState([]),[m,h]=p.useState(null),[g,v]=p.useState("ADMIN_STANDARD"),[x,w]=p.useState(!1),[_,S]=p.useState(!1),[j,A]=p.useState(null),[E,C]=p.useState(!1),[T,O]=p.useState(UC),[R,k]=p.useState(null),[P,H]=p.useState(null),[K,B]=p.useState(null),[U,I]=p.useState([]),[L,$]=p.useState(null),[G,te]=p.useState(null),[re,M]=p.useState(null),q=p.useCallback((ne,Se)=>{k({type:ne,message:Se}),window.setTimeout(()=>k(null),4e3)},[]),z=p.useCallback(ne=>ne?Array.isArray(ne)?ne:Array.isArray(ne.admins)?ne.admins:[]:[],[]),V=p.useCallback(ne=>{const Se=Array.isArray(ne?.available),Ge=Se&&ne.available.length>0,vt=ne?.presets&&typeof ne.presets=="object"&&!Array.isArray(ne.presets);let Dt=[];if(Se)Dt=ne.available;else if(Array.isArray(ne))Dt=ne;else if(ne&&Array.isArray(ne.permissions))Dt=ne.permissions;else if(ne?.data&&Array.isArray(ne.data))Dt=ne.data;else if(ne?.data?.permissions&&Array.isArray(ne.data.permissions))Dt=ne.data.permissions;else{const lt=ne?.permissions||ne?.permissionGroups||ne?.groups;lt&&typeof lt=="object"&&!Array.isArray(lt)&&(Dt=Object.entries(lt).flatMap(([Bt,Qt])=>Array.isArray(Qt)?Qt.map(kn=>({...kn,domain:Bt})):[]))}const Ne=(Dt||[]).map(lt=>({...lt,key:lt?.key||lt?.code,code:lt?.code||lt?.key})),We=vt?Object.entries(ne.presets).reduce((lt,[Bt,Qt])=>(Array.isArray(Qt)?lt[Bt]=Qt:Array.isArray(Qt?.permissions)&&(lt[Bt]=Qt.permissions),lt),{}):null,ze=We&&Object.keys(We).length>0?We:null;return{definitions:Ne,presets:ze,hasAvailableItems:Ge}},[]),Y=p.useCallback(ne=>ne.filter(Se=>Se?.defaultSelected).map(Se=>Se.key).filter(Boolean),[]),Z=p.useCallback(ne=>{const Se=`${ne?.domain||ne?.group||ne?.category||""}`.toLowerCase();if(Se.includes("monitor"))return"monitoring";if(Se.includes("store"))return"store";if(Se.includes("admin"))return"admin";const Ge=`${ne?.key||""}`.toUpperCase();return Ge.includes("STORE")?"store":Ge.includes("MONITOR")||Ge.includes("REPORT")?"monitoring":"admin"},[]),ee=p.useMemo(()=>{const ne={monitoring:[],store:[],admin:[],danger:[]};return o.forEach(Se=>{if(!Se?.key)return;if(Jd.has(Se.key)){ne.danger.push(Se);return}const Ge=Z(Se);ne[Ge]?ne[Ge].push(Se):ne.admin.push(Se)}),ne},[o,Z]),ie=p.useMemo(()=>{const ne=o.filter(ze=>ze?.key&&!Jd.has(ze.key)).map(ze=>ze.key).filter(Boolean),Se=ee.monitoring.map(ze=>ze.key).filter(Boolean),Ge=ee.store.map(ze=>ze.key).filter(Boolean),vt=ee.admin.map(ze=>ze.key).filter(Boolean),Dt=Y(o),Ne=Se.filter(ze=>!/MANAGE|WRITE|DELETE|DISABLE|CREATE|UPDATE/i.test(ze));return{...{ADMIN_STANDARD:Dt.length>0?Dt:[...new Set([...vt,...Se,...Ge])],OPERATOR_READ_ONLY:Ne.length>0?Ne:Se,ADMIN_STORE_ONLY:Ge,ADMIN_MONITORING_ONLY:Se,CUSTOM:ne},...m||{}}},[Y,ee,o,m]),xe=p.useMemo(()=>{const ne=BC.find(Se=>Se.value===g);return ne?ne.value==="CUSTOM"?"Select individual permissions below.":"Permissions are pre-filled from the selected preset. You can still adjust them manually.":""},[g]),X=p.useCallback(async()=>{if(e){i(!0);try{const ne=await vq(e);n(z(ne))}catch(ne){console.error("Failed to load admins",ne),q("error",ne?.message||"Failed to load admins")}finally{i(!1)}}},[z,q,e]),Ae=p.useCallback(async()=>{if(e){C(!0);try{const ne=await wq(e),{definitions:Se,presets:Ge,hasAvailableItems:vt}=V(ne);c(vt?Se:[]),h(Ge),w(!0),A(vt?null:"Permissions not loaded")}catch(ne){console.error("Failed to load permissions",ne),A(ne?.message||"Failed to load permissions"),q("error",ne?.message||"Failed to load permissions"),w(!0)}finally{C(!1)}}},[V,q,e]),he=p.useCallback(()=>{Ae()},[Ae]);p.useEffect(()=>{he()},[he]),p.useEffect(()=>{X()},[X]),p.useEffect(()=>{w(!1),S(!1),c([]),h(null),f([]),v("ADMIN_STANDARD")},[e]),p.useEffect(()=>{if(!x||_)return;const ne=ie.ADMIN_STANDARD||[];v(ne.length>0?"ADMIN_STANDARD":"CUSTOM"),S(!0)},[_,x,ie]),p.useEffect(()=>{if(x&&g&&g!=="CUSTOM"){const ne=ie[g]||[];f([...ne])}},[x,ie,g]),p.useEffect(()=>{if(!x)return;const ne=new Set(o.map(Se=>Se?.key).filter(Boolean));f(Se=>Se.filter(Ge=>ne.has(Ge)))},[o,x]);const ue=p.useMemo(()=>[...t].sort((ne,Se)=>(ne.email||"").localeCompare(Se.email||"")),[t]),Xe=p.useMemo(()=>{const ne={};return o.forEach(Se=>{Se?.key&&(ne[Se.key]=Se.label||Se.key)}),ne},[o]),Ue=p.useMemo(()=>re?.permissionKey?Xe[re.permissionKey]||re.permissionKey:"",[re,Xe]),ye=p.useMemo(()=>ie.ADMIN_STANDARD||[],[ie]),je=p.useMemo(()=>t.some(ne=>(ne.permissions||[]).some(Se=>!Xe[Se])),[t,Xe]),Ee=ne=>{if(!ne)return"Never";const Se=new Date(ne);return Number.isNaN(Se.getTime())?"Unknown":Se.toLocaleString()},qe=(ne,Se,Ge,vt)=>{const Dt=()=>{Ge(Ne=>Ne.includes(ne)?Ne.filter(ze=>ze!==ne):[...Ne,ne])};if(Jd.has(ne)&&!Se.includes(ne)){M({permissionKey:ne,contextLabel:vt,onConfirm:Dt});return}Dt()},W=(ne,Se)=>{const Ge=j?a.jsx("div",{className:`${Ie.banner} ${Ie.bannerError}`,children:j}):null;return!x||!o.length&&E?a.jsxs(a.Fragment,{children:[Ge,a.jsx("p",{className:Ie.helper,children:"Loading permissions"})]}):o.length?a.jsxs(a.Fragment,{children:[Ge,a.jsx(k8,{available:o,selectedPermissionCodes:ne,onToggle:Se})]}):a.jsxs(a.Fragment,{children:[Ge,a.jsx("p",{className:Ie.helper,children:"Permissions not loaded."})]})},fe=ne=>{const Se=LC[ne]||{icon:"",label:ne||"Unknown"};return a.jsxs("span",{className:`${Ie.statusBadge} ${Ie[`status${ne}`]||""}`,children:[a.jsx("span",{"aria-hidden":!0,className:Ie.statusIcon,children:Se.icon}),a.jsx("span",{className:Ie.statusText,children:Se.label.toUpperCase()})]})},we=ne=>{H(null),v("CUSTOM"),qe(ne,d,f,"invite")},de=ne=>{H(null),v(ne)},ve=async ne=>{if(ne.preventDefault(),!o.length){const vt="Permissions not loaded";q("error",vt),H({type:"error",message:vt});return}if(!T.email){q("error","Email is required."),H({type:"error",message:"Email is required."});return}if(d.length===0){const vt="Select at least one permission";q("error",vt),H({type:"error",message:vt});return}const Se={email:T.email.trim(),displayName:T.displayName?.trim()||void 0};T.expiresInHours&&(Se.expiresInHours=Number(T.expiresInHours));const Ge=Array.from(new Set(d));Se.permissions=Ge,g&&g!=="CUSTOM"&&(Se.preset=g);try{await bq(Se,e),H({type:"success",message:"Invite sent successfully. Email sent to admin."}),O(UC),f(ye),v(ye.length>0?"ADMIN_STANDARD":"CUSTOM"),X()}catch(vt){console.error("Failed to invite admin",vt);const Dt=vt?.status===403?"You cannot grant permissions you do not have.":vt?.payload?.message||vt?.message||"Failed to send invite";H({type:"error",message:Dt}),(vt?.payload?.invalidPermissions||`${vt?.message}`.toLowerCase().includes("permission"))&&he()}},se=ne=>{B(ne),I(ne.permissions||[])},Re=ne=>{qe(ne,U,I,"edit")},Je=async(ne={})=>{const Se=ne.admin||K,Ge=ne.permissions||U;if(!Se)return;if(Ge.length===0){q("error","Select at least one permission.");return}const vt=Ge.reduce((Ne,We)=>(Ne[We]=Xe[We]||We,Ne),{});if(Ge.filter(Ne=>!vt[Ne]).length>0){q("error","Selected permissions are no longer valid. Refreshing permissions."),he();return}try{await _q(Se.id,Ge,e),q("success","Permissions updated"),B(null),I([]),X()}catch(Ne){console.error("Failed to update permissions",Ne),q("error",Ne?.message||"Failed to update permissions"),(Ne?.payload?.invalidPermissions||`${Ne?.message}`.toLowerCase().includes("permission"))&&he()}},le=async(ne,Se)=>{try{await $C(ne.id,Se,e),q("success",`Admin ${Se==="ACTIVE"?"enabled":Se==="DISABLED"?"disabled":"updated"}`),X()}catch(Ge){console.error("Failed to update admin status",Ge),q("error",Ge?.message||"Failed to update status")}},Oe=async()=>{if(L)try{if(L.intent==="disable")await $C(L.admin.id,"DISABLED",e),q("success","Admin disabled");else{await xq(L.admin.id,e);const ne=L.intent==="revoke"?"Invite revoked":"Admin removed";q("success",ne)}$(null),X()}catch(ne){console.error("Failed to remove admin",ne),q("error",ne?.message||"Failed to remove admin")}},Le=async ne=>{try{await Sq(ne.id,e),q("success","Invite resent")}catch(Se){console.error("Failed to resend invite",Se),q("error",Se?.message||"Failed to resend invite")}};return a.jsxs("div",{className:Ie.page,children:[a.jsxs("header",{className:Ie.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:"Super admin only"}),a.jsx("h1",{children:"Super Admin Console"}),a.jsx("p",{className:Ie.subtitle,children:"Invite admins, manage permissions, and control access."}),a.jsx("p",{className:Ie.helper,children:"Lifecycle: Invite  Active  Disabled. No passwords are collected here."})]}),a.jsx("div",{className:Ie.badge,children:"SUPER_ADMIN"})]}),a.jsxs("section",{className:Ie.grid,children:[a.jsxs("form",{className:Ie.card,onSubmit:ve,children:[a.jsx("div",{className:Ie.cardHeader,children:a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:"Onboard admins"}),a.jsx("h2",{children:"Invite admin"})]})}),P&&a.jsx("div",{className:`${Ie.banner} ${P.type==="error"?Ie.bannerError:Ie.bannerSuccess}`,children:P.message}),a.jsx("label",{className:Ie.label,htmlFor:"email",children:"Admin email (required)"}),a.jsx("input",{id:"email",type:"email",className:Ie.input,value:T.email,onChange:ne=>{H(null),O(Se=>({...Se,email:ne.target.value}))},required:!0}),a.jsx("label",{className:Ie.label,htmlFor:"displayName",children:"Display name (optional)"}),a.jsx("input",{id:"displayName",type:"text",className:Ie.input,value:T.displayName,onChange:ne=>{H(null),O(Se=>({...Se,displayName:ne.target.value}))}}),a.jsx("label",{className:Ie.label,htmlFor:"invitePreset",children:"Permission preset"}),a.jsx("select",{id:"invitePreset",className:Ie.input,value:g,onChange:ne=>de(ne.target.value),children:BC.map(ne=>a.jsx("option",{value:ne.value,children:ne.label},ne.value))}),xe&&a.jsx("p",{className:Ie.helper,children:xe}),a.jsx("p",{className:Ie.label,children:"Permissions"}),W(d,we),a.jsx("label",{className:Ie.label,htmlFor:"inviteExpiry",children:"Invite expiry"}),a.jsx("select",{id:"inviteExpiry",className:Ie.input,value:T.expiresInHours,onChange:ne=>{H(null),O(Se=>({...Se,expiresInHours:ne.target.value}))},children:T8.map(ne=>a.jsx("option",{value:ne.value,children:ne.label},ne.value||"none"))}),a.jsx("button",{className:Ie.button,type:"submit",disabled:E||!o.length,children:"Send invite"}),a.jsx("div",{className:Ie.notice,role:"status",children:"Admin will receive an email to set their password securely after accepting the invite."})]}),a.jsxs("div",{className:`${Ie.card} ${Ie.tableCard}`,children:[a.jsxs("div",{className:Ie.cardHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:"Admin roster"}),a.jsx("h2",{children:"Lifecycle & access"}),a.jsx("div",{className:Ie.statusLegend,children:Object.entries(LC).map(([ne,Se])=>a.jsxs("div",{className:Ie.legendItem,children:[a.jsx("span",{className:Ie.legendIcon,"aria-hidden":!0,children:Se.icon}),a.jsxs("div",{children:[a.jsx("div",{className:Ie.legendLabel,children:Se.label.toUpperCase()}),a.jsx("div",{className:Ie.meta,children:Se.description})]})]},ne))})]}),a.jsxs("div",{className:Ie.headerActions,children:[a.jsx("button",{className:Ie.refreshButton,type:"button",onClick:X,disabled:r,children:"Refresh"}),a.jsx("button",{className:Ie.refreshButton,type:"button",onClick:Ae,disabled:E,children:"Refresh permissions"})]})]}),je&&a.jsx("p",{className:Ie.helper,children:"Some permissions are unknown. Refresh permissions to update the roster labels."}),r?a.jsx("p",{className:Ie.helper,children:"Loading admins"}):ue.length===0?a.jsx("p",{className:Ie.empty,children:"No admins configured yet."}):a.jsx("div",{className:Ie.tableWrapper,children:a.jsxs("table",{className:Ie.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Display name"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Permissions"}),a.jsx("th",{children:"Last login"}),a.jsx("th",{className:Ie.actionsColumn,children:"Actions"})]})}),a.jsx("tbody",{children:ue.map(ne=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("div",{className:Ie.primaryText,children:ne.email}),a.jsxs("div",{className:Ie.meta,children:["ID: ",ne.id]})]}),a.jsx("td",{children:ne.displayName||""}),a.jsx("td",{children:fe(ne.status)}),a.jsx("td",{children:a.jsxs("div",{className:Ie.chips,children:[(ne.permissions||[]).length===0&&a.jsx("span",{className:Ie.chip,children:"None"}),(ne.permissions||[]).map(Se=>a.jsx("span",{className:Ie.chip,children:Xe[Se]||`[UNKNOWN: ${Se}]`},Se))]})}),a.jsxs("td",{children:[a.jsx("div",{className:Ie.primaryText,children:Ee(ne.lastLoginAt||ne.lastLogin||ne.lastActiveAt||ne.lastSeenAt)}),ne.lastIp&&a.jsxs("div",{className:Ie.meta,children:["From ",ne.lastIp]})]}),a.jsx("td",{children:a.jsxs("div",{className:Ie.rowActions,children:[ne.status==="INVITED"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>Le(ne),children:"Resend invite"}),a.jsx("button",{type:"button",className:Ie.danger,onClick:()=>$({admin:ne,intent:"revoke"}),children:"Revoke"})]}),ne.status==="ACTIVE"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>se(ne),children:"Edit permissions"}),a.jsx("button",{type:"button",onClick:()=>$({admin:ne,intent:"disable"}),className:Ie.softDanger,children:"Disable"})]}),ne.status==="DISABLED"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>le(ne,"ACTIVE"),children:"Enable"}),a.jsx("button",{type:"button",className:Ie.danger,onClick:()=>$({admin:ne,intent:"delete"}),children:"Delete"})]})]})})]},ne.id))})]})})]})]}),K&&a.jsx("div",{className:Ie.modalBackdrop,children:a.jsxs("div",{className:Ie.modal,children:[a.jsxs("div",{className:Ie.modalHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:"Edit permissions"}),a.jsx("h3",{children:K.email})]}),a.jsx("button",{type:"button",className:Ie.closeButton,onClick:()=>B(null),children:""})]}),W(U,Re),a.jsxs("div",{className:Ie.modalActions,children:[a.jsx("button",{type:"button",onClick:()=>B(null),className:Ie.subtleButton,children:"Cancel"}),a.jsx("button",{type:"button",className:Ie.button,onClick:()=>te({admin:K,permissions:U}),children:"Save permissions"})]})]})}),L&&a.jsx("div",{className:Ie.modalBackdrop,children:a.jsxs("div",{className:Ie.modal,children:[a.jsxs("div",{className:Ie.modalHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:L.intent==="revoke"?"Revoke invite":L.intent==="disable"?"Disable admin":"Delete admin"}),a.jsx("h3",{children:L.admin.email})]}),a.jsx("button",{type:"button",className:Ie.closeButton,onClick:()=>$(null),children:""})]}),a.jsxs("div",{className:Ie.dangerZone,children:[a.jsx("span",{className:Ie.dangerZoneLabel,children:"Danger zone"}),a.jsx("p",{className:Ie.helper,children:L.intent==="disable"?"Disabling an admin immediately blocks access until they are re-enabled.":"This action affects access and cannot be undone easily."})]}),a.jsx("p",{className:Ie.helper,children:L.intent==="revoke"?"This cancels the invitation. The admin will need a new invite to join later.":L.intent==="disable"?"You can re-enable the admin later if needed.":"This removes the admin and revokes all access. Are you sure?"}),a.jsxs("div",{className:Ie.modalActions,children:[a.jsx("button",{type:"button",onClick:()=>$(null),className:Ie.subtleButton,children:"Cancel"}),a.jsx("button",{type:"button",className:Ie.danger,onClick:Oe,children:L.intent==="revoke"?"Revoke invite":L.intent==="disable"?"Disable admin":"Delete admin"})]})]})}),G&&a.jsx("div",{className:Ie.modalBackdrop,children:a.jsxs("div",{className:Ie.modal,children:[a.jsxs("div",{className:Ie.modalHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:"Confirm permissions"}),a.jsx("h3",{children:G.admin?.email})]}),a.jsx("button",{type:"button",className:Ie.closeButton,onClick:()=>te(null),children:""})]}),a.jsxs("div",{className:Ie.dangerZone,children:[a.jsx("span",{className:Ie.dangerZoneLabel,children:"Danger zone"}),a.jsx("p",{className:Ie.helper,children:"Changing permissions affects access immediately."})]}),a.jsxs("div",{className:Ie.modalActions,children:[a.jsx("button",{type:"button",onClick:()=>te(null),className:Ie.subtleButton,children:"Cancel"}),a.jsx("button",{type:"button",className:Ie.button,onClick:()=>{Je(G),te(null)},children:"Confirm changes"})]})]})}),re&&a.jsx("div",{className:Ie.modalBackdrop,children:a.jsxs("div",{className:Ie.modal,children:[a.jsxs("div",{className:Ie.modalHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ie.kicker,children:"Confirm dangerous permission"}),a.jsx("h3",{children:Ue})]}),a.jsx("button",{type:"button",className:Ie.closeButton,onClick:()=>M(null),children:""})]}),a.jsxs("div",{className:Ie.dangerZone,children:[a.jsx("span",{className:Ie.dangerZoneLabel,children:"Danger zone"}),a.jsx("p",{className:Ie.helper,children:"This permission allows admins to disable accounts or manage permissions. Proceed with care."})]}),a.jsxs("p",{className:Ie.helper,children:["Confirm that you want to enable ",Ue,"."]}),a.jsxs("div",{className:Ie.modalActions,children:[a.jsx("button",{type:"button",onClick:()=>M(null),className:Ie.subtleButton,children:"Cancel"}),a.jsx("button",{type:"button",className:Ie.danger,onClick:()=>{re.onConfirm?.(),M(null)},children:"Enable permission"})]})]})}),R&&a.jsx("div",{className:`${Ie.toast} ${R.type==="error"?Ie.toastError:Ie.toastSuccess}`,children:R.message})]})}const R8="_page_k4f8k_1",M8="_card_k4f8k_13",cp={page:R8,card:M8};function I8(){return a.jsx("div",{className:cp.page,children:a.jsxs("div",{className:cp.card,children:[a.jsx("h1",{children:"Admin Overview"}),a.jsx("p",{children:'Admins only see this if the super admin assigns the "Admin Overview" permission.'})]})})}function D8(){return a.jsx("div",{className:cp.page,children:a.jsxs("div",{className:cp.card,children:[a.jsx("h1",{children:"Admin Team"}),a.jsx("p",{children:"Coordinate admin-only tasks with the permissions granted by the super admin."})]})})}const P8="_page_pn0ip_1",$8="_header_pn0ip_13",L8="_kicker_pn0ip_31",B8="_title_pn0ip_47",U8="_subtitle_pn0ip_59",q8="_badge_pn0ip_71",z8="_actions_pn0ip_89",F8="_card_pn0ip_101",H8="_primary_pn0ip_163",V8="_secondary_pn0ip_173",K8="_ghost_pn0ip_183",G8="_cta_pn0ip_193",Ks={page:P8,header:$8,kicker:L8,title:B8,subtitle:U8,badge:q8,actions:z8,card:F8,primary:H8,secondary:V8,ghost:K8,cta:G8},W8=[{title:"Invite Admin",description:"Send a new invite and assign permissions.",to:"/admin/directory",tone:"primary"},{title:"Manage Permissions",description:"Review admin access levels and roles.",to:"/admin/directory",tone:"secondary"},{title:"Create Product",description:"Add a new store product for customers.",to:"/store/admin/products",tone:"secondary"},{title:"View System Health",description:"Jump into the monitoring overview.",to:"/monitoring/overview",tone:"ghost"}];function Y8(){return a.jsxs("div",{className:Ks.page,children:[a.jsxs("header",{className:Ks.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ks.kicker,children:"Admin"}),a.jsx("h1",{className:Ks.title,children:"Super Admin Home"}),a.jsx("p",{className:Ks.subtitle,children:"Manage the HydroLeaf platform from one place. Use the quick actions below to jump into the highest-impact workflows."})]}),a.jsx("div",{className:Ks.badge,children:"SUPER_ADMIN"})]}),a.jsx("section",{className:Ks.actions,children:W8.map(e=>a.jsxs(nt,{to:e.to,className:`${Ks.card} ${Ks[e.tone]}`,children:[a.jsxs("div",{children:[a.jsx("h2",{children:e.title}),a.jsx("p",{children:e.description})]}),a.jsx("span",{className:Ks.cta,children:"Open "})]},e.title))})]})}const $f=Bn(),dD=`${$f}/api/monitoring-pages`,yy=`${$f}/api/admin/monitoring-pages`,qC=`${$f}/api/telemetry-targets`,X8=`${$f}/api/systems`,Q8=`${$f}/api/sites`,Mi=async(e,t,n)=>{const r=await Ve(e,t);return at(r,n)},Z8=({signal:e}={})=>Mi(dD,{signal:e},"Failed to load monitoring pages"),J8=(e,{signal:t}={})=>Mi(`${dD}/${encodeURIComponent(e)}`,{signal:t},"Unable to load monitoring page"),e6=({signal:e}={})=>Mi(yy,{signal:e,headers:Zt()},"Failed to load monitoring pages"),t6=(e,{signal:t}={})=>Mi(yy,{method:"POST",headers:Zt(),body:JSON.stringify(e),signal:t},"Failed to create monitoring page"),n6=(e,t,{signal:n}={})=>Mi(`${yy}/${encodeURIComponent(e)}`,{method:"PUT",headers:Zt(),body:JSON.stringify(t),signal:n},"Failed to update monitoring page"),r6=(e,{signal:t}={})=>Mi(`${yy}/${encodeURIComponent(e)}`,{method:"DELETE",headers:Zt(),signal:t},"Failed to delete monitoring page"),a6=(e,{signal:t}={})=>{const n=new URLSearchParams;e&&n.set("farm",e);const r=n.toString()?`${qC}?${n}`:qC;return Mi(r,{signal:t,headers:Zt()},"Failed to load telemetry targets")},s6=async({signal:e}={})=>{try{return await Mi(X8,{signal:e,headers:Zt()},"Failed to load systems")}catch(t){if(t?.status===404)return Mi(Q8,{signal:e,headers:Zt()},"Failed to load sites");throw t}},i6="_page_5ckgh_1",o6="_header_5ckgh_13",l6="_kicker_5ckgh_31",c6="_title_5ckgh_47",u6="_subtitle_5ckgh_55",d6="_headerActions_5ckgh_65",f6="_grid_5ckgh_77",m6="_card_5ckgh_89",h6="_cardHeader_5ckgh_105",p6="_tableWrapper_5ckgh_121",y6="_table_5ckgh_121",g6="_primaryText_5ckgh_169",v6="_meta_5ckgh_179",b6="_statusEnabled_5ckgh_189",_6="_statusDisabled_5ckgh_209",x6="_rowActions_5ckgh_229",S6="_dangerButton_5ckgh_255",w6="_label_5ckgh_265",j6="_input_5ckgh_277",N6="_checkboxRow_5ckgh_293",A6="_primaryButton_5ckgh_309",E6="_secondaryButton_5ckgh_331",C6="_bannerError_5ckgh_349",T6="_inlineError_5ckgh_369",k6="_inlineNotice_5ckgh_381",O6="_emptyState_5ckgh_393",R6="_selectedRow_5ckgh_405",bt={page:i6,header:o6,kicker:l6,title:c6,subtitle:u6,headerActions:d6,grid:f6,card:m6,cardHeader:h6,tableWrapper:p6,table:y6,primaryText:g6,meta:v6,statusEnabled:b6,statusDisabled:_6,rowActions:x6,dangerButton:S6,label:w6,input:j6,checkboxRow:N6,primaryButton:A6,secondaryButton:E6,bannerError:C6,inlineError:T6,inlineNotice:k6,emptyState:O6,selectedRow:R6},zC={title:"",farm:"",unitType:"",unitId:"",subUnitType:"",subUnitId:"",slug:"",enabled:!0,sortOrder:0},M6=e=>Array.isArray(e)?e:Array.isArray(e?.pages)?e.pages:Array.isArray(e?.data)?e.data:Array.isArray(e?.data?.pages)?e.data.pages:[],I6=e=>Array.isArray(e)?e:Array.isArray(e?.items)?e.items:Array.isArray(e?.targets)?e.targets:Array.isArray(e?.data)?e.data:Array.isArray(e?.data?.items)?e.data.items:Array.isArray(e?.data?.targets)?e.data.targets:[],D6=e=>Array.isArray(e)?e:Array.isArray(e?.systems)?e.systems:Array.isArray(e?.sites)?e.sites:Array.isArray(e?.data)?e.data:Array.isArray(e?.data?.systems)?e.data.systems:Array.isArray(e?.data?.sites)?e.data.sites:[],Uc=(e,t)=>{if(!e)return"";for(const n of t){const r=e?.[n];if(r!=null&&`${r}`.trim())return`${r}`.trim()}return""},up=e=>`${e||""}`.trim().toUpperCase(),P6=(e,t="")=>{if(!e||typeof e!="object")return null;const n=Uc(e,["farm","system","site","farmId","systemId","siteId"])||t,r=up(Uc(e,["unitType","unit_type","type","unit","unit_type_name"])),i=Uc(e,["unitId","unit_id","unit","unitKey","unit_key"]),o=up(Uc(e,["subUnitType","sub_unit_type","subUnit"])),c=Uc(e,["subUnitId","sub_unit_id","subUnitId","sub_unit"]);return!r||!i?null:{farm:n,unitType:r,unitId:i,subUnitType:o,subUnitId:c}},$6=e=>{if(!e?.unitType||!e?.unitId)return"";const t=[`${e.unitType} ${e.unitId}`];return e.subUnitType&&e.subUnitId&&t.push(`${e.subUnitType} ${e.subUnitId}`),t.join("  ")},fD=e=>e?.system??e?.systemId??e?.system_id??e?.site??e?.siteId??e?.site_id??e?.id??e?.value??e?.key??"",L6=e=>e?.label||e?.name||e?.title||fD(e),Gs=(e,t,n="")=>{for(const r of t){const i=e?.[r];if(i!=null&&`${i}`.trim())return i}return n},Rd=(e,t)=>{const n=[e,e?.target,e?.telemetryTarget,e?.telemetry_target];for(const r of n){if(!r)continue;const i=Uc(r,t);if(i)return i}return""},FC=e=>{const t=Rd(e,["farm","system","site","farmId","systemId","siteId"]),n=up(Rd(e,["unitType","unit_type","type","unit"])),r=Rd(e,["unitId","unit_id","unit"]),i=up(Rd(e,["subUnitType","sub_unit_type","subUnit"])),o=Rd(e,["subUnitId","sub_unit_id","subUnitId","sub_unit"]);return{farm:t,unitType:n,unitId:r,subUnitType:i,subUnitId:o}},B6=e=>`${e||""}`.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),U6=e=>{const t={},n=e?.payload,r=(c,d)=>{!c||!d||t[c]||(t[c]=d)};Array.isArray(n?.errors)&&n.errors.forEach(c=>{if(!c)return;const d=c.field||c.path||c.key||c.name,f=c.message||c.error||c.detail;r(d==="unit_type"||d==="unitType"?"unitType":d==="unit_id"||d==="unitId"?"unitId":d==="sub_unit_type"||d==="subUnitType"?"subUnitType":d==="sub_unit_id"||d==="subUnitId"?"subUnitId":d==="farm"||d==="system"||d==="site"?"farm":d==="slug"?"slug":d,f)});const i=`${n?.message||e?.message||""}`.toLowerCase(),o=i.includes("duplicate")||i.includes("unique")||i.includes("exists");return o&&(i.includes("unit")||i.includes("target"))&&r("unitId","Each telemetry target can only be assigned to one monitoring page."),o&&i.includes("slug")&&r("slug","This slug is already in use. Pick a unique slug."),t};function q6(){const{token:e}=Xt(),[t]=xu(),[n,r]=p.useState([]),[i,o]=p.useState([]),[c,d]=p.useState([]),[f,m]=p.useState(()=>t.get("farm")||t.get("system")||t.get("site")||""),[h,g]=p.useState(!1),[v,x]=p.useState(""),[w,_]=p.useState(!1),[S,j]=p.useState(!1),[A,E]=p.useState(!1),[C,T]=p.useState(""),[O,R]=p.useState(""),[k,P]=p.useState(""),[H,K]=p.useState({}),[B,U]=p.useState(null),[I,L]=p.useState(zC),[$,G]=p.useState(!1),te=t.get("farm")||t.get("system")||t.get("site")||"",re=!!B,M=p.useMemo(()=>[...n].sort((ye,je)=>{const Ee=Number(Gs(ye,["sortOrder","order"],0)),qe=Number(Gs(je,["sortOrder","order"],0));if(Ee!==qe)return Ee-qe;const W=`${Gs(ye,["title","name"],"")}`.toLowerCase(),fe=`${Gs(je,["title","name"],"")}`.toLowerCase();return W.localeCompare(fe)}),[n]),q=p.useCallback((ye=null)=>{if(!ye){U(null),L({...zC,farm:f}),G(!1),K({}),P("");return}const je=FC(ye);U(ye),L({title:Gs(ye,["title","name","pageTitle"],""),farm:je.farm,unitType:je.unitType,unitId:je.unitId,subUnitType:je.subUnitType,subUnitId:je.subUnitId,slug:Gs(ye,["slug","path"],""),enabled:ye?.enabled!==!1,sortOrder:Number(Gs(ye,["sortOrder","order"],0))}),je.farm&&m(je.farm),G(!0),K({}),P("")},[f]),z=p.useCallback(async()=>{if(e){_(!0),T("");try{const ye=await e6();r(M6(ye))}catch(ye){console.error("Failed to load monitoring pages",ye),T("Unable to load monitoring pages right now.")}finally{_(!1)}}},[e]),V=p.useCallback(async()=>{if(e){g(!0),x("");try{const ye=await s6(),Ee=D6(ye).map(qe=>{if(typeof qe=="string"||typeof qe=="number"){const we=`${qe}`.trim();return we?{id:we,label:we}:null}if(!qe)return null;const W=`${fD(qe)}`.trim();if(!W)return null;const fe=`${L6(qe)}`.trim()||W;return{id:W,label:fe}}).filter(Boolean).sort((qe,W)=>qe.label.localeCompare(W.label));f&&!Ee.find(qe=>qe.id===f)&&Ee.unshift({id:f,label:f}),d(Ee)}catch(ye){console.error("Failed to load farms",ye),x("Unable to load farms right now."),d(te?[{id:te,label:te}]:[])}finally{g(!1)}}},[te,f,e]),Y=p.useCallback(async()=>{if(e){if(!f){o([]),R("Select a farm to load telemetry targets.");return}R(""),E(!0);try{const ye=await a6(f);console.log("telemetryTargets response:",ye);const je=I6(ye);console.log("parsed targets:",je),o(je)}catch(ye){console.error("Failed to load telemetry targets",ye),R("Unable to load telemetry targets right now.")}finally{E(!1)}}},[f,e]);p.useEffect(()=>{z(),V()},[V,z]),p.useEffect(()=>{Y()},[Y]),p.useEffect(()=>{!f||re||L(ye=>ye.farm===f?ye:{...ye,farm:f})},[re,f]);const Z=p.useMemo(()=>i.map(ye=>P6(ye,f)).filter(Boolean),[f,i]),ee=p.useMemo(()=>Array.from(new Set(Z.map(je=>je.unitType).filter(Boolean))).sort((je,Ee)=>je.localeCompare(Ee)),[Z]),ie=p.useMemo(()=>I.unitType?Array.from(new Set(Z.filter(je=>je.unitType===I.unitType).map(je=>je.unitId).filter(Boolean))).sort((je,Ee)=>je.localeCompare(Ee)):[],[I.unitType,Z]),xe=p.useMemo(()=>I.unitType!=="RACK"||!I.unitId?[]:Array.from(new Set(Z.filter(je=>je.unitType==="RACK"&&je.unitId===I.unitId).map(je=>je.subUnitType).filter(Boolean))).sort((je,Ee)=>je.localeCompare(Ee)),[I.unitId,I.unitType,Z]),X=p.useMemo(()=>I.unitType!=="RACK"||!I.unitId||!I.subUnitType?[]:Array.from(new Set(Z.filter(je=>je.unitType==="RACK"&&je.unitId===I.unitId&&je.subUnitType===I.subUnitType).map(je=>je.subUnitId).filter(Boolean))).sort((je,Ee)=>je.localeCompare(Ee)),[I.subUnitType,I.unitId,I.unitType,Z]),Ae=ye=>je=>{const Ee=ye==="enabled"?je.target.checked:je.target.value;L(qe=>{const W={...qe,[ye]:Ee};if(ye==="title"&&!$&&(W.slug=B6(Ee)),ye==="slug"&&G(!0),ye==="farm"&&(W.unitType="",W.unitId="",W.subUnitType="",W.subUnitId=""),ye==="unitType"&&(W.unitId="",W.subUnitType="",W.subUnitId=""),ye==="unitId"&&(W.subUnitType="",W.subUnitId=""),ye==="subUnitType"&&(W.subUnitId=""),ye==="sortOrder"){const fe=Number.isNaN(Number(Ee))?0:Number(Ee);W.sortOrder=fe}return W}),K(qe=>({...qe,[ye]:""})),P("")},he=ye=>{q(ye)},ue=ye=>{const je=ye.target.value;m(je),o([]),L(Ee=>({...Ee,farm:je,unitType:"",unitId:"",subUnitType:"",subUnitId:""})),K(Ee=>({...Ee,farm:"",unitType:"",unitId:"",subUnitType:"",subUnitId:""})),P("")},Xe=async ye=>{if(ye.preventDefault(),!e)return;j(!0),P(""),K({});const je={};if(I.farm||(je.farm="Select a farm."),I.unitType||(je.unitType="Select a unit type."),I.unitId||(je.unitId="Select a unit ID."),I.unitType==="RACK"&&(I.subUnitType&&!I.subUnitId&&(je.subUnitId="Select a sub-unit ID."),!I.subUnitType&&I.subUnitId&&(je.subUnitType="Select a sub-unit type.")),Object.keys(je).length>0){K(je),j(!1);return}const Ee={title:I.title.trim(),farm:I.farm,unitType:I.unitType,unitId:I.unitId,subUnitType:I.subUnitType||void 0,subUnitId:I.subUnitId||void 0,slug:I.slug.trim(),enabled:I.enabled,sortOrder:Number(I.sortOrder)||0};try{re?await n6(B.id??B._id??B.slug,Ee):await t6(Ee),await z(),q()}catch(qe){console.error("Failed to save monitoring page",qe);const W=U6(qe);Object.keys(W).length>0?K(W):P(qe?.message||"Unable to save monitoring page.")}finally{j(!1)}},Ue=async ye=>{if(!(!e||!ye||!window.confirm("Delete this monitoring page? This cannot be undone.")))try{await r6(ye.id??ye._id??ye.slug),await z(),B&&(B.id===ye.id||B.slug===ye.slug)&&q()}catch(Ee){console.error("Failed to delete monitoring page",Ee),T("Unable to delete monitoring page.")}};return a.jsxs("div",{className:bt.page,children:[a.jsxs("header",{className:bt.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:bt.kicker,children:"Admin"}),a.jsx("h1",{className:bt.title,children:"Monitoring Pages"}),a.jsx("p",{className:bt.subtitle,children:"Create and manage monitoring pages tied to telemetry targets."})]}),a.jsxs("div",{className:bt.headerActions,children:[a.jsx("button",{type:"button",className:bt.secondaryButton,onClick:z,children:"Refresh"}),a.jsx("button",{type:"button",className:bt.secondaryButton,onClick:()=>q(),children:"New page"})]})]}),a.jsxs("div",{className:bt.grid,children:[a.jsxs("section",{className:bt.card,children:[a.jsxs("div",{className:bt.cardHeader,children:[a.jsx("h2",{children:"Monitoring pages"}),a.jsxs("span",{className:bt.meta,children:[M.length," total"]})]}),C&&a.jsx("div",{className:bt.bannerError,children:C}),a.jsx("div",{className:bt.tableWrapper,children:a.jsxs("table",{className:bt.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Telemetry target"}),a.jsx("th",{children:"Slug"}),a.jsx("th",{children:"Enabled"}),a.jsx("th",{children:"Sort"}),a.jsx("th",{})]})}),a.jsxs("tbody",{children:[w?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:bt.emptyState,children:"Loading pages"})}):null,!w&&M.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:bt.emptyState,children:"No monitoring pages yet."})}):null,!w&&M.map(ye=>{const je=B?.id===ye.id;return a.jsxs("tr",{className:je?bt.selectedRow:"",children:[a.jsxs("td",{children:[a.jsx("div",{className:bt.primaryText,children:Gs(ye,["title","name"],"Untitled")}),a.jsxs("div",{className:bt.meta,children:["ID: ",ye.id||ye.slug]})]}),a.jsx("td",{children:$6(FC(ye))||""}),a.jsx("td",{children:Gs(ye,["slug"],"")}),a.jsx("td",{children:ye?.enabled!==!1?a.jsx("span",{className:bt.statusEnabled,children:"Enabled"}):a.jsx("span",{className:bt.statusDisabled,children:"Disabled"})}),a.jsx("td",{children:Gs(ye,["sortOrder","order"],0)}),a.jsx("td",{children:a.jsxs("div",{className:bt.rowActions,children:[a.jsx("button",{type:"button",onClick:()=>he(ye),children:"Edit"}),a.jsx("button",{type:"button",className:bt.dangerButton,onClick:()=>Ue(ye),children:"Delete"})]})})]},ye.id||ye.slug)})]})]})})]}),a.jsxs("section",{className:bt.card,children:[a.jsxs("div",{className:bt.cardHeader,children:[a.jsx("h2",{children:re?"Edit monitoring page":"Create monitoring page"}),re?a.jsx("button",{type:"button",className:bt.secondaryButton,onClick:()=>q(),children:"Clear"}):null]}),a.jsxs("form",{onSubmit:Xe,children:[a.jsx("label",{className:bt.label,htmlFor:"rack-page-title",children:"Title"}),a.jsx("input",{id:"rack-page-title",className:bt.input,value:I.title,onChange:Ae("title"),placeholder:"Monitoring page title",required:!0}),H.title&&a.jsx("div",{className:bt.inlineError,children:H.title}),a.jsx("label",{className:bt.label,htmlFor:"rack-page-site",children:"Farm"}),a.jsxs("select",{id:"rack-page-site",className:bt.input,value:f,onChange:ue,required:!0,disabled:!!te||h,children:[a.jsx("option",{value:"",children:h?"Loading farms":"Select a farm"}),c.map(ye=>a.jsx("option",{value:ye.id,children:ye.label},ye.id))]}),H.farm&&a.jsx("div",{className:bt.inlineError,children:H.farm}),v&&a.jsx("div",{className:bt.inlineError,children:v}),a.jsx("label",{className:bt.label,htmlFor:"rack-page-unit-type",children:"Unit type"}),a.jsxs("select",{id:"rack-page-unit-type",className:bt.input,value:I.unitType,onChange:Ae("unitType"),required:!0,disabled:!f||A,children:[a.jsx("option",{value:"",children:A?"Loading unit types":"Select a unit type"}),ee.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]}),H.unitType&&a.jsx("div",{className:bt.inlineError,children:H.unitType}),a.jsx("label",{className:bt.label,htmlFor:"rack-page-unit-id",children:"Unit ID"}),a.jsxs("select",{id:"rack-page-unit-id",className:bt.input,value:I.unitId,onChange:Ae("unitId"),required:!0,disabled:!I.unitType,children:[a.jsx("option",{value:"",children:"Select a unit ID"}),ie.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]}),H.unitId&&a.jsx("div",{className:bt.inlineError,children:H.unitId}),O&&a.jsx("div",{className:bt.inlineError,children:O}),f&&!A&&!O&&Z.length===0?a.jsx("div",{className:bt.inlineNotice,children:"No telemetry targets found for this farm."}):null,I.unitType==="RACK"?a.jsxs(a.Fragment,{children:[a.jsx("label",{className:bt.label,htmlFor:"rack-page-subunit-type",children:"Sub-unit type (optional)"}),a.jsxs("select",{id:"rack-page-subunit-type",className:bt.input,value:I.subUnitType,onChange:Ae("subUnitType"),disabled:!I.unitId,children:[a.jsx("option",{value:"",children:"Select a sub-unit type"}),xe.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]}),H.subUnitType&&a.jsx("div",{className:bt.inlineError,children:H.subUnitType}),a.jsx("label",{className:bt.label,htmlFor:"rack-page-subunit-id",children:"Sub-unit ID (optional)"}),a.jsxs("select",{id:"rack-page-subunit-id",className:bt.input,value:I.subUnitId,onChange:Ae("subUnitId"),disabled:!I.subUnitType,children:[a.jsx("option",{value:"",children:"Select a sub-unit ID"}),X.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]}),H.subUnitId&&a.jsx("div",{className:bt.inlineError,children:H.subUnitId})]}):null,a.jsx("label",{className:bt.label,htmlFor:"rack-page-slug",children:"Slug"}),a.jsx("input",{id:"rack-page-slug",className:bt.input,value:I.slug,onChange:Ae("slug"),placeholder:"monitoring-page",required:!0}),H.slug&&a.jsx("div",{className:bt.inlineError,children:H.slug}),a.jsxs("label",{className:bt.checkboxRow,htmlFor:"rack-page-enabled",children:[a.jsx("input",{id:"rack-page-enabled",type:"checkbox",checked:I.enabled,onChange:Ae("enabled")}),a.jsx("span",{children:"Enabled"})]}),a.jsx("label",{className:bt.label,htmlFor:"rack-page-sort",children:"Sort order"}),a.jsx("input",{id:"rack-page-sort",className:bt.input,type:"number",value:I.sortOrder,onChange:Ae("sortOrder")}),k&&a.jsx("div",{className:bt.bannerError,children:k}),a.jsx("button",{type:"submit",className:bt.primaryButton,disabled:S,children:S?"Saving":"Save page"})]})]})]})]})}const z6="_page_nkvje_1",F6="_card_nkvje_13",H6="_list_nkvje_29",Ob={page:z6,card:F6,list:H6};function V6(){return a.jsx("div",{className:Ob.page,children:a.jsxs("div",{className:Ob.card,children:[a.jsx("h1",{children:"Worker Dashboard"}),a.jsx("p",{children:"Workers can always reach Home and this dashboard. Other URLs redirect to allowed pages."}),a.jsxs("ul",{className:Ob.list,children:[a.jsx("li",{children:"Link to process orders."}),a.jsx("li",{children:"Check assigned tasks."}),a.jsx("li",{children:"Return to Home to view products."})]})]})})}const Fo=Bn(),mD=`${Fo}/api/me`,HC=mD,VC="PUT",K6=`${Fo}/api/store/orders/my`,G6=new Set([401,403]),W6=new Set([404,501]),qi=(e,t)=>G6.has(e?.status)?(t?.(e),!0):!1,x1=e=>{if(W6.has(e?.status)){const t=new Error(e?.message||"Endpoint is not available");throw t.status=e?.status,t.isUnsupported=!0,t}};async function hD(e,{signal:t,onUnauthorized:n}={}){if(!e)throw new Error("Authentication is required to load the profile");const r=await Ve(mD,{headers:Zt(e),signal:t},{token:e});try{return await at(r,"Failed to load profile")}catch(i){if(qi(i,n))return null;throw i}}async function dp(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to update the profile");const i=await Ve(HC,{method:VC,headers:Zt(e),body:JSON.stringify(t??{}),signal:n},{token:e});try{return await at(i,"Failed to update profile")}catch(o){if(qi(o,r))return null;if([404,405,501].includes(o?.status))throw o.isUnsupported=!0,o?.status===405?o.message="Server does not allow PUT /api/me (405). Backend endpoint is missing or not enabled.":o.message="Profile updates are not available yet.",o;const d=t&&typeof t=="object"?Object.keys(t):[],f=typeof o?.payload=="string"?o.payload.slice(0,200):JSON.stringify(o?.payload??{},null,2).slice(0,200);throw console.error("Profile update failed",{method:VC,url:HC,payloadKeys:d,status:o?.status,responseSnippet:f}),o}}async function Y6(e,{signal:t,onUnauthorized:n}={}){if(!e)throw new Error("Authentication is required to load orders");const r=await Ve(K6,{headers:Zt(e),signal:t},{token:e});try{return await at(r,"Failed to load your orders")}catch(i){if(qi(i,n))return null;throw x1(i),i}}async function X6(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to load an order");if(!t)throw new Error("Order ID is required");const i=`${Fo}/api/me/orders/${encodeURIComponent(t)}`,o=await Ve(i,{headers:Zt(e),signal:n},{token:e});try{return await at(o,"Failed to load order details")}catch(c){if(qi(c,r))return null;throw x1(c),c}}async function pD(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to cancel an order");if(!t)throw new Error("Order ID is required");const i=`${Fo}/api/me/orders/${encodeURIComponent(t)}/cancel`,o=await Ve(i,{method:"POST",headers:Zt(e),signal:n},{token:e});try{return await at(o,"Failed to cancel order")}catch(c){if(qi(c,r))return null;throw x1(c),c}}const S1=async(e,t)=>{const n=e.headers?.get?.("content-type")||"";try{if(n.includes("application/json")){const o=await e.json(),c=o?.reason||o?.message||t,d=new Error(c);throw d.status=e.status,d.payload=o,d}const r=await e.text()||t,i=new Error(r);throw i.status=e.status,i}catch(r){if(r?.status)throw r;const i=new Error(t);throw i.status=e.status,i}};async function Q6(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to view a receipt");if(!t)throw new Error("Order ID is required");const i=`${Fo}/api/orders/${encodeURIComponent(t)}/receipt`,o=await Ve(i,{headers:Zt(e),signal:n},{token:e});if(!o.ok){const c=new Error("Authentication is required to view a receipt");if(c.status=o.status,qi(c,r))return null;await S1(o,"Failed to load receipt")}return o.text()}async function Z6(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to view an invoice");if(!t)throw new Error("Order ID is required");const i=`${Fo}/api/orders/${encodeURIComponent(t)}/invoice`,o=await Ve(i,{headers:Zt(e),signal:n},{token:e});if(!o.ok){const c=new Error("Authentication is required to view an invoice");if(c.status=o.status,qi(c,r))return null;await S1(o,"Failed to load invoice")}return o.text()}async function J6(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to download an invoice");if(!t)throw new Error("Order ID is required");const i=`${Fo}/api/orders/${encodeURIComponent(t)}/invoice.pdf`,o=await Ve(i,{headers:Zt(e),signal:n},{token:e});if(!o.ok){const h=new Error("Authentication is required to download an invoice");if(h.status=o.status,qi(h,r))return null;await S1(o,"Failed to download invoice PDF")}const c=o.headers?.get?.("content-disposition")||"",d=/filename\*?=(?:UTF-8''|")?([^;"]+)/i.exec(c),f=d?.[1]?decodeURIComponent(d[1].trim()):`invoice-${t}.pdf`;return{blob:await o.blob(),fileName:f}}async function ez(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to email an invoice");if(!t)throw new Error("Order ID is required");const i=`${Fo}/api/orders/${encodeURIComponent(t)}/invoice/email`,o=await Ve(i,{method:"POST",headers:Zt(e),signal:n},{token:e});try{return await at(o,"Failed to email invoice")}catch(c){if(qi(c,r))return null;throw c}}const w1=Bn(),qa=`${w1}/api/store`,tz=e=>{if(e==null||e==="")return null;const t=Number(e);return!Number.isFinite(t)||t<0?null:t<=1?t*100:t},nz=(e={})=>tz(e?.vatRate??e?.vat_rate??e?.momsRate??e?.taxRate??e?.tax_rate),KC=(e,t)=>{const n=Number(e),r=Number(t);if(!Number.isFinite(n)||n<=0||!Number.isFinite(r)||r<=0)return 0;const i=r/100;return n-n/(1+i)},Ho=(e,t)=>{const n={};return e&&(n["X-Cart-Id"]=e),t&&(n["X-Session-Id"]=t),n};async function rz({signal:e,token:t}={}){const n=t??null,r=await Ve(`${qa}/products`,{signal:e,headers:n?Zt(n):void 0},{token:n});return at(r,"Failed to load products")}async function az({signal:e}={}){const t=await Ve(`${qa}/banners`,{method:"GET",signal:e});return at(t,"Failed to load banners")}async function sz({signal:e}={}){const t=await Ve(`${qa}/config`,{method:"GET",signal:e});return at(t,"Failed to load store config")}async function iz(e,{signal:t,token:n}={}){if(!e)throw new Error("Product ID is required");const r=`${qa}/products/${encodeURIComponent(e)}`,i=n??null,o=await Ve(r,{signal:t,headers:i?Zt(i):void 0},{token:i});return at(o,"Failed to load product")}async function Rb(e,{signal:t}={}){const n=e?JSON.stringify({sessionId:e}):null,r=await Ve(`${qa}/cart`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...Ho(null,e)},body:n,signal:t});return at(r,"Failed to create cart")}async function oz({signal:e}={}){const t=await Ve(`${qa}/cart`,{method:"GET",credentials:"include",signal:e});return at(t,"Failed to fetch current cart")}async function yD(e,t,{signal:n}={}){if(!e)throw new Error("Cart ID is required");const r=await Ve(`${qa}/cart/${encodeURIComponent(e)}`,{credentials:"include",headers:Ho(e,t),signal:n});return at(r,"Failed to fetch cart")}async function lz(e,t,n,r=1,{signal:i}={}){if(!n)throw new Error("Item ID is required");const o=await Ve(`${qa}/cart/${encodeURIComponent(e)}/items`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...Ho(e,t)},body:JSON.stringify({variantId:n,quantity:r}),signal:i});return at(o,"Failed to add item to cart")}async function cz(e,t,n,r,{signal:i}={}){if(!n)throw new Error("Line item ID is required");const o=await Ve(`${qa}/cart/${encodeURIComponent(e)}/items/${encodeURIComponent(n)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",...Ho(e,t)},body:JSON.stringify({quantity:r}),signal:i});return at(o,"Failed to update cart item")}async function uz(e,t,n,{signal:r}={}){if(!n)throw new Error("Line item ID is required");const i=await Ve(`${qa}/cart/${encodeURIComponent(e)}/items/${encodeURIComponent(n)}`,{method:"DELETE",credentials:"include",headers:Ho(e,t),signal:r});return at(i,"Failed to remove item from cart")}async function dz(e,t={},{signal:n}={}){if(!e)throw new Error("Cart ID is required");const{email:r,userId:i,shippingAddress:o,sessionId:c,customerType:d,company:f,couponCode:m,paymentMode:h}=t??{},g=await fetch(`${qa}/checkout`,{method:"POST",headers:{"Content-Type":"application/json",...Ho(e,c)},body:JSON.stringify({cartId:e,email:r,userId:i,shippingAddress:o,customerType:d,company:f,couponCode:m,paymentMode:h}),signal:n});return at(g,"Checkout failed")}async function fz(e,{cartId:t,couponCode:n,sessionId:r}={},{signal:i}={}){if(!t)throw new Error("Cart ID is required");if(!n)throw new Error("Coupon code is required");const o=await Ve(`${qa}/cart/apply-coupon`,{method:"POST",headers:{...Zt(e),...Ho(t,r)},body:JSON.stringify({cartId:t,code:n}),signal:i},{token:e});return at(o,"Failed to apply coupon")}async function mz(e,{cartId:t,email:n,shippingAddress:r,couponCode:i,sessionId:o,customerType:c,company:d,paymentMode:f}={},{signal:m}={}){if(!t)throw new Error("Cart ID is required");const h=await Ve(`${qa}/checkout/stripe/session`,{method:"POST",headers:{...Zt(e),...Ho(t,o)},body:JSON.stringify({cartId:t,email:n,shippingAddress:r,couponCode:i,customerType:c,company:d,paymentMode:f}),signal:m},{token:e});return at(h,"Failed to start Stripe Checkout")}async function j1(e,{signal:t}={}){if(!e)throw new Error("Order ID is required");const n=await Ve(`${w1}/api/orders/${encodeURIComponent(e)}`,{signal:t,credentials:"include"});return rD(n,"Failed to load order status")}async function hz(e,{signal:t}={}){if(!e)throw new Error("Session ID is required");const n=encodeURIComponent(e),r=await fetch(`${w1}/api/store/orders/by-session/${n}`,{signal:t});return rD(r,"Failed to load order by session")}function uf(e,t={}){if(!e)return null;const n=e.cart??e,r=n.id??n.cartId??e.cartId??t.cartId??null,i=n.sessionId??e.sessionId??t.sessionId??null,o={...n,id:r,cartId:r,sessionId:i},c=o.totals??{},d=c.currency||o.currency||e?.currency||"SEK",f=Array.isArray(o.items)?o.items:[],m=I=>{const L=Number(I);return Number.isFinite(L)?L:0},h=(I,L)=>{if(I!=null)return m(I);if(L!=null)return m(L)/100},g=f.map(I=>{const L=I?.quantity??I?.qty??1,$=h(I?.price??I?.unitPrice,I?.unitPriceCents),G=h(I?.discountedUnitPrice,I?.discountedUnitPriceCents),te=h(I?.total??I?.lineTotal,I?.lineTotalCents),re=h(I?.discountedLineTotal,I?.discountedLineTotalCents),M=h(I?.lineDiscount,I?.lineDiscountCents);return{...I,quantity:L,unitPrice:$,discountedUnitPrice:G,lineTotal:te,discountedLineTotal:re,lineDiscount:M,vatRate:nz(I)}});o.items=g;const v=g.reduce((I,L)=>{const $=m(L?.quantity??L?.qty??1),G=m(L?.discountedUnitPrice??L?.unitPrice??L?.price??L?.amount??0),te=L?.discountedLineTotal??L?.lineTotal??L?.total,re=te!=null?m(te):G*$;return I+re},0),x=h(c.subtotal,c.subtotalCents),w=h(c.discount,c.discountCents),_=h(c.shipping,c.shippingCents),S=h(c.tax,c.taxCents),j=h(c.total,c.totalCents),A=h(o.subtotal,o.subtotalCents),E=h(o.discount,o.discountCents),C=h(o.total,o.totalCents),T=h(o.shipping,o.shippingCents),O=h(o.tax,o.taxCents),R=x??A??v,k=w??E??0,P=_??T??0,H=g.reduce((I,L)=>{const $=L?.discountedLineTotal??L?.lineTotal;if($!=null)return I+KC($,L?.vatRate);const G=m(L?.quantity??L?.qty??1),te=m(L?.discountedUnitPrice??L?.unitPrice??L?.price??0);return I+KC(te*G,L?.vatRate)},0),K=S??O??H??0,B=R+P+K-k,U=j??C??B;return o.totals={...c,currency:d,subtotal:R,discount:k,shipping:P,tax:K,total:U},o}const Wc={cart:null,cartId:null,sessionId:null},gD=p.createContext({initializing:!0,isCartOpen:!1,cart:null,cartId:null,sessionId:null,toast:null,pendingProductId:null,pendingItemId:null,openCart:()=>{},closeCart:()=>{},refreshCart:async()=>{},addToCart:async()=>{},updateItemQuantity:async()=>{},removeItem:async()=>{},startNewCart:async()=>{},clearCart:()=>{},notify:()=>{},clearToast:()=>{}}),pz=()=>{if(typeof window>"u")return Wc;const e=window.localStorage.getItem(b1);if(!e)return Wc;try{const t=JSON.parse(e);return{cartId:t.cartId||null,sessionId:t.sessionId||null}}catch{return Wc}},yz=(e,t)=>{typeof window>"u"||!e||!t||window.localStorage.setItem(b1,JSON.stringify({cartId:e,sessionId:t}))},gz=()=>{oD()};function vz({children:e}){const{isAuthenticated:t,token:n}=Xt(),[r,i]=p.useState(()=>pz()),[o,c]=p.useState(null),[d,f]=p.useState(!0),[m,h]=p.useState(null),[g,v]=p.useState(null),[x,w]=p.useState(null),[_,S]=p.useState(!1),j=p.useRef(r),A=p.useRef(o),E=p.useRef(!1),C=p.useRef(null),T=p.useRef({isAuthenticated:t,token:n});p.useEffect(()=>{j.current=r},[r]),p.useEffect(()=>{A.current=o},[o]);const O=p.useCallback(()=>{gz(),j.current=Wc,A.current=null,C.current=null,i(Wc),c(null),w(null),v(null),S(!1)},[]),R=p.useCallback(async Y=>{try{const Z=await oz(),ee=uf(Z,Wc),ie=ee?.id||ee?.cartId||null;!((ee?.items?.length??0)===0)&&!(ie&&ie!==Y)&&console.warn("Logout cart reset guard detected stale anonymous cart state.",{previousCartId:Y,nextCartId:ie})}catch(Z){console.warn("Logout cart reset guard request failed.",Z)}},[]),k=p.useCallback((Y,Z)=>{Z&&h({type:Y,message:Z,id:Date.now()})},[]),P=p.useCallback(Y=>{if(Y?.status!==409)return!1;const Z=`${Y?.message||""}`.toLowerCase();return(Y?.code||Y?.payload?.code||Y?.payload?.error?.code)==="CART_CLOSED"||Z.includes("no longer open")},[]),H=p.useCallback((Y,Z={})=>{const ee=uf(Y,j.current);if(!ee)return null;const ie=ee.id||ee.cartId,xe=ee.sessionId;if(ie&&xe&&(i(X=>X.cartId===ie&&X.sessionId===xe?X:{cartId:ie,sessionId:xe}),yz(ie,xe)),c(ee),Z?.itemId||Z?.productId||Z?.variantId){const X=ee.items?.find(he=>Z.itemId?he.id===Z.itemId:Z.variantId?he.variantId===Z.variantId||he.variant?.id===Z.variantId:he.productId===Z.productId),Ae=X?.quantity??X?.qty;X&&Z.quantity!==void 0&&Ae!==Z.quantity&&k("warning","Quantity was adjusted based on current stock.")}return Z?.intent==="add"&&Z?.silent!==!0&&k("success","Added to cart"),ee},[r,k]),K=p.useCallback(async({allowCreate:Y=!0,silent:Z=!1}={})=>{if(C.current)return C.current;const ee=(async()=>{const ie=j.current.cartId,xe=j.current.sessionId,X=A.current?.id||ie,Ae=A.current?.sessionId||xe;try{if(X&&Ae){const ue=await yD(X,Ae);if(ue?.status&&ue.status!=="OPEN"){O();const Xe=await Rb();return Z||k("info","Previous cart was checked out. Started a new cart."),H(Xe,Z?{silent:!0}:void 0)}return H(ue,Z?{silent:!0}:void 0)}if(!Y)return null;const he=await Rb(Ae);return H(he,Z?{silent:!0}:void 0)}catch(he){if(!Y)return k("error",he?.message||"Unable to start a cart session."),null;console.error("Failed to sync cart",he),O();try{const ue=await Rb();return H(ue,Z?{silent:!0}:void 0)}catch(ue){return k("error",ue?.message||"Unable to start a cart session."),null}}})().finally(()=>{C.current=null,f(!1)});return C.current=ee,ee},[H,O,k]),B=p.useCallback(async()=>{O(),await K({allowCreate:!0,silent:!0}),k("info","Cart expired. Please retry.")},[K,O,k]);p.useEffect(()=>{const Y=()=>{const Z=A.current?.id||j.current?.cartId||null;O(),R(Z)};if(!(typeof window>"u"))return window.addEventListener(Z0,Y),()=>{window.removeEventListener(Z0,Y)}},[O,R]),p.useEffect(()=>{E.current||(E.current=!0,f(!0),K())},[K]),p.useEffect(()=>{if(!E.current){T.current={isAuthenticated:t,token:n};return}const Y=T.current;T.current={isAuthenticated:t,token:n},t&&n&&(!Y.isAuthenticated||Y.token!==n)&&K({allowCreate:!0,silent:!0})},[K,t,n]);const U=p.useCallback(async()=>j.current.cartId?K({allowCreate:!1,silent:!0}):null,[K]),I=p.useCallback(async(Y,Z=1,ee=null)=>{if(!Y)return null;v(ee||Y);try{const ie=await K({allowCreate:!0,silent:!0}),xe=ie?.id||ie?.cartId,X=ie?.sessionId;if(!xe||!X)throw new Error("Unable to start a cart session. Please try again.");const Ae=await lz(xe,X,Y,Z),he=H(Ae,{itemId:Y,quantity:Z,intent:"add"});return S(!0),he}catch(ie){if(P(ie))await B();else if(ie?.status===409){const xe=ie?.message||"",X=xe.toLowerCase().includes("not enough")?"Not enough stock":"Out of stock";k("error",xe||X)}else k("error",ie?.message||"Could not add to cart.");return null}finally{v(null)}},[H,K,P,B,k]),L=p.useCallback(async(Y,Z)=>{if(!Y||A.current?.status&&A.current.status!=="OPEN")return null;w(Y);try{const ee=await cz(j.current.cartId,j.current.sessionId,Y,Z);return H(ee,{itemId:Y,quantity:Z})}catch(ee){return P(ee)?await B():k("error",ee?.message||"Unable to update quantity."),null}finally{w(null)}},[H,P,B,k]),$=p.useCallback(async Y=>{if(!Y||A.current?.status&&A.current.status!=="OPEN")return null;w(Y);try{const Z=await uz(j.current.cartId,j.current.sessionId,Y);return H(Z,{itemId:Y,silent:!0})}catch(Z){return P(Z)?await B():k("error",Z?.message||"Unable to remove item."),null}finally{w(null)}},[H,P,B,k]),G=p.useCallback(async()=>{O();const Y=await K({allowCreate:!0,silent:!0});return k("info","Started a new cart."),Y},[K,O,k]),te=p.useCallback(()=>S(!1),[]),re=p.useCallback(()=>S(!0),[]),M=p.useCallback(()=>{O()},[O]),q=p.useCallback(()=>h(null),[]),z=p.useCallback((Y,Z)=>k(Y,Z),[k]),V=p.useMemo(()=>({initializing:d,isCartOpen:_,cart:o,cartId:r.cartId||o?.id||null,sessionId:r.sessionId||o?.sessionId||null,toast:m,pendingProductId:g,pendingItemId:x,openCart:re,closeCart:te,refreshCart:U,addToCart:I,updateItemQuantity:L,removeItem:$,startNewCart:G,clearCart:M,notify:z,clearToast:q}),[I,o,r.cartId,r.sessionId,q,M,te,d,_,re,x,g,U,$,G,m,L,z]);return a.jsx(gD.Provider,{value:V,children:e})}function zi(){return p.useContext(gD)}const bz="_brand_xstw8_69",_z="_brandName_xstw8_87",xz="_brandLogo_xstw8_95",Sz="_ghostButton_xstw8_127",wz="_menuAction_xstw8_129",jz="_menuLink_xstw8_131",Nz="_userButton_xstw8_163",Az="_cartIconButton_xstw8_205",Ez="_cartIcon_xstw8_205",Cz="_cartBadge_xstw8_273",Tz="_cartTotal_xstw8_297",kz="_authActions_xstw8_309",Oz="_moduleTab_xstw8_367",Rz="_moduleTabActive_xstw8_405",Mz="_subtleButton_xstw8_417",Iz="_userArea_xstw8_445",Dz="_userButtonCompact_xstw8_485",Pz="_accountIconButton_xstw8_497",$z="_accountIcon_xstw8_497",Lz="_hamburgerButton_xstw8_569",Bz="_hamburgerIcon_xstw8_605",Uz="_mobileDrawerBackdrop_xstw8_635",qz="_mobileDrawerPanel_xstw8_649",zz="_mobileDrawerHeader_xstw8_679",Fz="_mobileDrawerTitle_xstw8_691",Hz="_mobileDrawerCloseButton_xstw8_703",Vz="_mobileDrawerNav_xstw8_733",Kz="_mobileDrawerLink_xstw8_749",Gz="_userName_xstw8_783",Wz="_userNameSkeleton_xstw8_799",Yz="_userMenu_xstw8_815",Xz="_userMenuMeta_xstw8_845",Qz="_userIdentity_xstw8_855",Zz="_mutedLabel_xstw8_869",Jz="_metaValue_xstw8_879",eF="_metaValueSkeleton_xstw8_907",tF="_roleBadge_xstw8_923",nF="_caret_xstw8_1019",rF="_avatarWrapper_xstw8_1039",aF="_avatar_xstw8_1039",sF="_avatarImage_xstw8_1083",iF="_avatarStatus_xstw8_1099",Nt={brand:bz,brandName:_z,brandLogo:xz,ghostButton:Sz,menuAction:wz,menuLink:jz,userButton:Nz,cartIconButton:Az,cartIcon:Ez,cartBadge:Cz,cartTotal:Tz,authActions:kz,moduleTab:Oz,moduleTabActive:Rz,subtleButton:Mz,userArea:Iz,userButtonCompact:Dz,accountIconButton:Pz,accountIcon:$z,hamburgerButton:Lz,hamburgerIcon:Bz,mobileDrawerBackdrop:Uz,mobileDrawerPanel:qz,mobileDrawerHeader:zz,mobileDrawerTitle:Fz,mobileDrawerCloseButton:Hz,mobileDrawerNav:Vz,mobileDrawerLink:Kz,userName:Gz,userNameSkeleton:Wz,userMenu:Yz,userMenuMeta:Xz,userIdentity:Qz,mutedLabel:Zz,metaValue:Jz,metaValueSkeleton:eF,roleBadge:tF,caret:nF,avatarWrapper:rF,avatar:aF,avatarImage:sF,avatarStatus:iF};function jt(e,t="SEK"){if(e==null||Number.isNaN(Number(e)))return"";try{return new Intl.NumberFormat("sv-SE",{style:"currency",currency:t||"SEK",minimumFractionDigits:2,maximumFractionDigits:2}).format(Number(e))}catch{return`${Number(e).toFixed(2)} ${t||"SEK"}`}}function eu(e="SEK"){return e?e.toUpperCase():"SEK"}const oF="https://pic.hydroleaf.se/logo-mark.png",lF=[{path:"/admin/overview",label:"Admin Overview",permissions:[kt.ADMIN_OVERVIEW_VIEW]},{path:"/admin/team",label:"Admin Management",permissions:[kt.ADMIN_PERMISSIONS_MANAGE]},{path:"/store/admin/products",label:"Products",permissions:[kt.PRODUCTS_MANAGE]},{path:"/store/admin/customers",label:"Customers",permissions:[kt.CUSTOMERS_VIEW]},{path:"/store/admin/banners",label:"Banners",permissions:[kt.PRODUCTS_MANAGE]},{path:"/admin/tools",label:"Super Admin Tools",roles:["SUPER_ADMIN"]},{path:"/admin/directory",label:"Admin Directory",roles:["SUPER_ADMIN"]}],cF=(e,t,n=[],r=[])=>{const i=n.length>0?n:t?[t]:[],o=i.includes("SUPER_ADMIN");if(e?.roles?.length>0&&!i.some(f=>e.roles.includes(f)))return!1;if(!e?.permissions||e.permissions.length===0||o)return!0;const c={permissions:r};return e.permissions.every(d=>us(c,d))};function Yc(){const{isAuthenticated:e,role:t,roles:n,permissions:r,logout:i,profile:o,loadingProfile:c}=Xt(),{cart:d,openCart:f}=zi(),[m,h]=p.useState(!1),g=p.useRef(null),v=p.useRef(null),[x,w]=p.useState({visibility:"hidden"}),[_,S]=p.useState(!1),[j,A]=p.useState(!1),E=cr(),C=E.pathname==="/store"||E.pathname.startsWith("/store/"),O=(n?.length?n:t?[t]:[]).includes("SUPER_ADMIN"),R=(n?.length??0)>0||!!t,P=(!c||R)&&e&&Pf({role:t,roles:n}),H=t?t.replace("_"," "):"",K=o?.displayName||o?.fullName||o?.username||o?.email||"",B=K||"User",U=K?.trim()?.charAt(0)?.toUpperCase()||"U",I=o?.email?.trim()||"",L=o?.pictureUrl?.trim()||"",$=!!L&&!_,G=o?.displayName||o?.fullName||I||o?.username||"Account",te=c&&!K,re=p.useMemo(()=>d?.items?.reduce((he,ue)=>he+(ue.quantity??ue.qty??0),0)||0,[d]),M=p.useMemo(()=>jt(d?.totals?.total??d?.totals?.subtotal??0,d?.totals?.currency||"SEK"),[d?.totals?.currency,d?.totals?.subtotal,d?.totals?.total]),z=p.useMemo(()=>e?lF.filter(he=>cF(he,t,n,r)):[],[e,r,t,n]).length>0,V=O||us({permissions:r},kt.MONITORING_VIEW),Y=t==="CUSTOMER"?"/account":"/monitoring/overview",Z=p.useRef(null),ee=p.useRef(null),ie=()=>{A(!1)},xe=()=>{A(!0)};p.useEffect(()=>{S(!1)},[L]),p.useEffect(()=>{h(!1),A(!1)},[E.pathname]),p.useEffect(()=>{if(!j)return;const he=document.body.style.overflow,ue=Z.current;return document.body.style.overflow="hidden",ee.current?.focus(),()=>{document.body.style.overflow=he,ue?.focus()}},[j]),p.useEffect(()=>{const he=Xe=>{const Ue=g.current?.contains(Xe.target),ye=v.current?.contains(Xe.target);!Ue&&!ye&&h(!1)},ue=Xe=>{Xe.key==="Escape"&&(h(!1),A(!1))};return document.addEventListener("mousedown",he),document.addEventListener("keydown",ue),()=>{document.removeEventListener("mousedown",he),document.removeEventListener("keydown",ue)}},[]),p.useEffect(()=>{if(!m)return;const he=()=>{const ue=g.current,Xe=v.current;if(!ue||!Xe)return;const Ue=ue.getBoundingClientRect(),ye=Xe.getBoundingClientRect(),je=window.innerWidth,Ee=window.innerHeight,qe=Ue.bottom+6,W=Math.max(je-16,0),fe=Math.min(ye.width,W),we=Math.max(je-fe-8,8),de=je-Ue.right,ve=Math.min(Math.max(de,8),we),se=Math.max(Ee-qe-12,0);w({top:`${qe}px`,right:`${ve}px`,maxHeight:se?`${se}px`:void 0,visibility:"visible"})};return he(),window.addEventListener("resize",he),window.addEventListener("scroll",he,!0),()=>{window.removeEventListener("resize",he),window.removeEventListener("scroll",he,!0)}},[m]);const X=()=>{h(!1),ie()},Ae=({isActive:he})=>`${Nt.moduleTab} ${he?Nt.moduleTabActive:""}`;return a.jsxs("header",{className:"topbar",children:[a.jsxs("div",{className:"topbar__inner",children:[a.jsx("div",{className:"topbar__left",children:a.jsxs(nt,{to:"/store",className:Nt.brand,"aria-label":"Go to store",onClick:X,children:[a.jsx("img",{src:oF,alt:"HydroLeaf logo",className:Nt.brandLogo}),a.jsx("span",{className:Nt.brandName,children:"HydroLeaf"})]})}),a.jsxs("div",{className:"topbar__center",children:[a.jsx(Tr,{to:"/store",className:Ae,onClick:X,children:"Store"}),a.jsx(Tr,{to:"/about",className:Ae,onClick:X,children:"About"}),a.jsx(Tr,{to:"/contact",className:Ae,onClick:X,children:"Contact"}),P&&a.jsxs(a.Fragment,{children:[V&&a.jsx(Tr,{to:"/monitoring/overview",className:Ae,onClick:X,children:"Monitoring"}),V&&a.jsx(Tr,{to:"/monitoring/reports",className:Ae,onClick:X,children:"Reports"}),z&&a.jsx(Tr,{to:"/admin/overview",className:Ae,onClick:X,children:"Admin"})]})]}),a.jsxs("div",{className:"topbar__right",children:[C&&a.jsxs("button",{type:"button",className:Nt.cartIconButton,onClick:f,"aria-label":"Open cart",children:[a.jsx("span",{className:Nt.cartIcon,"aria-hidden":"true",children:a.jsxs("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:[a.jsx("path",{d:"M6.5 6h13l-1.3 7.1a2 2 0 0 1-2 1.7H9.1a2 2 0 0 1-2-1.6L5.1 4H3",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"9",cy:"19",r:"1.4",fill:"currentColor"}),a.jsx("circle",{cx:"16.5",cy:"19",r:"1.4",fill:"currentColor"})]})}),re>0&&a.jsx("span",{className:Nt.cartBadge,"aria-label":`${re} items in cart`,children:re}),re>0&&a.jsx("span",{className:Nt.cartTotal,children:M})]}),a.jsx("button",{type:"button",className:Nt.hamburgerButton,"aria-label":"Open navigation menu","aria-expanded":j,"aria-controls":"mobile-navigation-drawer",ref:Z,onClick:()=>{if(j){ie();return}xe()},children:a.jsxs("span",{className:Nt.hamburgerIcon,"aria-hidden":"true",children:[a.jsx("span",{}),a.jsx("span",{}),a.jsx("span",{})]})}),e?a.jsxs("div",{className:Nt.userArea,children:[a.jsxs("button",{type:"button",className:`${Nt.userButton} ${C?Nt.userButtonCompact:""}`,"aria-expanded":m,"aria-haspopup":"menu","aria-label":"Account",title:"Account",ref:g,onClick:()=>{h(he=>!he)},children:[a.jsxs("span",{className:Nt.avatarWrapper,"aria-hidden":"true",children:[$?a.jsx("img",{src:L,alt:"",className:Nt.avatarImage,referrerPolicy:"no-referrer",onError:()=>{console.warn("[Navbar] Failed to load avatar image",L),S(!0)}}):a.jsx("span",{className:Nt.avatar,children:U}),a.jsx("span",{className:Nt.avatarStatus})]}),!C&&(te?a.jsx("span",{className:Nt.userNameSkeleton,role:"status","aria-label":"Loading profile"}):a.jsx("span",{className:Nt.userName,children:B})),a.jsx("span",{className:Nt.caret,"aria-hidden":"true"})]}),m&&op.createPortal(a.jsxs("div",{className:Nt.userMenu,ref:v,style:x,role:"menu",children:[a.jsxs("div",{className:Nt.userMenuMeta,children:[a.jsxs("div",{className:Nt.userIdentity,children:[te?a.jsx("span",{className:Nt.metaValueSkeleton,role:"status","aria-label":"Loading profile"}):a.jsx("span",{className:Nt.metaValue,title:G,children:G}),H&&!C&&a.jsx("span",{className:Nt.roleBadge,children:H})]}),a.jsx("span",{className:Nt.mutedLabel,children:"Account"})]}),a.jsx(nt,{to:Y,className:Nt.menuLink,onClick:X,children:"My account"}),t==="CUSTOMER"&&a.jsx(nt,{to:"/account/orders",className:Nt.menuLink,onClick:X,children:"Orders"}),z&&!C&&a.jsx(nt,{to:"/admin",className:Nt.menuLink,onClick:X,children:"Admin Console"}),a.jsx("button",{type:"button",className:Nt.menuAction,onClick:i,children:"Sign out"})]}),document.body)]}):C?a.jsx(nt,{to:"/login",className:Nt.accountIconButton,"aria-label":"Sign in",title:"Sign in",children:a.jsx("span",{className:Nt.accountIcon,"aria-hidden":"true",children:a.jsxs("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:[a.jsx("circle",{cx:"12",cy:"8",r:"3.2",fill:"none",stroke:"currentColor",strokeWidth:"1.8"}),a.jsx("path",{d:"M5 19.5c1.7-3.2 5-5.1 7-5.1s5.3 1.9 7 5.1",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})})}):a.jsxs("div",{className:Nt.authActions,children:[a.jsx(nt,{to:"/login",className:Nt.ghostButton,children:"Login"}),a.jsx(nt,{to:"/register",className:`${Nt.ghostButton} ${Nt.subtleButton}`,children:"Create account"})]})]})]}),j&&op.createPortal(a.jsx("div",{className:Nt.mobileDrawerBackdrop,onClick:ie,role:"presentation",children:a.jsxs("aside",{id:"mobile-navigation-drawer",className:Nt.mobileDrawerPanel,role:"dialog","aria-modal":"true","aria-label":"Navigation menu",onClick:he=>{he.stopPropagation()},children:[a.jsxs("div",{className:Nt.mobileDrawerHeader,children:[a.jsx("h2",{className:Nt.mobileDrawerTitle,children:"Menu"}),a.jsx("button",{type:"button",className:Nt.mobileDrawerCloseButton,"aria-label":"Close navigation menu",onClick:ie,ref:ee,children:""})]}),a.jsxs("nav",{className:Nt.mobileDrawerNav,"aria-label":"Primary",children:[a.jsx(Tr,{to:"/store",className:Nt.mobileDrawerLink,onClick:X,children:"Store"}),a.jsx(Tr,{to:"/about",className:Nt.mobileDrawerLink,onClick:X,children:"About"}),a.jsx(Tr,{to:"/contact",className:Nt.mobileDrawerLink,onClick:X,children:"Contact"}),P&&V&&a.jsxs(a.Fragment,{children:[a.jsx(Tr,{to:"/monitoring/overview",className:Nt.mobileDrawerLink,onClick:X,children:"Monitoring"}),a.jsx(Tr,{to:"/monitoring/reports",className:Nt.mobileDrawerLink,onClick:X,children:"Reports"})]}),P&&z&&a.jsx(Tr,{to:"/admin/overview",className:Nt.mobileDrawerLink,onClick:X,children:"Admin"}),!e&&a.jsxs(a.Fragment,{children:[a.jsx(Tr,{to:"/login",className:Nt.mobileDrawerLink,onClick:X,children:"Login"}),a.jsx(Tr,{to:"/register",className:Nt.mobileDrawerLink,onClick:X,children:"Create account"})]})]})]})}),document.body)]})}function gy(){const{logout:e}=Xt();return p.useCallback(()=>{e({redirect:!1}),typeof window<"u"&&window.location.assign("/login")},[e])}const uF=e=>e?typeof e=="string"?e:e.paymentUrl??e.payment_url??e.checkoutUrl??e.checkout_url??e.redirectUrl??e.redirect_url??e.url??e.payment?.url??e.payment?.paymentUrl??e.checkout?.paymentUrl??e.checkout?.url??e.checkout?.checkoutUrl??null:null,vD=e=>String(e||"").trim().toUpperCase().replace(/[\s-]+/g,"_"),dF=new Set(["PENDING_CONFIRMATION","PENDING_PAYMENT","PENDING","RECEIVED","AWAITING_PAYMENT_CONFIRMATION","PROCESSING"]),bD=e=>dF.has(vD(e)),vy=e=>e?.formattedOrderNumber?String(e.formattedOrderNumber):e?.orderNumber?`HL-${e.orderNumber}`:`#${e?.id??""}`,N1=e=>{if(e==null||e==="")return null;const t=Number(e);return Number.isFinite(t)?t:null},fF=e=>{const t=N1(e);return t==null?null:t/100},Ro=(e,t=[],n=[])=>{for(const r of t){const i=N1(e?.[r]);if(i!=null)return i}for(const r of n){const i=fF(e?.[r]);if(i!=null)return i}return null},mF=(e={})=>{const t=N1(e.quantity??e.qty??e.count)??1,n=Ro(e,["price","unitPrice","amount"],["unitPriceCents","priceCents"]),r=Ro(e,["lineTotal","total","totalPrice"],["lineTotalCents","totalCents"]);return{...e,quantity:t,name:e.name??e.productName??e.title??e.productTitle??"Item",price:n??0,lineTotal:r??(n!=null?n*t:0)}},hF=(e={})=>{const t=e.totals??e.summary??e.amounts??{};return{currency:t.currency??e.currency??e.totalCurrency??"SEK",subtotal:Ro(t,["subtotal","subTotal","itemsSubtotal","itemsTotal"],["subtotalCents","subTotalCents","itemsSubtotalCents","itemsTotalCents"]),shipping:Ro(t,["shipping","shippingTotal","deliveryFee"],["shippingCents","shippingTotalCents","deliveryFeeCents"]),tax:Ro(t,["tax","taxTotal","vat","vatTotal","moms","momsTotal"],["taxCents","taxTotalCents","vatCents","vatTotalCents","momsCents","momsTotalCents"]),discount:Ro(t,["discount","discountTotal","promoDiscount"],["discountCents","discountTotalCents","promoDiscountCents"]),total:Ro(t,["total"],["totalCents","totalAmountCents"])}},_D=e=>(Array.isArray(e)?e:Array.isArray(e?.orders)?e.orders:[]).map(n=>({id:n.orderId??n.id??n.orderNumber??n.reference??"",orderNumber:n.orderNumber??n.reference??n.orderId??n.id??"",formattedOrderNumber:n.formattedOrderNumber??n.formatted_order_number??n.displayOrderNumber??"",status:n.orderStatus??n.order_status??n.displayStatus??n.mappedStatus??n.status??n.state??"PENDING",total:Ro(n,["totalAmount","total","amount"],["totalCents","totalAmountCents"]),currency:n.currency??n.totalCurrency??"SEK",createdAt:n.placedAt??n.createdAt??n.created??n.timestamp,updatedAt:n.updatedAt??n.updated??n.modifiedAt,items:(n.items??n.lines??[]).map(r=>mF(r)),itemsCount:Number.isFinite(n.itemsCount)?n.itemsCount:void 0,paymentMethod:n.paymentMethod??n.payment?.method??n.payment?.brand??n.payment_type??"",paymentReference:n.paymentReference??n.payment?.reference??n.payment?.id??n.paymentIntentId??"",paymentUrl:uF(n),deliveryType:n.deliveryType,paymentMode:n.paymentMode??n.payment_mode??n.payment?.mode??"",customerNote:n.customerNote??n.note??"",shippingAddress:n.shippingAddress??n.address??null,totals:hF(n),raw:n})),pF=e=>{const t=e?.order??e??{},n=_D([t])[0]||{},r=t.payment??{},i=vD(n.paymentMode||t.paymentMode||t.payment_mode||r.mode||""),o=t.orderStatus??t.order_status??e?.orderStatus??e?.order_status??e?.summary?.orderStatus??e?.summary?.order_status??t.summary?.orderStatus??t.summary?.order_status??null,c={...n,orderStatus:o,paymentStatus:t.paymentStatus??t.payment_state??r.status??"",paymentMethod:n.paymentMethod||r.method||r.brand||t.payment_type||"",paymentReference:n.paymentReference||r.reference||r.id||t.paymentIntentId||"",deliveryStatus:t.deliveryStatus??t.fulfillmentStatus??t.fulfillment?.status??"",paymentMode:i,invoiceNumber:t.invoiceNumber??t.invoice?.number??r.invoiceNumber??"",invoiceStatus:t.invoiceStatus??t.invoice?.status??r.invoiceStatus??"",invoiceDueDate:t.invoiceDueDate??t.invoice?.dueDate??r.invoiceDueDate??"",bankgiro:t.bankgiro??t.invoice?.bankgiro??r.bankgiro??"",invoiceOcr:t.invoiceOcr??t.invoice?.ocr??r.invoiceOcr??""};return c.paymentMode==="INVOICE_PAY_LATER"&&(c.paymentMethod=c.paymentMethod||"Invoice",c.paymentReference=c.paymentReference||c.invoiceNumber||"",c.paymentStatus=c.paymentStatus||"UNPAID"),c},yF="_page_1bn1o_1",gF="_shell_1bn1o_11",vF="_hero_1bn1o_21",bF="_title_1bn1o_47",_F="_subtitle_1bn1o_59",xF="_banner_1bn1o_71",SF="_bannerError_1bn1o_95",wF="_bannerAction_1bn1o_105",jF="_content_1bn1o_125",NF="_subnav_1bn1o_133",AF="_subnavInner_1bn1o_147",EF="_subnavToggle_1bn1o_169",CF="_subnavCaret_1bn1o_195",TF="_subnavList_1bn1o_213",kF="_subnavLink_1bn1o_227",OF="_subnavLinkActive_1bn1o_255",RF="_subnavListOpen_1bn1o_343",Cr={page:yF,shell:gF,hero:vF,title:bF,subtitle:_F,banner:xF,bannerError:SF,bannerAction:wF,content:jF,subnav:NF,subnavInner:AF,subnavToggle:EF,subnavCaret:CF,subnavList:TF,subnavLink:kF,subnavLinkActive:OF,subnavListOpen:RF};function MF(){const{token:e,profile:t,profileError:n,loadingProfile:r,refreshProfile:i}=Xt(),o=gy(),c=cr(),[d,f]=p.useState(!1),[m,h]=p.useState({supported:null,items:[],loading:!1,error:null,rateLimited:!1,hasFetched:!1,lastFetched:null});p.useEffect(()=>{f(!1)},[c.pathname]);const g=p.useCallback(async({silent:j=!1,signal:A}={})=>{if(m.rateLimited)return[];if(!e)return[];h(E=>({...E,loading:!0,error:j?E.error:null}));try{const E=await Y6(e,{signal:A,onUnauthorized:o});if(E===null)return h(T=>({...T,loading:!1,hasFetched:!0})),[];const C=_D(E);return h({supported:!0,items:C,loading:!1,error:null,rateLimited:!1,hasFetched:!0,lastFetched:Date.now()}),C}catch(E){return E?.name==="AbortError"?(h(C=>({...C,loading:!1})),[]):E?.status===429?(h(C=>({...C,supported:!0,loading:!1,error:"Too many requests. Please try again later.",rateLimited:!0,hasFetched:!0,lastFetched:Date.now()})),[]):E?.isUnsupported?(h({supported:!1,items:[],loading:!1,error:null,rateLimited:!1,hasFetched:!0,lastFetched:Date.now()}),[]):(h(C=>({...C,loading:!1,error:j?C.error:E?.message||"Failed to load orders",hasFetched:!0,lastFetched:Date.now()})),[])}},[m.rateLimited,o,e]),v=p.useMemo(()=>({profile:t,profileError:n,loadingProfile:r,refreshProfile:i,redirectToLogin:o,ordersState:m,loadOrders:g}),[g,r,m,t,n,o,i]),x="My Account",w="Manage your account details and orders in one place.",_=[{to:"/account",label:"Overview",end:!0},{to:"/account/orders",label:"Orders"},{to:"/account/addresses",label:"Addresses"},{to:"/account/settings",label:"Settings"},{to:"/account/security",label:"Security"}],S=_.find(j=>j.end?c.pathname===j.to:c.pathname.startsWith(j.to))?.label||"Overview";return a.jsxs("div",{className:Cr.page,children:[a.jsx(Yc,{}),a.jsxs("div",{className:Cr.shell,children:[a.jsx("div",{className:Cr.hero,children:a.jsxs("div",{children:[a.jsx("h1",{className:Cr.title,children:x}),a.jsx("p",{className:Cr.subtitle,children:w})]})}),a.jsx("div",{className:Cr.subnav,children:a.jsxs("div",{className:Cr.subnavInner,children:[a.jsxs("button",{type:"button",className:Cr.subnavToggle,onClick:()=>f(j=>!j),"aria-expanded":d,children:[S,a.jsx("span",{className:Cr.subnavCaret,"aria-hidden":"true"})]}),a.jsx("div",{className:`${Cr.subnavList} ${d?Cr.subnavListOpen:""}`,children:_.map(j=>a.jsx(Tr,{to:j.to,end:j.end,className:({isActive:A})=>`${Cr.subnavLink} ${A?Cr.subnavLinkActive:""}`,children:j.label},j.to))})]})}),n&&a.jsxs("div",{className:`${Cr.banner} ${Cr.bannerError}`,role:"alert",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Failed to load account"}),a.jsx("div",{children:n})]}),a.jsx("button",{type:"button",className:Cr.bannerAction,onClick:()=>i?.(),children:"Retry"})]}),a.jsx("div",{className:Cr.content,children:a.jsx(_u,{context:v})})]})]})}const IF="_card_1f4i8_1",DF="_header_1f4i8_15",PF="_body_1f4i8_55",Mb={card:IF,header:DF,body:PF};function Md({title:e,subtitle:t,action:n,children:r,className:i=""}){return a.jsxs("section",{className:`${Mb.card} ${i}`,children:[a.jsxs("header",{className:Mb.header,children:[a.jsxs("div",{children:[a.jsx("h2",{children:e}),t?a.jsx("p",{children:t}):null]}),n||null]}),a.jsx("div",{className:Mb.body,children:r})]})}const $F={PENDING_PAYMENT:{label:"Pending confirmation",description:"Were confirming your payment. This can take up to a minute. Well email you when its confirmed.",badgeVariant:"warning",primaryActionType:"continue-payment"},PENDING_CONFIRMATION:{label:"Pending confirmation",description:"Were confirming your payment. This can take up to a minute. Well email you when its confirmed.",badgeVariant:"warning",primaryActionType:"view-order"},PENDING:{label:"Pending confirmation",description:"Were confirming your payment. This can take up to a minute. Well email you when its confirmed.",badgeVariant:"warning",primaryActionType:"view-order"},PAYMENT_PENDING:{label:"Payment pending",description:"Were confirming your payment. This can take up to a minute. Well email you when its confirmed.",badgeVariant:"warning",primaryActionType:"view-order"},RECEIVED:{label:"Received",description:"Weve received your order. You can still cancel it until we start preparing it.",badgeVariant:"info",primaryActionType:"view-order"},PAYMENT_FAILED:{label:"Failed",description:"Payment did not complete. Please retry to place the order.",badgeVariant:"danger",primaryActionType:"retry-payment"},FAILED:{label:"Failed",description:"Payment did not complete. Please retry to place the order.",badgeVariant:"danger",primaryActionType:"retry-payment"},PAID:{label:"Paid",description:"Payment confirmed. A receipt has been sent to your email.",badgeVariant:"success",primaryActionType:"view-order"},PAYMENT_SUCCEEDED:{label:"Paid",description:"Payment confirmed. A receipt has been sent to your email.",badgeVariant:"success",primaryActionType:"view-order"},REFUNDED:{label:"Refunded",description:"Payment was refunded.",badgeVariant:"neutral",primaryActionType:"view-order"},PROCESSING:{label:"Preparing",description:"Your order is being prepared.",badgeVariant:"info",primaryActionType:"view-order"},PREPARING:{label:"Preparing",description:"Your order is being prepared.",badgeVariant:"info",primaryActionType:"view-order"},SHIPPING:{label:"Shipping",description:"Your order is on the way.",badgeVariant:"info",primaryActionType:"track-order"},SHIPPED:{label:"Shipped",description:"Your order is on the way.",badgeVariant:"info",primaryActionType:"track-order"},READY_FOR_PICKUP:{label:"Ready for pickup",description:"Your order is ready for pickup.",badgeVariant:"info",primaryActionType:"view-order"},DELIVERED:{label:"Completed",description:"Your order has been delivered.",badgeVariant:"success",primaryActionType:"view-receipt"},COMPLETED:{label:"Completed",description:"Your order is complete.",badgeVariant:"success",primaryActionType:"view-receipt"},CANCELLED:{label:"Cancelled",description:"This order was cancelled.",badgeVariant:"neutral",primaryActionType:"view-order"},CANCELED:{label:"Cancelled",description:"This order was cancelled.",badgeVariant:"neutral",primaryActionType:"view-order"},CANCELLED_BY_CUSTOMER:{label:"Cancelled",description:"This order was cancelled by the customer and is now read-only.",badgeVariant:"neutral",primaryActionType:"view-order"}},LF={label:"Pending confirmation",description:"Were confirming your payment. This can take up to a minute. Well email you when its confirmed.",badgeVariant:"warning",primaryActionType:"view-order"},Lf=e=>{const t=String(e||"").trim().toUpperCase().replace(/[\s-]+/g,"_");return $F[t]??LF},BF="_pill_1p2a1_1",UF="_success_1p2a1_23",qF="_warning_1p2a1_25",zF="_info_1p2a1_27",FF="_danger_1p2a1_29",HF="_neutral_1p2a1_31",Nl={pill:BF,success:UF,warning:qF,info:zF,danger:FF,neutral:HF},VF={success:Nl.success,warning:Nl.warning,info:Nl.info,danger:Nl.danger,neutral:Nl.neutral};function np({status:e}){const t=Lf(e),n=VF[t.badgeVariant]||Nl.neutral;return a.jsx("span",{className:`${Nl.pill} ${n}`,children:t.label})}const KF="_row_7xe8x_1",GF="_orderLink_7xe8x_21",WF="_meta_7xe8x_25",YF="_actions_7xe8x_27",XF="_viewButton_7xe8x_29",QF="_receiptAction_7xe8x_31",ZF="_cancelAction_7xe8x_35",JF="_cancelDismiss_7xe8x_35",eH="_cancelConfirm_7xe8x_35",tH="_dim_7xe8x_71",nH="_mobileRow_7xe8x_75",rH="_compactRow_7xe8x_77",aH="_mobileTop_7xe8x_79",sH="_mobileBottom_7xe8x_79",Cn={row:KF,orderLink:GF,meta:WF,actions:YF,viewButton:XF,receiptAction:QF,cancelAction:ZF,cancelDismiss:JF,cancelConfirm:eH,dim:tH,mobileRow:nH,compactRow:rH,mobileTop:aH,mobileBottom:sH},Ib=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString()};function xD({order:e,detailsTo:t,receiptAvailable:n=!1,compact:r=!1,canCancel:i=!1,cancelLoading:o=!1,onCancel:c}){const d=`${t}?document=receipt`,f=vy(e),[m,h]=p.useState(!1);p.useEffect(()=>{i||h(!1)},[i]);const g=()=>{!i||!c||o||c(e)},v=i?m?a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:Cn.cancelConfirm,onClick:g,disabled:o,children:o?"Cancelling":"Confirm"}),a.jsx("button",{type:"button",className:Cn.cancelDismiss,onClick:()=>h(!1),disabled:o,children:"Keep"})]}):a.jsx("button",{type:"button",className:Cn.cancelAction,onClick:()=>h(!0),children:"Cancel"}):null;return r?a.jsxs("div",{className:Cn.compactRow,children:[a.jsxs("div",{className:Cn.mobileTop,children:[a.jsxs("div",{children:[a.jsx(nt,{to:t,className:Cn.orderLink,children:f}),a.jsx("p",{className:Cn.meta,children:Ib(e?.createdAt)})]}),a.jsx(np,{status:e?.status})]}),a.jsxs("div",{className:Cn.mobileBottom,children:[a.jsx("strong",{children:jt(e?.total,e?.currency)}),a.jsxs("div",{className:Cn.actions,children:[a.jsx(nt,{to:t,className:Cn.viewButton,children:"View details"}),n?a.jsx(nt,{to:d,className:Cn.receiptAction,children:"View receipt"}):null,v]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Cn.row,children:[a.jsxs("div",{children:[a.jsx(nt,{to:t,className:Cn.orderLink,children:f}),a.jsx("p",{className:Cn.meta,children:Ib(e?.createdAt)})]}),a.jsx("strong",{children:jt(e?.total,e?.currency)}),a.jsx(np,{status:e?.status}),a.jsxs("div",{className:Cn.actions,children:[a.jsx(nt,{to:t,className:Cn.viewButton,children:"View details"}),n?a.jsx(nt,{to:d,className:Cn.receiptAction,children:"View receipt"}):a.jsx("span",{className:Cn.dim,children:"View receipt"}),v]})]}),a.jsxs("div",{className:Cn.mobileRow,children:[a.jsxs("div",{className:Cn.mobileTop,children:[a.jsxs("div",{children:[a.jsx(nt,{to:t,className:Cn.orderLink,children:f}),a.jsx("p",{className:Cn.meta,children:Ib(e?.createdAt)})]}),a.jsx(np,{status:e?.status})]}),a.jsxs("div",{className:Cn.mobileBottom,children:[a.jsx("strong",{children:jt(e?.total,e?.currency)}),a.jsxs("div",{className:Cn.actions,children:[a.jsx(nt,{to:t,className:Cn.viewButton,children:"View details"}),n?a.jsx(nt,{to:d,className:Cn.receiptAction,children:"View receipt"}):null,v]})]})]})]})}const iH=Bn(),tu=`${iH}/api/me/addresses`,oH=new Set([401,403]),lH=new Set([404,501]),nu=(e,t)=>oH.has(e?.status)?(t?.(e),!0):!1,ru=e=>{if(lH.has(e?.status)){const t=new Error(e?.message||"Endpoint is not available");throw t.status=e?.status,t.isUnsupported=!0,t}};async function A1(e,{signal:t,onUnauthorized:n}={}){if(!e)throw new Error("Authentication is required to load addresses");const r=await Ve(tu,{headers:Zt(e),signal:t},{token:e});try{return await at(r,"Failed to load addresses")}catch(i){if(nu(i,n))return null;throw ru(i),i}}async function SD(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to create an address");const i=await Ve(tu,{method:"POST",headers:Zt(e),body:JSON.stringify(t??{}),signal:n},{token:e});try{return await at(i,"Failed to create address")}catch(o){if(nu(o,r))return null;throw ru(o),o}}async function cH(e,t,n,{signal:r,onUnauthorized:i}={}){if(!e)throw new Error("Authentication is required to update an address");if(!t)throw new Error("Address ID is required");const o=await Ve(`${tu}/${encodeURIComponent(t)}`,{method:"PUT",headers:Zt(e),body:JSON.stringify(n??{}),signal:r},{token:e});try{return await at(o,"Failed to update address")}catch(c){if(nu(c,i))return null;throw ru(c),c}}async function uH(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to delete an address");if(!t)throw new Error("Address ID is required");const i=await Ve(`${tu}/${encodeURIComponent(t)}`,{method:"DELETE",headers:Zt(e),signal:n},{token:e});try{return await at(i,"Failed to delete address")}catch(o){if(nu(o,r))return null;throw ru(o),o}}async function wD(e,t,{signal:n,onUnauthorized:r}={}){if(!e)throw new Error("Authentication is required to update the default address");if(!t)throw new Error("Address ID is required");const i=async(o,c)=>{const d=await Ve(o,{method:"PUT",headers:Zt(e),body:c?JSON.stringify(c):void 0,signal:n},{token:e});return at(d,"Failed to set default address")};try{return await i(`${tu}/${encodeURIComponent(t)}/default`)}catch(o){if(nu(o,r))return null;if([404,405,501].includes(o?.status))try{return await i(`${tu}/default`,{id:t})}catch(c){if(nu(c,r))return null;throw ru(c),c}throw ru(o),o}}const dH=8e3;function E1({token:e}={}){const[t,n]=p.useState({status:"idle",message:""}),[r,i]=p.useState(""),[o,c]=p.useState(!1),d=p.useRef(null);p.useEffect(()=>()=>{d.current&&window.clearTimeout(d.current)},[]);const f=async()=>{if(!(t.status==="sending"||o)){n({status:"sending",message:""}),i("");try{await iD({token:e}),n({status:"sent",message:"Reset link sent to your email"}),c(!0),d.current=window.setTimeout(()=>{c(!1)},dH)}catch(h){n({status:"error",message:""}),i(h?.message||"Unable to send reset link.")}}},m=t.status==="sending"||o;return{resetState:t,resetError:r,resetCooldown:o,resetDisabled:m,handlePasswordReset:f}}const fp=(e={})=>{const t=e??{};return{id:t.id??t.addressId??t._id??t.uuid??null,label:t.label??t.name??t.nickname??"",fullName:t.fullName??t.recipientName??t.contactName??t.name??"",line1:t.line1??t.address1??t.street1??t.street??"",line2:t.line2??t.address2??t.street2??"",city:t.city??t.town??t.locality??"",state:t.state??t.region??t.province??"",postalCode:t.postalCode??t.zip??t.zipCode??"",country:t.country??t.countryCode??"",phone:t.phone??t.phoneNumber??"",isDefault:t.isDefault??t.default??t.primary??!1,raw:t}},df=(e={})=>[e.line1,e.line2,[e.postalCode,e.city].filter(Boolean).join(" "),e.state,e.country].map(n=>typeof n=="string"?n.trim():n).filter(Boolean).join(", "),C1=e=>e?Array.isArray(e)?e:Array.isArray(e.addresses)?e.addresses:Array.isArray(e.items)?e.items:Array.isArray(e.data)?e.data:[]:[],fH="_dashboardGrid_ff28o_1",mH="_topRow_ff28o_11",hH="_mainRow_ff28o_23",pH="_mainColumn_ff28o_35",yH="_sideColumn_ff28o_37",gH="_primaryButton_ff28o_49",vH="_secondaryLink_ff28o_71",bH="_facts_ff28o_85",_H="_recentOrder_ff28o_99",xH="_muted_ff28o_117",SH="_error_ff28o_119",wH="_success_ff28o_121",jH="_orderRows_ff28o_123",qn={dashboardGrid:fH,topRow:mH,mainRow:hH,mainColumn:pH,sideColumn:yH,primaryButton:gH,secondaryLink:vH,facts:bH,recentOrder:_H,muted:xH,error:SH,success:wH,orderRows:jH};function NH(){const{token:e}=Xt(),{profile:t,loadingProfile:n,ordersState:r,loadOrders:i,redirectToLogin:o}=bu(),{resetState:c,resetError:d,resetDisabled:f,handlePasswordReset:m}=E1({token:e}),[h,g]=p.useState({loading:!1,error:null,items:[]});p.useEffect(()=>{r.supported===null&&!r.loading&&!r.hasFetched&&i({silent:!0}).catch(()=>{})},[i,r.hasFetched,r.loading,r.supported]),p.useEffect(()=>{if(!e)return;const E=new AbortController;return g(C=>({...C,loading:!0,error:null})),A1(e,{signal:E.signal,onUnauthorized:o}).then(C=>{if(C===null)return;const T=C1(C).map(fp);g({loading:!1,error:null,items:T})}).catch(C=>{C?.name!=="AbortError"&&g({loading:!1,error:C?.message||"Failed to load addresses",items:[]})}),()=>E.abort()},[o,e]);const v=p.useMemo(()=>[...r.items||[]].sort((E,C)=>Date.parse(C.createdAt||0)-Date.parse(E.createdAt||0)),[r.items]),x=v[0]||null,w=vy(x),_=n?"Loading":t?.fullName||t?.displayName||"",S=n?"Loading":t?.email||"",j=n?"Loading":t?.phoneNumber||"",A=h.items.find(E=>E.isDefault)||h.items[0]||null;return a.jsxs("div",{className:qn.dashboardGrid,children:[a.jsxs("div",{className:qn.topRow,children:[a.jsx(Md,{title:"Profile",subtitle:"Your core account information",action:a.jsx(nt,{to:"/account/settings",className:qn.primaryButton,children:"Edit profile"}),children:a.jsxs("div",{className:qn.facts,children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Name:"})," ",_]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",S]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",j]})]})}),a.jsxs(Md,{title:"Default address",subtitle:"Where your orders are delivered",action:a.jsx(nt,{to:"/account/addresses",className:qn.primaryButton,children:"Manage"}),children:[h.loading?a.jsx("p",{className:qn.muted,children:"Loading address"}):null,h.error?a.jsx("p",{className:qn.error,children:h.error}):null,!h.loading&&!h.error?a.jsx("p",{className:qn.facts,children:A?df(A):"No default address yet."}):null]})]}),a.jsxs("div",{className:qn.mainRow,children:[a.jsx("div",{className:qn.mainColumn,children:a.jsxs(Md,{title:"Orders",subtitle:"Track status and open documents quickly",children:[r.loading?a.jsx("p",{className:qn.muted,children:"Loading orders"}):null,r.error?a.jsx("p",{className:qn.error,children:r.error}):null,!r.loading&&!r.error&&v.length===0?a.jsxs("p",{className:qn.muted,children:["No orders yet. ",a.jsx(nt,{to:"/store",children:"Browse store"})]}):null,a.jsx("div",{className:qn.orderRows,children:v.slice(0,5).map(E=>a.jsx(xD,{order:E,detailsTo:`/account/orders/${encodeURIComponent(E.id)}`,receiptAvailable:["PAID","COMPLETED"].includes(String(E?.status||"").toUpperCase()),compact:!0},E.id))}),a.jsx(nt,{to:"/account/orders",className:qn.secondaryLink,children:"View all orders"})]})}),a.jsxs("div",{className:qn.sideColumn,children:[a.jsx(Md,{title:"Recent order",subtitle:"Quick actions",children:x?a.jsxs("div",{className:qn.recentOrder,children:[a.jsx("p",{children:a.jsxs("strong",{children:["Order ",w]})}),a.jsx("p",{children:new Date(x.createdAt||Date.now()).toLocaleDateString()}),a.jsxs("p",{children:["Total: ",a.jsx("strong",{children:jt(x.total,x.currency)})]}),a.jsx(nt,{to:`/account/orders/${encodeURIComponent(x.id)}`,className:qn.primaryButton,children:"View"})]}):a.jsx("p",{className:qn.muted,children:"No recent orders yet."})}),a.jsxs(Md,{title:"Security",subtitle:"Keep your account protected",action:a.jsx("button",{type:"button",className:qn.primaryButton,onClick:m,disabled:f,children:c.status==="sending"?"Sending":"Change password"}),children:[a.jsx("p",{className:qn.muted,children:"Password last updated: Not available"}),c.status==="sent"?a.jsx("p",{className:qn.success,children:c.message}):null,d?a.jsx("p",{className:qn.error,children:d}):null]})]})]})]})}const AH="_card_93vdc_1",EH="_header_93vdc_3",CH="_filters_93vdc_5",TH="_tableHeader_93vdc_9",kH="_error_93vdc_11",OH="_success_93vdc_13",RH="_empty_93vdc_15",_i={card:AH,header:EH,filters:CH,tableHeader:TH,error:kH,success:OH,empty:RH},GC=e=>String(e||"").trim().toUpperCase().replace(/\s+/g,"_");function MH(){const{token:e}=Xt(),t=gy(),{ordersState:n,loadOrders:r}=bu(),[i,o]=p.useState(null),[c,d]=p.useState("ALL"),[f,m]=p.useState(""),[h,g]=p.useState("newest"),[v,x]=p.useState({loadingOrderId:"",error:"",success:""}),w=p.useCallback((j={})=>r(j).catch(A=>{A?.name!=="AbortError"&&o(A?.message||"Failed to load orders")}),[r]);p.useEffect(()=>{if(n.supported===!1||n.rateLimited||n.hasFetched)return;const j=new AbortController;return w({signal:j.signal}),()=>j.abort()},[w,n.hasFetched,n.rateLimited,n.supported]);const _=p.useCallback(async j=>{if(!(!e||!j?.id)){x({loadingOrderId:String(j.id),error:"",success:""});try{await pD(e,j.id,{onUnauthorized:t}),await w({silent:!0}),x({loadingOrderId:"",error:"",success:"Order cancelled."})}catch(A){x({loadingOrderId:"",error:A?.message||"Could not cancel the order right now.",success:""})}}},[w,t,e]),S=p.useMemo(()=>{let j=[...n.items||[]];if(c!=="ALL"&&(j=j.filter(A=>GC(A.status)===c)),f.trim()){const A=f.trim().toLowerCase();j=j.filter(E=>vy(E).toLowerCase().includes(A)||String(E.id||"").toLowerCase().includes(A))}return j.sort((A,E)=>{const C=Date.parse(A.createdAt||0)-Date.parse(E.createdAt||0);return h==="oldest"?C:-C}),j},[n.items,f,h,c]);return n.supported===!1?a.jsxs("div",{className:_i.card,children:[a.jsx("h1",{children:"Orders unavailable"}),a.jsx(nt,{to:"/account",children:"Back to account"})]}):a.jsxs("div",{className:_i.card,children:[a.jsx("div",{className:_i.header,children:a.jsx("h1",{children:"My orders"})}),a.jsxs("div",{className:_i.filters,children:[a.jsxs("select",{value:c,onChange:j=>d(j.target.value),children:[a.jsx("option",{value:"ALL",children:"All statuses"}),a.jsx("option",{value:"PAID",children:"Paid"}),a.jsx("option",{value:"PROCESSING",children:"Processing"}),a.jsx("option",{value:"COMPLETED",children:"Completed"})]}),a.jsx("input",{type:"search",placeholder:"Search by order number",value:f,onChange:j=>m(j.target.value)}),a.jsxs("select",{value:h,onChange:j=>g(j.target.value),children:[a.jsx("option",{value:"newest",children:"Newest first"}),a.jsx("option",{value:"oldest",children:"Oldest first"})]})]}),i||n.error||v.error?a.jsx("p",{className:_i.error,children:i||n.error||v.error}):null,v.success?a.jsx("p",{className:_i.success,children:v.success}):null,a.jsxs("div",{className:_i.tableHeader,children:[a.jsx("span",{children:"Order"}),a.jsx("span",{children:"Total"}),a.jsx("span",{children:"Status"}),a.jsx("span",{children:"Actions"})]}),a.jsxs("div",{className:_i.list,children:[!n.loading&&S.length===0?a.jsx("p",{className:_i.empty,children:"No orders found."}):null,S.map(j=>a.jsx(xD,{order:j,detailsTo:`/account/orders/${encodeURIComponent(j.id)}`,receiptAvailable:["PAID","COMPLETED"].includes(GC(j.orderStatus||j.status)),canCancel:bD(j.orderStatus||j.status),cancelLoading:v.loadingOrderId===String(j.id),onCancel:_},j.id))]})]})}const IH="_wrap_1qkcq_1",DH="_buttonGrid_1qkcq_3",PH="_actionItem_1qkcq_5",$H="_button_1qkcq_3",LH="_primary_1qkcq_13",BH="_secondary_1qkcq_15",UH="_outline_1qkcq_17",qH="_spinner_1qkcq_23",zH="_spin_1qkcq_23",FH="_banner_1qkcq_41",HH="_errorBanner_1qkcq_43",VH="_warningBanner_1qkcq_45",KH="_successBanner_1qkcq_47",as={wrap:IH,buttonGrid:DH,actionItem:PH,button:$H,primary:LH,secondary:BH,outline:UH,spinner:qH,spin:zH,banner:FH,errorBanner:HH,warningBanner:VH,successBanner:KH};function GH({label:e,helper:t,disabled:n,reason:r,loading:i,onClick:o,variant:c="secondary"}){return a.jsxs("div",{className:as.actionItem,children:[a.jsxs("button",{type:"button",className:`${as.button} ${as[c]}`,disabled:n||i,onClick:o,title:n?r:"",children:[i?a.jsx("span",{className:as.spinner,"aria-hidden":"true"}):null,a.jsx("span",{children:i?"Working":e})]}),a.jsx("small",{children:n?r:t})]})}function WH({actions:e,error:t,warning:n,success:r,onRetry:i}){return a.jsxs("div",{className:as.wrap,children:[a.jsx("div",{className:as.buttonGrid,children:e.map(o=>a.jsx(GH,{...o},o.key))}),r?a.jsx("div",{className:`${as.banner} ${as.successBanner}`,children:r}):null,n?a.jsx("div",{className:`${as.banner} ${as.warningBanner}`,children:n}):null,t?a.jsxs("div",{className:`${as.banner} ${as.errorBanner}`,role:"alert",children:[a.jsx("span",{children:t}),a.jsx("button",{type:"button",onClick:i,children:"Retry"})]}):null]})}const YH="_page_1owv7_1",XH="_summaryHeader_1owv7_3",QH="_totalBlock_1owv7_9",ZH="_metaBlock_1owv7_13",JH="_headerActions_1owv7_15",eV="_layout_1owv7_19",tV="_left_1owv7_21",nV="_right_1owv7_21",rV="_card_1owv7_23",aV="_items_1owv7_27",sV="_itemRow_1owv7_29",iV="_thumb_1owv7_31",oV="_itemName_1owv7_33",lV="_muted_1owv7_35",cV="_totalRow_1owv7_37",uV="_neutral_1owv7_39",dV="_error_1owv7_41",fV="_backButton_1owv7_43",mV="_cancelButton_1owv7_61",hV="_cancelHint_1owv7_97",pV="_modalBackdrop_1owv7_129",yV="_modalPanel_1owv7_149",gV="_modalActions_1owv7_183",vV="_modalSecondary_1owv7_197",bV="_modalDanger_1owv7_199",_V="_toast_1owv7_247",Yt={page:YH,summaryHeader:XH,totalBlock:QH,metaBlock:ZH,headerActions:JH,layout:eV,left:tV,right:nV,card:rV,items:aV,itemRow:sV,thumb:iV,itemName:oV,muted:lV,totalRow:cV,neutral:uV,error:dV,backButton:fV,cancelButton:mV,cancelHint:hV,modalBackdrop:pV,modalPanel:yV,modalActions:gV,modalSecondary:vV,modalDanger:bV,toast:_V},ff=e=>String(e||"").trim().toUpperCase().replace(/[\s-]+/g,"_"),xV=e=>ff(e?.paymentMode??e?.raw?.paymentMode)==="INVOICE_PAY_LATER",SV=e=>{const t=e?.invoiceNumber??e?.raw?.invoiceNumber??e?.raw?.invoice?.number,n=ff(e?.invoiceStatus??e?.raw?.invoiceStatus??e?.raw?.invoice?.status);return!!t||["ISSUED","SENT","AVAILABLE"].includes(n)},wV=e=>{const t=ff(e?.customerType??e?.raw?.customerType);return t==="B2B"||t==="BUSINESS"||t==="COMPANY"?!0:!!(e?.companyName||e?.organizationNumber||e?.vatNumber||e?.raw?.company?.name||e?.raw?.company?.organizationNumber||e?.raw?.company?.vatNumber)},jV=e=>e?typeof e=="string"?e:[e.name??e.fullName,e.line1??e.address1,e.line2??e.address2,e.postalCode??e.zip,e.city,e.country].filter(Boolean).map(n=>String(n).trim()).join(", ")||"":"";function NV(){const{orderId:e}=Ls(),{token:t}=Xt(),{ordersState:n,loadOrders:r}=bu(),i=gy(),[o,c]=p.useState(null),[d,f]=p.useState(!0),[m,h]=p.useState(""),[g,v]=p.useState({loading:"",error:"",warning:"",success:"",retryKey:""}),[x,w]=p.useState({open:!1,loading:!1,error:""}),[_,S]=p.useState(""),j=p.useMemo(()=>(n?.items||[]).find(Ee=>String(Ee.id)===String(e)),[e,n?.items]),A=p.useCallback(async Ee=>{if(!t||!e)return null;const qe=await X6(t,e,{signal:Ee,onUnauthorized:i});if(qe===null)return null;const W=pF(qe);return c(W),W},[e,i,t]);p.useEffect(()=>{if(!t||!e)return;const Ee=new AbortController;return f(!0),h(""),A(Ee.signal).catch(qe=>{if(qe?.name!=="AbortError"){if(qe?.isUnsupported){h("Order details are not available for this account.");return}h(qe?.message||"Failed to load order details"),j&&c(j)}}).finally(()=>f(!1)),()=>Ee.abort()},[j,A,e,t]),p.useEffect(()=>{if(!_)return;const Ee=window.setTimeout(()=>S(""),3500);return()=>window.clearTimeout(Ee)},[_]);const E=o||j,C=vy(E),T=E?.status,O=E?.orderStatus,R=E?.orderStatus??E?.status,k=ff(R),P=k==="CANCELLED_BY_CUSTOMER",H=bD(R),K=ff(E?.paymentStatus||E?.orderStatus||E?.status),B=["PAID","PAYMENT_SUCCEEDED","COMPLETED","PROCESSING"].includes(K),U=xV(E),I=SV(E),L=U?I:B,$=wV(E),G=U?"Invoice (pay later)":E?.paymentMethod||"Not available yet",te=E?.paymentReference||"Not available yet",re=E?.paymentMode||E?.raw?.paymentMode||"",M=U&&K!=="PAID"?"UNPAID":K||"UNKNOWN",q=E?.invoiceDueDate||E?.raw?.invoiceDueDate||E?.raw?.invoice?.dueDate||"",z=E?.bankgiro||E?.raw?.bankgiro||E?.raw?.invoice?.bankgiro||"",V=E?.invoiceOcr||E?.raw?.invoiceOcr||E?.raw?.invoice?.ocr||"",Y=E?.totals||{},Z=Y.subtotal??0,ee=Y.shipping??0,ie=Y.tax??0,xe=Y.discount??0,X=Y.total??E?.total??0,Ae=ie>0||$,he=$&&ie<=0;p.useEffect(()=>{},[E,k,O,T]);const ue=Ee=>{const qe=new Blob([Ee],{type:"text/html;charset=utf-8"}),W=window.URL.createObjectURL(qe);return window.open(W,"_blank","noopener,noreferrer")?(setTimeout(()=>window.URL.revokeObjectURL(W),6e4),!0):(window.URL.revokeObjectURL(W),!1)},Xe=(Ee,qe,W)=>{if(Ee?.status===401){i();return}v(fe=>({...fe,loading:"",success:"",warning:"",retryKey:qe,error:Ee?.message||W}))},Ue=async Ee=>{if(!(!t||!e)){v({loading:Ee,error:"",warning:"",success:"",retryKey:Ee});try{if(Ee==="receipt"){const qe=await Q6(t,e,{onUnauthorized:i});if(qe&&!ue(qe)){v({loading:"",error:"",warning:"Please allow popups to view this document.",success:"",retryKey:Ee});return}}if(Ee==="invoice"){const qe=await Z6(t,e,{onUnauthorized:i});if(qe&&!ue(qe)){v({loading:"",error:"",warning:"Please allow popups to view this document.",success:"",retryKey:Ee});return}}if(Ee==="download-pdf"||Ee==="open-pdf"){const qe=await J6(t,e,{onUnauthorized:i});if(qe){const{blob:W,fileName:fe}=qe,we=window.URL.createObjectURL(W);if(Ee==="download-pdf"){const de=document.createElement("a");de.href=we,de.download=fe,document.body.appendChild(de),de.click(),document.body.removeChild(de),window.URL.revokeObjectURL(we)}else{if(!window.open(we,"_blank","noopener,noreferrer")){window.URL.revokeObjectURL(we),v({loading:"",error:"",warning:"Please allow popups to open this PDF.",success:"",retryKey:Ee});return}setTimeout(()=>window.URL.revokeObjectURL(we),6e4)}}}if(Ee==="email-invoice"){await ez(t,e,{onUnauthorized:i}),v({loading:"",error:"",warning:"",success:"Invoice email sent.",retryKey:""});return}v({loading:"",error:"",warning:"",success:"",retryKey:""})}catch(qe){Xe(qe,Ee,"Could not complete this document action right now.")}}},ye=async()=>{if(!(!t||!e||!H||x.loading)){w(Ee=>({...Ee,loading:!0,error:""}));try{await pD(t,e,{onUnauthorized:i}),await Promise.all([A(),r?.({silent:!0})]),S("Order cancelled."),w({open:!1,loading:!1,error:""})}catch(Ee){w(qe=>({...qe,loading:!1,error:Ee?.status===409&&Ee?.message||"Could not cancel the order right now."}))}}};if(d&&!E)return a.jsx("div",{className:Yt.card,children:"Loading order details"});if(m&&!E)return a.jsxs("div",{className:Yt.card,children:[a.jsx("p",{className:Yt.error,children:m}),a.jsx(nt,{to:"/account/orders",children:"Back"})]});const je=[{key:"receipt",label:"View receipt",helper:"Opens in a new tab.",disabled:!B||U&&K!=="PAID",reason:B?"Available after invoice payment is completed.":"Available after payment confirmation.",loading:g.loading==="receipt",variant:"primary",onClick:()=>Ue("receipt")},{key:"invoice",label:U?"View invoice":"Invoice document",helper:U?"HTML invoice opens in a new tab.":"Invoice is available for invoice/pay-later orders.",disabled:!U&&!B,reason:!U&&!B?"Available after payment confirmation if an invoice document exists.":"",loading:g.loading==="invoice",variant:"primary",onClick:()=>Ue("invoice")},{key:"download-pdf",label:"Download PDF",helper:"Downloads to your device.",disabled:!L,reason:U?"Available once the invoice is issued.":"Available after payment confirmation.",loading:g.loading==="download-pdf",variant:"secondary",onClick:()=>Ue("download-pdf")},{key:"open-pdf",label:"Open PDF",helper:"PDF opens in a new tab.",disabled:!L,reason:U?"Available once the invoice is issued.":"Available after payment confirmation.",loading:g.loading==="open-pdf",variant:"secondary",onClick:()=>Ue("open-pdf")},{key:"email-invoice",label:"Email invoice",helper:"Sends invoice to your account email.",disabled:!U&&!B,reason:!U&&!B?"Available after payment confirmation.":"",loading:g.loading==="email-invoice",variant:"outline",onClick:()=>Ue("email-invoice")}].filter(Ee=>P?!["invoice","email-invoice"].includes(Ee.key):!0);return a.jsxs("div",{className:Yt.page,children:[a.jsxs("div",{className:Yt.summaryHeader,children:[a.jsxs("div",{children:[a.jsxs("h1",{children:["Order ",C]}),a.jsxs("p",{children:["Placed ",E?.createdAt?new Date(E.createdAt).toLocaleString():""]})]}),a.jsx(np,{status:E?.orderStatus??E?.status}),a.jsxs("div",{className:Yt.totalBlock,children:[a.jsx("span",{children:"Total"}),a.jsx("strong",{children:jt(X,E?.currency)})]}),a.jsxs("div",{className:Yt.metaBlock,children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Payment:"})," ",G]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Reference:"})," ",te]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Delivery:"})," ",E?.deliveryType||"Pickup"]})]}),a.jsxs("div",{className:Yt.headerActions,children:[a.jsx("button",{type:"button",className:Yt.cancelButton,onClick:()=>w(Ee=>({...Ee,open:!0,error:""})),disabled:!H,"aria-describedby":H?void 0:"cancel-order-hint",children:"Cancel order"}),H?null:a.jsx("p",{id:"cancel-order-hint",className:Yt.cancelHint,children:"Cancellation is available while the order is pending confirmation or received."}),null]})]}),a.jsxs("div",{className:Yt.layout,children:[a.jsxs("main",{className:Yt.left,children:[a.jsxs("section",{className:Yt.card,children:[a.jsx("h2",{children:"Items"}),a.jsx("div",{className:Yt.items,children:(E?.items||[]).map((Ee,qe)=>a.jsxs("article",{className:Yt.itemRow,children:[a.jsx("div",{className:Yt.thumb,children:"Image"}),a.jsxs("div",{children:[a.jsx("p",{className:Yt.itemName,children:Ee.name}),a.jsxs("p",{className:Yt.muted,children:["Qty ",Ee.quantity,"  ",jt(Ee.price,E?.currency)," each"]})]}),a.jsx("strong",{children:jt(Ee.lineTotal,E?.currency)})]},`${Ee.name}-${qe}`))})]}),E?.customerNote?a.jsxs("section",{className:Yt.card,children:[a.jsx("h2",{children:"Notes"}),a.jsx("p",{children:E.customerNote})]}):null]}),a.jsxs("aside",{className:Yt.right,children:[a.jsxs("section",{className:Yt.card,children:[a.jsx("h3",{children:"Totals"}),a.jsxs("p",{children:["Subtotal ",a.jsx("strong",{children:jt(Z,E?.currency)})]}),Ae?a.jsxs("p",{children:["VAT (moms) ",a.jsx("strong",{children:jt(ie,E?.currency)}),he?a.jsx("span",{className:Yt.neutral,children:"  VAT will be shown on invoice"}):null]}):null,a.jsxs("p",{children:["Shipping ",a.jsx("strong",{children:jt(ee,E?.currency)})]}),a.jsxs("p",{children:["Discount ",a.jsxs("strong",{children:["-",jt(xe,E?.currency)]})]}),a.jsxs("p",{className:Yt.totalRow,children:["Total ",a.jsx("strong",{children:jt(X,E?.currency)})]})]}),a.jsxs("section",{className:Yt.card,children:[a.jsx("h3",{children:"Documents"}),P?a.jsx("p",{className:Yt.neutral,children:"Cancelled orders are read-only."}):null,a.jsx(WH,{actions:je,error:g.error,warning:g.warning,success:g.success,onRetry:()=>Ue(g.retryKey)})]}),a.jsxs("section",{className:Yt.card,children:[a.jsx("h3",{children:"Delivery"}),a.jsx("p",{children:jV(E?.shippingAddress)})]}),a.jsxs("section",{className:Yt.card,children:[a.jsx("h3",{children:"Payment"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Method:"})," ",G]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Mode:"})," ",re]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Payment status:"})," ",M]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Reference:"})," ",te]}),U?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Bankgiro:"})," ",z||"Pending"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"OCR:"})," ",V||"Pending"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Due date:"})," ",q?new Date(q).toLocaleDateString():"Pending"]})]}):null,E?.raw?.payment?null:a.jsx("p",{className:Yt.neutral,children:"Payment confirmed but provider details not available yet."})]})]})]}),m?a.jsx("p",{className:Yt.error,children:m}):null,x.error?a.jsx("p",{className:Yt.error,children:x.error}):null,_?a.jsx("div",{className:Yt.toast,role:"status","aria-live":"polite",children:_}):null,a.jsx(nt,{to:"/account/orders",className:Yt.backButton,children:"Back to orders"}),x.open?a.jsx("div",{className:Yt.modalBackdrop,role:"presentation",onClick:()=>w(Ee=>({...Ee,open:!1})),children:a.jsxs("div",{className:Yt.modalPanel,role:"dialog","aria-modal":"true","aria-labelledby":"cancel-order-title",onClick:Ee=>Ee.stopPropagation(),children:[a.jsx("h3",{id:"cancel-order-title",children:"Cancel order?"}),a.jsx("p",{children:"This cannot be undone."}),a.jsxs("div",{className:Yt.modalActions,children:[a.jsx("button",{type:"button",className:Yt.modalSecondary,onClick:()=>w(Ee=>({...Ee,open:!1})),children:"Cancel"}),a.jsx("button",{type:"button",className:Yt.modalDanger,onClick:ye,disabled:x.loading,children:x.loading?"Cancelling":"Confirm cancellation"})]})]})}):null]})}const AV="_page_evp13_1",EV="_header_evp13_13",CV="_headerActions_evp13_37",TV="_kicker_evp13_49",kV="_subtitle_evp13_67",OV="_primaryButton_evp13_77",RV="_secondaryButton_evp13_105",MV="_loading_evp13_133",IV="_error_evp13_143",DV="_formCard_evp13_159",PV="_formHeader_evp13_181",$V="_formGrid_evp13_195",LV="_field_evp13_207",BV="_helper_evp13_243",UV="_textButton_evp13_255",qV="_formActions_evp13_273",zV="_emptyState_evp13_285",FV="_list_evp13_301",HV="_card_evp13_313",VV="_cardHeader_evp13_335",KV="_cardTitle_evp13_349",GV="_cardSubtitle_evp13_361",WV="_cardMeta_evp13_371",YV="_badge_evp13_383",XV="_cardActions_evp13_401",qt={page:AV,header:EV,headerActions:CV,kicker:TV,subtitle:kV,primaryButton:OV,secondaryButton:RV,loading:MV,error:IV,formCard:DV,formHeader:PV,formGrid:$V,field:LV,helper:BV,textButton:UV,formActions:qV,emptyState:zV,list:FV,card:HV,cardHeader:VV,cardTitle:KV,cardSubtitle:GV,cardMeta:WV,badge:YV,cardActions:XV},Db={label:"",fullName:"",line1:"",line2:"",city:"",state:"",postalCode:"",country:"SE",phone:""},QV=e=>({label:e.label?.trim()||null,fullName:e.fullName?.trim()||null,street1:e.line1?.trim()||"",street2:e.line2?.trim()||null,postalCode:e.postalCode?.trim()||"",city:e.city?.trim()||"",region:e.state?.trim()||null,countryCode:(e.country||"").trim().length===2?e.country.trim().toUpperCase():"",phoneNumber:e.phone?.trim()||null});function ZV(){const{token:e}=Xt(),{redirectToLogin:t}=bu(),[n,r]=p.useState({loading:!1,error:null,items:[]}),[i,o]=p.useState({mode:"idle",values:Db,error:"",saving:!1}),c=p.useCallback(()=>{e&&(r(_=>({..._,loading:!0,error:null})),A1(e,{onUnauthorized:t}).then(_=>{if(_===null)return;const S=C1(_).map(fp);r({loading:!1,error:null,items:S})}).catch(_=>{if(_?.isUnsupported){r({loading:!1,error:"Address book is not enabled yet.",items:[]});return}r({loading:!1,error:_?.message||"Failed to load addresses",items:[]})}))},[t,e]);p.useEffect(()=>{c()},[c]);const d=()=>{o({mode:"create",values:Db,error:"",saving:!1})},f=_=>{o({mode:"edit",values:{label:_.label||"",fullName:_.fullName||"",line1:_.line1||"",line2:_.line2||"",city:_.city||"",state:_.state||"",postalCode:_.postalCode||"",country:_.country||"SE",phone:_.phone||""},error:"",saving:!1,id:_.id})},m=()=>{o({mode:"idle",values:Db,error:"",saving:!1})},h=(_,S)=>{o(j=>({...j,values:{...j.values,[_]:S},error:""}))},g=async _=>{if(_.preventDefault(),!e)return;o(j=>({...j,saving:!0,error:""}));const S=QV(i.values);try{i.mode==="edit"?await cH(e,i.id,S,{onUnauthorized:t}):await SD(e,S,{onUnauthorized:t}),m(),c()}catch(j){if(j?.isUnsupported){o(A=>({...A,saving:!1,error:"Address updates are not enabled yet."}));return}o(A=>({...A,saving:!1,error:j?.message||"Unable to save address."}))}},v=async _=>{if(!(!e||!_||!window.confirm("Delete this address?")))try{await uH(e,_,{onUnauthorized:t}),c()}catch(j){r(A=>({...A,error:j?.message||"Unable to delete address."}))}},x=async _=>{if(!(!e||!_))try{await wD(e,_,{onUnauthorized:t}),c()}catch(S){r(j=>({...j,error:S?.message||"Unable to update the default address."}))}},w=p.useMemo(()=>n.items.find(_=>_.isDefault),[n.items]);return a.jsxs("div",{className:qt.page,children:[a.jsxs("div",{className:qt.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:qt.kicker,children:"Addresses"}),a.jsx("h2",{children:"Saved addresses"}),a.jsx("p",{className:qt.subtitle,children:"Add multiple addresses for quick checkout."})]}),a.jsxs("div",{className:qt.headerActions,children:[a.jsx("button",{type:"button",className:qt.primaryButton,onClick:d,children:"Add address"}),a.jsx(nt,{to:"/account",className:qt.secondaryButton,children:"Back to overview"})]})]}),n.loading?a.jsx("p",{className:qt.loading,children:"Loading addresses"}):null,n.error?a.jsx("p",{className:qt.error,role:"alert",children:n.error}):null,i.mode!=="idle"?a.jsxs("form",{className:qt.formCard,onSubmit:g,children:[a.jsxs("div",{className:qt.formHeader,children:[a.jsxs("div",{children:[a.jsx("h3",{children:i.mode==="edit"?"Edit address":"New address"}),a.jsx("p",{className:qt.helper,children:"Fill in the details exactly as they should appear."})]}),a.jsx("button",{type:"button",className:qt.textButton,onClick:m,children:"Cancel"})]}),a.jsxs("div",{className:qt.formGrid,children:[a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-label",children:"Label"}),a.jsx("input",{id:"address-label",type:"text",value:i.values.label,onChange:_=>h("label",_.target.value),placeholder:"Home, Office"})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-name",children:"Full name"}),a.jsx("input",{id:"address-name",type:"text",value:i.values.fullName,onChange:_=>h("fullName",_.target.value),placeholder:"Full name"})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-line1",children:"Address line 1"}),a.jsx("input",{id:"address-line1",type:"text",value:i.values.line1,onChange:_=>h("line1",_.target.value),required:!0})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-line2",children:"Address line 2"}),a.jsx("input",{id:"address-line2",type:"text",value:i.values.line2,onChange:_=>h("line2",_.target.value)})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-city",children:"City"}),a.jsx("input",{id:"address-city",type:"text",value:i.values.city,onChange:_=>h("city",_.target.value),required:!0})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-state",children:"State / Region"}),a.jsx("input",{id:"address-state",type:"text",value:i.values.state,onChange:_=>h("state",_.target.value)})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-postal",children:"Postal code"}),a.jsx("input",{id:"address-postal",type:"text",value:i.values.postalCode,onChange:_=>h("postalCode",_.target.value),required:!0})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-country",children:"Country code (ISO-2)"}),a.jsx("select",{id:"address-country",value:i.values.country,onChange:_=>h("country",_.target.value),required:!0,children:a.jsx("option",{value:"SE",children:"SE"})})]}),a.jsxs("div",{className:qt.field,children:[a.jsx("label",{htmlFor:"address-phone",children:"Phone"}),a.jsx("input",{id:"address-phone",type:"tel",value:i.values.phone,onChange:_=>h("phone",_.target.value)})]})]}),i.error?a.jsx("p",{className:qt.error,children:i.error}):null,a.jsxs("div",{className:qt.formActions,children:[a.jsx("button",{type:"submit",className:qt.primaryButton,disabled:i.saving,children:i.saving?"Saving":"Save address"}),a.jsx("button",{type:"button",className:qt.secondaryButton,onClick:m,children:"Cancel"})]})]}):null,!n.loading&&n.items.length===0?a.jsxs("div",{className:qt.emptyState,children:[a.jsx("p",{children:"No addresses saved yet."}),a.jsx("button",{type:"button",className:qt.primaryButton,onClick:d,children:"Add your first address"})]}):null,a.jsx("div",{className:qt.list,children:n.items.map(_=>a.jsxs("div",{className:qt.card,children:[a.jsxs("div",{className:qt.cardHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:qt.cardTitle,children:_.label||_.fullName||"Saved address"}),a.jsx("p",{className:qt.cardSubtitle,children:df(_)||""})]}),_.isDefault?a.jsx("span",{className:qt.badge,children:"Default"}):null]}),_.phone?a.jsxs("p",{className:qt.cardMeta,children:["Phone: ",_.phone]}):null,a.jsxs("div",{className:qt.cardActions,children:[a.jsx("button",{type:"button",className:qt.textButton,onClick:()=>f(_),children:"Edit"}),a.jsx("button",{type:"button",className:qt.textButton,onClick:()=>v(_.id),children:"Delete"}),a.jsx("button",{type:"button",className:qt.secondaryButton,onClick:()=>x(_.id),disabled:_.isDefault,children:_.isDefault?"Default":"Set default"})]})]},_.id||_.line1))}),w?a.jsxs("p",{className:qt.helper,children:["Default address: ",df(w)]}):null]})}const T1=["DEFAULT","SUPPORTER","B2B","VIP"],Es=e=>{const t=Number(e);return Number.isFinite(t)?t:null},WC=e=>{const t=Number(e);return Number.isFinite(t)?t/100:null},Vo=e=>{const t=`${e??""}`.trim().toUpperCase();return t&&T1.includes(t)?t:"DEFAULT"},k1=e=>{const t=e?.pricingTier??e?.tier??e?.raw?.pricingTier??e?.raw?.tier??e?.raw?.customer?.pricingTier??e?.raw?.customerTier;return Vo(t)},jD=(e,t="DEFAULT")=>{if(!e)return null;const n=Vo(t),r=e?.tierPricesSek&&typeof e.tierPricesSek=="object"?e.tierPricesSek:{},i=Es(r?.[n])??Es(r?.[n?.toLowerCase?.()]);if(i!==null)return i;const o=e?.tierPrices&&typeof e.tierPrices=="object"?e.tierPrices:{},c=WC(o?.[n])??WC(o?.[n?.toLowerCase?.()]);if(c!==null)return c;const d=Es(e?.unitPrice)??Es(e?.price)??Es(e?.priceSek),f=e?.priceByTier??e?.pricesByTier??e?.prices??null,m=f&&typeof f=="object"?f:{},h=Es(m?.[n])??Es(m?.[n?.toLowerCase?.()]);if(h!==null)return h;if(n!=="DEFAULT"){const g=Es(e?.[`price${n}`])??Es(e?.[`price_${n.toLowerCase()}`]);if(g!==null)return g}return n==="DEFAULT"&&(Object.keys(r).length>0||Object.keys(o).length>0||Object.keys(m).length>0||T1.some(v=>v==="DEFAULT"?!1:Es(e?.[`price${v}`])!==null||Es(e?.[`price_${v.toLowerCase()}`])!==null))?null:d},mp=e=>{const t=Number(e);return Number.isFinite(t)?Math.round(t):null},hp=e=>{const t=Number(e);return Number.isFinite(t)?Math.round(t*100):null},YC=e=>{if(!e||typeof e!="object")return null;const t=mp(e?.tierPrices?.DEFAULT);return t!==null?t:mp(e?.priceCents)??hp(e?.priceSek)??hp(e?.price)},XC=(e,t)=>{if(!e||typeof e!="object")return null;const n=Vo(t);return mp(e?.tierPrices?.[n])},QC=e=>!e||typeof e!="object"?null:mp(e?.priceCents)??hp(e?.priceSek)??hp(e?.price),ND=({variant:e,product:t,tier:n="DEFAULT"}={})=>{const r=Vo(n),i=YC(e)??YC(t),o=QC(e)??QC(t)??i,c=XC(e,r)??XC(t,r),d=r!=="DEFAULT"&&Number.isFinite(c)&&c>0&&Number.isFinite(i)&&c<i;return{appliedTier:r,effectiveCents:o,defaultCents:i,showTierPrice:d}},JV=T1,ZC=new Set(["B2B","COMPANY","BUSINESS","RESTAURANT"]),eK=e=>{const t=Number(e);return Number.isFinite(t)?t:null},gh=(e={},t=[])=>{for(const n of t){const r=eK(e?.[n]);if(r!==null)return r}return null},pp=(e,t=.25)=>{const n=Number(e);return!Number.isFinite(n)||n<0?t:n>1?n/100:n},eS=e=>e==="B2B"?"EXKL_MOMS":"INKL_MOMS",Jn=(e,t,n="INKL_MOMS")=>{const r=Number(e);if(!Number.isFinite(r))return 0;if(n==="EXKL_MOMS")return r;const i=pp(t,0);return r*(1+i)},AD=(e,t,n,r="INKL_MOMS")=>{const i=Number(e),o=Number(t);return!Number.isFinite(i)||!Number.isFinite(o)?0:Jn(i*o,n,r)},Ci=e=>e==="EXKL_MOMS"?"exkl. moms":"inkl. moms",mf=e=>{if(!e||typeof e!="object")return!1;const t=e?.raw??{},n=`${e?.customerType??e?.type??t?.customerType??t?.type??""}`.trim().toUpperCase(),r=`${e?.accountType??t?.accountType??""}`.trim().toUpperCase(),i=Vo(e?.pricingTier??t?.pricingTier??e?.tier??t?.tier);return ZC.has(n)||ZC.has(r)||i==="B2B"?!0:!!(e?.businessProfile||t?.businessProfile||e?.companyName||t?.companyName||e?.orgNumber||t?.orgNumber||e?.organizationNumber||t?.organizationNumber)},O1=(e={})=>{const t=gh(e,["total","gross","totalInclVat","grossTotal"]),n=gh(e,["tax","vat","moms","vatTotal"])??0,r=gh(e,["net","subtotalExVat","totalExVat","netTotal","subtotalNet"]),i=gh(e,["subtotal"]),o=t??i??0,c=r??o-n;return{net:Math.max(c,0),vat:Math.max(n,0),gross:Math.max(o,0)}},ED="storePricingDisplay",Al={customerType:"B2C",priceDisplayMode:"INKL_MOMS",vatRate:.25,companyProfile:{companyName:"",orgNumber:"",vatNumber:"",invoiceEmail:""}},CD=p.createContext({...Al,setCustomerType:()=>{},setCompanyProfile:()=>{},setVatRate:()=>{},refreshPricingProfile:async()=>{}}),tK=()=>{if(typeof window>"u")return Al;const e=window.localStorage.getItem(ED);if(!e)return Al;try{const t=JSON.parse(e),n=t?.customerType==="B2B"?"B2B":"B2C";return{customerType:n,priceDisplayMode:eS(n),vatRate:pp(t?.vatRate,Al.vatRate),companyProfile:{...Al.companyProfile,...t?.companyProfile??{}}}}catch{return Al}},nK=e=>{typeof window>"u"||window.localStorage.setItem(ED,JSON.stringify(e))},rK=e=>{const t=e?.user??e??{},n=t?.company??t?.business??t?.organization??{};return{customerType:mf(t)||mf(t?.raw)?"B2B":"B2C",companyProfile:{companyName:t?.companyName??n?.name??"",orgNumber:t?.orgNumber??t?.organizationNumber??n?.orgNumber??"",vatNumber:t?.vatNumber??n?.vatNumber??"",invoiceEmail:t?.invoiceEmail??n?.invoiceEmail??t?.email??""}}};function aK({children:e}){const{isAuthenticated:t,token:n,profile:r}=Xt(),[i,o]=p.useState(()=>tK()),c=p.useCallback(async({authToken:g=n,signal:v}={})=>{if(!t||!g)return null;const x=await hD(g,{signal:v});if(!x)return null;const w=rK(x);return o(_=>{const S=w.customerType;return{..._,customerType:S,priceDisplayMode:eS(S),companyProfile:{..._.companyProfile,...w.companyProfile}}}),w},[t,n]);p.useEffect(()=>{nK(i)},[i]),p.useEffect(()=>{const g=new AbortController;return sz({signal:g.signal}).then(v=>{const x=v?.config??v??{},w=pp(x?.defaultVatRate??x?.vatRate,Al.vatRate);o(_=>({..._,vatRate:w}))}).catch(()=>{}),()=>g.abort()},[]),p.useEffect(()=>{if(!t||!n)return;const g=new AbortController;return c({authToken:n,signal:g.signal}).catch(()=>{}),()=>g.abort()},[t,c,n]),p.useEffect(()=>{if(!t){mf(r)&&o(g=>({...g,customerType:"B2B",priceDisplayMode:"EXKL_MOMS"}));return}mf(r)&&o(g=>({...g,customerType:"B2B",priceDisplayMode:"EXKL_MOMS"}))},[t,r]);const d=p.useCallback(async(g,{persistProfile:v=!1,companyProfile:x}={})=>{const w=g==="B2B"?"B2B":"B2C",_=eS(w);if(o(S=>({...S,customerType:w,priceDisplayMode:_,companyProfile:x?{...S.companyProfile,...x}:S.companyProfile})),!(!v||!t||!n))try{await dp(n,{customerType:w,priceDisplayMode:_,...x||{}})}catch{}},[t,n]),f=p.useCallback(async(g,{persistProfile:v=!1}={})=>{if(o(x=>({...x,companyProfile:{...x.companyProfile,...g}})),!(!v||!t||!n))try{await dp(n,g)}catch{}},[t,n]),m=p.useCallback(g=>{o(v=>({...v,vatRate:pp(g,v.vatRate)}))},[]),h=p.useMemo(()=>({...i,setCustomerType:d,setCompanyProfile:f,setVatRate:m,refreshPricingProfile:c}),[c,f,d,m,i]);return a.jsx(CD.Provider,{value:h,children:e})}const Ko=()=>p.useContext(CD),sK=/^[0-9-\s]+$/,iK=[/^\d{6}-?\d{4}$/,/^\d{8}-?\d{4}$/,/^\d{10}$/,/^\d{12}$/],TD=e=>`${e??""}`.trim(),R1=e=>{const t=TD(e);if(!t)return"";const n=t.replace(/\D/g,"");return n.length===12?n.slice(-10):n},oK=e=>{if(!/^\d{10}$/.test(e))return!1;const t=e.slice(0,-1).split("").map(o=>Number(o)),n=Number(e.slice(-1));return(10-t.reduce((o,c,d)=>{const f=d%2===0?2:1,m=c*f;return o+(m>9?m-9:m)},0)%10)%10===n},kD=e=>{const t=TD(e);if(!t)return{isValid:!1,code:"required",message:"Organization number is required."};if(!sK.test(t))return{isValid:!1,code:"invalid_chars",message:"Use only digits and an optional dash (for example 556677-8899)."};if(!iK.some(i=>i.test(t)))return{isValid:!1,code:"invalid_format",message:"Use format XXXXXX-XXXX or XXXXXXXXXX."};const r=R1(t);return r.length!==10?{isValid:!1,code:"invalid_length",message:"Organization number must contain 10 digits."}:oK(r)?{isValid:!0,code:null,message:"",normalized:r}:{isValid:!1,code:"invalid_checksum",message:"Organization number checksum is invalid."}},lK="_grid_5v302_1",cK="_card_5v302_13",uK="_sectionHeader_5v302_29",dK="_kicker_5v302_63",fK="_muted_5v302_81",mK="_formGrid_5v302_89",hK="_field_5v302_101",pK="_input_5v302_115",yK="_readonlyInput_5v302_145",gK="_helper_5v302_163",vK="_toggleList_5v302_175",bK="_toggleRow_5v302_187",_K="_toggleTitle_5v302_209",xK="_customerTypeFieldset_5v302_297",SK="_radioOption_5v302_313",wK="_actionRow_5v302_337",jK="_actionStack_5v302_351",NK="_securityRow_5v302_365",AK="_primaryButton_5v302_387",EK="_successMessage_5v302_417",CK="_errorMessage_5v302_431",dt={grid:lK,card:cK,sectionHeader:uK,kicker:dK,muted:fK,formGrid:mK,field:hK,input:pK,readonlyInput:yK,helper:gK,toggleList:vK,toggleRow:bK,toggleTitle:_K,switch:"_switch_5v302_221",customerTypeFieldset:xK,radioOption:SK,actionRow:wK,actionStack:jK,securityRow:NK,primaryButton:AK,successMessage:EK,errorMessage:CK},yp={orderEmails:!0,pickupReady:!0},JC=(e={})=>({orderEmails:e.orderEmails??e.orderConfirmationEmails??yp.orderEmails,pickupReady:e.pickupReady??e.pickupReadyNotification??yp.pickupReady}),TK=(e,t)=>e.orderEmails===t.orderEmails&&e.pickupReady===t.pickupReady;function kK(){const{profile:e,loadingProfile:t,redirectToLogin:n,refreshProfile:r}=bu(),{token:i}=Xt(),{customerType:o,companyProfile:c,setCustomerType:d,setCompanyProfile:f,refreshPricingProfile:m}=Ko(),[h,g]=p.useState(""),[v,x]=p.useState(""),[w,_]=p.useState(""),[S,j]=p.useState(yp),[A,E]=p.useState({fullName:"",phoneNumber:"",notifications:yp}),[C,T]=p.useState({status:"idle",message:""}),[O,R]=p.useState(""),[k,P]=p.useState(!0),[H,K]=p.useState("Profile updates are not available yet. Please contact support for help."),[B,U]=p.useState("B2C"),[I,L]=p.useState(""),[$,G]=p.useState(""),[te,re]=p.useState(""),[M,q]=p.useState(""),[z,V]=p.useState({status:"idle",message:""}),[Y,Z]=p.useState(""),{resetState:ee,resetError:ie,resetDisabled:xe,handlePasswordReset:X}=E1({token:i});p.useEffect(()=>{if(!e)return;_(e.email||"");const se=e.raw??{},Re={fullName:se.fullName??se.name??e.displayName??"",phoneNumber:se.phoneNumber??se.phone??"",notifications:JC(se.notifications??se.notificationPreferences??se.preferences?.notifications??{})};E(Re),g(Re.fullName),x(Re.phoneNumber),j(Re.notifications),T({status:"idle",message:""}),R("")},[e]),p.useEffect(()=>{U(o==="B2B"?"B2B":"B2C")},[o]),p.useEffect(()=>{L(c?.companyName??""),G(c?.orgNumber??""),re(c?.vatNumber??""),q(c?.invoiceEmail??e?.email??"")},[c,e?.email]);const Ae=()=>{(C.status!=="idle"||O)&&(T({status:"idle",message:""}),R(""))},he=()=>{(z.status!=="idle"||Y)&&(V({status:"idle",message:""}),Z(""))},ue=se=>{Ae(),j(Re=>({...Re,[se]:!Re[se]}))},Xe=p.useMemo(()=>{const se=h!==A.fullName,Re=v!==A.phoneNumber,Je=!TK(S,A.notifications);return se||Re||Je},[h,A,S,v]),Ue=p.useMemo(()=>t?"Loading":w||"",[w,t]),ye=p.useMemo(()=>R1($),[$]),je=p.useMemo(()=>B==="B2B"&&$.trim()?kD($):null,[B,$]),Ee=p.useMemo(()=>B!==(o==="B2B"?"B2B":"B2C")?!0:I!==(c?.companyName??"")||$!==(c?.orgNumber??"")||te!==(c?.vatNumber??"")||M!==(c?.invoiceEmail??e?.email??""),[I,c,B,o,M,$,e?.email,te]),qe=async()=>{if(!k){R(H);return}if(!i){R("You must be logged in to update your settings.");return}T({status:"saving",message:"Saving"}),R("");try{const se={fullName:h,phoneNumber:v,orderConfirmationEmails:S.orderEmails,pickupReadyNotification:S.pickupReady},Re=await dp(i,se,{onUnauthorized:n});if(Re===null)return;const Je=Re?.user??Re;if(Je&&typeof Je=="object"){const le=Je?.raw??Je??{},Oe={fullName:le.fullName??le.name??h,phoneNumber:le.phoneNumber??le.phone??v,notifications:JC(le.notifications??le.notificationPreferences??le.preferences?.notifications??{})};_(Je?.email??Je?.username??w),E(Oe),g(Oe.fullName),x(Oe.phoneNumber),j(Oe.notifications)}else await r?.();T({status:"success",message:"Saved"})}catch(se){if(se?.isUnsupported){P(!1),K(se?.message||"Profile updates are not available yet. Please contact support for help."),T({status:"error",message:""}),R(se?.message||"Profile updates are not available yet. Please contact support for help.");return}T({status:"error",message:""}),R(se?.message||"Unable to save changes.")}},W=async()=>{if(he(),!i){Z("Please log in to upgrade your account to company pricing.");return}if(B==="B2B"){if(!I.trim()||!$.trim()){Z("Company name and organization number are required for B2B mode.");return}if(!je?.isValid){Z(je?.message||"Please enter a valid Swedish organization number.");return}}V({status:"saving",message:"Saving company profile"});try{const se=B==="B2B"?{companyName:I.trim(),orgNumber:ye,vatNumber:te.trim()||"",invoiceEmail:M.trim()||w||""}:{companyName:"",orgNumber:"",vatNumber:"",invoiceEmail:""};await dp(i,se,{onUnauthorized:n}),await d(B,{persistProfile:!1,companyProfile:se}),await f(se,{persistProfile:!1}),await m(),await r?.(),V({status:"success",message:"Company profile saved."})}catch(se){V({status:"error",message:""}),Z(se?.message||"Unable to save company profile.")}},fe=C.status==="saving",we=Xe&&!fe&&k,de=z.status==="saving",ve=Ee&&!de;return a.jsxs("div",{className:dt.grid,children:[a.jsxs("section",{className:dt.card,children:[a.jsx("div",{className:dt.sectionHeader,children:a.jsxs("div",{children:[a.jsx("p",{className:dt.kicker,children:"Profile & Contact"}),a.jsx("h2",{children:"Contact details"}),a.jsx("p",{className:dt.muted,children:"Keep checkout and pickup messages accurate."})]})}),a.jsxs("div",{className:dt.formGrid,children:[a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"full-name",children:"Full name"}),a.jsx("input",{id:"full-name",type:"text",value:h,placeholder:"Add your full name",onChange:se=>{Ae(),g(se.target.value)},className:dt.input})]}),a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"phone-number",children:"Phone number"}),a.jsx("input",{id:"phone-number",type:"tel",value:v,placeholder:"Add a phone number",onChange:se=>{Ae(),x(se.target.value)},className:dt.input}),a.jsx("p",{className:dt.helper,children:"Used for pickup ready notifications."})]}),a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"email",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:Ue,readOnly:!0,className:dt.readonlyInput}),a.jsx("p",{className:dt.helper,children:"Email changes require verification."})]})]})]}),a.jsxs("section",{className:dt.card,children:[a.jsx("div",{className:dt.sectionHeader,children:a.jsxs("div",{children:[a.jsx("p",{className:dt.kicker,children:"Notifications"}),a.jsx("h2",{children:"Order updates"}),a.jsx("p",{className:dt.muted,children:"Stay informed without extra noise."})]})}),a.jsxs("div",{className:dt.toggleList,children:[a.jsxs("div",{className:dt.toggleRow,children:[a.jsxs("div",{children:[a.jsx("p",{className:dt.toggleTitle,children:"Order confirmation emails"}),a.jsx("p",{className:dt.helper,children:"Receipt and order summary messages."})]}),a.jsx("label",{className:dt.switch,children:a.jsx("input",{type:"checkbox",checked:S.orderEmails,onChange:()=>ue("orderEmails")})})]}),a.jsxs("div",{className:dt.toggleRow,children:[a.jsxs("div",{children:[a.jsx("p",{className:dt.toggleTitle,children:"Pickup ready notification"}),a.jsx("p",{className:dt.helper,children:"Let me know when my order is ready."})]}),a.jsx("label",{className:dt.switch,children:a.jsx("input",{type:"checkbox",checked:S.pickupReady,onChange:()=>ue("pickupReady")})})]}),a.jsxs("div",{className:dt.actionRow,children:[a.jsx("button",{type:"button",className:dt.primaryButton,onClick:qe,disabled:!we,children:fe?"Saving":"Save changes"}),a.jsxs("div",{children:[C.status==="success"?a.jsx("p",{className:dt.successMessage,children:"Saved"}):null,O?a.jsx("p",{className:dt.errorMessage,children:O}):null,!k&&!O?a.jsx("p",{className:dt.errorMessage,children:H}):null]})]})]})]}),a.jsxs("section",{className:dt.card,children:[a.jsx("div",{className:dt.sectionHeader,children:a.jsxs("div",{children:[a.jsx("p",{className:dt.kicker,children:"Company profile upgrade"}),a.jsx("h2",{children:"B2B pricing mode"}),a.jsx("p",{className:dt.muted,children:B==="B2B"?"Company mode: prices are shown exkl. moms.":"Private mode: prices are shown inkl. moms."})]})}),a.jsxs("fieldset",{className:dt.customerTypeFieldset,children:[a.jsxs("label",{className:dt.radioOption,htmlFor:"settings-customer-b2c",children:[a.jsx("input",{id:"settings-customer-b2c",type:"radio",name:"customer-settings-type",value:"B2C",checked:B==="B2C",onChange:()=>{he(),U("B2C")}}),"Private (inkl. moms)"]}),a.jsxs("label",{className:dt.radioOption,htmlFor:"settings-customer-b2b",children:[a.jsx("input",{id:"settings-customer-b2b",type:"radio",name:"customer-settings-type",value:"B2B",checked:B==="B2B",onChange:()=>{he(),U("B2B")}}),"Company (exkl. moms)"]})]}),B==="B2B"?a.jsxs("div",{className:dt.formGrid,children:[a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"company-name",children:"Company name"}),a.jsx("input",{id:"company-name",type:"text",value:I,onChange:se=>{he(),L(se.target.value)},className:dt.input,required:!0})]}),a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"org-number",children:"Organization number"}),a.jsx("input",{id:"org-number",type:"text",value:$,onChange:se=>{he(),G(se.target.value)},className:dt.input,placeholder:"556677-8899",required:!0}),$.trim()&&!je?.isValid?a.jsx("p",{className:dt.errorMessage,children:je?.message}):null]}),a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"vat-number",children:"VAT number (optional)"}),a.jsx("input",{id:"vat-number",type:"text",value:te,onChange:se=>{he(),re(se.target.value)},className:dt.input})]}),a.jsxs("div",{className:dt.field,children:[a.jsx("label",{htmlFor:"invoice-email",children:"Invoice email (optional)"}),a.jsx("input",{id:"invoice-email",type:"email",value:M,onChange:se=>{he(),q(se.target.value)},className:dt.input,placeholder:w||"name@company.se"})]})]}):null,a.jsxs("div",{className:dt.actionRow,children:[a.jsx("button",{type:"button",className:dt.primaryButton,onClick:W,disabled:!ve,children:de?"Saving":"Save company profile"}),a.jsxs("div",{children:[z.status==="success"?a.jsx("p",{className:dt.successMessage,children:z.message}):null,Y?a.jsx("p",{className:dt.errorMessage,children:Y}):null]})]})]}),a.jsxs("section",{className:dt.card,children:[a.jsx("div",{className:dt.sectionHeader,children:a.jsxs("div",{children:[a.jsx("p",{className:dt.kicker,children:"Security"}),a.jsx("h2",{children:"Change password"}),a.jsx("p",{className:dt.muted,children:"Keep your account secure with regular updates."})]})}),a.jsxs("div",{className:dt.securityRow,children:[a.jsxs("div",{children:[a.jsx("p",{className:dt.toggleTitle,children:"Update your password"}),a.jsx("p",{className:dt.helper,children:"Well send a reset link to your verified email."})]}),a.jsxs("div",{className:dt.actionStack,children:[a.jsx("button",{type:"button",className:dt.primaryButton,onClick:X,disabled:xe,children:ee.status==="sending"?"Sending":"Change password"}),ee.status==="sent"?a.jsx("p",{className:dt.successMessage,children:ee.message}):null,ie?a.jsx("p",{className:dt.errorMessage,children:ie}):null]})]})]})]})}const OK="_card_3n9qh_1",RK="_header_3n9qh_23",MK="_kicker_3n9qh_37",IK="_subtitle_3n9qh_55",DK="_section_3n9qh_65",PK="_helper_3n9qh_87",$K="_primaryButton_3n9qh_97",LK="_secondaryButton_3n9qh_123",BK="_successMessage_3n9qh_151",UK="_errorMessage_3n9qh_163",Ws={card:OK,header:RK,kicker:MK,subtitle:IK,section:DK,helper:PK,primaryButton:$K,secondaryButton:LK,successMessage:BK,errorMessage:UK};function qK(){const{token:e}=Xt(),{profile:t}=bu(),{resetState:n,resetError:r,resetDisabled:i,handlePasswordReset:o}=E1({token:e});return a.jsxs("div",{className:Ws.card,children:[a.jsxs("div",{className:Ws.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:Ws.kicker,children:"Security"}),a.jsx("h2",{children:"Password & security"}),a.jsx("p",{className:Ws.subtitle,children:"Manage password resets and account safety."})]}),a.jsx(nt,{to:"/account",className:Ws.secondaryButton,children:"Back to overview"})]}),a.jsxs("div",{className:Ws.section,children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Reset password"}),a.jsxs("p",{className:Ws.helper,children:["Well email a secure reset link to ",t?.email||"your verified email","."]})]}),a.jsx("button",{type:"button",className:Ws.primaryButton,onClick:o,disabled:i,children:n.status==="sending"?"Sending":"Send reset link"})]}),n.status==="sent"?a.jsx("p",{className:Ws.successMessage,children:n.message}):null,r?a.jsx("p",{className:Ws.errorMessage,children:r}):null]})}const zK="_banner_1h5zr_1",FK="_title_1h5zr_23",HK="_message_1h5zr_33",Pb={banner:zK,title:FK,message:HK},VK={},KK=()=>VK?.VITE_SHOW_SERVICE_BANNER==="true";function ef(){return KK()?a.jsxs("div",{className:Pb.banner,role:"status","aria-live":"polite",children:[a.jsx("div",{className:Pb.title,children:"Notice"}),a.jsx("div",{className:Pb.message,children:"The application is currently being updated, and we apologize for any service disruption."})]}):null}const GK="_sidebar_1t9nr_1",WK="_collapsed_1t9nr_33",YK="_header_1t9nr_43",XK="_brand_1t9nr_59",QK="_toggle_1t9nr_71",ZK="_rotated_1t9nr_115",JK="_menu_1t9nr_125",eG="_section_1t9nr_139",tG="_sectionLabel_1t9nr_151",nG="_sectionItems_1t9nr_167",rG="_menuItem_1t9nr_179",aG="_active_1t9nr_201",sG="_disabledItem_1t9nr_209",iG="_skeletonItem_1t9nr_219",oG="_skeletonIcon_1t9nr_251",lG="_skeletonText_1t9nr_267",cG="_icon_1t9nr_283",uG="_text_1t9nr_291",dG="_srOnlyLabel_1t9nr_301",fG="_mobile_1t9nr_461",Pn={sidebar:GK,collapsed:WK,header:YK,brand:XK,toggle:QK,rotated:ZK,menu:JK,section:eG,sectionLabel:tG,sectionItems:nG,menuItem:rG,active:aG,disabledItem:sG,skeletonItem:iG,skeletonIcon:oG,skeletonText:lG,icon:cG,text:uG,srOnlyLabel:dG,mobile:fG},mG=1024,Ic={mobile:768,collapse:1440},$b=()=>typeof window>"u"?mG:window.innerWidth,ks="/monitoring",hG=(e,t)=>{const n=Number.isFinite(e?.sortOrder)?e.sortOrder:0,r=Number.isFinite(t?.sortOrder)?t.sortOrder:0;return n!==r?n-r:String(e?.title??"").localeCompare(String(t?.title??""))},eT=(e,t,n=[],r=[])=>{const i=n.length>0?n:t?[t]:[],o=i.includes("SUPER_ADMIN");if(e?.roles?.length>0&&!i.some(f=>e.roles.includes(f)))return!1;if(!e?.permissions||e.permissions.length===0||o)return!0;const c={permissions:r};return e.permissions.every(d=>us(c,d))},pG=[{id:"monitoring",label:"Monitoring",items:[{to:`${ks}/overview`,icon:"",label:"Device Monitor",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/control-panel`,icon:"",label:"Control Panel",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/shelly-control`,icon:"",label:"Shelly Control",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/live`,icon:"",label:"NFT Channels",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/germination`,icon:"",label:"Germination",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/hall`,icon:"",label:"Hall",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/cameras`,icon:"",label:"Cameras",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/reports`,icon:"",label:"Reports",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/note`,icon:"",label:"Note",permissions:[kt.MONITORING_VIEW]},{to:`${ks}/sensor-config`,icon:"",label:"Sensor Config",permissions:[kt.MONITORING_VIEW]}]},{id:"store",label:"Store",items:[{to:"/store",icon:"",label:"Products"},{to:"/store/admin/orders",icon:"",label:"Orders",permissions:[kt.ORDERS_MANAGE]},{to:"/store/admin/customers",icon:"",label:"Customers",permissions:[kt.CUSTOMERS_VIEW]},{to:"/store/admin/banners",icon:"",label:"Banners",permissions:[kt.PRODUCTS_MANAGE]}]},{id:"admin",label:"Admin",items:[{to:"/admin/overview",icon:"",label:"Admin Overview",permissions:[kt.ADMIN_OVERVIEW_VIEW]},{to:"/admin/rack-pages",icon:"",label:"Rack Pages",permissions:[kt.ADMIN_OVERVIEW_VIEW]},{to:"/admin/team",icon:"",label:"Admin Management",permissions:[kt.ADMIN_PERMISSIONS_MANAGE]},{to:"/admin/tools",icon:"",label:"Super Admin Tools",roles:["SUPER_ADMIN"]},{to:"/admin/directory",icon:"",label:"Admin Directory",roles:["SUPER_ADMIN"]}]}];function OD(){const{role:e,roles:t,permissions:n}=Xt(),[r,i]=p.useState(()=>$b()<Ic.mobile),[o,c]=p.useState(()=>{const j=$b();return j<Ic.mobile?!0:j<Ic.collapse}),[d,f]=p.useState({status:"loading",pages:[]}),m=p.useCallback(()=>{const j=$b();i(j<Ic.mobile),j<Ic.mobile||j<Ic.collapse?c(!0):c(!1)},[]);p.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[m]),p.useEffect(()=>{let j=!0;const A=new AbortController;return(async()=>{f({status:"loading",pages:[]});try{const C=await Z8({signal:A.signal}),O=[...Array.isArray(C)?C:Array.isArray(C?.pages)?C.pages:[]].sort(hG);j&&f({status:"success",pages:O})}catch(C){if(!j||C?.name==="AbortError")return;f({status:"error",pages:[]})}})(),()=>{j=!1,A.abort()}},[]);const h=p.useCallback(({isActive:j})=>`${Pn.menuItem} ${j?Pn.active:""}`,[]),g=p.useCallback(()=>{c(j=>!j)},[]),v=p.useMemo(()=>[Pn.sidebar,o?Pn.collapsed:"",r?Pn.mobile:"",r&&o?Pn.mobileCollapsed:""].filter(Boolean).join(" "),[o,r]),x=O7(n)?"/store/admin/products":"/store",w=p.useMemo(()=>d.status==="loading"?Array.from({length:3},(j,A)=>({label:`Loading rack pages ${A+1}`,icon:"",disabled:!0,placeholder:!0})):d.status==="error"?[{icon:"",label:"Failed to load rack pages",disabled:!0}]:d.pages.length===0?[{icon:"",label:"No rack pages configured",disabled:!0}]:d.pages.filter(j=>j?.slug&&j?.title).map(j=>({to:`${ks}/pages/${j.slug}`,icon:"",label:j.title,permissions:[kt.MONITORING_VIEW]})),[d.pages,d.status]),_=p.useMemo(()=>{const j=pG.map(E=>E.id==="store"?{...E,items:E.items.map(C=>C.label==="Products"?{...C,to:x}:C)}:E),A={id:"rack-pages",label:"Rack Pages",items:w};return j.length===0?[A]:[j[0],A,...j.slice(1)]},[w,x]),S=p.useMemo(()=>_.map(j=>{if(j.id==="admin"){const E=j.items.filter(C=>eT(C,e,t,n));return{...j,items:E}}const A=j.items.map(E=>E.disabled||!E.to||eT(E,e,t,n)?E:{...E,disabled:!0,disabledTitle:"Requires permission"});return{...j,items:A}}).filter(j=>j.items.length>0),[n,e,t,_]);return a.jsxs("aside",{className:v,children:[a.jsxs("div",{className:Pn.header,children:[(!o||r)&&a.jsx("div",{className:Pn.brand,children:"HydroLeaf"}),a.jsx("button",{className:`${Pn.toggle} ${o?Pn.rotated:""}`,onClick:g,"aria-label":"Toggle sidebar"})]}),a.jsx("nav",{className:Pn.menu,children:S.map(j=>a.jsxs("div",{className:Pn.section,children:[!o&&a.jsx("div",{className:Pn.sectionLabel,children:j.label}),a.jsx("div",{className:Pn.sectionItems,children:j.items.map(({to:A,icon:E,label:C,disabled:T,placeholder:O,disabledTitle:R})=>T||!A?a.jsxs("div",{className:`${Pn.menuItem} ${Pn.disabledItem} ${O?Pn.skeletonItem:""}`,title:R,children:[a.jsx("span",{className:O?Pn.skeletonIcon:Pn.icon,children:E}),!o&&a.jsx("span",{className:O?Pn.skeletonText:Pn.text,children:C})]},`${j.id}-${C}`):a.jsxs(Tr,{to:A,className:h,children:[a.jsx("span",{className:Pn.icon,children:E}),!o&&a.jsx("span",{className:Pn.text,children:C}),o&&a.jsx("span",{className:Pn.srOnlyLabel,children:C})]},A))})]},j.id))})]})}const yG=["farmId","unitType","unitId","deviceId"],gG={TNK:"TANK",LYR:"LAYER",GRM:"GERMINATION",ENV:"ENV"},Bf=e=>!e&&e!==0?"":String(e).trim().toLowerCase(),ra=e=>e==null?"":String(e).trim(),vG=e=>e==null||e===""?"NA":String(e).trim()||"NA",RD=e=>{if(!e)return"UNKNOWN";const t=String(e).trim().toUpperCase();return gG[t]||t||"UNKNOWN"},fs=({farmId:e,unitType:t,unitId:n,layerId:r,deviceId:i,deviceType:o,deviceKind:c}={})=>{const d=ra(e),f=Bf(t),m=ra(n),h=ra(i);if(!d||!f||!m||!h)return null;const g=vG(r),v=RD(o??c);return`${d}|${f}|${m}|${g}|${v}|${h}`},Uf=(e={},t={})=>{const n=e.farmId??e.farm_id??t.farmId??t.farm_id??null,r=e.unitType??e.unit_type??t.unitType??t.unit_type??null,i=e.unitId??e.unit_id??t.unitId??t.unit_id??null,o=e.layerId??e.layer_id??t.layerId??t.layer_id??null,c=e.deviceType??e.device_type??t.deviceType??t.device_type??null,d=e.deviceKind??e.device_kind??t.deviceKind??t.device_kind??null,f=e.deviceId??e.device_id??t.deviceId??t.device_id??null;return{farmId:n,unitType:r,unitId:i,layerId:o,deviceType:c,deviceKind:d,deviceId:f,kind:e.kind??t.kind??null}},M1=(e={})=>yG.every(t=>ra(e[t])),bG=(e={},t={})=>{if(!t)return!0;const n=["farmId","unitType","unitId","layerId"];for(const r of n){const i=t[r];if(!(i==null||i==="")&&ra(e[r])!==ra(i))return!1}return!0},Ii=(e={})=>({farmId:ra(e.farmId)||null,unitType:Bf(e.unitType)||null,unitId:ra(e.unitId)||null,layerId:e.layerId===null||e.layerId===void 0?null:ra(e.layerId),deviceType:RD(e.deviceType||e.deviceKind||e.kind)||null,deviceId:ra(e.deviceId)||null,kind:e.kind??null}),qc=Bn(),Xc=["name","label","title","displayName"],_G=["id","value","code","key","farmId","unitType","unitId","layerId","deviceId"],MD=(e,t=[])=>{if(e==null)return"";if(typeof e=="string")return e.trim();if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return"";if(typeof e=="object"){const n=[...t,..._G,...Xc];for(const r of n)if(Object.prototype.hasOwnProperty.call(e,r)){const i=MD(e[r],t);if(i)return i}return""}return""},ss=(e,t=[])=>{for(const n of e){const r=MD(n,t);if(r)return r}return""},xG=e=>{if(e==null||typeof e!="object"||Array.isArray(e))return null;const t=ss([e.farmId,e.farm_id,e.farm,e.systemId,e.systemID,e.system,e.siteId,e.site,e.farm?.id,e.system?.id,e.site?.id]),n=ss([e.farmName,e.farmLabel,e.farm?.name,e.systemName,e.systemLabel,e.system?.name,e.siteName,e.site?.name],Xc),r=ss([e.unitType,e.unit_type,e.unit,e.type,e.unitTypeName]),i=ss([e.unitId,e.unit_id,e.unitKey,e.unit,e.rackId,e.rack]),o=ss([e.layerId,e.layerID,e.layerCode,e.layerKey,e.layer,e.layer?.id,e.layer?.layerId,e.layer?.code,e.layer?.key]),c=ss([e.layerName,e.layerLabel,e.layer,e.layer?.name,e.layer?.label],Xc),d=ss([e.deviceId,e.deviceID,e.deviceCode,e.deviceKey,e.device,e.device?.id,e.device?.deviceId,e.device?.code,e.device?.key,e.id]),f=ss([e.deviceName,e.deviceLabel,e.name,e.label,e.device,e.device?.name,e.device?.label],Xc);return!t||!r||!i||!d?null:{...e,farmId:t,farmName:n||t,unitType:r,unitId:i,layerId:o,layerName:c||o,deviceId:d,deviceName:f||d}},xl=(e,t=[])=>{Array.isArray(t)&&t.forEach(n=>{const r=xG(n);if(!r)return;const i=fs(r);if(!i)return;const o=e.get(i)||{};e.set(i,{...o,...r,deviceKey:i})})},Lb=(e,t=[])=>{Array.isArray(t)&&t.forEach(n=>{const r=ss([n.systemId,n.id,n.system,n.code,n.key]),i=ss([n.systemName,n.name,n.label],Xc);(Array.isArray(n.layers)?n.layers:[]).forEach(c=>{const d=ss([c.layerId,c.id,c.layer,c.code,c.key]),f=ss([c.layerName,c.name,c.label],Xc);(Array.isArray(c.devices)?c.devices:[]).forEach(h=>{xl(e,[{farmId:r||h.farmId,farmName:i||h.farmName,layerId:d||h.layerId,layerName:f||h.layerName,...h}])})})})},I1=e=>{if(!e)return null;const t=new Map;xl(t,e),xl(t,e?.devices),xl(t,e?.data),xl(t,e?.data?.devices),xl(t,e?.catalog),xl(t,e?.catalog?.devices),Lb(t,e?.systems),Lb(t,e?.data?.systems),Lb(t,e?.catalog?.systems);const n=Array.from(t.values());return n.length?{devices:n}:null},SG=[`${qc}/api/devices`,`${qc}/api/devices/all`,`${qc}/api/reports/meta`,`${qc}/api/device-catalog`,`${qc}/api/deviceCatalog`],wG=async({signal:e}={})=>{let t=null;for(const n of SG)try{const r=await Ve(n,{signal:e});if(!r.ok){t=new Error(`HTTP ${r.status}`);continue}const i=await r.json(),o=I1(i);if(o?.devices?.length)return{catalog:o,error:null}}catch(r){if(r?.name==="AbortError")throw r;t=r}return{catalog:null,error:t}},tT=e=>{const t=d=>`${d}`.padStart(2,"0"),n=e.getFullYear(),r=t(e.getMonth()+1),i=t(e.getDate()),o=t(e.getHours()),c=t(e.getMinutes());return`${n}-${r}-${i}T${o}:${c}`},gp=e=>e?new Date(e).toISOString():"",ID=(e,t)=>{const n=(new Date(t)-new Date(e))/36e5;return n<=6?"1m":n<=24?"5m":n<=72?"15m":n<=168?"30m":n<=720?"1h":"2h"},D1=Bn();async function jG({signal:e}={}){const t=`${D1}/api/topics/sensors`;try{const n=await Ve(t,{signal:e});if(!n.ok)return{topics:[],error:new Error(`HTTP ${n.status}`)};const r=await n.json();return{topics:Array.isArray(r?.topics)?r.topics:[],version:r?.version??null,error:null}}catch(n){if(n?.name==="AbortError")throw n;return{topics:[],error:n}}}function zt(e,t=""){if(e==null)return t;const n=String(e).trim();return n.length?n:t}const DD=p.createContext(null),vh=["growSensors","germinationTopic","waterTank"],NG=e=>String(e||"").replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/^\s+|\s+$/g,"").replace(/^./,t=>t.toUpperCase()),PD=e=>zt(e).toLowerCase().replace(/[\s._-]/g,""),$D=e=>zt(e?.layerId,e?.layer?.id,e?.layer),LD=(e,t)=>!e||!t?!1:e==="growSensors"?!!$D(t):!0,AG=(e,t)=>{const n=new Set,r=[],i=o=>{const c=zt(o);!c||n.has(c)||(n.add(c),r.push(c))};return e.forEach(i),t.forEach(i),r.length?r:e.slice()},Bb=(e,t={})=>{const n={};return e.forEach(r=>{const i=t[r];i instanceof Set?n[r]=new Set(i):Array.isArray(i)?n[r]=new Set(i):n[r]=new Set}),n},Ub=(e,t)=>e.includes(t)?e.filter(n=>n!==t):[...e,t],EG=(e,t,n)=>{const r=new Map;e.forEach(c=>{r.set(c,new Map)});const i=(c,d,f)=>{const m=zt(f),h=PD(m);return!m||!h?{added:!1,normalized:!1}:c.has(h)?{added:!1,normalized:!0}:(c.set(h,{id:m,label:m,topic:d}),{added:!0,normalized:!0})};(n||[]).forEach(c=>{const d=Array.isArray(c?.sensors)?c.sensors:[];d.length&&e.forEach(f=>{if(!LD(f,c))return;r.has(f)||r.set(f,new Map);const m=r.get(f);let h=!1;d.forEach(g=>{const v=zt(g?.sensorType)||zt(g?.valueType)||zt(g?.sensorName)||zt(g?.name)||zt(g),{normalized:x}=i(m,f,v);x&&(h=!0)}),h||console.warn("Reports: sensors empty after normalization",{deviceId:zt(c?.deviceId,c?.deviceKey),sensors:d})})}),Object.entries(t||{}).forEach(([c,d])=>{r.has(c)||r.set(c,new Map);const f=r.get(c);(d||[]).forEach(m=>{const h=zt(m?.label,m?.id);i(f,c,h)})});const o={};return r.forEach((c,d)=>{o[d]=Array.from(c.values()).sort((f,m)=>f.label.localeCompare(m.label))}),o},CG=(e,t)=>{const n=new Map;e.forEach(i=>{n.set(i,new Map)}),(t||[]).forEach(i=>{e.forEach(o=>{if(!LD(o,i))return;n.has(o)||n.set(o,new Map);const c=n.get(o),d=zt(i?.deviceKey)||fs(i);!d||c.has(d)||c.set(d,{id:d,deviceKey:d,deviceId:zt(i?.deviceId),label:zt(i?.deviceName||i?.deviceId,d),layerId:$D(i),farmId:zt(i?.farmId),unitType:zt(i?.unitType),unitId:zt(i?.unitId)})})});const r={};return n.forEach((i,o)=>{r[o]=Array.from(i.values()).sort((c,d)=>c.label.localeCompare(d.label)||c.deviceKey.localeCompare(d.deviceKey))}),r},qb=(e,t)=>e.length===t.length&&e.every(n=>t.includes(n));function TG({children:e}){const r=(cr()?.pathname?.replace(/\/+$/,"")||"/")==="/reports",[i,o]=p.useState({devices:[]}),[c,d]=p.useState(()=>vh.slice()),[f,m]=p.useState(()=>{const le=new Date;return le.setHours(le.getHours()-6),tT(le)}),[h,g]=p.useState(()=>tT(new Date)),[v,x]=p.useState("Off"),[w,_]=p.useState({}),[S,j]=p.useState(()=>c.length?[c[0]]:[]),[A,E]=p.useState(()=>Bb(c)),[C,T]=p.useState({systems:[],layers:[],devices:[]}),[O,R]=p.useState([]),[k,P]=p.useState([]);p.useEffect(()=>{if(!r)return;let le=!1;const Oe=new AbortController;return(async()=>{try{const{catalog:ne,error:Se}=await wG({signal:Oe.signal});if(le)return;ne?.devices?.length?o(ne):(o({devices:[]}),Se&&console.error("Unable to load device catalog for reports",Se))}catch(ne){if(le||ne?.name==="AbortError")return;o({devices:[]}),console.error("Unable to load device catalog for reports",ne)}})(),()=>{le=!0,Oe.abort()}},[r]),p.useEffect(()=>{if(!r)return;let le=!1;const Oe=new AbortController;return(async()=>{try{const{topics:ne,error:Se}=await jG({signal:Oe.signal});if(le)return;if(Array.isArray(ne)&&ne.length){const Ge={},vt=[];ne.forEach(Dt=>{const Ne=zt(Dt?.topic);if(!Ne)return;vt.push(Ne);const We=Array.isArray(Dt?.sensorTypes)?Dt.sensorTypes:[],ze=new Map;We.forEach(lt=>{const Bt=zt(lt);if(!Bt)return;const Qt=PD(Bt);!Qt||ze.has(Qt)||ze.set(Qt,{id:Bt,label:Bt,topic:Ne})}),Ge[Ne]=Array.from(ze.values())}),_(Ge),d(Dt=>{const Ne=AG(vh,vt);return Dt.length===Ne.length&&Dt.every((We,ze)=>We===Ne[ze])?Dt:Ne})}else _({}),d(vh.slice());Se&&console.error("Unable to load topic sensors",Se)}catch(ne){if(le||ne?.name==="AbortError")return;console.error("Unable to load topic sensors",ne),_({}),d(vh.slice())}})(),()=>{le=!0,Oe.abort()}},[r]),p.useEffect(()=>{E(le=>{const Oe=Bb(c,le),Le=Object.keys(Oe);return Le.length===Object.keys(le).length&&Le.every(Se=>{const Ge=le[Se],vt=Oe[Se];if(!Ge||Ge.size!==vt.size)return!1;for(const Dt of Ge)if(!vt.has(Dt))return!1;return!0})?le:Oe})},[c]),p.useEffect(()=>{j(le=>{const Oe=le.filter(Le=>c.includes(Le));return Oe.length?Oe:c.length?[c[0]]:[]})},[c]);const H=p.useMemo(()=>Array.isArray(i?.devices)?i.devices:[],[i]),K=p.useMemo(()=>{const le=new Map;return H.forEach(Oe=>{const Le=Oe?.deviceKey||fs(Oe);Le&&le.set(Le,Oe)}),le},[H]),B=p.useMemo(()=>{const le=new Set;return H.forEach(Oe=>{Oe?.farmId&&le.add(Oe.farmId)}),Array.from(le).sort()},[H]),U=p.useMemo(()=>{const le=new Set;return H.forEach(Oe=>{C.systems.length&&!C.systems.includes(Oe.farmId)||Oe?.layerId&&le.add(Oe.layerId)}),Array.from(le).sort()},[H,C.systems]),I=p.useMemo(()=>{const le=new Set;return H.forEach(Oe=>{C.systems.length&&!C.systems.includes(Oe.farmId)||C.layers.length&&!C.layers.includes(Oe.layerId)||Oe?.deviceId&&le.add(Oe.deviceId)}),Array.from(le).sort()},[H,C.systems,C.layers]);p.useEffect(()=>{T(le=>{const Oe=le.systems.filter(Se=>B.includes(Se)),Le=le.layers.filter(Se=>U.includes(Se)),ne=le.devices.filter(Se=>I.includes(Se));return qb(Oe,le.systems)&&qb(Le,le.layers)&&qb(ne,le.devices)?le:{systems:Oe,layers:Le,devices:ne}})},[B,U,I]);const L=p.useMemo(()=>H.filter(le=>{const Oe=!C.systems.length||C.systems.includes(le.farmId),Le=!C.layers.length||C.layers.includes(le.layerId),ne=!C.devices.length||C.devices.includes(le.deviceId);return Oe&&Le&&ne}),[H,C]),$=p.useMemo(()=>CG(c,H),[c,H]),G=p.useMemo(()=>EG(c,w,H),[c,w,H]),te=p.useMemo(()=>{const le=new Set;return Object.values($||{}).forEach(Oe=>{(Oe||[]).forEach(Le=>{Le?.deviceKey&&le.add(Le.deviceKey)})}),le},[$]),re=p.useMemo(()=>[...S],[S]),M=p.useMemo(()=>new Set(re),[re]);p.useEffect(()=>{R(le=>{if(!le.length)return le;const Oe=le.filter(Le=>te.has(Le));return Oe.length===le.length?le:Oe})},[te]),p.useEffect(()=>{if(!re.length)return;const le=re[0],Oe=H.length,Le=$?.[le]?.length||0;Oe>0&&Le===0&&console.warn("Reports: devices filtered out",{topic:le,rawCount:Oe,filteredCount:Le,sample:H[0]})},[re,H,$]),p.useEffect(()=>{r||R([])},[r]);const q=p.useMemo(()=>{if(O.length)return O;if(re.length===1){const le=$?.[re[0]]||[];if(le.length)return Array.from(new Set(le.map(Oe=>Oe?.deviceKey).filter(Boolean)))}return L.map(le=>le.deviceKey).filter(Boolean)},[O,re,$,L]),z=p.useCallback((le=[])=>{if(!Array.isArray(le)||le.length===0){R([]);return}const Oe=Array.from(new Set(le.filter(Boolean)));R(Oe)},[]),V=p.useCallback((le,Oe)=>{le&&E(Le=>{const ne={...Le},Se=ne[le]instanceof Set?new Set(ne[le]):new Set;return Oe(Se),ne[le]=Se,ne})},[]),Y=p.useCallback(le=>le?zt(typeof le=="string"?le:le.id||le.value||le.label):"",[]),Z=p.useCallback((le,Oe)=>{!le||!Oe||V(le,Le=>{Le.has(Oe)?Le.delete(Oe):Le.add(Oe)})},[V]),ee=p.useCallback((le,Oe=[])=>{if(!le)return;const Le=Array.isArray(Oe)?Oe:[];V(le,ne=>{ne.clear(),Le.forEach(Se=>{if(Se&&Array.isArray(Se?.sensorValues)&&Se.sensorValues.length)Se.sensorValues.forEach(Ge=>{const vt=Y(Ge);vt&&ne.add(vt)});else{const Ge=Y(Se);Ge&&ne.add(Ge)}})})},[V,Y]),ie=p.useCallback((le,Oe=[])=>{if(!le)return;const Le=Array.isArray(Oe)?Oe:[];V(le,ne=>{Le.forEach(Se=>{if(Se&&Array.isArray(Se?.sensorValues)&&Se.sensorValues.length)Se.sensorValues.forEach(Ge=>{const vt=Y(Ge);vt&&ne.add(vt)});else{const Ge=Y(Se);Ge&&ne.add(Ge)}})})},[V,Y]),xe=p.useCallback((le,Oe=[])=>{if(!le)return;const Le=Array.isArray(Oe)?Oe:[];V(le,ne=>{Le.forEach(Se=>{if(Se&&Array.isArray(Se?.sensorValues)&&Se.sensorValues.length)Se.sensorValues.forEach(Ge=>{const vt=Y(Ge);vt&&ne.delete(vt)});else{const Ge=Y(Se);Ge&&ne.delete(Ge)}})})},[V,Y]),X=p.useCallback(le=>{le&&V(le,Oe=>{Oe.clear()})},[V]),Ae=p.useMemo(()=>c.map(le=>({id:le,label:NG(le)})),[c]),he=p.useMemo(()=>{const le={};return c.forEach(Oe=>{le[Oe]=Array.from(A[Oe]||[])}),le},[c,A]),ue=p.useMemo(()=>{const le=new Set;return re.forEach(Oe=>{(he[Oe]||[]).forEach(Le=>{Le&&le.add(Le)})}),Array.from(le)},[re,he]),Xe=p.useCallback(le=>{const Oe=le.target.value;T(Le=>Oe==="ALL"?{...Le,systems:B.slice()}:Oe===""?{...Le,systems:[]}:{...Le,systems:Ub(Le.systems,Oe)})},[B]),Ue=p.useCallback(le=>{const Oe=le.target.value;T(Le=>Oe==="ALL"?{...Le,layers:U.slice()}:Oe===""?{...Le,layers:[]}:{...Le,layers:Ub(Le.layers,Oe)})},[U]),ye=p.useCallback(le=>{const Oe=le.target.value;T(Le=>Oe==="ALL"?{...Le,devices:I.slice()}:Oe===""?{...Le,devices:[]}:{...Le,devices:Ub(Le.devices,Oe)})},[I]),je=p.useCallback(()=>{T({systems:[],layers:[],devices:[]}),R([]),j(c.length?[c[0]]:[]),E(Bb(c))},[c]),Ee=p.useCallback(()=>{if(!q.length)return;const le=ID(f,h),Oe=re.flatMap(Le=>Array.from(A[Le]||[]));P(Le=>[...Le,{id:String(Date.now()),title:`${q[0]} (${le})`,from:gp(f),to:gp(h),sensors:Oe}])},[f,h,A,re,q]),qe=p.useCallback(le=>{P(Oe=>Oe.filter(Le=>Le.id!==le))},[]),W=p.useCallback(()=>{P([])},[]),fe=p.useCallback(le=>{le&&j(Oe=>Oe.includes(le)?Oe.length===1?Oe:Oe.filter(Le=>Le!==le):[le])},[]),we=p.useCallback(()=>{j(c.slice())},[c]),de=p.useCallback(()=>{j([])},[]),ve=p.useRef(()=>{}),se=p.useCallback(le=>{typeof le=="function"?ve.current=le:ve.current=()=>{}},[]),Re=p.useCallback(()=>{ve.current()},[]),Je=p.useMemo(()=>({isReportsRoute:r,deviceMeta:i,deviceIdentityMap:K,deviceIdentityMap:K,fromDate:f,setFromDate:m,toDate:h,setToDate:g,autoRefreshValue:v,setAutoRefreshValue:x,systems:B,layers:U,deviceIds:I,handleSystemChange:Xe,handleLayerChange:Ue,handleDeviceChange:ye,onReset:je,onAddCompare:Ee,onRemoveCompare:qe,onClearCompare:W,compareItems:k,topics:Ae,selSensors:A,selectedTopics:M,selectedTopicIds:re,selectedTopicSensors:he,selectedSensorTypes:ue,toggleTopicSelection:fe,setAllTopics:we,clearTopics:de,availableTopicSensors:G,availableTopicDevices:$,toggleSensor:Z,setAllSensors:ee,addSensors:ie,removeSensors:xe,clearSensors:X,selectedDeviceFilters:q,selectedDeviceKeys:O,handleDeviceSelectionChange:z,registerApplyHandler:se,triggerApply:Re}),[r,i,K,f,h,v,B,U,I,Xe,Ue,ye,je,Ee,qe,W,k,Ae,A,M,re,he,ue,fe,we,de,G,$,Z,ee,ie,xe,X,q,O,z,se,Re]);return a.jsx(DD.Provider,{value:Je,children:e})}function kG(){const e=p.useContext(DD);if(!e)throw new Error("useReportsFilters must be used within a ReportsFiltersProvider");return e}const OG="_shell_u79lv_1",RG="_body_u79lv_15",MG="_main_u79lv_27",IG="_content_u79lv_41",or={shell:OG,body:RG,main:MG,content:IG};function DG(){const e=cr(),{isAuthenticated:t,role:n,roles:r,loadingProfile:i,isBootstrapping:o}=Xt(),c=Pf({role:n,roles:r}),d=(r?.length??0)>0||!!n;return o?a.jsxs("div",{className:or.shell,children:[a.jsx(ef,{}),a.jsx(Yc,{}),a.jsx("div",{className:or.body,children:a.jsx("main",{className:or.main,children:a.jsx("div",{className:or.content})})})]}):t?i&&!d?a.jsxs("div",{className:or.shell,children:[a.jsx(ef,{}),a.jsx(Yc,{}),a.jsx("div",{className:or.body,children:a.jsx("main",{className:or.main,children:a.jsx("div",{className:or.content})})})]}):c?a.jsx(TG,{children:a.jsxs("div",{className:or.shell,children:[a.jsx(ef,{}),a.jsx(Yc,{}),a.jsxs("div",{className:or.body,children:[a.jsx(OD,{}),a.jsx("main",{className:or.main,children:a.jsx("div",{className:or.content,children:a.jsx(_u,{})})})]})]})}):a.jsx(Rn,{to:"/store",replace:!0}):a.jsx(Rn,{to:"/login",replace:!0,state:{from:e}})}function PG(){return a.jsxs("div",{className:or.shell,children:[a.jsx(ef,{}),a.jsx(Yc,{}),a.jsx("div",{className:or.body,children:a.jsx("main",{className:or.main,children:a.jsx("div",{className:or.content,children:a.jsx(_u,{})})})})]})}function $G(){const{isAuthenticated:e,role:t,roles:n,loadingProfile:r}=Xt(),i=Pf({role:t,roles:n}),o=(n?.length??0)>0||!!t,d=(!r||o)&&e&&i;return a.jsxs("div",{className:or.shell,children:[a.jsx(ef,{}),a.jsx(Yc,{}),a.jsxs("div",{className:or.body,children:[d?a.jsx(OD,{}):null,a.jsx("main",{className:or.main,children:a.jsx("div",{className:or.content,children:a.jsx(_u,{})})})]})]})}const LG="_header_1whqf_1",BG="_title_1whqf_37",UG="_time_1whqf_53",zb={header:LG,title:BG,time:UG};function qG({title:e}){const[t,n]=p.useState(()=>new Date);return p.useEffect(()=>{const r=setInterval(()=>n(new Date),1e3);return()=>clearInterval(r)},[]),a.jsxs("header",{className:zb.header,children:[a.jsx("h1",{className:zb.title,children:e}),a.jsx("div",{className:zb.time,children:t.toLocaleTimeString()})]})}const gs=my.memo(qG),zG=Bn(),nT=`${zG}/api/devices`,rT=async(e,t,n)=>{const r=await Ve(e,t);return at(r,n)},FG=async({signal:e}={})=>{try{return await rT(nT,{signal:e},"Failed to load devices")}catch(t){if(t?.status!==404)throw t;return rT(`${nT}/all`,{signal:e},"Failed to load devices")}};function HG(e,t){e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const r=new Date,i=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=c=>{const d=new Date().getTime()-r.getTime();t(`Discarded socket (#${i})  closed after ${d}ms, with code/reason: ${c.code}/${c.reason}`)},this.close(),o?.call(e,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}const Wd={LF:`
`,NULL:"\0"};class Mo{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(t){const{command:n,headers:r,body:i,binaryBody:o,escapeHeaderValues:c,skipContentLengthHeader:d}=t;this.command=n,this.headers=Object.assign({},r||{}),o?(this._binaryBody=o,this.isBinaryBody=!0):(this._body=i||"",this.isBinaryBody=!1),this.escapeHeaderValues=c||!1,this.skipContentLengthHeader=d||!1}static fromRawFrame(t,n){const r={},i=o=>o.replace(/^\s+|\s+$/g,"");for(const o of t.headers.reverse()){o.indexOf(":");const c=i(o[0]);let d=i(o[1]);n&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(d=Mo.hdrValueUnEscape(d)),r[c]=d}return new Mo({command:t.command,headers:r,binaryBody:t.binaryBody,escapeHeaderValues:n})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?Mo.toUnit8Array(t,this._binaryBody).buffer:t+this._body+Wd.NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const n of Object.keys(this.headers||{})){const r=this.headers[n];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${n}:${Mo.hdrValueEscape(`${r}`)}`):t.push(`${n}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(Wd.LF)+Wd.LF+Wd.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,n){const r=new TextEncoder().encode(t),i=new Uint8Array([0]),o=new Uint8Array(r.length+n.length+i.length);return o.set(r),o.set(n,r.length),o.set(i,r.length+n.length),o}static marshall(t){return new Mo(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const aT=0,bh=10,_h=13,VG=58;class KG{constructor(t,n){this.onFrame=t,this.onIncomingPing=n,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,n=!1){let r;if(typeof t=="string"?r=this._encoder.encode(t):r=new Uint8Array(t),n&&r[r.length-1]!==0){const i=new Uint8Array(r.length+1);i.set(r,0),i[r.length]=0,r=i}for(let i=0;i<r.length;i++){const o=r[i];this._onByte(o)}}_collectFrame(t){if(t!==aT&&t!==_h){if(t===bh){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==_h){if(t===bh){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==_h){if(t===bh){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===VG){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==_h){if(t===bh){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(n=>n[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===aT){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Io;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"})(Io||(Io={}));var Os;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"})(Os||(Os={}));var vp;(function(e){e[e.LINEAR=0]="LINEAR",e[e.EXPONENTIAL=1]="EXPONENTIAL"})(vp||(vp={}));var hf;(function(e){e.Interval="interval",e.Worker="worker"})(hf||(hf={}));class GG{constructor(t,n=hf.Interval,r){this._interval=t,this._strategy=n,this._debug=r,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(t){this.stop(),this.shouldUseWorker()?this.runWorker(t):this.runInterval(t)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===hf.Worker}runWorker(t){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=n=>t(n.data))}runInterval(t){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const n=Date.now();this._timer=setInterval(()=>{t(Date.now()-n)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class na{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}na.V1_0="1.0";na.V1_1="1.1";na.V1_2="1.2";na.default=new na([na.V1_2,na.V1_1,na.V1_0]);class WG{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(t,n,r){this._client=t,this._webSocket=n,this._connected=!1,this._serverFrameHandlers={CONNECTED:i=>{this.debug(`connected to server ${i.headers.server}`),this._connected=!0,this._connectedVersion=i.headers.version,this._connectedVersion===na.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(i.headers),this.onConnect(i)},MESSAGE:i=>{const o=i.headers.subscription,c=this._subscriptions[o]||this.onUnhandledMessage,d=i,f=this,m=this._connectedVersion===na.V1_2?d.headers.ack:d.headers["message-id"];d.ack=(h={})=>f.ack(m,o,h),d.nack=(h={})=>f.nack(m,o,h),c(d)},RECEIPT:i=>{const o=this._receiptWatchers[i.headers["receipt-id"]];o?(o(i),delete this._receiptWatchers[i.headers["receipt-id"]]):this.onUnhandledReceipt(i)},ERROR:i=>{this.onStompError(i)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame}start(){const t=new KG(n=>{const r=Mo.fromRawFrame(n,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=n=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const r=n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data;this.debug(`<<< ${r}`)}t.parseChunk(n.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=n=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(n)},this._webSocket.onerror=n=>{this.onWebSocketError(n)},this._webSocket.onopen=()=>{const n=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),n["accept-version"]=this.stompVersions.supportedVersions(),n["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:n})}}_setupHeartbeat(t){if(t.version!==na.V1_1&&t.version!==na.V1_2||!t["heart-beat"])return;const[n,r]=t["heart-beat"].split(",").map(i=>parseInt(i,10));if(this.heartbeatOutgoing!==0&&r!==0){const i=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${i}ms`),this._pinger=new GG(i,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Io.OPEN&&(this._webSocket.send(Wd.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&n!==0){const i=Math.max(this.heartbeatIncoming,n);this.debug(`check PONG every ${i}ms`),this._ponger=setInterval(()=>{const o=Date.now()-this._lastServerActivityTS;o>i*2&&(this.debug(`did not receive server activity for the last ${o}ms`),this._closeOrDiscardWebsocket())},i)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Io.CONNECTING||this._webSocket.readyState===Io.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&HG(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:n,headers:r,body:i,binaryBody:o,skipContentLengthHeader:c}=t,d=new Mo({command:n,headers:r,body:i,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:c});let f=d.serialize();if(this.logRawCommunication?this.debug(`>>> ${f}`):this.debug(`>>> ${d}`),this.forceBinaryWSFrames&&typeof f=="string"&&(f=new TextEncoder().encode(f)),typeof f!="string"||!this.splitLargeFrames)this._webSocket.send(f);else{let m=f;for(;m.length>0;){const h=m.substring(0,this.maxWebSocketChunkSize);m=m.substring(this.maxWebSocketChunkSize),this._webSocket.send(h),this.debug(`chunk sent = ${h.length}, remaining = ${m.length}`)}}}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,n=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(n)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Io.CONNECTING||this._webSocket.readyState===Io.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:n,headers:r,body:i,binaryBody:o,skipContentLengthHeader:c}=t,d=Object.assign({destination:n},r);this._transmit({command:"SEND",headers:d,body:i,binaryBody:o,skipContentLengthHeader:c})}watchForReceipt(t,n){this._receiptWatchers[t]=n}subscribe(t,n,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=t,this._subscriptions[r.id]=n,this._transmit({command:"SUBSCRIBE",headers:r});const i=this;return{id:r.id,unsubscribe(o){return i.unsubscribe(r.id,o)}}}unsubscribe(t,n={}){n=Object.assign({},n),delete this._subscriptions[t],n.id=t,this._transmit({command:"UNSUBSCRIBE",headers:n})}begin(t){const n=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:n}});const r=this;return{id:n,commit(){r.commit(n)},abort(){r.abort(n)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,n,r={}){r=Object.assign({},r),this._connectedVersion===na.V1_2?r.id=t:r["message-id"]=t,r.subscription=n,this._transmit({command:"ACK",headers:r})}nack(t,n,r={}){return r=Object.assign({},r),this._connectedVersion===na.V1_2?r.id=t:r["message-id"]=t,r.subscription=n,this._transmit({command:"NACK",headers:r})}}class YG{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Os.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}constructor(t={}){this.stompVersions=na.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=vp.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=hf.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Os.INACTIVE;const n=()=>{};this.debug=n,this.beforeConnect=n,this.onConnect=n,this.onDisconnect=n,this.onUnhandledMessage=n,this.onUnhandledReceipt=n,this.onUnhandledFrame=n,this.onStompError=n,this.onWebSocketClose=n,this.onWebSocketError=n,this.logRawCommunication=!1,this.onChangeState=n,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}configure(t){Object.assign(this,t),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Os.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Os.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const t=this._createWebSocket();this._stompHandler=new WG(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:n=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(n)},onDisconnect:n=>{this.onDisconnect(n)},onStompError:n=>{this.onStompError(n)},onWebSocketClose:n=>{this._stompHandler=void 0,this.state===Os.DEACTIVATING&&this._changeState(Os.INACTIVE),this.onWebSocketClose(n),this.active&&this._schedule_reconnect()},onWebSocketError:n=>{this.onWebSocketError(n)},onUnhandledMessage:n=>{this.onUnhandledMessage(n)},onUnhandledReceipt:n=>{this.onUnhandledReceipt(n)},onUnhandledFrame:n=>{this.onUnhandledFrame(n)}}),this._stompHandler.start()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===vp.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(t={}){const n=t.force||!1,r=this.active;let i;if(this.state===Os.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Os.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Io.CLOSED){const o=this._stompHandler.onWebSocketClose;i=new Promise((c,d)=>{this._stompHandler.onWebSocketClose=f=>{o(f),c()}})}else return this._changeState(Os.INACTIVE),Promise.resolve();return n?this._stompHandler?.discardWebsocket():r&&this._disposeStompHandler(),i}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,n){this._checkConnection(),this._stompHandler.watchForReceipt(t,n)}subscribe(t,n,r={}){return this._checkConnection(),this._stompHandler.subscribe(t,n,r)}unsubscribe(t,n={}){this._checkConnection(),this._stompHandler.unsubscribe(t,n)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,n,r={}){this._checkConnection(),this._stompHandler.ack(t,n,r)}nack(t,n,r={}){this._checkConnection(),this._stompHandler.nack(t,n,r)}}var Fb={exports:{}},xh={},sT;function XG(){return sT||(sT=1,Ze.crypto&&Ze.crypto.getRandomValues?xh.randomBytes=function(e){var t=new Uint8Array(e);return Ze.crypto.getRandomValues(t),t}:xh.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t}),xh}var Hb,iT;function wu(){if(iT)return Hb;iT=1;var e=XG(),t="abcdefghijklmnopqrstuvwxyz012345";return Hb={string:function(n){for(var r=t.length,i=e.randomBytes(n),o=[],c=0;c<n;c++)o.push(t.substr(i[c]%r,1));return o.join("")},number:function(n){return Math.floor(Math.random()*n)},numberString:function(n){var r=(""+(n-1)).length,i=new Array(r+1).join("0");return(i+this.number(n)).slice(-r)}},Hb}var oT;function Go(){return oT||(oT=1,(function(e){var t=wu(),n={},r=!1,i=Ze.chrome&&Ze.chrome.app&&Ze.chrome.app.runtime;e.exports={attachEvent:function(c,d){typeof Ze.addEventListener<"u"?Ze.addEventListener(c,d,!1):Ze.document&&Ze.attachEvent&&(Ze.document.attachEvent("on"+c,d),Ze.attachEvent("on"+c,d))},detachEvent:function(c,d){typeof Ze.addEventListener<"u"?Ze.removeEventListener(c,d,!1):Ze.document&&Ze.detachEvent&&(Ze.document.detachEvent("on"+c,d),Ze.detachEvent("on"+c,d))},unloadAdd:function(c){if(i)return null;var d=t.string(8);return n[d]=c,r&&setTimeout(this.triggerUnloadCallbacks,0),d},unloadDel:function(c){c in n&&delete n[c]},triggerUnloadCallbacks:function(){for(var c in n)n[c](),delete n[c]}};var o=function(){r||(r=!0,e.exports.triggerUnloadCallbacks())};i||e.exports.attachEvent("unload",o)})(Fb)),Fb.exports}var Vb,lT;function QG(){return lT||(lT=1,Vb=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}),Vb}var Sh={},cT;function ZG(){if(cT)return Sh;cT=1;var e=Object.prototype.hasOwnProperty,t;function n(c){try{return decodeURIComponent(c.replace(/\+/g," "))}catch{return null}}function r(c){try{return encodeURIComponent(c)}catch{return null}}function i(c){for(var d=/([^=?#&]+)=?([^&]*)/g,f={},m;m=d.exec(c);){var h=n(m[1]),g=n(m[2]);h===null||g===null||h in f||(f[h]=g)}return f}function o(c,d){d=d||"";var f=[],m,h;typeof d!="string"&&(d="?");for(h in c)if(e.call(c,h)){if(m=c[h],!m&&(m===null||m===t||isNaN(m))&&(m=""),h=r(h),m=r(m),h===null||m===null)continue;f.push(h+"="+m)}return f.length?d+f.join("&"):""}return Sh.stringify=o,Sh.parse=i,Sh}var Kb,uT;function BD(){if(uT)return Kb;uT=1;var e=QG(),t=ZG(),n=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function f(A){return(A||"").toString().replace(n,"")}var m=[["#","hash"],["?","query"],function(E,C){return v(C.protocol)?E.replace(/\\/g,"/"):E},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function g(A){var E;typeof window<"u"?E=window:typeof Ze<"u"?E=Ze:typeof self<"u"?E=self:E={};var C=E.location||{};A=A||C;var T={},O=typeof A,R;if(A.protocol==="blob:")T=new _(unescape(A.pathname),{});else if(O==="string"){T=new _(A,{});for(R in h)delete T[R]}else if(O==="object"){for(R in A)R in h||(T[R]=A[R]);T.slashes===void 0&&(T.slashes=i.test(A.href))}return T}function v(A){return A==="file:"||A==="ftp:"||A==="http:"||A==="https:"||A==="ws:"||A==="wss:"}function x(A,E){A=f(A),A=A.replace(r,""),E=E||{};var C=c.exec(A),T=C[1]?C[1].toLowerCase():"",O=!!C[2],R=!!C[3],k=0,P;return O?R?(P=C[2]+C[3]+C[4],k=C[2].length+C[3].length):(P=C[2]+C[4],k=C[2].length):R?(P=C[3]+C[4],k=C[3].length):P=C[4],T==="file:"?k>=2&&(P=P.slice(2)):v(T)?P=C[4]:T?O&&(P=P.slice(2)):k>=2&&v(E.protocol)&&(P=C[4]),{protocol:T,slashes:O||v(T),slashesCount:k,rest:P}}function w(A,E){if(A==="")return E;for(var C=(E||"/").split("/").slice(0,-1).concat(A.split("/")),T=C.length,O=C[T-1],R=!1,k=0;T--;)C[T]==="."?C.splice(T,1):C[T]===".."?(C.splice(T,1),k++):k&&(T===0&&(R=!0),C.splice(T,1),k--);return R&&C.unshift(""),(O==="."||O==="..")&&C.push(""),C.join("/")}function _(A,E,C){if(A=f(A),A=A.replace(r,""),!(this instanceof _))return new _(A,E,C);var T,O,R,k,P,H,K=m.slice(),B=typeof E,U=this,I=0;for(B!=="object"&&B!=="string"&&(C=E,E=null),C&&typeof C!="function"&&(C=t.parse),E=g(E),O=x(A||"",E),T=!O.protocol&&!O.slashes,U.slashes=O.slashes||T&&E.slashes,U.protocol=O.protocol||E.protocol||"",A=O.rest,(O.protocol==="file:"&&(O.slashesCount!==2||d.test(A))||!O.slashes&&(O.protocol||O.slashesCount<2||!v(U.protocol)))&&(K[3]=[/(.*)/,"pathname"]);I<K.length;I++){if(k=K[I],typeof k=="function"){A=k(A,U);continue}R=k[0],H=k[1],R!==R?U[H]=A:typeof R=="string"?(P=R==="@"?A.lastIndexOf(R):A.indexOf(R),~P&&(typeof k[2]=="number"?(U[H]=A.slice(0,P),A=A.slice(P+k[2])):(U[H]=A.slice(P),A=A.slice(0,P)))):(P=R.exec(A))&&(U[H]=P[1],A=A.slice(0,P.index)),U[H]=U[H]||T&&k[3]&&E[H]||"",k[4]&&(U[H]=U[H].toLowerCase())}C&&(U.query=C(U.query)),T&&E.slashes&&U.pathname.charAt(0)!=="/"&&(U.pathname!==""||E.pathname!=="")&&(U.pathname=w(U.pathname,E.pathname)),U.pathname.charAt(0)!=="/"&&v(U.protocol)&&(U.pathname="/"+U.pathname),e(U.port,U.protocol)||(U.host=U.hostname,U.port=""),U.username=U.password="",U.auth&&(P=U.auth.indexOf(":"),~P?(U.username=U.auth.slice(0,P),U.username=encodeURIComponent(decodeURIComponent(U.username)),U.password=U.auth.slice(P+1),U.password=encodeURIComponent(decodeURIComponent(U.password))):U.username=encodeURIComponent(decodeURIComponent(U.auth)),U.auth=U.password?U.username+":"+U.password:U.username),U.origin=U.protocol!=="file:"&&v(U.protocol)&&U.host?U.protocol+"//"+U.host:"null",U.href=U.toString()}function S(A,E,C){var T=this;switch(A){case"query":typeof E=="string"&&E.length&&(E=(C||t.parse)(E)),T[A]=E;break;case"port":T[A]=E,e(E,T.protocol)?E&&(T.host=T.hostname+":"+E):(T.host=T.hostname,T[A]="");break;case"hostname":T[A]=E,T.port&&(E+=":"+T.port),T.host=E;break;case"host":T[A]=E,o.test(E)?(E=E.split(":"),T.port=E.pop(),T.hostname=E.join(":")):(T.hostname=E,T.port="");break;case"protocol":T.protocol=E.toLowerCase(),T.slashes=!C;break;case"pathname":case"hash":if(E){var O=A==="pathname"?"/":"#";T[A]=E.charAt(0)!==O?O+E:E}else T[A]=E;break;case"username":case"password":T[A]=encodeURIComponent(E);break;case"auth":var R=E.indexOf(":");~R?(T.username=E.slice(0,R),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=E.slice(R+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(E))}for(var k=0;k<m.length;k++){var P=m[k];P[4]&&(T[P[1]]=T[P[1]].toLowerCase())}return T.auth=T.password?T.username+":"+T.password:T.username,T.origin=T.protocol!=="file:"&&v(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString(),T}function j(A){(!A||typeof A!="function")&&(A=t.stringify);var E,C=this,T=C.host,O=C.protocol;O&&O.charAt(O.length-1)!==":"&&(O+=":");var R=O+(C.protocol&&C.slashes||v(C.protocol)?"//":"");return C.username?(R+=C.username,C.password&&(R+=":"+C.password),R+="@"):C.password?(R+=":"+C.password,R+="@"):C.protocol!=="file:"&&v(C.protocol)&&!T&&C.pathname!=="/"&&(R+="@"),(T[T.length-1]===":"||o.test(C.hostname)&&!C.port)&&(T+=":"),R+=T+C.pathname,E=typeof C.query=="object"?A(C.query):C.query,E&&(R+=E.charAt(0)!=="?"?"?"+E:E),C.hash&&(R+=C.hash),R}return _.prototype={set:S,toString:j},_.extractProtocol=x,_.location=g,_.trimLeft=f,_.qs=t,Kb=_,Kb}var Gb,dT;function vs(){if(dT)return Gb;dT=1;var e=BD();return Gb={getOrigin:function(t){if(!t)return null;var n=new e(t);if(n.protocol==="file:")return null;var r=n.port;return r||(r=n.protocol==="https:"?"443":"80"),n.protocol+"//"+n.hostname+":"+r},isOriginEqual:function(t,n){var r=this.getOrigin(t)===this.getOrigin(n);return r},isSchemeEqual:function(t,n){return t.split(":")[0]===n.split(":")[0]},addPath:function(t,n){var r=t.split("?");return r[0]+n+(r[1]?"?"+r[1]:"")},addQuery:function(t,n){return t+(t.indexOf("?")===-1?"?"+n:"&"+n)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},Gb}var wh={exports:{}},fT;function fn(){return fT||(fT=1,typeof Object.create=="function"?wh.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:wh.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),wh.exports}var Wb={},Yb,mT;function UD(){if(mT)return Yb;mT=1;function e(){this._listeners={}}return e.prototype.addEventListener=function(t,n){t in this._listeners||(this._listeners[t]=[]);var r=this._listeners[t];r.indexOf(n)===-1&&(r=r.concat([n])),this._listeners[t]=r},e.prototype.removeEventListener=function(t,n){var r=this._listeners[t];if(r){var i=r.indexOf(n);if(i!==-1){r.length>1?this._listeners[t]=r.slice(0,i).concat(r.slice(i+1)):delete this._listeners[t];return}}},e.prototype.dispatchEvent=function(){var t=arguments[0],n=t.type,r=arguments.length===1?[t]:Array.apply(null,arguments);if(this["on"+n]&&this["on"+n].apply(this,r),n in this._listeners)for(var i=this._listeners[n],o=0;o<i.length;o++)i[o].apply(this,r)},Yb=e,Yb}var hT;function sa(){if(hT)return Wb;hT=1;var e=fn(),t=UD();function n(){t.call(this)}return e(n,t),n.prototype.removeAllListeners=function(r){r?delete this._listeners[r]:this._listeners={}},n.prototype.once=function(r,i){var o=this,c=!1;function d(){o.removeListener(r,d),c||(c=!0,i.apply(this,arguments))}this.on(r,d)},n.prototype.emit=function(){var r=arguments[0],i=this._listeners[r];if(i){for(var o=arguments.length,c=new Array(o-1),d=1;d<o;d++)c[d-1]=arguments[d];for(var f=0;f<i.length;f++)i[f].apply(this,c)}},n.prototype.on=n.prototype.addListener=t.prototype.addEventListener,n.prototype.removeListener=t.prototype.removeEventListener,Wb.EventEmitter=n,Wb}var jh={exports:{}},pT;function JG(){if(pT)return jh.exports;pT=1;var e=Ze.WebSocket||Ze.MozWebSocket;return e?jh.exports=function(n){return new e(n)}:jh.exports=void 0,jh.exports}var Xb,yT;function eW(){if(yT)return Xb;yT=1;var e=Go(),t=vs(),n=fn(),r=sa().EventEmitter,i=JG(),o=function(){};function c(d,f,m){if(!c.enabled())throw new Error("Transport created when disabled");r.call(this);var h=this,g=t.addPath(d,"/websocket");g.slice(0,5)==="https"?g="wss"+g.slice(5):g="ws"+g.slice(4),this.url=g,this.ws=new i(this.url,[],m),this.ws.onmessage=function(v){o("message event",v.data),h.emit("message",v.data)},this.unloadRef=e.unloadAdd(function(){h.ws.close()}),this.ws.onclose=function(v){o("close event",v.code,v.reason),h.emit("close",v.code,v.reason),h._cleanup()},this.ws.onerror=function(v){h.emit("close",1006,"WebSocket connection broken"),h._cleanup()}}return n(c,r),c.prototype.send=function(d){var f="["+d+"]";this.ws.send(f)},c.prototype.close=function(){var d=this.ws;this._cleanup(),d&&d.close()},c.prototype._cleanup=function(){var d=this.ws;d&&(d.onmessage=d.onclose=d.onerror=null),e.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!i},c.transportName="websocket",c.roundTrips=2,Xb=c,Xb}var Qb,gT;function tW(){if(gT)return Qb;gT=1;var e=fn(),t=sa().EventEmitter,n=function(){};function r(i,o){t.call(this),this.sendBuffer=[],this.sender=o,this.url=i}return e(r,t),r.prototype.send=function(i){this.sendBuffer.push(i),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){var i=this,o;this.sendStop=function(){i.sendStop=null,clearTimeout(o)},o=setTimeout(function(){i.sendStop=null,i.sendSchedule()},25)},r.prototype.sendSchedule=function(){n("sendSchedule",this.sendBuffer.length);var i=this;if(this.sendBuffer.length>0){var o="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,o,function(c){i.sendStop=null,c?(i.emit("close",c.code||1006,"Sending error: "+c),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},Qb=r,Qb}var Zb,vT;function nW(){if(vT)return Zb;vT=1;var e=fn(),t=sa().EventEmitter,n=function(){};function r(i,o,c){t.call(this),this.Receiver=i,this.receiveUrl=o,this.AjaxObject=c,this._scheduleReceiver()}return e(r,t),r.prototype._scheduleReceiver=function(){var i=this,o=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);o.on("message",function(c){i.emit("message",c)}),o.once("close",function(c,d){n("close",c,d,i.pollIsClosing),i.poll=o=null,i.pollIsClosing||(d==="network"?i._scheduleReceiver():(i.emit("close",c||1006,d),i.removeAllListeners()))})},r.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},Zb=r,Zb}var Jb,bT;function qD(){if(bT)return Jb;bT=1;var e=fn(),t=vs(),n=tW(),r=nW();function i(o,c,d,f,m){var h=t.addPath(o,c),g=this;n.call(this,o,d),this.poll=new r(f,h,m),this.poll.on("message",function(v){g.emit("message",v)}),this.poll.once("close",function(v,x){g.poll=null,g.emit("close",v,x),g.close()})}return e(i,n),i.prototype.close=function(){n.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},Jb=i,Jb}var e_,_T;function ju(){if(_T)return e_;_T=1;var e=fn(),t=vs(),n=qD();function r(o){return function(c,d,f){var m={};typeof d=="string"&&(m.headers={"Content-type":"text/plain"});var h=t.addPath(c,"/xhr_send"),g=new o("POST",h,d,m);return g.once("finish",function(v){if(g=null,v!==200&&v!==204)return f(new Error("http status "+v));f()}),function(){g.close(),g=null;var v=new Error("Aborted");v.code=1e3,f(v)}}}function i(o,c,d,f){n.call(this,o,c,r(f),d,f)}return e(i,n),e_=i,e_}var t_,xT;function by(){if(xT)return t_;xT=1;var e=fn(),t=sa().EventEmitter;function n(r,i){t.call(this);var o=this;this.bufferPosition=0,this.xo=new i("POST",r,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(c,d){o._chunkHandler(c,d),o.xo=null;var f=c===200?"network":"permanent";o.emit("close",null,f),o._cleanup()})}return e(n,t),n.prototype._chunkHandler=function(r,i){if(!(r!==200||!i))for(var o=-1;;this.bufferPosition+=o+1){var c=i.slice(this.bufferPosition);if(o=c.indexOf(`
`),o===-1)break;var d=c.slice(0,o);d&&this.emit("message",d)}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t_=n,t_}var n_,ST;function zD(){if(ST)return n_;ST=1;var e=sa().EventEmitter,t=fn(),n=Go(),r=vs(),i=Ze.XMLHttpRequest,o=function(){};function c(m,h,g,v){var x=this;e.call(this),setTimeout(function(){x._start(m,h,g,v)},0)}t(c,e),c.prototype._start=function(m,h,g,v){var x=this;try{this.xhr=new i}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}h=r.addQuery(h,"t="+ +new Date),this.unloadRef=n.unloadAdd(function(){x._cleanup(!0)});try{this.xhr.open(m,h,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o("xhr timeout"),x.emit("finish",0,""),x._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!v||!v.noCredentials)&&c.supportsCORS&&(this.xhr.withCredentials=!0),v&&v.headers)for(var w in v.headers)this.xhr.setRequestHeader(w,v.headers[w]);this.xhr.onreadystatechange=function(){if(x.xhr){var _=x.xhr,S,j;switch(o("readyState",_.readyState),_.readyState){case 3:try{j=_.status,S=_.responseText}catch{}j===1223&&(j=204),j===200&&S&&S.length>0&&x.emit("chunk",j,S);break;case 4:j=_.status,j===1223&&(j=204),(j===12005||j===12029)&&(j=0),o("finish",j,_.responseText),x.emit("finish",j,_.responseText),x._cleanup(!1);break}}};try{x.xhr.send(g)}catch{x.emit("finish",0,""),x._cleanup(!1)}},c.prototype._cleanup=function(m){if(this.xhr){if(this.removeAllListeners(),n.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),m)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!i;var d=["Active"].concat("Object").join("X");!c.enabled&&d in Ze&&(i=function(){try{return new Ze[d]("Microsoft.XMLHTTP")}catch{return null}},c.enabled=!!new i);var f=!1;try{f="withCredentials"in new i}catch{}return c.supportsCORS=f,n_=c,n_}var r_,wT;function _y(){if(wT)return r_;wT=1;var e=fn(),t=zD();function n(r,i,o,c){t.call(this,r,i,o,c)}return e(n,t),n.enabled=t.enabled&&t.supportsCORS,r_=n,r_}var a_,jT;function qf(){if(jT)return a_;jT=1;var e=fn(),t=zD();function n(r,i,o){t.call(this,r,i,o,{noCredentials:!0})}return e(n,t),n.enabled=t.enabled,a_=n,a_}var s_,NT;function zf(){return NT||(NT=1,s_={isOpera:function(){return Ze.navigator&&/opera/i.test(Ze.navigator.userAgent)},isKonqueror:function(){return Ze.navigator&&/konqueror/i.test(Ze.navigator.userAgent)},hasDomain:function(){if(!Ze.document)return!0;try{return!!Ze.document.domain}catch{return!1}}}),s_}var i_,AT;function rW(){if(AT)return i_;AT=1;var e=fn(),t=ju(),n=by(),r=_y(),i=qf(),o=zf();function c(d){if(!i.enabled&&!r.enabled)throw new Error("Transport created when disabled");t.call(this,d,"/xhr_streaming",n,r)}return e(c,t),c.enabled=function(d){return d.nullOrigin||o.isOpera()?!1:r.enabled},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!Ze.document,i_=c,i_}var o_,ET;function P1(){if(ET)return o_;ET=1;var e=sa().EventEmitter,t=fn(),n=Go(),r=zf(),i=vs(),o=function(){};function c(d,f,m){var h=this;e.call(this),setTimeout(function(){h._start(d,f,m)},0)}return t(c,e),c.prototype._start=function(d,f,m){var h=this,g=new Ze.XDomainRequest;f=i.addQuery(f,"t="+ +new Date),g.onerror=function(){h._error()},g.ontimeout=function(){h._error()},g.onprogress=function(){o("progress",g.responseText),h.emit("chunk",200,g.responseText)},g.onload=function(){h.emit("finish",200,g.responseText),h._cleanup(!1)},this.xdr=g,this.unloadRef=n.unloadAdd(function(){h._cleanup(!0)});try{this.xdr.open(d,f),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(m)}catch{this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(d){if(this.xdr){if(this.removeAllListeners(),n.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,d)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!(Ze.XDomainRequest&&r.hasDomain()),o_=c,o_}var l_,CT;function FD(){if(CT)return l_;CT=1;var e=fn(),t=ju(),n=by(),r=P1();function i(o){if(!r.enabled)throw new Error("Transport created when disabled");t.call(this,o,"/xhr_streaming",n,r)}return e(i,t),i.enabled=function(o){return o.cookie_needed||o.nullOrigin?!1:r.enabled&&o.sameScheme},i.transportName="xdr-streaming",i.roundTrips=2,l_=i,l_}var c_,TT;function HD(){return TT||(TT=1,c_=Ze.EventSource),c_}var u_,kT;function aW(){if(kT)return u_;kT=1;var e=fn(),t=sa().EventEmitter,n=HD(),r=function(){};function i(o){t.call(this);var c=this,d=this.es=new n(o);d.onmessage=function(f){r("message",f.data),c.emit("message",decodeURI(f.data))},d.onerror=function(f){r("error",d.readyState);var m=d.readyState!==2?"network":"permanent";c._cleanup(),c._close(m)}}return e(i,t),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var o=this.es;o&&(o.onmessage=o.onerror=null,o.close(),this.es=null)},i.prototype._close=function(o){var c=this;setTimeout(function(){c.emit("close",null,o),c.removeAllListeners()},200)},u_=i,u_}var d_,OT;function RT(){if(OT)return d_;OT=1;var e=fn(),t=ju(),n=aW(),r=_y(),i=HD();function o(c){if(!o.enabled())throw new Error("Transport created when disabled");t.call(this,c,"/eventsource",n,r)}return e(o,t),o.enabled=function(){return!!i},o.transportName="eventsource",o.roundTrips=2,d_=o,d_}var f_,MT;function VD(){return MT||(MT=1,f_="1.6.1"),f_}var m_={exports:{}},IT;function Ff(){return IT||(IT=1,(function(e){var t=Go(),n=zf();e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in Ze||(Ze[e.exports.WPrefix]={})},postMessage:function(r,i){Ze.parent!==Ze&&Ze.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:r,data:i||""}),"*")},createIframe:function(r,i){var o=Ze.document.createElement("iframe"),c,d,f=function(){clearTimeout(c);try{o.onload=null}catch{}o.onerror=null},m=function(){o&&(f(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),t.unloadDel(d))},h=function(v){o&&(m(),i(v))},g=function(v,x){setTimeout(function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(v,x)}catch{}},0)};return o.src=r,o.style.display="none",o.style.position="absolute",o.onerror=function(){h("onerror")},o.onload=function(){clearTimeout(c),c=setTimeout(function(){h("onload timeout")},2e3)},Ze.document.body.appendChild(o),c=setTimeout(function(){h("timeout")},15e3),d=t.unloadAdd(m),{post:g,cleanup:m,loaded:f}},createHtmlfile:function(r,i){var o=["Active"].concat("Object").join("X"),c=new Ze[o]("htmlfile"),d,f,m,h=function(){clearTimeout(d),m.onerror=null},g=function(){c&&(h(),t.unloadDel(f),m.parentNode.removeChild(m),m=c=null,CollectGarbage())},v=function(_){c&&(g(),i(_))},x=function(_,S){try{setTimeout(function(){m&&m.contentWindow&&m.contentWindow.postMessage(_,S)},0)}catch{}};c.open(),c.write('<html><script>document.domain="'+Ze.document.domain+'";<\/script></html>'),c.close(),c.parentWindow[e.exports.WPrefix]=Ze[e.exports.WPrefix];var w=c.createElement("div");return c.body.appendChild(w),m=c.createElement("iframe"),w.appendChild(m),m.src=r,m.onerror=function(){v("onerror")},d=setTimeout(function(){v("timeout")},15e3),f=t.unloadAdd(g),{post:x,cleanup:g,loaded:h}}},e.exports.iframeEnabled=!1,Ze.document&&(e.exports.iframeEnabled=(typeof Ze.postMessage=="function"||typeof Ze.postMessage=="object")&&!n.isKonqueror())})(m_)),m_.exports}var h_,DT;function KD(){if(DT)return h_;DT=1;var e=fn(),t=sa().EventEmitter,n=VD(),r=vs(),i=Ff(),o=Go(),c=wu(),d=function(){};function f(m,h,g){if(!f.enabled())throw new Error("Transport created when disabled");t.call(this);var v=this;this.origin=r.getOrigin(g),this.baseUrl=g,this.transUrl=h,this.transport=m,this.windowId=c.string(8);var x=r.addPath(g,"/iframe.html")+"#"+this.windowId;this.iframeObj=i.createIframe(x,function(w){v.emit("close",1006,"Unable to load an iframe ("+w+")"),v.close()}),this.onmessageCallback=this._message.bind(this),o.attachEvent("message",this.onmessageCallback)}return e(f,t),f.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){o.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},f.prototype._message=function(m){if(d("message",m.data),!r.isOriginEqual(m.origin,this.origin)){d("not same origin",m.origin,this.origin);return}var h;try{h=JSON.parse(m.data)}catch{d("bad json",m.data);return}if(h.windowId!==this.windowId){d("mismatched window id",h.windowId,this.windowId);return}switch(h.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([n,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",h.data);break;case"c":var g;try{g=JSON.parse(h.data)}catch{d("bad json",h.data);return}this.emit("close",g[0],g[1]),this.close();break}},f.prototype.postMessage=function(m,h){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:m,data:h||""}),this.origin)},f.prototype.send=function(m){this.postMessage("m",m)},f.enabled=function(){return i.iframeEnabled},f.transportName="iframe",f.roundTrips=2,h_=f,h_}var p_,PT;function $1(){return PT||(PT=1,p_={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}}),p_}var y_,$T;function g_(){if($T)return y_;$T=1;var e=fn(),t=KD(),n=$1();return y_=function(r){function i(o,c){t.call(this,r.transportName,o,c)}return e(i,t),i.enabled=function(o,c){if(!Ze.document)return!1;var d=n.extend({},c);return d.sameOrigin=!0,r.enabled(d)&&t.enabled()},i.transportName="iframe-"+r.transportName,i.needBody=!0,i.roundTrips=t.roundTrips+r.roundTrips-1,i.facadeTransport=r,i},y_}var v_,LT;function sW(){if(LT)return v_;LT=1;var e=fn(),t=Ff(),n=vs(),r=sa().EventEmitter,i=wu(),o=function(){};function c(f){r.call(this);var m=this;t.polluteGlobalNamespace(),this.id="a"+i.string(6),f=n.addQuery(f,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),o("using htmlfile",c.htmlfileEnabled);var h=c.htmlfileEnabled?t.createHtmlfile:t.createIframe;Ze[t.WPrefix][this.id]={start:function(){m.iframeObj.loaded()},message:function(g){m.emit("message",g)},stop:function(){m._cleanup(),m._close("network")}},this.iframeObj=h(f,function(){m._cleanup(),m._close("permanent")})}e(c,r),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete Ze[t.WPrefix][this.id]},c.prototype._close=function(f){this.emit("close",null,f),this.removeAllListeners()},c.htmlfileEnabled=!1;var d=["Active"].concat("Object").join("X");if(d in Ze)try{c.htmlfileEnabled=!!new Ze[d]("htmlfile")}catch{}return c.enabled=c.htmlfileEnabled||t.iframeEnabled,v_=c,v_}var b_,BT;function UT(){if(BT)return b_;BT=1;var e=fn(),t=sW(),n=qf(),r=ju();function i(o){if(!t.enabled)throw new Error("Transport created when disabled");r.call(this,o,"/htmlfile",t,n)}return e(i,r),i.enabled=function(o){return t.enabled&&o.sameOrigin},i.transportName="htmlfile",i.roundTrips=2,b_=i,b_}var __,qT;function zT(){if(qT)return __;qT=1;var e=fn(),t=ju(),n=by(),r=_y(),i=qf();function o(c){if(!i.enabled&&!r.enabled)throw new Error("Transport created when disabled");t.call(this,c,"/xhr",n,r)}return e(o,t),o.enabled=function(c){return c.nullOrigin?!1:i.enabled&&c.sameOrigin?!0:r.enabled},o.transportName="xhr-polling",o.roundTrips=2,__=o,__}var x_,FT;function iW(){if(FT)return x_;FT=1;var e=fn(),t=ju(),n=FD(),r=by(),i=P1();function o(c){if(!i.enabled)throw new Error("Transport created when disabled");t.call(this,c,"/xhr",r,i)}return e(o,t),o.enabled=n.enabled,o.transportName="xdr-polling",o.roundTrips=2,x_=o,x_}var S_,HT;function oW(){if(HT)return S_;HT=1;var e=Ff(),t=wu(),n=zf(),r=vs(),i=fn(),o=sa().EventEmitter,c=function(){};function d(f){var m=this;o.call(this),e.polluteGlobalNamespace(),this.id="a"+t.string(6);var h=r.addQuery(f,"c="+encodeURIComponent(e.WPrefix+"."+this.id));Ze[e.WPrefix][this.id]=this._callback.bind(this),this._createScript(h),this.timeoutId=setTimeout(function(){m._abort(new Error("JSONP script loaded abnormally (timeout)"))},d.timeout)}return i(d,o),d.prototype.abort=function(){if(Ze[e.WPrefix][this.id]){var f=new Error("JSONP user aborted read");f.code=1e3,this._abort(f)}},d.timeout=35e3,d.scriptErrorTimeout=1e3,d.prototype._callback=function(f){this._cleanup(),!this.aborting&&(f&&this.emit("message",f),this.emit("close",null,"network"),this.removeAllListeners())},d.prototype._abort=function(f){this._cleanup(),this.aborting=!0,this.emit("close",f.code,f.message),this.removeAllListeners()},d.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var f=this.script;f.parentNode.removeChild(f),f.onreadystatechange=f.onerror=f.onload=f.onclick=null,this.script=null}delete Ze[e.WPrefix][this.id]},d.prototype._scriptError=function(){var f=this;this.errorTimer||(this.errorTimer=setTimeout(function(){f.loadedOkay||f._abort(new Error("JSONP script loaded abnormally (onerror)"))},d.scriptErrorTimeout))},d.prototype._createScript=function(f){var m=this,h=this.script=Ze.document.createElement("script"),g;if(h.id="a"+t.string(8),h.src=f,h.type="text/javascript",h.charset="UTF-8",h.onerror=this._scriptError.bind(this),h.onload=function(){m._abort(new Error("JSONP script loaded abnormally (onload)"))},h.onreadystatechange=function(){if(c("onreadystatechange",h.readyState),/loaded|closed/.test(h.readyState)){if(h&&h.htmlFor&&h.onclick){m.loadedOkay=!0;try{h.onclick()}catch{}}h&&m._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof h.async>"u"&&Ze.document.attachEvent)if(n.isOpera())g=this.script2=Ze.document.createElement("script"),g.text="try{var a = document.getElementById('"+h.id+"'); if(a)a.onerror();}catch(x){};",h.async=g.async=!1;else{try{h.htmlFor=h.id,h.event="onclick"}catch{}h.async=!0}typeof h.async<"u"&&(h.async=!0);var v=Ze.document.getElementsByTagName("head")[0];v.insertBefore(h,v.firstChild),g&&v.insertBefore(g,v.firstChild)},S_=d,S_}var w_,VT;function lW(){if(VT)return w_;VT=1;var e=wu(),t=vs(),n=function(){},r,i;function o(d){try{return Ze.document.createElement('<iframe name="'+d+'">')}catch{var f=Ze.document.createElement("iframe");return f.name=d,f}}function c(){r=Ze.document.createElement("form"),r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",i=Ze.document.createElement("textarea"),i.name="d",r.appendChild(i),Ze.document.body.appendChild(r)}return w_=function(d,f,m){r||c();var h="a"+e.string(8);r.target=h,r.action=t.addQuery(t.addPath(d,"/jsonp_send"),"i="+h);var g=o(h);g.id=h,g.style.display="none",r.appendChild(g);try{i.value=f}catch{}r.submit();var v=function(x){g.onerror&&(g.onreadystatechange=g.onerror=g.onload=null,setTimeout(function(){g.parentNode.removeChild(g),g=null},500),i.value="",m(x))};return g.onerror=function(){v()},g.onload=function(){v()},g.onreadystatechange=function(x){n("onreadystatechange",h,g.readyState),g.readyState==="complete"&&v()},function(){v(new Error("Aborted"))}},w_}var j_,KT;function cW(){if(KT)return j_;KT=1;var e=fn(),t=qD(),n=oW(),r=lW();function i(o){if(!i.enabled())throw new Error("Transport created when disabled");t.call(this,o,"/jsonp",r,n)}return e(i,t),i.enabled=function(){return!!Ze.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,j_=i,j_}var N_,GT;function uW(){return GT||(GT=1,N_=[eW(),rW(),FD(),RT(),g_()(RT()),UT(),g_()(UT()),zT(),iW(),g_()(zT()),cW()]),N_}var WT={},YT;function dW(){if(YT)return WT;YT=1;var e=Array.prototype,t=Object.prototype,n=Function.prototype,r=String.prototype,i=e.slice,o=t.toString,c=function(R){return t.toString.call(R)==="[object Function]"},d=function(k){return o.call(k)==="[object Array]"},f=function(k){return o.call(k)==="[object String]"},m=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),h;m?h=function(R,k,P,H){!H&&k in R||Object.defineProperty(R,k,{configurable:!0,enumerable:!1,writable:!0,value:P})}:h=function(R,k,P,H){!H&&k in R||(R[k]=P)};var g=function(R,k,P){for(var H in k)t.hasOwnProperty.call(k,H)&&h(R,H,k[H],P)},v=function(R){if(R==null)throw new TypeError("can't convert "+R+" to object");return Object(R)};function x(R){var k=+R;return k!==k?k=0:k!==0&&k!==1/0&&k!==-1/0&&(k=(k>0||-1)*Math.floor(Math.abs(k))),k}function w(R){return R>>>0}function _(){}g(n,{bind:function(k){var P=this;if(!c(P))throw new TypeError("Function.prototype.bind called on incompatible "+P);for(var H=i.call(arguments,1),K=function(){if(this instanceof L){var $=P.apply(this,H.concat(i.call(arguments)));return Object($)===$?$:this}else return P.apply(k,H.concat(i.call(arguments)))},B=Math.max(0,P.length-H.length),U=[],I=0;I<B;I++)U.push("$"+I);var L=Function("binder","return function ("+U.join(",")+"){ return binder.apply(this, arguments); }")(K);return P.prototype&&(_.prototype=P.prototype,L.prototype=new _,_.prototype=null),L}}),g(Array,{isArray:d});var S=Object("a"),j=S[0]!=="a"||!(0 in S),A=function(k){var P=!0,H=!0;return k&&(k.call("foo",function(K,B,U){typeof U!="object"&&(P=!1)}),k.call([1],function(){H=typeof this=="string"},"x")),!!k&&P&&H};g(e,{forEach:function(k){var P=v(this),H=j&&f(this)?this.split(""):P,K=arguments[1],B=-1,U=H.length>>>0;if(!c(k))throw new TypeError;for(;++B<U;)B in H&&k.call(K,H[B],B,P)}},!A(e.forEach));var E=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;g(e,{indexOf:function(k){var P=j&&f(this)?this.split(""):v(this),H=P.length>>>0;if(!H)return-1;var K=0;for(arguments.length>1&&(K=x(arguments[1])),K=K>=0?K:Math.max(0,H+K);K<H;K++)if(K in P&&P[K]===k)return K;return-1}},E);var C=r.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var R=/()??/.exec("")[1]===void 0;r.split=function(k,P){var H=this;if(k===void 0&&P===0)return[];if(o.call(k)!=="[object RegExp]")return C.call(this,k,P);var K=[],B=(k.ignoreCase?"i":"")+(k.multiline?"m":"")+(k.extended?"x":"")+(k.sticky?"y":""),U=0,I,L,$,G;for(k=new RegExp(k.source,B+"g"),H+="",R||(I=new RegExp("^"+k.source+"$(?!\\s)",B)),P=P===void 0?-1>>>0:w(P);(L=k.exec(H))&&($=L.index+L[0].length,!($>U&&(K.push(H.slice(U,L.index)),!R&&L.length>1&&L[0].replace(I,function(){for(var te=1;te<arguments.length-2;te++)arguments[te]===void 0&&(L[te]=void 0)}),L.length>1&&L.index<H.length&&e.push.apply(K,L.slice(1)),G=L[0].length,U=$,K.length>=P)));)k.lastIndex===L.index&&k.lastIndex++;return U===H.length?(G||!k.test(""))&&K.push(""):K.push(H.slice(U)),K.length>P?K.slice(0,P):K}})():"0".split(void 0,0).length&&(r.split=function(k,P){return k===void 0&&P===0?[]:C.call(this,k,P)});var T=r.substr,O="".substr&&"0b".substr(-1)!=="b";return g(r,{substr:function(k,P){return T.call(this,k<0&&(k=this.length+k)<0?0:k,P)}},O),WT}var A_,XT;function fW(){if(XT)return A_;XT=1;var e=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,t,n=function(r){var i,o={},c=[];for(i=0;i<65536;i++)c.push(String.fromCharCode(i));return r.lastIndex=0,c.join("").replace(r,function(d){return o[d]="\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4),""}),r.lastIndex=0,o};return A_={quote:function(r){var i=JSON.stringify(r);return e.lastIndex=0,e.test(i)?(t||(t=n(e)),i.replace(e,function(o){return t[o]})):i}},A_}var E_,QT;function mW(){if(QT)return E_;QT=1;var e=function(){};return E_=function(t){return{filterToEnabled:function(n,r){var i={main:[],facade:[]};return n?typeof n=="string"&&(n=[n]):n=[],t.forEach(function(o){if(o&&!(o.transportName==="websocket"&&r.websocket===!1)){if(n.length&&n.indexOf(o.transportName)===-1){e("not in whitelist",o.transportName);return}o.enabled(r)?(e("enabled",o.transportName),i.main.push(o),o.facadeTransport&&i.facade.push(o.facadeTransport)):e("disabled",o.transportName)}}),i}}},E_}var C_,ZT;function hW(){if(ZT)return C_;ZT=1;var e={};return["log","debug","warn"].forEach(function(t){var n;try{n=Ze.console&&Ze.console[t]&&Ze.console[t].apply}catch{}e[t]=n?function(){return Ze.console[t].apply(Ze.console,arguments)}:t==="log"?function(){}:e.log}),C_=e,C_}var T_,JT;function L1(){if(JT)return T_;JT=1;function e(t){this.type=t}return e.prototype.initEvent=function(t,n,r){return this.type=t,this.bubbles=n,this.cancelable=r,this.timeStamp=+new Date,this},e.prototype.stopPropagation=function(){},e.prototype.preventDefault=function(){},e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,T_=e,T_}var k_,ek;function GD(){return ek||(ek=1,k_=Ze.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),k_}var O_,tk;function pW(){if(tk)return O_;tk=1;var e=fn(),t=L1();function n(){t.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return e(n,t),O_=n,O_}var R_,nk;function yW(){if(nk)return R_;nk=1;var e=fn(),t=L1();function n(r){t.call(this),this.initEvent("message",!1,!1),this.data=r}return e(n,t),R_=n,R_}var M_,rk;function gW(){if(rk)return M_;rk=1;var e=sa().EventEmitter,t=fn();function n(){var r=this;e.call(this),this.to=setTimeout(function(){r.emit("finish",200,"{}")},n.timeout)}return t(n,e),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,M_=n,M_}var I_,ak;function WD(){if(ak)return I_;ak=1;var e=sa().EventEmitter,t=fn(),n=$1();function r(i,o){e.call(this);var c=this,d=+new Date;this.xo=new o("GET",i),this.xo.once("finish",function(f,m){var h,g;if(f===200){if(g=+new Date-d,m)try{h=JSON.parse(m)}catch{}n.isObject(h)||(h={})}c.emit("finish",h,g),c.removeAllListeners()})}return t(r,e),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},I_=r,I_}var D_,sk;function YD(){if(sk)return D_;sk=1;var e=fn(),t=sa().EventEmitter,n=qf(),r=WD();function i(o){var c=this;t.call(this),this.ir=new r(o,n),this.ir.once("finish",function(d,f){c.ir=null,c.emit("message",JSON.stringify([d,f]))})}return e(i,t),i.transportName="iframe-info-receiver",i.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},D_=i,D_}var P_,ik;function vW(){if(ik)return P_;ik=1;var e=sa().EventEmitter,t=fn(),n=Go(),r=KD(),i=YD();function o(c,d){var f=this;e.call(this);var m=function(){var h=f.ifr=new r(i.transportName,d,c);h.once("message",function(g){if(g){var v;try{v=JSON.parse(g)}catch{f.emit("finish"),f.close();return}var x=v[0],w=v[1];f.emit("finish",x,w)}f.close()}),h.once("close",function(){f.emit("finish"),f.close()})};Ze.document.body?m():n.attachEvent("load",m)}return t(o,e),o.enabled=function(){return r.enabled()},o.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},P_=o,P_}var $_,ok;function bW(){if(ok)return $_;ok=1;var e=sa().EventEmitter,t=fn(),n=vs(),r=P1(),i=_y(),o=qf(),c=gW(),d=vW(),f=WD();function m(h,g){var v=this;e.call(this),setTimeout(function(){v.doXhr(h,g)},0)}return t(m,e),m._getReceiver=function(h,g,v){return v.sameOrigin?new f(g,o):i.enabled?new f(g,i):r.enabled&&v.sameScheme?new f(g,r):d.enabled()?new d(h,g):new f(g,c)},m.prototype.doXhr=function(h,g){var v=this,x=n.addPath(h,"/info");this.xo=m._getReceiver(h,x,g),this.timeoutRef=setTimeout(function(){v._cleanup(!1),v.emit("finish")},m.timeout),this.xo.once("finish",function(w,_){v._cleanup(!0),v.emit("finish",w,_)})},m.prototype._cleanup=function(h){clearTimeout(this.timeoutRef),this.timeoutRef=null,!h&&this.xo&&this.xo.close(),this.xo=null},m.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},m.timeout=8e3,$_=m,$_}var L_,lk;function _W(){if(lk)return L_;lk=1;var e=Ff();function t(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(n,r){e.postMessage("c",JSON.stringify([n,r]))},t.prototype._transportMessage=function(n){e.postMessage("t",n)},t.prototype._send=function(n){this._transport.send(n)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},L_=t,L_}var B_,ck;function xW(){if(ck)return B_;ck=1;var e=vs(),t=Go(),n=_W(),r=YD(),i=Ff(),o=GD(),c=function(){};return B_=function(d,f){var m={};f.forEach(function(g){g.facadeTransport&&(m[g.facadeTransport.transportName]=g.facadeTransport)}),m[r.transportName]=r;var h;d.bootstrap_iframe=function(){var g;i.currentWindowId=o.hash.slice(1);var v=function(x){if(x.source===parent&&(typeof h>"u"&&(h=x.origin),x.origin===h)){var w;try{w=JSON.parse(x.data)}catch{c("bad json",x.data);return}if(w.windowId===i.currentWindowId)switch(w.type){case"s":var _;try{_=JSON.parse(w.data)}catch{c("bad json",w.data);break}var S=_[0],j=_[1],A=_[2],E=_[3];if(S!==d.version)throw new Error('Incompatible SockJS! Main site uses: "'+S+'", the iframe: "'+d.version+'".');if(!e.isOriginEqual(A,o.href)||!e.isOriginEqual(E,o.href))throw new Error("Can't connect to different domain from within an iframe. ("+o.href+", "+A+", "+E+")");g=new n(new m[j](A,E));break;case"m":g._send(w.data);break;case"c":g&&g._close(),g=null;break}}};t.attachEvent("message",v),i.postMessage("s")}},B_}var U_,uk;function SW(){if(uk)return U_;uk=1,dW();var e=BD(),t=fn(),n=wu(),r=fW(),i=vs(),o=Go(),c=mW(),d=$1(),f=zf(),m=hW(),h=L1(),g=UD(),v=GD(),x=pW(),w=yW(),_=bW(),S=function(){},j;function A(C,T,O){if(!(this instanceof A))return new A(C,T,O);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=A.CONNECTING,this.extensions="",this.protocol="",O=O||{},O.protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=O.transports,this._transportOptions=O.transportOptions||{},this._timeout=O.timeout||0;var R=O.sessionId||8;if(typeof R=="function")this._generateSessionId=R;else if(typeof R=="number")this._generateSessionId=function(){return n.string(R)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=O.server||n.numberString(1e3);var k=new e(C);if(!k.host||!k.protocol)throw new SyntaxError("The URL '"+C+"' is invalid");if(k.hash)throw new SyntaxError("The URL must not contain a fragment");if(k.protocol!=="http:"&&k.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+k.protocol+"' is not allowed.");var P=k.protocol==="https:";if(v.protocol==="https:"&&!P&&!i.isLoopbackAddr(k.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");T?Array.isArray(T)||(T=[T]):T=[];var H=T.sort();H.forEach(function(B,U){if(!B)throw new SyntaxError("The protocols entry '"+B+"' is invalid.");if(U<H.length-1&&B===H[U+1])throw new SyntaxError("The protocols entry '"+B+"' is duplicated.")});var K=i.getOrigin(v.href);this._origin=K?K.toLowerCase():null,k.set("pathname",k.pathname.replace(/\/+$/,"")),this.url=k.href,S("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:i.isOriginEqual(this.url,v.href),sameScheme:i.isSchemeEqual(this.url,v.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(A,g);function E(C){return C===1e3||C>=3e3&&C<=4999}return A.prototype.close=function(C,T){if(C&&!E(C))throw new Error("InvalidAccessError: Invalid code");if(T&&T.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===A.CLOSING||this.readyState===A.CLOSED)){var O=!0;this._close(C||1e3,T||"Normal closure",O)}},A.prototype.send=function(C){if(typeof C!="string"&&(C=""+C),this.readyState===A.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===A.OPEN&&this._transport.send(r.quote(C))},A.version=VD(),A.CONNECTING=0,A.OPEN=1,A.CLOSING=2,A.CLOSED=3,A.prototype._receiveInfo=function(C,T){if(this._ir=null,!C){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(T),this._transUrl=C.base_url?C.base_url:this.url,C=d.extend(C,this._urlInfo);var O=j.filterToEnabled(this._transportsWhitelist,C);this._transports=O.main,S(this._transports.length+" enabled transports"),this._connect()},A.prototype._connect=function(){for(var C=this._transports.shift();C;C=this._transports.shift()){if(S("attempt",C.transportName),C.needBody&&(!Ze.document.body||typeof Ze.document.readyState<"u"&&Ze.document.readyState!=="complete"&&Ze.document.readyState!=="interactive")){this._transports.unshift(C),o.attachEvent("load",this._connect.bind(this));return}var T=Math.max(this._timeout,this._rto*C.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),T);var O=i.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),R=this._transportOptions[C.transportName],k=new C(O,this._transUrl,R);k.on("message",this._transportMessage.bind(this)),k.once("close",this._transportClose.bind(this)),k.transportName=C.transportName,this._transport=k;return}this._close(2e3,"All transports failed",!1)},A.prototype._transportTimeout=function(){this.readyState===A.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},A.prototype._transportMessage=function(C){var T=this,O=C.slice(0,1),R=C.slice(1),k;switch(O){case"o":this._open();return;case"h":this.dispatchEvent(new h("heartbeat")),S("heartbeat",this.transport);return}if(R)try{k=JSON.parse(R)}catch{}if(!(typeof k>"u"))switch(O){case"a":Array.isArray(k)&&k.forEach(function(P){S("message",T.transport),T.dispatchEvent(new w(P))});break;case"m":S("message",this.transport),this.dispatchEvent(new w(k));break;case"c":Array.isArray(k)&&k.length===2&&this._close(k[0],k[1],!0);break}},A.prototype._transportClose=function(C,T){if(S("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!E(C)&&C!==2e3&&this.readyState===A.CONNECTING){this._connect();return}this._close(C,T)},A.prototype._open=function(){S("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===A.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=A.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new h("open")),S("connected",this.transport)):this._close(1006,"Server lost session")},A.prototype._close=function(C,T,O){S("_close",this.transport,C,T,O,this.readyState);var R=!1;if(this._ir&&(R=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===A.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=A.CLOSING,setTimeout((function(){this.readyState=A.CLOSED,R&&this.dispatchEvent(new h("error"));var k=new x("close");k.wasClean=O||!1,k.code=C||1e3,k.reason=T,this.dispatchEvent(k),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},A.prototype.countRTO=function(C){return C>100?4*C:300+C},U_=function(C){return j=c(C),xW()(A,C),A},U_}var q_,dk;function wW(){if(dk)return q_;dk=1;var e=uW();return q_=SW()(e),"_sockjs_onload"in Ze&&setTimeout(Ze._sockjs_onload,1),q_}var jW=wW();const NW=ps(jW);let Qn=null,bp=!1;const _p=new Set,xp=new Set,tS=new Set,Sp=new Set;let Nh="";const fk=eD();function AW(e){let t=e||fk;return t?.startsWith("/")&&(console.warn("SockJS URL must be absolute. Falling back to default.",t),t=fk),t?.startsWith("ws://")&&(t=`http://${t.slice(5)}`),t?.startsWith("wss://")&&(t=`https://${t.slice(6)}`),t}function mk(e){return!e||typeof e!="object"?"":JSON.stringify(Object.entries(e).sort(([t],[n])=>t.localeCompare(n)))}function hk(e){const t=e.onConnect;e.onConnect=o=>{bp=!0,_p.forEach(c=>{try{c()}catch{}}),xp.forEach(c=>{try{c(o)}catch{}}),t?.(o)};const n=e.onWebSocketClose;e.onWebSocketClose=o=>{bp=!1,tS.forEach(c=>{try{c(o)}catch{}}),n?.(o)};const r=e.onWebSocketError;e.onWebSocketError=o=>{Sp.forEach(c=>{try{c(o)}catch{}}),r?.(o)};const i=e.onStompError;e.onStompError=o=>{Sp.forEach(c=>{try{c(o)}catch{}}),i?i(o):console.error("STOMP error:",o.headers?.message,o.body)}}function EW(e={}){const t=typeof window<"u"&&(window.__hlStomp||window.hydroLeafStomp||e.client);if(t&&!Qn){Qn=t;const r=mk(e.connectHeaders);return r!==Nh&&(Nh=r,e.connectHeaders&&(Qn.connectHeaders=e.connectHeaders),e.reconnectOnHeaderChange&&Qn.connected&&Qn.deactivate().then(()=>Qn.activate()).catch(()=>Qn.activate())),hk(Qn),Qn.connected&&(bp=!0,setTimeout(()=>{_p.forEach(i=>{try{i()}catch{}}),xp.forEach(i=>{try{i()}catch{}})},0)),Qn}if(Qn){const r=mk(e.connectHeaders);return r!==Nh&&(Nh=r,e.connectHeaders&&(Qn.connectHeaders=e.connectHeaders),e.reconnectOnHeaderChange&&Qn.connected&&Qn.deactivate().then(()=>Qn.activate()).catch(()=>Qn.activate())),Qn}const n=AW(e.url);return Qn=new YG({webSocketFactory:()=>new NW(n),connectHeaders:e.connectHeaders??{},reconnectDelay:e.reconnectDelay??3e3,heartbeatIncoming:e.heartbeatIncoming??1e4,heartbeatOutgoing:e.heartbeatOutgoing??1e4,debug:()=>{}}),hk(Qn),Qn.activate(),Qn}function B1(e,t,n={}){const r=p.useMemo(()=>{const f=Array.isArray(e)?e:[e];return[...new Set(f.filter(Boolean))]},[e]),i=p.useMemo(()=>JSON.stringify(r),[r]),o=p.useRef({}),c=p.useRef(t);c.current=t;const d=EW(n);p.useEffect(()=>{if(!d)return;const f=()=>{const m=new Set((r||[]).map(h=>h?.startsWith("/")?h:`/topic/${h}`));m.forEach(h=>{o.current[h]||(o.current[h]=d.subscribe(h,g=>{let v=g?.body;if(typeof v=="string"){const w=v.replace(/\u0000/g,"").trim();try{v=JSON.parse(w)}catch{v=w}}const x=h.startsWith("/topic/")?h.slice(7):h;c.current?.(x,v,{destination:h,raw:g?.body})}))}),Object.keys(o.current).forEach(h=>{if(!m.has(h)){try{o.current[h].unsubscribe?.()}catch{}delete o.current[h]}})};return _p.add(f),typeof n.onDisconnect=="function"&&tS.add(n.onDisconnect),typeof n.onConnect=="function"&&xp.add(n.onConnect),typeof n.onError=="function"&&Sp.add(n.onError),bp&&f(),()=>{Object.values(o.current).forEach(m=>{try{m.unsubscribe?.()}catch{}}),o.current={},_p.delete(f),typeof n.onDisconnect=="function"&&tS.delete(n.onDisconnect),typeof n.onConnect=="function"&&xp.delete(n.onConnect),typeof n.onError=="function"&&Sp.delete(n.onError)}},[d,n.onConnect,n.onDisconnect,n.onError,i])}const xy=["hydroleaf/telemetry","hydroleaf/status","hydroleaf/event"],pf={defaultExpectedIntervalSec:10,evaluationWindowSec:60,kinds:{TANK:{expectedIntervalSec:10,metrics:{critical:["ph","ec"],optional:["solutionTemp"]}},LAYER:{expectedIntervalSec:10,metrics:{critical:["airTempC","rhPct"],optional:["lux","co2Ppm","spectraCounts"]}},GERMINATION:{expectedIntervalSec:12,metrics:{critical:["airTempC","rhPct"],optional:["waterTemp","lux"]}},ENV:{expectedIntervalSec:15,metrics:{critical:["airTempC","rhPct"],optional:["co2Ppm"]}}}},U1={airTempC:{label:"Air Temp",unit:"C",precision:2},rhPct:{label:"RH",unit:"%",precision:2},lux:{label:"Light",unit:"lux",precision:4},co2Ppm:{label:"CO",unit:"ppm",precision:0},ph:{label:"pH",unit:"",precision:1},ec:{label:"EC",unit:"mS/cm",precision:2},solutionTemp:{label:"Solution Temp",unit:"C",precision:1},waterTemp:{label:"Water Temp",unit:"C",precision:1},spectraCounts:{label:"Spectra",unit:"bands",precision:0}},CW=["TANK","LAYER","ENV","GERMINATION"],nS=["critical","degraded","ok","offline"],wp=["telemetry","status","event"],TW="_page_s9nak_1",kW="_card_s9nak_17",OW="_cardSticky_s9nak_19",RW="_viewActions_s9nak_45",MW="_viewActionsButtons_s9nak_63",IW="_tokenField_s9nak_75",DW="_tokenLabel_s9nak_89",PW="_tokenInput_s9nak_105",$W="_bannerError_s9nak_131",LW="_bannerWarn_s9nak_133",BW="_summaryBar_s9nak_165",UW="_summaryCards_s9nak_195",qW="_summaryCard_s9nak_195",zW="_summaryLabel_s9nak_239",FW="_summaryValue_s9nak_251",HW="_summarycritical_s9nak_263",VW="_summarydegraded_s9nak_271",KW="_summaryok_s9nak_279",GW="_summaryoffline_s9nak_287",WW="_refreshBlock_s9nak_295",YW="_filtersGrid_s9nak_311",XW="_filterItem_s9nak_323",QW="_filterItemWide_s9nak_325",ZW="_input_s9nak_347",JW="_tableWrap_s9nak_375",eY="_table_s9nak_375",tY="_toast_s9nak_415",nY="_sortButton_s9nak_435",rY="_sortActive_s9nak_459",aY="_sortArrow_s9nak_467",sY="_sortArrowActive_s9nak_487",iY="_sortArrowDesc_s9nak_497",oY="_statusBadge_s9nak_505",lY="_statusOk_s9nak_527",cY="_statusDegraded_s9nak_537",uY="_statusCritical_s9nak_547",dY="_statusOffline_s9nak_557",fY="_deviceId_s9nak_567",mY="_deviceSubtext_s9nak_579",hY="_locationLine_s9nak_581",pY="_rateChip_s9nak_593",yY="_rateOk_s9nak_609",gY="_rateWarn_s9nak_619",vY="_rateLow_s9nak_629",bY="_qualityPercent_s9nak_639",_Y="_qualityMissing_s9nak_649",xY="_primaryButton_s9nak_661",SY="_secondaryButton_s9nak_663",wY="_tabButton_s9nak_665",jY="_resetCell_s9nak_691",NY="_resetButton_s9nak_703",AY="_resetRequested_s9nak_733",EY="_resetError_s9nak_743",CY="_mutedText_s9nak_753",TY="_groupRow_s9nak_761",kY="_treeWrap_s9nak_769",OY="_treeEmpty_s9nak_793",RY="_treeGroup_s9nak_805",MY="_treeGroupFlash_s9nak_825",IY="_treeGroupPulse_s9nak_1",DY="_treeDeviceRow_s9nak_857",PY="_treeDeviceRowFlash_s9nak_865",$Y="_treeRowPulse_s9nak_1",LY="_treeLeafBlock_s9nak_875",BY="_treeLeafScroller_s9nak_887",UY="_treeLeafScrollerVirtual_s9nak_895",qY="_treeDeviceTable_s9nak_905",zY="_treeToggle_s9nak_913",FY="_treeChevron_s9nak_939",HY="_treeChevronOpen_s9nak_959",VY="_treeLabel_s9nak_967",KY="_treeCounts_s9nak_977",GY="_groupHeader_s9nak_989",WY="_groupCounts_s9nak_1011",YY="_spacerRow_s9nak_1025",XY="_drawerBackdrop_s9nak_1071",QY="_drawerPanel_s9nak_1089",ZY="_drawerHeader_s9nak_1113",JY="_drawerEyebrow_s9nak_1135",eX="_drawerSubtext_s9nak_1149",tX="_drawerHeaderActions_s9nak_1161",nX="_badgeStack_s9nak_1175",rX="_telemetryBadge_s9nak_1189",aX="_telemetryfresh_s9nak_1209",sX="_telemetrystale_s9nak_1219",iX="_telemetrymissing_s9nak_1229",oX="_drawerSummary_s9nak_1239",lX="_drawerLabel_s9nak_1253",cX="_drawerValue_s9nak_1265",uX="_drawerMeta_s9nak_1277",dX="_drawerSection_s9nak_1289",fX="_reasonsPanel_s9nak_1297",mX="_sectionHeaderRow_s9nak_1323",hX="_windowSelector_s9nak_1337",pX="_metricsGrid_s9nak_1349",yX="_metricCard_s9nak_1361",gX="_metricHeader_s9nak_1375",vX="_metricIndicators_s9nak_1389",bX="_freshnessDot_s9nak_1401",_X="_freshnessfresh_s9nak_1415",xX="_freshnessstale_s9nak_1423",SX="_freshnessmissing_s9nak_1431",wX="_metricLabel_s9nak_1439",jX="_metricValue_s9nak_1451",NX="_metricDelta_s9nak_1463",AX="_metricEmpty_s9nak_1475",EX="_trendBadge_s9nak_1487",CX="_trendup_s9nak_1497",TX="_trenddown_s9nak_1505",kX="_trendflat_s9nak_1513",OX="_sparkline_s9nak_1521",RX="_sparklineEmpty_s9nak_1535",MX="_qualityPanel_s9nak_1547",IX="_healthPanel_s9nak_1563",DX="_healthRow_s9nak_1585",PX="_healthLabel_s9nak_1599",$X="_healthChips_s9nak_1611",LX="_healthChip_s9nak_1611",BX="_healthChipOk_s9nak_1643",UX="_healthChipFail_s9nak_1653",qX="_healthChipMeta_s9nak_1663",zX="_healthMeta_s9nak_1673",FX="_healthAlert_s9nak_1685",HX="_healthMuted_s9nak_1695",VX="_qualityAlert_s9nak_1705",KX="_qualityMuted_s9nak_1715",GX="_tabRow_s9nak_1725",WX="_activeTab_s9nak_1737",YX="_timeline_s9nak_1747",XX="_timelineRow_s9nak_1759",QX="_timelineDetails_s9nak_1779",ZX="_timelineChange_s9nak_1791",JX="_timelineTitle_s9nak_1803",eQ="_timelineMeta_s9nak_1813",tQ="_rawDetails_s9nak_1825",nQ="_timelineTime_s9nak_1845",rQ="_modalBackdrop_s9nak_1855",aQ="_modalPanel_s9nak_1873",sQ="_modalHeader_s9nak_1895",iQ="_tabs_s9nak_1927",oQ="_actionsRow_s9nak_1929",lQ="_streamContainer_s9nak_1941",cQ="_messageCard_s9nak_1957",oe={page:TW,card:kW,cardSticky:OW,viewActions:RW,viewActionsButtons:MW,tokenField:IW,tokenLabel:DW,tokenInput:PW,bannerError:$W,bannerWarn:LW,summaryBar:BW,summaryCards:UW,summaryCard:qW,summaryLabel:zW,summaryValue:FW,summarycritical:HW,summarydegraded:VW,summaryok:KW,summaryoffline:GW,refreshBlock:WW,filtersGrid:YW,filterItem:XW,filterItemWide:QW,input:ZW,tableWrap:JW,table:eY,toast:tY,sortButton:nY,sortActive:rY,sortArrow:aY,sortArrowActive:sY,sortArrowDesc:iY,statusBadge:oY,statusOk:lY,statusDegraded:cY,statusCritical:uY,statusOffline:dY,deviceId:fY,deviceSubtext:mY,locationLine:hY,rateChip:pY,rateOk:yY,rateWarn:gY,rateLow:vY,qualityPercent:bY,qualityMissing:_Y,primaryButton:xY,secondaryButton:SY,tabButton:wY,resetCell:jY,resetButton:NY,resetRequested:AY,resetError:EY,mutedText:CY,groupRow:TY,treeWrap:kY,treeEmpty:OY,treeGroup:RY,treeGroupFlash:MY,treeGroupPulse:IY,treeDeviceRow:DY,treeDeviceRowFlash:PY,treeRowPulse:$Y,treeLeafBlock:LY,treeLeafScroller:BY,treeLeafScrollerVirtual:UY,treeDeviceTable:qY,treeToggle:zY,treeChevron:FY,treeChevronOpen:HY,treeLabel:VY,treeCounts:KY,groupHeader:GY,groupCounts:WY,spacerRow:YY,drawerBackdrop:XY,drawerPanel:QY,drawerHeader:ZY,drawerEyebrow:JY,drawerSubtext:eX,drawerHeaderActions:tX,badgeStack:nX,telemetryBadge:rX,telemetryfresh:aX,telemetrystale:sX,telemetrymissing:iX,drawerSummary:oX,drawerLabel:lX,drawerValue:cX,drawerMeta:uX,drawerSection:dX,reasonsPanel:fX,sectionHeaderRow:mX,windowSelector:hX,metricsGrid:pX,metricCard:yX,metricHeader:gX,metricIndicators:vX,freshnessDot:bX,freshnessfresh:_X,freshnessstale:xX,freshnessmissing:SX,metricLabel:wX,metricValue:jX,metricDelta:NX,metricEmpty:AX,trendBadge:EX,trendup:CX,trenddown:TX,trendflat:kX,sparkline:OX,sparklineEmpty:RX,qualityPanel:MX,healthPanel:IX,healthRow:DX,healthLabel:PX,healthChips:$X,healthChip:LX,healthChipOk:BX,healthChipFail:UX,healthChipMeta:qX,healthMeta:zX,healthAlert:FX,healthMuted:HX,qualityAlert:VX,qualityMuted:KX,tabRow:GX,activeTab:WX,timeline:YX,timelineRow:XX,timelineDetails:QX,timelineChange:ZX,timelineTitle:JX,timelineMeta:eQ,rawDetails:tQ,timelineTime:nQ,modalBackdrop:rQ,modalPanel:aQ,modalHeader:sQ,tabs:iQ,actionsRow:oQ,streamContainer:lQ,messageCard:cQ},pk={ok:"OK",degraded:"DEGRADED",critical:"CRITICAL",offline:"OFFLINE"},yk={ok:"",degraded:"",critical:"",offline:""},uQ={ok:oe.statusOk,degraded:oe.statusDegraded,critical:oe.statusCritical,offline:oe.statusOffline};function jp({status:e}){const t=String(e||"offline").toLowerCase(),n=pk[t]||pk.offline,r=yk[t]||yk.offline;return a.jsxs("span",{className:`${oe.statusBadge} ${uQ[t]||oe.statusOffline}`,children:[a.jsx("span",{"aria-hidden":"true",children:r}),a.jsx("span",{children:n})]})}function dQ({search:e,onSearch:t,filterState:n,onFilterChange:r,farmOptions:i,unitTypeOptions:o,unitIdOptions:c,layerIdOptions:d,kindOptions:f,healthOptions:m,messageKindOptions:h,viewMode:g,onViewModeChange:v}){const x=w=>w.map(_=>{const S=typeof _=="string"?_:_.value,j=typeof _=="string"?_:_.label;return a.jsx("option",{value:S,children:j},S)});return a.jsxs("div",{className:oe.filtersGrid,children:[a.jsxs("div",{className:oe.filterItemWide,children:[a.jsx("label",{htmlFor:"device-monitor-search",children:"Search"}),a.jsx("input",{id:"device-monitor-search",className:oe.input,type:"search",placeholder:"Search by deviceId or location",value:e,onChange:w=>t(w.target.value)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"farm-filter",children:"Farm"}),a.jsx("select",{id:"farm-filter",multiple:!0,value:n.farmId,onChange:w=>r("farmId",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(i)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"unit-type-filter",children:"Unit Type"}),a.jsx("select",{id:"unit-type-filter",multiple:!0,value:n.unitType,onChange:w=>r("unitType",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(o)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"unit-id-filter",children:"Unit ID"}),a.jsx("select",{id:"unit-id-filter",multiple:!0,value:n.unitId,onChange:w=>r("unitId",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(c)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"layer-id-filter",children:"Layer ID"}),a.jsx("select",{id:"layer-id-filter",multiple:!0,value:n.layerId,onChange:w=>r("layerId",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(d)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"kind-filter",children:"Device Kind"}),a.jsx("select",{id:"kind-filter",multiple:!0,value:n.kind,onChange:w=>r("kind",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(f)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"health-filter",children:"Health"}),a.jsx("select",{id:"health-filter",multiple:!0,value:n.status,onChange:w=>r("status",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(m)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"message-kind-filter",children:"Message Kind"}),a.jsx("select",{id:"message-kind-filter",multiple:!0,value:n.messageKind,onChange:w=>r("messageKind",Array.from(w.target.selectedOptions).map(_=>_.value)),children:x(h)})]}),a.jsxs("div",{className:oe.filterItem,children:[a.jsx("label",{htmlFor:"view-mode-filter",children:"View"}),a.jsxs("select",{id:"view-mode-filter",value:g,onChange:w=>v(w.target.value),children:[a.jsx("option",{value:"flat",children:"Flat List"}),a.jsx("option",{value:"hierarchical",children:"Hierarchical"}),a.jsx("option",{value:"explorer",children:"Explorer"})]})]})]})}const z_={airtemp:"airTemp",airtemperature:"airTemp",atemp:"airTemp",airtempc:"airTemp",airtemp_c:"airTemp",air_temp_c:"airTemp",temperature:"airTemp",humidity:"rh",rh:"rh",rhpct:"rh",rh_pct:"rh",relativehumidity:"rh",light:"light",lux:"light",illumination:"light",co2:"co2",co2ppm:"co2",co2_ppm:"co2",spectra:"spectra",spectral:"spectra",as7343counts:"spectra",as7343_counts:"spectra",ph:"ph",ec:"ec",dissolvedec:"ec",tds:"tds",solutiontemp:"solutionTemp",watertemp:"waterTemp",watertempc:"waterTemp",watertemp_c:"waterTemp",water_temp_c:"waterTemp",water_temp:"waterTemp",dissolvedtemp:"waterTemp"},gk=[e=>/^f\d{1,2}$/i.test(e),e=>/^\d{3}nm$/i.test(e),e=>/^(?:vis1|vis2|clear|nir|nir855)$/i.test(e)],F_=e=>String(e||"").trim().toLowerCase().replace(/[^a-z0-9]/g,""),Lo=e=>{if(!e)return"UNKNOWN";const t=String(e).trim().toUpperCase(),r={TNK:"TANK",LYR:"LAYER",GRM:"GERMINATION",ENV:"ENV"}[t]||t;return pf.kinds[r],r},fQ=e=>{const t=Lo(e),n=pf.kinds[t];return{kind:t,expectedIntervalSec:n?.expectedIntervalSec??pf.defaultExpectedIntervalSec,expectedMetrics:n?.metrics??{critical:[],optional:[]}}},XD=e=>!e||!Number.isFinite(e)?null:Math.max(1,Math.round(60/e*10)/10),rp=(e,t)=>{const n=t?.critical??[],r=t?.optional??[],i=[...n,...r],o=i.filter(m=>e&&e[m]!=null),c=i.length?Math.round(o.length/i.length*100):100,d=n.filter(m=>!e||e[m]==null),f=r.filter(m=>!e||e[m]==null);return{expected:i.length,received:o.length,percent:c,missingCritical:d,missingOptional:f}},vk=["offline","critical","degraded","ok"],Np=(e=[])=>!Array.isArray(e)||e.length===0?"ok":e.reduce((t,n)=>{const r=vk.indexOf(n),i=vk.indexOf(t);return r===-1?t:i===-1||r<i?n:t},"ok"),mQ={TANK:["ph","ec","solutionTemp"],ENV:["airTempC","rhPct","co2Ppm"],GERMINATION:["airTempC","rhPct","waterTemp","lux"],LAYER:["airTempC","rhPct","lux","co2Ppm"]},hQ={airTempC:.3,rhPct:2,co2Ppm:50,lux:10,ph:.05,ec:.05,solutionTemp:.3,waterTemp:.3},pQ=(e,t)=>e==null||!Number.isFinite(e)?"flat":e>t?"up":e<-t?"down":"flat",yQ=({samples:e,metricKey:t,currentValue:n,nowMs:r,windowMs:i,fallbackSamples:o=10})=>{const c=hQ[t]??.1;if(n==null||!Number.isFinite(n))return{delta:null,direction:"flat",threshold:c,baseline:null};const d=Array.isArray(e)?e.filter(v=>v&&Number.isFinite(v.timestamp)):[],f=r-i;let h=[...d].reverse().find(v=>v.timestamp<=f&&Number.isFinite(v.metrics?.[t]))?.metrics?.[t]??null;if(h==null){let v=0;for(let x=d.length-1;x>=0;x-=1){const w=d[x]?.metrics?.[t];if(Number.isFinite(w)&&(v+=1,v>=o+1)){h=w;break}}}if(h==null)for(let v=0;v<d.length;v+=1){const x=d[v]?.metrics?.[t];if(Number.isFinite(x)){h=x;break}}if(h==null||!Number.isFinite(h))return{delta:null,direction:"flat",threshold:c,baseline:null};const g=n-h;return{delta:g,direction:pQ(g,c),threshold:c,baseline:h}},gQ=({health:e,lastSeenMs:t,nowMs:n,msgRate:r,expectedRate:i,dataQuality:o,payloadError:c})=>{const d=[],f=t?Math.max(0,Math.round((n-t)/1e3)):null;t?["offline","critical"].includes(e.status)&&e.reason!=="nominal"&&(e.reason==="offline_threshold"||e.reason==="approaching_offline")&&d.push(`lastSeen stale: ${f}s ago`):d.push("lastSeen: never"),i&&Number.isFinite(r)&&r<i&&d.push(`msgRate low (${r}/min, expected ${i}/min)`),e.reason==="zero_rate"&&d.push("msgRate stalled at 0/min");const m=[...o?.missingCritical??[],...o?.missingOptional??[]];return m.length>0&&d.push(`missing metrics: ${m.join(", ")}`),c&&d.push("parse errors detected in recent telemetry"),d.length===0&&d.push("nominal - no health issues detected"),d},vQ=({nowMs:e,lastSeenMs:t,msgRate:n,expectedIntervalSec:r,expectedMetrics:i,metrics:o,payloadError:c})=>{if(!t)return{status:"offline",reason:"never_seen",dataQuality:rp(o,i)};const d=Math.max(0,(e-t)/1e3),f=r?r*3:pf.defaultExpectedIntervalSec*3;if(d>Math.max(f,120))return{status:"offline",reason:"offline_threshold",dataQuality:rp(o,i)};const m=rp(o,i),h=XD(r);if(c)return{status:"critical",reason:"payload_error",dataQuality:m};const g=pf.evaluationWindowSec*2;if(n===0&&d>=g)return{status:"critical",reason:"zero_rate",dataQuality:m};const v=r?Math.min(60,r*2):60;return d>=v&&d<Math.max(f,120)?{status:"critical",reason:"approaching_offline",dataQuality:m}:m.missingCritical.length>0?{status:"critical",reason:"missing_critical",dataQuality:m}:h&&n<h*.7?{status:"degraded",reason:"low_rate",dataQuality:m}:m.missingOptional.length>0?{status:"degraded",reason:"missing_optional",dataQuality:m}:{status:"ok",reason:"nominal",dataQuality:m}},rS=e=>{if(e==null)return null;if(typeof e=="number")return Number.isFinite(e)?e:null;if(typeof e=="string"){const t=Number(e);return Number.isFinite(t)?t:null}if(typeof e=="object"){const t=e.value??e.avg??e.average??e.v??e.reading;return rS(t)}return null},bk=e=>{if(e==null)return null;if(typeof e=="number")return Number.isFinite(e)?e:null;if(Array.isArray(e))return e.length;if(typeof e=="object")return Object.keys(e).length;if(typeof e=="string"){const t=Number(e);return Number.isFinite(t)?t:null}return null},Ah=(e,t,n)=>{t&&n!=null&&(e[t]=n)},QD=(e={})=>{const t={};let n=0;const r=i=>{if(i){if(Array.isArray(i)){i.forEach(o=>{const c=o?.sensorType??o?.type??o?.name??o?.key,d=o?.value??o?.avg??o?.average??o?.reading,f=F_(c),m=z_[f]??z_[F_(o?.sensorName)]??null;m==="spectra"?Ah(t,m,bk(d)):m&&Ah(t,m,rS(d)),gk.some(h=>h(c||""))&&(n+=1)});return}typeof i=="object"&&Object.entries(i).forEach(([o,c])=>{const d=F_(o),f=z_[d]??null;f==="spectra"?Ah(t,f,bk(c)):f&&Ah(t,f,rS(c)),gk.some(m=>m(o||""))&&(n+=1)})}};return r(e.metrics),r(e.sensors),r(e.readings),r(e.environment),r(e.telemetry),r(e.data),r(e),t.spectra==null&&n>0&&(t.spectra=n),t},H_=(e,t)=>{if(t==null)return"";const n=U1[e]??{},r=Number.isFinite(n.precision)?n.precision:1,i=typeof t=="number"?t:Number(t);if(!Number.isFinite(i))return"";const o=n.unit?` ${n.unit}`:"";return`${i.toFixed(r)}${o}`},V_=e=>U1[e]?.label??e,bQ=["telemetry","status","event"],_Q=e=>e?new Date(e).toLocaleString():"",xQ=(e,t)=>{if(!e)return"";const n=Math.max(0,t-e);if(n<1e3)return"Just now";const r=Math.floor(n/1e3);if(r<60)return`${r}s ago`;const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const o=Math.floor(i/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`},SQ=(e,t)=>{if(t==null||!Number.isFinite(t))return"";const n=U1[e]??{},r=Number.isFinite(n.precision)?n.precision:1,i=n.unit?` ${n.unit}`:"";return`${t>0?"+":""}${t.toFixed(r)}${i}`},wQ=e=>{if(!Number.isFinite(e))return"";if(e<1e3)return"Just now";const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const n=Math.floor(t/60);if(n<60)return`${n}m ${t%60}s`;const r=Math.floor(n/60);return r<24?`${r}h ${n%60}m`:`${Math.floor(r/24)}d ${r%24}h`},jQ=(e,t)=>{if(!Number.isFinite(e))return"missing";const n=(t??0)*1e3;return!n||e<=n*2?"fresh":e<=n*4?"stale":"missing"},NQ=({points:e})=>{if(!e||e.length<2)return a.jsx("div",{className:oe.sparklineEmpty,children:""});const t=e.map(c=>c.value),n=Math.min(...t),i=Math.max(...t)-n||1,o=e.map((c,d)=>{const f=d/(e.length-1)*100,m=100-(c.value-n)/i*100;return`${f},${m}`});return a.jsx("svg",{className:oe.sparkline,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:a.jsx("polyline",{points:o.join(" "),fill:"none",stroke:"currentColor",strokeWidth:"2"})})};function AQ({device:e,health:t,expectedRate:n,isOpen:r,onClose:i,onDebug:o,allowDebug:c,messages:d,metrics:f,healthReasons:m,timeWindowMs:h,onTimeWindowChange:g,timeWindowOptions:v,nowMs:x}){const[w,_]=p.useState("telemetry"),[S,j]=p.useState(null),A=e?.dataQuality??{expected:0,received:0,percent:100},E=p.useMemo(()=>f.map(k=>k.key),[f]),C=p.useMemo(()=>f.filter(k=>k.value!=null).map(k=>k.key),[f]),T=p.useMemo(()=>f.filter(k=>k.value==null).map(k=>k.key),[f]),O=p.useMemo(()=>d.filter(k=>k.kind===w).slice(0,20),[d,w]),R=p.useMemo(()=>O.map((k,P)=>{const H=O[P+1],K=k.metricsSnapshot||{},B=H?.metricsSnapshot||{},U=Object.keys(K).filter(I=>K[I]!=null&&B[I]!=null&&K[I]!==B[I]).slice(0,3).map(I=>`${V_(I)} ${H_(I,B[I])}  ${H_(I,K[I])}`);return{...k,changeSummary:U.length?U.join("  "):null}}),[O]);return!r||!e?null:a.jsx("div",{className:oe.drawerBackdrop,role:"presentation",onClick:i,children:a.jsxs("aside",{className:oe.drawerPanel,role:"dialog",onClick:k=>k.stopPropagation(),children:[a.jsxs("header",{className:oe.drawerHeader,children:[a.jsxs("div",{children:[a.jsx("p",{className:oe.drawerEyebrow,children:"Device Details"}),a.jsx("h3",{children:e.deviceId}),a.jsxs("p",{className:oe.drawerSubtext,children:[e.deviceKind,"  ",e.locationLabel]})]}),a.jsxs("div",{className:oe.drawerHeaderActions,children:[a.jsxs("div",{className:oe.badgeStack,children:[a.jsx(jp,{status:t.status}),a.jsx("span",{className:`${oe.telemetryBadge} ${oe[`telemetry${e.telemetryStatus}`]||""}`,children:e.telemetryStatus==="fresh"?"Telemetry: Fresh":e.telemetryStatus==="stale"?"Telemetry: Stale":"Telemetry: Missing"})]}),a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:i,children:"Close"})]})]}),a.jsxs("section",{className:oe.drawerSummary,children:[a.jsxs("div",{children:[a.jsx("p",{className:oe.drawerLabel,children:"Last seen"}),a.jsx("p",{className:oe.drawerValue,children:e.lastSeenAbsolute}),a.jsx("p",{className:oe.drawerMeta,children:e.lastSeenRelative})]}),a.jsxs("div",{children:[a.jsx("p",{className:oe.drawerLabel,children:"Last telemetry age"}),a.jsx("p",{className:oe.drawerValue,children:wQ(e.lastTelemetryAgeMs)}),a.jsx("p",{className:oe.drawerMeta,children:e.lastTelemetryAbsolute})]}),a.jsxs("div",{children:[a.jsx("p",{className:oe.drawerLabel,children:"Msg rate"}),a.jsxs("p",{className:oe.drawerValue,children:[e.msgRate,"/min"]}),a.jsxs("p",{className:oe.drawerMeta,children:["Expected ",n??"","/min"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:oe.drawerLabel,children:"Data quality"}),a.jsxs("p",{className:oe.drawerValue,children:[A.percent,"%"]}),a.jsxs("p",{className:oe.drawerMeta,children:[A.received,"/",A.expected," metrics"]})]}),c?a.jsx("button",{type:"button",className:oe.primaryButton,onClick:o,children:"Debug stream"}):null]}),a.jsxs("section",{className:oe.drawerSection,children:[a.jsxs("div",{className:oe.sectionHeaderRow,children:[a.jsx("h4",{children:"Sensor Overview"}),a.jsx("div",{className:oe.windowSelector,children:v.map(k=>a.jsx("button",{type:"button",className:`${oe.tabButton} ${h===k.value?oe.activeTab:""}`,onClick:()=>g(k.value),children:k.label},k.value))})]}),a.jsx("div",{className:oe.metricsGrid,children:f.length?f.map(k=>a.jsxs("div",{className:oe.metricCard,children:[a.jsxs("div",{className:oe.metricHeader,children:[a.jsx("p",{className:oe.metricLabel,children:V_(k.key)}),a.jsxs("div",{className:oe.metricIndicators,children:[a.jsx("span",{className:`${oe.freshnessDot} ${oe[`freshness${jQ(k.lastUpdatedMs?x-k.lastUpdatedMs:null,e.expectedIntervalSec)}`]||""}`}),a.jsx("span",{className:`${oe.trendBadge} ${oe[`trend${k.trend.direction}`]||""}`,children:k.trend.direction==="up"?"":k.trend.direction==="down"?"":""})]})]}),a.jsx("p",{className:oe.metricValue,children:H_(k.key,k.value)}),a.jsxs("p",{className:oe.metricDelta,children:[" ",SQ(k.key,k.trend.delta),k.value==null?"  Missing":""]}),a.jsx(NQ,{points:k.sparkline})]},k.key)):a.jsx("p",{className:oe.metricEmpty,children:"No sensor data available yet."})})]}),a.jsxs("section",{className:oe.drawerSection,children:[a.jsx("h4",{children:"Sensor Health"}),a.jsxs("div",{className:oe.healthPanel,children:[a.jsxs("div",{className:oe.healthRow,children:[a.jsx("p",{className:oe.healthLabel,children:"Sensor health"}),e.lastTelemetryHealth?a.jsx("div",{className:oe.healthChips,children:Object.entries(e.lastTelemetryHealth).map(([k,P])=>a.jsxs("span",{className:`${oe.healthChip} ${P?oe.healthChipOk:oe.healthChipFail}`,children:[k,P?null:a.jsx("span",{className:oe.healthChipMeta,children:"No response"})]},k))}):a.jsx("p",{className:oe.healthMuted,children:" (not reported)"})]}),a.jsxs("div",{className:oe.healthRow,children:[a.jsx("p",{className:oe.healthLabel,children:"Data quality"}),a.jsxs("div",{children:[a.jsxs("p",{className:oe.healthMeta,children:["Expected metrics: ",a.jsx("strong",{children:E.length}),"  Received metrics:"," ",a.jsx("strong",{children:C.length})]}),T.length>0?a.jsxs("p",{className:oe.healthAlert,children:["Missing: ",T.map(V_).join(", ")]}):a.jsx("p",{className:oe.healthMuted,children:"All expected metrics reported."})]})]})]})]}),a.jsxs("section",{className:oe.drawerSection,children:[a.jsx("h4",{children:"Health reasons"}),a.jsx("div",{className:oe.reasonsPanel,children:m.length>0?a.jsx("ul",{children:m.map(k=>a.jsx("li",{children:k},k))}):a.jsx("p",{children:"No health issues detected."})})]}),a.jsxs("section",{className:oe.drawerSection,children:[a.jsx("h4",{children:"Latest Messages"}),a.jsx("div",{className:oe.tabRow,children:bQ.map(k=>a.jsx("button",{type:"button",className:`${oe.tabButton} ${w===k?oe.activeTab:""}`,onClick:()=>_(k),children:k.toUpperCase()},k))}),a.jsxs("div",{className:oe.timeline,children:[O.length===0?a.jsxs("p",{children:["No recent ",w," messages."]}):null,R.map(k=>a.jsx("div",{className:oe.timelineRow,children:a.jsxs("div",{className:oe.timelineDetails,children:[a.jsx("p",{className:oe.timelineTitle,children:k.summary}),a.jsxs("p",{className:oe.timelineMeta,children:[_Q(k.timestamp),"  ",xQ(k.timestamp,x)]}),a.jsx("p",{className:oe.timelineMeta,children:k.location}),k.changeSummary?a.jsx("p",{className:oe.timelineChange,children:k.changeSummary}):null,c?a.jsxs("details",{className:oe.rawDetails,open:S===k.id,children:[a.jsx("summary",{onClick:()=>j(P=>P===k.id?null:k.id),children:"View raw JSON"}),a.jsx("pre",{children:JSON.stringify(k.raw,null,2)})]}):null]})},k.id))]})]})]})})}const EQ=["all","telemetry","status","event"],CQ=e=>{if(!e)return"-";const t=typeof e=="number"?e:Date.parse(e);return Number.isNaN(t)?"-":new Date(t).toLocaleString()};function TQ({device:e,isOpen:t,messages:n,paused:r,onPauseToggle:i,onClear:o,onClose:c}){const[d,f]=p.useState("all"),m=p.useMemo(()=>d==="all"?n:n.filter(v=>v.kind===d),[n,d]),h=async()=>{const v=m.map(x=>JSON.stringify(x.raw)).join(`
`);v&&await navigator.clipboard.writeText(v)},g=()=>{const v=m.map(S=>JSON.stringify(S.raw)).join(`
`),x=new Blob([v],{type:"application/jsonl"}),w=URL.createObjectURL(x),_=document.createElement("a");_.href=w,_.download=`device-stream-${e?.deviceId||"unknown"}.jsonl`,_.click(),URL.revokeObjectURL(w)};return!t||!e?null:a.jsx("div",{className:oe.modalBackdrop,role:"presentation",onClick:c,children:a.jsxs("aside",{className:oe.modalPanel,role:"dialog",onClick:v=>v.stopPropagation(),children:[a.jsxs("header",{className:oe.modalHeader,children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Debug JSON Stream"}),a.jsxs("p",{children:[e.farmId," / ",e.unitType," / ",e.unitId," / ",e.layerId||"NA"," / ",e.deviceId]})]}),a.jsx("button",{type:"button",onClick:c,className:oe.secondaryButton,children:"Close"})]}),a.jsx("div",{className:oe.tabs,children:EQ.map(v=>a.jsx("button",{type:"button",className:`${oe.tabButton} ${d===v?oe.activeTab:""}`,onClick:()=>f(v),children:v.toUpperCase()},v))}),a.jsxs("div",{className:oe.actionsRow,children:[a.jsx("button",{type:"button",onClick:i,className:oe.primaryButton,children:r?"Resume":"Pause"}),a.jsx("button",{type:"button",onClick:o,className:oe.secondaryButton,children:"Clear"}),a.jsx("button",{type:"button",onClick:h,className:oe.secondaryButton,children:"Copy JSON"}),a.jsx("button",{type:"button",onClick:g,className:oe.secondaryButton,children:"Download .jsonl"})]}),a.jsxs("div",{className:oe.streamContainer,children:[m.length===0?a.jsx("p",{children:"No messages yet."}):null,m.map(v=>a.jsxs("details",{className:oe.messageCard,open:!0,children:[a.jsxs("summary",{children:[a.jsx("span",{children:v.kind||"unknown"}),a.jsx("span",{children:CQ(v.timestamp||v.receivedAt)})]}),a.jsx("pre",{children:JSON.stringify(v.raw,null,2)})]},v.id))]})]})})}const kQ=Bn(),OQ=5e3,RQ=8e3,MQ=12e4,IQ=20,_k=200,DQ=600,Eh=[{label:"15m",value:900*1e3},{label:"1h",value:3600*1e3},{label:"6h",value:360*60*1e3},{label:"24h",value:1440*60*1e3}],Qs=64,ea="ALL",PQ=["ok","degraded","critical","offline"],aS=e=>{if(e==null)return null;if(typeof e=="number")return Number.isFinite(e)?e:null;const t=Date.parse(e);return Number.isNaN(t)?null:t},Xs=e=>e==null||e===""?"NA":String(e).trim()||"NA",Yd=e=>{const t=String(e||"").trim().toLowerCase();return wp.includes(t)?t:"telemetry"},Ch=e=>{if(!e)return"offline";const t=String(e).trim().toLowerCase();return nS.includes(t),t},Jr=(e,t)=>{const n=Array.from(new Set(e.map(r=>r===ea||!t?r:t(r)).filter(Boolean)));return n.length===0?[ea]:n.includes(ea)&&n.length>1?n.filter(r=>r!==ea):n},ua=e=>!e||e.length===0||e.includes(ea),xk=e=>e?new Date(e).toLocaleString():"Never",K_=(e,t)=>{if(!e)return"Never";const n=Math.max(0,t-e);if(n<1e3)return"Just now";const r=Math.floor(n/1e3);if(r<60)return`${r}s ago`;const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const o=Math.floor(i/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`},$Q=e=>{if(!Number.isFinite(e))return null;if(e<60)return`${Math.floor(e)}s`;const t=Math.floor(e/60);if(t<60)return`${t}m`;const n=Math.floor(e/3600);if(n<24){const o=Math.floor(e%3600/60);return`${n}h ${o}m`}const r=Math.floor(e/86400),i=Math.floor(e%86400/3600);return`${r}d ${i}h`},Sk=({farmId:e,unitType:t,unitId:n,layerId:r})=>`${e||""}  ${String(t||"").toUpperCase()} ${n||""}  ${Xs(r)}`,LQ=(e,t)=>{const n=String(e||"").split("/").pop().toLowerCase();if(wp.includes(n))return n;const r=String(t||"").toLowerCase();return wp.includes(r)?r:"telemetry"},BQ=e=>{const t={farmId:e?.farmId??e?.farm_id??"",unitType:e?.unitType??e?.unit_type??"",unitId:e?.unitId??e?.unit_id??"",layerId:Xs(e?.layerId??e?.layer_id??""),deviceId:e?.deviceId??e?.device_id??"",deviceType:e?.deviceType??e?.device_type??e?.deviceKind??e?.device_kind??e?.kind??e?.type??"",deviceKind:Lo(e?.deviceType??e?.device_type??e?.deviceKind??e?.device_kind??e?.kind??e?.type),lastSeenMs:aS(e?.lastSeen??e?.timestamp??e?.updatedAt),lastTelemetryMs:aS(e?.lastTelemetryTimestamp??e?.lastTelemetry??e?.last_telemetry??e?.lastTelemetryMs),lastTelemetryHealth:e?.lastTelemetryHealth??e?.telemetryHealth??null,msgTimes:[],msgRate:Number.isFinite(e?.msgRate)?e.msgRate:0,lastMessageKind:Yd(e?.lastSeenKind??e?.lastMessageKind??e?.last_message_kind??e?.messageKind??e?.message_kind),payloadError:!!e?.payloadError,latestMetrics:QD(e?.metrics??e?.sensors??e?.data??{}),uptimeSeconds:e?.uptimeSeconds??e?.uptime_seconds??e?.uptime??e?.extra?.uptimeSeconds??null,bootId:e?.bootId??e?.boot_id??null,bootTime:e?.bootTime??e?.boot_time??null};return t.key=fs(t),t},UQ=(e,t)=>{switch(t.type){case"seed":return t.payload;case"merge":{if(t.payload.size===0)return e;const n=new Map(e);return t.payload.forEach((r,i)=>{const o=n.get(i);if(!o){n.set(i,r);return}n.set(i,{...o,...r})}),n}default:return e}},da=e=>e?e.split(",").map(t=>t.trim()).filter(Boolean):[],sS=e=>e.reduce((t,n)=>(t.total+=1,t[n.health.status]=(t[n.health.status]||0)+1,t),{total:0,ok:0,degraded:0,critical:0,offline:0}),iS=["offline","critical","degraded","ok"],Th=["TANK","LAYER","ENV","GERMINATION","UNKNOWN"],Ap=e=>{const t=iS.indexOf(e);return t===-1?iS.length:t},qQ=e=>{const t=e.map(n=>n.lastSeenMs).filter(n=>Number.isFinite(n));return t.length===0?null:Math.min(...t)},zQ=e=>({bootId:e?.bootId??e?.boot_id??null,bootTime:e?.bootTime??e?.boot_time??null}),FQ=e=>e?.uptimeSeconds??e?.uptime_seconds??e?.uptime??e?.extra?.uptimeSeconds??null,HQ=(e,t)=>{const n=Ap(e.worst)-Ap(t.worst);if(n!==0)return n;const r=e.oldestSeenMs??Number.POSITIVE_INFINITY,i=t.oldestSeenMs??Number.POSITIVE_INFINITY;if(r!==i)return r-i;if(e.level==="kind"&&t.level==="kind"){const o=Th.indexOf(String(e.label).toUpperCase()),c=Th.indexOf(String(t.label).toUpperCase()),d=(o===-1?Th.length:o)-(c===-1?Th.length:c);if(d!==0)return d}return String(e.label).localeCompare(String(t.label))},VQ=(e,t)=>{const n=String(e.label).localeCompare(String(t.label));return n!==0?n:String(e.id).localeCompare(String(t.id))},KQ=e=>[...e].sort((t,n)=>{const r=Ap(t.health.status)-Ap(n.health.status);if(r!==0)return r;const i=t.lastSeenMs??Number.POSITIVE_INFINITY,o=n.lastSeenMs??Number.POSITIVE_INFINITY;return i!==o?i-o:String(t.deviceId).localeCompare(String(n.deviceId))}),GQ=e=>[...e].sort((t,n)=>{const r=String(t.deviceId).localeCompare(String(n.deviceId));return r!==0?r:String(t.key).localeCompare(String(n.key))}),WQ=(e,t="hierarchical")=>{const n={id:"root",label:"All",level:"root",children:new Map,devices:[]},r=new Set;e.forEach(o=>{const c=o.key||fs(o);if(c){if(r.has(c)){console.error("Duplicate device key detected while building hierarchy tree",{key:c});return}r.add(c)}const d=ra(o.farmId),f=Bf(o.unitType),m=ra(o.unitId),h=Xs(o.layerId),g=Lo(o.deviceKind||o.deviceType),v=d||"",x=f?f.toUpperCase():"",w=m||"",_=String(g||"UNKNOWN").toUpperCase(),S=d||"unknown",j=`${S}|${f||"unknown"}`,A=`${j}|${m||"unknown"}`,E=`${A}|${h}`,C=`${E}|${g||"UNKNOWN"}`,T=[{level:"farm",label:v,key:S},{level:"unitType",label:x,key:j},{level:"unitId",label:w,key:A},{level:"layerId",label:h,key:E},{level:"kind",label:_,key:C}];let O=n;T.forEach(R=>{O.children.has(R.key)||O.children.set(R.key,{id:R.key,label:R.label,level:R.level,children:new Map,devices:[]}),O=O.children.get(R.key)}),O.devices.push(o)});const i=(o,c=0)=>{const d=Array.from(o.children.values()).map(v=>i(v,c+1)),f=t==="explorer"?d.sort(VQ):d.sort(HQ);let m="ok",h=null,g=o.devices;return f.length>0?(m=Np(f.map(v=>v.worst)),h=Math.min(...f.map(v=>v.oldestSeenMs).filter(v=>Number.isFinite(v))),Number.isFinite(h)||(h=null)):(g=t==="explorer"?GQ(o.devices):KQ(o.devices),m=Np(g.map(v=>v.health.status)),h=qQ(g)),{...o,depth:c,children:f,devices:g,worst:m,oldestSeenMs:h}};return i(n,0)},YQ=(e,t)=>{const n=ra(e.farmId),r=Bf(e.unitType),i=ra(e.unitId),o=Xs(e.layerId),c=Lo(t||e.deviceKind||e.deviceType),d=n||"unknown",f=`${d}|${r||"unknown"}`,m=`${f}|${i||"unknown"}`,h=`${m}|${o}`,g=`${h}|${c||"UNKNOWN"}`;return[d,f,m,h,g]},oS=e=>{if(!e)return{counts:sS([]),worst:"ok"};if(e.children.length===0){const r=sS(e.devices||[]),i=(e.devices||[]).map(o=>o.health.status);return{counts:r,worst:Np(i)}}const t={total:0,ok:0,degraded:0,critical:0,offline:0},n=[];return e.children.forEach(r=>{const i=oS(r);iS.forEach(o=>{t[o]+=i.counts[o]}),t.total+=i.counts.total,n.push(i.worst)}),{counts:t,worst:Np(n)}},ZD=e=>{const t=[];return e.children.forEach(n=>{t.push(n),t.push(...ZD(n))}),t};function XQ({devices:e,flashKeys:t,sortColumns:n,isDebugAllowed:r,resetStateByDevice:i,resettingDevices:o,onSelect:c,onDebug:d,onReset:f}){const[m,h]=p.useState(0),[g,v]=p.useState(520),x=p.useRef(null),w=e.length>100,_=e.length*Qs,S=w?Math.max(0,Math.floor(m/Qs)-5):0,j=w?Math.ceil(g/Qs)+10:e.length,A=w?Math.min(e.length,S+j):e.length,E=w?S*Qs:0,C=w?Math.max(0,_-A*Qs):0;p.useEffect(()=>{if(!x.current)return;const O=()=>{x.current&&v(x.current.clientHeight||520)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const T=e.slice(S,A);return a.jsx("div",{className:`${oe.treeLeafScroller} ${w?oe.treeLeafScrollerVirtual:""}`,ref:x,onScroll:O=>h(O.currentTarget.scrollTop),children:a.jsxs("table",{className:`${oe.table} ${oe.treeDeviceTable}`,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[n.map(O=>a.jsx("th",{children:O.label},O.key)),a.jsx("th",{children:"Details"}),a.jsx("th",{children:"Reset"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[E?a.jsx("tr",{className:oe.spacerRow,"aria-hidden":"true",children:a.jsx("td",{colSpan:10,style:{height:`${E}px`}})}):null,T.map(O=>a.jsxs("tr",{className:`${oe.treeDeviceRow} ${t?.has(O.key)?oe.treeDeviceRowFlash:""}`,children:[a.jsx("td",{children:a.jsx(jp,{status:O.health.status})}),a.jsxs("td",{children:[a.jsx("p",{className:oe.deviceId,children:O.deviceId}),a.jsx("p",{className:oe.deviceSubtext,children:O.deviceKind})]}),a.jsx("td",{children:a.jsx("p",{className:oe.locationLine,children:O.locationLabel})}),a.jsx("td",{title:O.lastSeenAbsolute,children:O.lastSeenRelative}),a.jsx("td",{title:O.uptimeLabel?void 0:"Uptime unknown",children:O.uptimeLabel||""}),a.jsx("td",{children:a.jsxs("span",{className:`${oe.rateChip} ${O.expectedRate&&O.msgRate<O.expectedRate*.7?oe.rateLow:O.expectedRate&&O.msgRate<O.expectedRate?oe.rateWarn:oe.rateOk}`,children:[O.msgRate,"/min"]})}),a.jsxs("td",{children:[a.jsxs("p",{className:oe.qualityPercent,children:[O.dataQuality.percent,"%"]}),O.dataQuality.missingCritical.length>0||O.dataQuality.missingOptional.length>0?a.jsxs("p",{className:oe.qualityMissing,children:["Missing: ",[...O.dataQuality.missingCritical,...O.dataQuality.missingOptional].slice(0,3).join(", ")]}):a.jsx("p",{className:oe.qualityMissing,children:"All expected metrics"})]}),a.jsx("td",{children:a.jsx("button",{type:"button",className:oe.primaryButton,onClick:()=>c(O.key),children:"Details"})}),a.jsx("td",{children:a.jsxs("div",{className:oe.resetCell,children:[a.jsx("button",{type:"button",className:oe.resetButton,onClick:()=>f(O),disabled:o?.has(O.key),children:o?.has(O.key)?"Resetting...":"Reset"}),i?.[O.key]?.status==="requested"?a.jsx("span",{className:oe.resetRequested,children:"Reset requested"}):null,i?.[O.key]?.error?a.jsx("span",{className:oe.resetError,children:i[O.key].error}):null]})}),a.jsx("td",{children:r?a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:()=>d(O.key),children:"Debug"}):a.jsx("span",{className:oe.mutedText,children:""})})]},O.key)),C?a.jsx("tr",{className:oe.spacerRow,"aria-hidden":"true",children:a.jsx("td",{colSpan:10,style:{height:`${C}px`}})}):null]})]})})}function QQ(){const{role:e,roles:t}=Xt(),[n,r]=p.useReducer(UQ,new Map),[i,o]=xu(),[c,d]=p.useState(()=>i.get("q")??""),[f,m]=p.useState(()=>({farmId:Jr(da(i.get("farm"))),unitType:Jr(da(i.get("unitType"))),unitId:Jr(da(i.get("unitId"))),layerId:Jr(da(i.get("layerId")).map(Xs)),kind:Jr(da(i.get("kind")).map(Lo)),status:Jr(da(i.get("health")).map(Ch)),messageKind:Jr(da(i.get("messageKind")).map(Yd))})),[h,g]=p.useState(()=>i.get("view")??"flat"),[v,x]=p.useState({key:"health",dir:"asc"}),[w,_]=p.useState(""),[S,j]=p.useState(!1),[A,E]=p.useState(!1),[C,T]=p.useState(!1),[O,R]=p.useState(""),[k,P]=p.useState(""),[H,K]=p.useState(!1),[B,U]=p.useState(()=>{try{return window.localStorage.getItem("overviewCommandToken")||""}catch{return""}}),[I,L]=p.useState({}),[$,G]=p.useState(()=>new Set),[te,re]=p.useState(""),[M,q]=p.useState({}),[z,V]=p.useState({}),[Y,Z]=p.useState(()=>new Set),[ee,ie]=p.useState(()=>new Set),xe=p.useRef(new Map),X=p.useRef(new Map),[Ae,he]=p.useState(null),[ue,Xe]=p.useState(Date.now()),[Ue,ye]=p.useState(0),[je,Ee]=p.useState(520),[qe,W]=p.useState(()=>{try{const Q=window.localStorage.getItem("deviceMonitorTreeExpanded");return Q?JSON.parse(Q):{}}catch{return{}}}),[fe,we]=p.useState(Eh[0].value),de=p.useRef(new Map),ve=p.useRef(0),se=p.useRef(!1),Re=p.useRef(null),Je=p.useRef(!1),le=p.useCallback(()=>{ve.current=0;const Q=de.current;de.current=new Map,r({type:"merge",payload:Q})},[]),Oe=p.useCallback((Q,_e)=>{const ot=de.current.get(Q)||{};de.current.set(Q,{...ot,..._e}),ve.current||(ve.current=window.requestAnimationFrame(le))},[le]),Le=p.useCallback(async Q=>{if(!se.current){se.current=!0,Je.current||T(!0),R("");try{const _e=await FG({signal:Q}),ot=Array.isArray(_e)?_e:Array.isArray(_e?.devices)?_e.devices:Array.isArray(_e?.data)?_e.data:[],rt=new Map;let _t=!1;ot.forEach(it=>{const mt=BQ(it);if(!mt.key){_t=!0;return}if(rt.has(mt.key)){console.error("Duplicate device key detected in inventory payload",{key:mt.key,device:mt});return}rt.set(mt.key,mt)}),r({type:Je.current?"merge":"seed",payload:rt}),V(it=>{const mt={...it};return rt.forEach((en,tr)=>{if(!en.latestMetrics||Object.keys(en.latestMetrics).length===0)return;const si=en.lastSeenMs??Date.now(),nr=Array.isArray(mt[tr])?mt[tr]:[];mt[tr]=[{timestamp:si,metrics:en.latestMetrics},...nr].slice(0,_k)}),mt}),he(Date.now()),Je.current=!0,_t&&R("Some devices are missing required identity fields from API data.")}catch(_e){if(Q?.aborted)return;console.error("Failed to load devices",_e),R("Unable to load device inventory."),Je.current||r({type:"seed",payload:new Map})}finally{se.current=!1,Q?.aborted||T(!1)}}},[]);p.useEffect(()=>{const Q=new AbortController;return Le(Q.signal),()=>{Q.abort(),ve.current&&window.cancelAnimationFrame(ve.current)}},[Le]),p.useEffect(()=>{const Q=new AbortController,_e=H?MQ:RQ;H||Le(Q.signal);const ot=window.setInterval(()=>Le(Q.signal),_e);return()=>{Q.abort(),window.clearInterval(ot)}},[Le,H]),p.useEffect(()=>{const Q=window.setInterval(()=>Xe(Date.now()),OQ);return()=>window.clearInterval(Q)},[]),p.useEffect(()=>{if(!te)return;const Q=window.setTimeout(()=>re(""),3500);return()=>window.clearTimeout(Q)},[te]),p.useEffect(()=>{try{window.localStorage.setItem("overviewCommandToken",B)}catch{}},[B]),p.useEffect(()=>{B.trim()&&L(Q=>{let _e=!1;const ot={...Q};return Object.entries(Q).forEach(([rt,_t])=>{_t?.error==="Token required"&&(ot[rt]={..._t,error:""},_e=!0)}),_e?ot:Q})},[B]),p.useEffect(()=>{if(!Re.current)return;const Q=()=>{Re.current&&Ee(Re.current.clientHeight||520)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),p.useEffect(()=>{const Q={farmId:Jr(da(i.get("farm"))),unitType:Jr(da(i.get("unitType"))),unitId:Jr(da(i.get("unitId"))),layerId:Jr(da(i.get("layerId")).map(Xs)),kind:Jr(da(i.get("kind")).map(Lo)),status:Jr(da(i.get("health")).map(Ch)),messageKind:Jr(da(i.get("messageKind")).map(Yd))},_e=i.get("q")??"",ot=i.get("view")??"flat",rt=Number(i.get("window"))||Eh[0].value;m(_t=>JSON.stringify(_t)===JSON.stringify(Q)?_t:Q),d(_t=>_t===_e?_t:_e),g(_t=>_t===ot?_t:ot),we(_t=>_t===rt?_t:rt)},[i]),p.useEffect(()=>{const Q=new URLSearchParams;c&&Q.set("q",c),ua(f.farmId)||Q.set("farm",f.farmId.join(",")),ua(f.unitType)||Q.set("unitType",f.unitType.join(",")),ua(f.unitId)||Q.set("unitId",f.unitId.join(",")),ua(f.layerId)||Q.set("layerId",f.layerId.join(",")),ua(f.kind)||Q.set("kind",f.kind.join(",")),ua(f.status)||Q.set("health",f.status.join(",")),ua(f.messageKind)||Q.set("messageKind",f.messageKind.join(",")),h!=="flat"&&Q.set("view",h),fe!==Eh[0].value&&Q.set("window",String(fe)),Q.toString()!==i.toString()&&o(Q,{replace:!0})},[f,c,h,fe,i,o]);const ne=p.useCallback((Q,_e,ot)=>{Q.length&&(_e(rt=>{const _t=new Set(rt);return Q.forEach(it=>_t.add(it)),_t}),Q.forEach(rt=>{const _t=ot.current;_t.has(rt)&&clearTimeout(_t.get(rt));const it=setTimeout(()=>{_e(mt=>{if(!mt.has(rt))return mt;const en=new Set(mt);return en.delete(rt),en}),_t.delete(rt)},DQ);_t.set(rt,it)}))},[]);p.useEffect(()=>()=>{xe.current.forEach(Q=>clearTimeout(Q)),xe.current.clear(),X.current.forEach(Q=>clearTimeout(Q)),X.current.clear()},[]);const Se=p.useCallback((Q,_e)=>{P("");const ot=_e&&typeof _e=="object"?_e:{};let rt=ot.payload??_e,_t=!1;if(typeof rt=="string")try{rt=JSON.parse(rt)}catch{_t=!0,rt={raw:rt}}if(!rt||typeof rt!="object")return;const it=Uf(rt,ot);if(!M1(it)){console.warn("Ignoring live message missing required identity fields",{topic:Q,identity:it,envelope:ot});return}const mt=fs(it);if(!mt){console.warn("Ignoring live message missing required identity fields",{topic:Q,identity:it,envelope:ot});return}const en=aS(rt.timestamp??ot.timestamp)||Date.now(),tr=LQ(Q,rt.kind??ot.kind),si=Lo(rt.deviceType??rt.device_type??rt.deviceKind??rt.device_kind??ot.deviceType??ot.device_type??ot.deviceKind),nr=n.get(mt),Du=[...nr?.msgTimes||[],en].filter(wa=>en-wa<=6e4).slice(-400),ec=Number.isFinite(rt.msgRate)?rt.msgRate:Du.length,Zi=QD(rt),Pr=FQ(rt),tc=zQ(rt);Oe(mt,{farmId:it.farmId,unitType:it.unitType,unitId:it.unitId,layerId:Xs(it.layerId),deviceId:it.deviceId,deviceKind:si||nr?.deviceKind||"UNKNOWN",key:mt,lastSeenMs:en,lastTelemetryMs:tr==="telemetry"?en:nr?.lastTelemetryMs,lastTelemetryHealth:tr==="telemetry"?rt.health??nr?.lastTelemetryHealth:nr?.lastTelemetryHealth,msgTimes:Du,msgRate:ec,lastMessageKind:tr,payloadError:_t||nr?.payloadError,latestMetrics:tr==="telemetry"&&Object.keys(Zi).length?Zi:nr?.latestMetrics,uptimeSeconds:Pr??nr?.uptimeSeconds??null,bootId:tc.bootId??nr?.bootId??null,bootTime:tc.bootTime??nr?.bootTime??null}),ne([mt],Z,xe),ne(YQ(it,si),ie,X),tr==="telemetry"&&Object.keys(Zi||{}).length&&V(wa=>{const ws=Array.isArray(wa[mt])?wa[mt]:[],tl={timestamp:en,metrics:Zi};return{...wa,[mt]:[tl,...ws].slice(0,_k)}}),!(S&&w===mt)&&q(wa=>{const ws=Array.isArray(wa[mt])?wa[mt]:[],tl=Object.keys(Zi||{}).length,rm=tr==="telemetry"?tl?`Telemetry update (${tl} metrics)`:"Telemetry update":tr==="status"?rt.status??rt.state??"Status update":rt.eventType??rt.type??"Event",Ji={id:`${en}-${ws.length}-${Math.random().toString(36).slice(2)}`,kind:tr,timestamp:en,receivedAt:Date.now(),summary:rm,location:Sk({farmId:it.farmId,unitType:it.unitType,unitId:it.unitId,layerId:it.layerId}),metricsSnapshot:Zi,raw:{...it,messageKind:tr,deviceKind:si,timestamp:rt.timestamp??ot.timestamp??new Date(en).toISOString(),payload:rt}};return{...wa,[mt]:[Ji,...ws].slice(0,IQ)}})},[n,Oe,w,ne,S]);B1(xy,Se,{onConnect:()=>{K(!0),P("")},onDisconnect:()=>{K(!1),P("Live stream disconnected. Attempting to reconnect...")},onError:()=>{K(!1),P("Live stream disconnected. Attempting to reconnect...")}});const Ge=p.useMemo(()=>Array.from(n.values()),[n]),vt=p.useMemo(()=>{const Q=Array.from(new Set(Ge.map(_e=>_e.farmId).filter(Boolean))).sort();return[ea,...Q]},[Ge]),Dt=p.useMemo(()=>{const Q=Array.from(new Set(Ge.map(_e=>_e.unitType).filter(Boolean))).sort();return[ea,...Q]},[Ge]),Ne=p.useMemo(()=>{const Q=Array.from(new Set(Ge.map(_e=>_e.unitId).filter(Boolean))).sort();return[ea,...Q]},[Ge]),We=p.useMemo(()=>{const Q=new Set(Ge.map(_e=>Xs(_e.layerId)));return Q.add("NA"),[ea,...Array.from(Q).sort()]},[Ge]),ze=p.useMemo(()=>{const Q=new Set(Ge.map(_e=>_e.deviceKind).filter(Boolean));return CW.forEach(_e=>Q.add(_e)),[ea,...Array.from(Q).sort((_e,ot)=>_e.localeCompare(ot))]},[Ge]),lt=p.useMemo(()=>[{value:ea,label:ea},...PQ.map(Q=>({value:Q,label:Q.toUpperCase()}))],[]),Bt=p.useMemo(()=>[{value:ea,label:ea},...wp.map(Q=>({value:Q,label:Q}))],[]),Qt=p.useMemo(()=>Ge.map(Q=>{const _e=fQ(Q.deviceKind),ot=vQ({nowMs:ue,lastSeenMs:Q.lastSeenMs,msgRate:Q.msgRate,expectedIntervalSec:_e.expectedIntervalSec,expectedMetrics:_e.expectedMetrics,metrics:Q.latestMetrics,payloadError:Q.payloadError}),rt=XD(_e.expectedIntervalSec),_t=rp(Q.latestMetrics,_e.expectedMetrics),it=Sk(Q),mt=(_e.expectedIntervalSec??0)*1e3,en=Q.lastTelemetryMs?Math.max(0,ue-Q.lastTelemetryMs):null,tr=Q.lastTelemetryMs?mt&&en>mt*2?"stale":"fresh":"missing",si=$Q(Q.uptimeSeconds);return{...Q,health:ot,expectedRate:rt,expectedIntervalSec:_e.expectedIntervalSec,dataQuality:_t,locationLabel:it,lastSeenAbsolute:xk(Q.lastSeenMs),lastSeenRelative:K_(Q.lastSeenMs,ue),lastTelemetryAbsolute:xk(Q.lastTelemetryMs),lastTelemetryRelative:K_(Q.lastTelemetryMs,ue),lastTelemetryAgeMs:en,telemetryStatus:tr,uptimeLabel:si,metricsList:[..._e.expectedMetrics.critical,..._e.expectedMetrics.optional].map(nr=>({key:nr,value:Q.latestMetrics?.[nr]??null}))}}),[Ge,ue]);p.useEffect(()=>{if(!I||Object.keys(I).length===0)return;const Q=new Map(Qt.map(_e=>[_e.key,_e]));L(_e=>{let ot=!1;const rt={..._e};return Object.entries(_e).forEach(([_t,it])=>{if(it?.status!=="requested")return;const mt=Q.get(_t);if(!mt)return;const en=mt.bootId&&mt.bootId!==it.bootId,tr=mt.bootTime&&mt.bootTime!==it.bootTime;(en||tr)&&(rt[_t]={...it,status:""},ot=!0)}),ot?rt:_e})},[Qt,I]);const kn=p.useCallback(async Q=>{const _e=B.trim();if(!_e){L(it=>({...it,[Q.key]:{...it[Q.key],error:"Token required"}}));return}const ot=Q.deviceId||Q.key;if(!window.confirm(`Reset device ${ot}?`))return;const _t=Q.deviceId;if(!_t){L(it=>({...it,[Q.key]:{...it[Q.key],error:"Device ID missing"}}));return}G(it=>new Set(it).add(Q.key)),L(it=>({...it,[Q.key]:{...it[Q.key],error:""}}));try{const it=await fetch(`${kQ}/api/devices/${encodeURIComponent(_t)}/reset`,{method:"POST",headers:{Authorization:`Bearer ${_e}`}});if(it.status===401){L(mt=>({...mt,[Q.key]:{...mt[Q.key],error:"Unauthorized (invalid token)"}}));return}if(!it.ok){L(mt=>({...mt,[Q.key]:{...mt[Q.key],error:"Unable to request reset"}}));return}re("Reset requested"),L(mt=>({...mt,[Q.key]:{status:"requested",error:"",bootId:Q.bootId??null,bootTime:Q.bootTime??null}}))}catch{L(it=>({...it,[Q.key]:{...it[Q.key],error:"Unable to request reset"}}))}finally{G(it=>{const mt=new Set(it);return mt.delete(Q.key),mt})}},[B]);p.useEffect(()=>{try{window.localStorage.setItem("deviceMonitorTreeExpanded",JSON.stringify(qe))}catch(Q){console.warn("Unable to persist tree expansion state",Q)}},[qe]);const Ir=(Q,_e)=>{switch(_e){case"health":return nS.indexOf(Q.health.status);case"device":return Q.deviceId;case"location":return Q.locationLabel;case"lastSeen":return Q.lastSeenMs??null;case"uptime":return Q.uptimeSeconds??null;case"msgRate":return Q.msgRate??null;case"dataQuality":return Q.dataQuality?.percent??null;default:return null}},xs=(Q,_e)=>{const ot=nS,rt=ot.indexOf(Q.health.status)-ot.indexOf(_e.health.status);return rt!==0?rt:Q.lastSeenMs&&_e.lastSeenMs?_e.lastSeenMs-Q.lastSeenMs:Q.lastSeenMs?-1:_e.lastSeenMs?1:String(Q.deviceId).localeCompare(String(_e.deviceId))},Dr=(Q,_e)=>Q===_e?0:Q==null?1:_e==null?-1:typeof Q=="number"&&typeof _e=="number"?Q-_e:String(Q).localeCompare(String(_e)),er=p.useMemo(()=>{const Q=c.trim().toLowerCase();return Qt.filter(_e=>!ua(f.farmId)&&!f.farmId.includes(_e.farmId)||!ua(f.unitType)&&!f.unitType.includes(_e.unitType)||!ua(f.unitId)&&!f.unitId.includes(_e.unitId)||!ua(f.layerId)&&!f.layerId.includes(Xs(_e.layerId))||!ua(f.kind)&&!f.kind.includes(_e.deviceKind)||!ua(f.status)&&!f.status.includes(Ch(_e.health.status))||!ua(f.messageKind)&&!f.messageKind.includes(Yd(_e.lastMessageKind))?!1:Q?`${_e.deviceId} ${_e.locationLabel}`.toLowerCase().includes(Q):!0).sort((_e,ot)=>{const rt=Ir(_e,v.key),_t=Ir(ot,v.key),it=v.dir==="asc"?1:-1,mt=Dr(rt,_t);return mt!==0?mt*it:xs(_e,ot)})},[Qt,f,c,v]),rn=w?Qt.find(Q=>Q.key===w):null,Us=w?M[w]||[]:[],Ss=w?z[w]||[]:[],ai=p.useMemo(()=>{if(!rn)return[];const Q=mQ[rn.deviceKind];if(Q&&Q.length)return Q;const _e=rn.metricsList?.map(rt=>rt.key).filter(Boolean)||[];return _e.length?_e:Object.keys(rn.latestMetrics||{}).slice(0,6)},[rn]),Yr=p.useMemo(()=>rn?gQ({health:rn.health,lastSeenMs:rn.lastSeenMs,nowMs:ue,msgRate:rn.msgRate,expectedRate:rn.expectedRate,dataQuality:rn.dataQuality,payloadError:rn.payloadError}):[],[rn,ue]),Fn=p.useMemo(()=>rn?ai.map(Q=>{const _e=rn.latestMetrics?.[Q]??null,ot=Ss.find(it=>Number.isFinite(it.metrics?.[Q])),rt=yQ({samples:Ss,metricKey:Q,currentValue:_e,nowMs:ue,windowMs:fe}),_t=[...Ss].reverse().filter(it=>it.timestamp>=ue-fe).map(it=>({timestamp:it.timestamp,value:it.metrics?.[Q]??null})).filter(it=>Number.isFinite(it.value));return{key:Q,value:_e,trend:rt,sparkline:_t,lastUpdatedMs:ot?.timestamp??null}}):[],[ai,rn,Ss,ue,fe]),An=p.useMemo(()=>sS(Qt),[Qt]),za=Ae?K_(Ae,ue):"Never",ba=p.useMemo(()=>[e,...t||[]].filter(Boolean).map(_e=>String(_e).toUpperCase()).some(_e=>["ADMIN","DEV","ADMIN_STANDARD","ADMIN_MONITORING_ONLY"].includes(_e)),[e,t]),_a=h==="flat"&&er.length>100,Ce=er.length*Qs,et=_a?Math.max(0,Math.floor(Ue/Qs)-5):0,Mt=_a?Math.ceil(je/Qs)+10:er.length,$t=_a?Math.min(er.length,et+Mt):er.length,At=_a?et*Qs:0,Jt=_a?Math.max(0,Ce-$t*Qs):0,pr=[{key:"health",label:"Health",defaultDir:"asc"},{key:"device",label:"Device",defaultDir:"asc"},{key:"location",label:"Location",defaultDir:"asc"},{key:"lastSeen",label:"Last seen",defaultDir:"desc"},{key:"uptime",label:"Uptime",defaultDir:"desc"},{key:"msgRate",label:"Msg rate",defaultDir:"desc"},{key:"dataQuality",label:"Data quality",defaultDir:"desc"}],nn=Q=>{const _e=pr.find(ot=>ot.key===Q);_e&&x(ot=>ot.key===Q?{key:Q,dir:ot.dir==="asc"?"desc":"asc"}:{key:Q,dir:_e.defaultDir})},vn=h==="explorer"?"explorer":"hierarchical",xa=p.useMemo(()=>WQ(er,vn),[er,vn]),Fa=p.useMemo(()=>ZD(xa),[xa]),Xr=p.useRef(!1);p.useEffect(()=>{if(Fa.length===0)return;const Q=new Set(Fa.map(_e=>_e.id));W(_e=>{let ot=!1;const rt={};return Object.entries(_e).forEach(([_t,it])=>{Q.has(_t)?rt[_t]=it:ot=!0}),ot?rt:_e})},[Fa]);const Be=Q=>{W(_e=>({..._e,[Q]:!_e[Q]}))},Ot=p.useCallback(Q=>{const _e={},ot=rt=>{rt.children.forEach(_t=>{const{counts:it}=oS(_t),mt=it.critical>0||it.offline>0;_e[_t.id]=mt,mt&&_t.children.length>0&&ot(_t)})};return ot(Q),_e},[]),Lt=()=>{const Q={};Fa.forEach(_e=>{Q[_e.id]=!0}),W(Q)},an=()=>{W(Ot(xa))},Wn=()=>{const Q={};Fa.forEach(_e=>{Q[_e.id]=!1}),W(Q)};p.useEffect(()=>{if(h!=="hierarchical"||Xr.current||Object.keys(qe).length>0)return;const Q=Ot(xa);Object.values(Q).some(Boolean)&&(W(Q),Xr.current=!0)},[Ot,xa,qe,h]);const Qr=Q=>a.jsx(XQ,{devices:Q,flashKeys:Y,sortColumns:pr,isDebugAllowed:ba,resetStateByDevice:I,resettingDevices:$,onSelect:_,onDebug:_e=>{_(_e),E(!0)},onReset:kn}),Sa=Q=>Q.children.flatMap(_e=>{const{counts:ot,worst:rt}=oS(_e),_t=qe[_e.id]??_e.level==="farm",it=ee.has(_e.id),mt=[a.jsx("div",{className:`${oe.treeGroup} ${it?oe.treeGroupFlash:""}`,style:{"--tree-depth":_e.depth},children:a.jsxs("button",{type:"button",className:oe.treeToggle,onClick:()=>Be(_e.id),children:[a.jsx("span",{className:`${oe.treeChevron} ${_t?oe.treeChevronOpen:""}`}),a.jsx("span",{className:oe.treeLabel,children:_e.label}),a.jsx(jp,{status:rt}),a.jsxs("span",{className:oe.treeCounts,children:["OK ",ot.ok,"  Degraded ",ot.degraded,"  Critical ",ot.critical,"  Offline ",ot.offline]})]})},`${_e.id}-group`)];return _t&&(_e.children.length>0?mt.push(...Sa(_e)):mt.push(a.jsx("div",{className:oe.treeLeafBlock,style:{"--tree-depth":_e.depth+1},children:Qr(_e.devices)},`${_e.id}-devices`))),mt}),In=h==="hierarchical"||h==="explorer";return a.jsxs("div",{className:oe.page,children:[a.jsx(gs,{title:"Device Monitor"}),O?a.jsx("div",{className:oe.bannerError,children:O}):null,k?a.jsx("div",{className:oe.bannerWarn,children:k}):null,a.jsxs("section",{className:oe.summaryBar,children:[a.jsx("div",{className:oe.summaryCards,children:[{key:"total",label:"Total devices",value:An.total},{key:"ok",label:"OK",value:An.ok,filter:"ok"},{key:"degraded",label:"Degraded",value:An.degraded,filter:"degraded"},{key:"critical",label:"Critical",value:An.critical,filter:"critical"},{key:"offline",label:"Offline",value:An.offline,filter:"offline"}].map(Q=>a.jsxs("button",{type:"button",className:`${oe.summaryCard} ${Q.filter?oe[`summary${Q.filter}`]:""}`,onClick:()=>m(_e=>({..._e,status:Q.filter?[Q.filter]:[ea]})),children:[a.jsx("p",{className:oe.summaryLabel,children:Q.label}),a.jsx("p",{className:oe.summaryValue,children:Q.value})]},Q.key))}),a.jsxs("div",{className:oe.refreshBlock,children:[a.jsxs("p",{children:["Last refresh: ",za]}),a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:()=>Le(),children:"Refresh"})]})]}),a.jsx("section",{className:oe.cardSticky,children:a.jsx(dQ,{search:c,onSearch:d,filterState:f,onFilterChange:(Q,_e)=>m(ot=>({...ot,[Q]:Jr(_e,{layerId:Xs,kind:Lo,status:Ch,messageKind:Yd}[Q])})),farmOptions:vt,unitTypeOptions:Dt,unitIdOptions:Ne,layerIdOptions:We,kindOptions:ze,healthOptions:lt,messageKindOptions:Bt,viewMode:h,onViewModeChange:g})}),a.jsxs("section",{className:oe.card,children:[a.jsxs("div",{className:oe.viewActions,children:[a.jsxs("label",{className:oe.tokenField,children:[a.jsx("span",{className:oe.tokenLabel,children:"Command token"}),a.jsx("input",{type:"password",className:oe.tokenInput,placeholder:"PASTE_TOKEN_HERE",value:B,onChange:Q=>U(Q.target.value),autoComplete:"off"})]}),a.jsx("div",{className:oe.viewActionsButtons,children:In?a.jsxs(a.Fragment,{children:[h==="hierarchical"?a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:an,children:"Expand problems"}):null,a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:Lt,children:"Expand all"}),a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:Wn,children:"Collapse all"})]}):null})]}),te?a.jsx("div",{className:oe.toast,role:"status","aria-live":"polite",children:te}):null,a.jsxs("div",{className:oe.tableWrap,ref:Re,onScroll:Q=>ye(Q.currentTarget.scrollTop),children:[h==="flat"?a.jsxs("table",{className:oe.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[pr.map(Q=>a.jsx("th",{children:a.jsxs("button",{type:"button",className:`${oe.sortButton} ${v.key===Q.key?oe.sortActive:""}`,onClick:()=>nn(Q.key),children:[a.jsx("span",{children:Q.label}),a.jsx("span",{className:`${oe.sortArrow} ${v.key===Q.key?oe.sortArrowActive:""} ${v.key===Q.key&&v.dir==="desc"?oe.sortArrowDesc:""}`})]})},Q.key)),a.jsx("th",{children:"Details"}),a.jsx("th",{children:"Reset"}),a.jsx("th",{children:"Actions"})]})}),C?a.jsx("tbody",{children:a.jsx("tr",{children:a.jsx("td",{colSpan:10,children:"Loading devices..."})})}):null,!C&&er.length===0?a.jsx("tbody",{children:a.jsx("tr",{children:a.jsx("td",{colSpan:10,children:"No devices found."})})}):null,!C&&er.length>0?a.jsxs("tbody",{children:[At?a.jsx("tr",{className:oe.spacerRow,"aria-hidden":"true",children:a.jsx("td",{colSpan:10,style:{height:`${At}px`}})}):null,er.slice(et,$t).map(Q=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(jp,{status:Q.health.status})}),a.jsxs("td",{children:[a.jsx("p",{className:oe.deviceId,children:Q.deviceId}),a.jsx("p",{className:oe.deviceSubtext,children:Q.deviceKind})]}),a.jsx("td",{children:a.jsx("p",{className:oe.locationLine,children:Q.locationLabel})}),a.jsx("td",{title:Q.lastSeenAbsolute,children:Q.lastSeenRelative}),a.jsx("td",{title:Q.uptimeLabel?void 0:"Uptime unknown",children:Q.uptimeLabel||""}),a.jsx("td",{children:a.jsxs("span",{className:`${oe.rateChip} ${Q.expectedRate&&Q.msgRate<Q.expectedRate*.7?oe.rateLow:Q.expectedRate&&Q.msgRate<Q.expectedRate?oe.rateWarn:oe.rateOk}`,children:[Q.msgRate,"/min"]})}),a.jsxs("td",{children:[a.jsxs("p",{className:oe.qualityPercent,children:[Q.dataQuality.percent,"%"]}),Q.dataQuality.missingCritical.length>0||Q.dataQuality.missingOptional.length>0?a.jsxs("p",{className:oe.qualityMissing,children:["Missing: ",[...Q.dataQuality.missingCritical,...Q.dataQuality.missingOptional].slice(0,3).join(", ")]}):a.jsx("p",{className:oe.qualityMissing,children:"All expected metrics"})]}),a.jsx("td",{children:a.jsx("button",{type:"button",className:oe.primaryButton,onClick:()=>_(Q.key),children:"Details"})}),a.jsx("td",{children:a.jsxs("div",{className:oe.resetCell,children:[a.jsx("button",{type:"button",className:oe.resetButton,onClick:()=>kn(Q),disabled:$.has(Q.key),children:$.has(Q.key)?"Resetting...":"Reset"}),I[Q.key]?.status==="requested"?a.jsx("span",{className:oe.resetRequested,children:"Reset requested"}):null,I[Q.key]?.error?a.jsx("span",{className:oe.resetError,children:I[Q.key].error}):null]})}),a.jsx("td",{children:ba?a.jsx("button",{type:"button",className:oe.secondaryButton,onClick:()=>{_(Q.key),E(!0)},children:"Debug"}):a.jsx("span",{className:oe.mutedText,children:""})})]},Q.key)),Jt?a.jsx("tr",{className:oe.spacerRow,"aria-hidden":"true",children:a.jsx("td",{colSpan:10,style:{height:`${Jt}px`}})}):null]}):null]}):null,In?a.jsxs("div",{className:oe.treeWrap,children:[C?a.jsx("div",{className:oe.treeEmpty,children:"Loading devices..."}):null,!C&&er.length===0?a.jsx("div",{className:oe.treeEmpty,children:"No devices found."}):null,!C&&er.length>0?Sa(xa):null]}):null]})]}),a.jsx(AQ,{device:rn,health:rn?.health??{status:"offline"},expectedRate:rn?.expectedRate,isOpen:!!rn,onClose:()=>{_(""),E(!1)},onDebug:()=>E(!0),allowDebug:ba,messages:Us,metrics:Fn,healthReasons:Yr,timeWindowMs:fe,onTimeWindowChange:we,timeWindowOptions:Eh,nowMs:ue}),a.jsx(TQ,{device:rn,isOpen:A&&!!rn,messages:Us,paused:S,onPauseToggle:()=>j(Q=>!Q),onClear:()=>w&&q(Q=>({...Q,[w]:[]})),onClose:()=>E(!1)})]})}const Js=`${D1}/api/shelly`,ZQ={Accept:"application/json"},ei=(e={})=>({...e,headers:{...ZQ,...e.headers??{}}});async function Ti(e,t){if(!e.ok){let i=`${t} (${e.status})`;try{const o=await e.json();o?.message&&(i=o.message)}catch{}throw new Error(i)}const r=(e.headers.get("content-type")||"").includes("application/json");try{if(r)return await e.json();const i=await e.text();if(i)throw new Error(i);return null}catch(i){throw i instanceof Error?i:new Error("Unexpected response from Shelly API")}}async function JD({signal:e}={}){const t=await Ve(`${Js}/rooms`,ei({signal:e})),n=await Ti(t,"Failed to load rooms"),r=Array.isArray(n)?n:n?.rooms;return Array.isArray(r)?{rooms:await Promise.all(r.map(async o=>{const c=await Ve(`${Js}/rooms/${o.id}/racks`,ei({signal:e})),d=await Ti(c,`Failed to load racks for room ${o.id}`),f=await Promise.all((d||[]).map(async m=>{const h=await Ve(`${Js}/racks/${m.id}/sockets`,ei({signal:e})),g=await Ti(h,`Failed to load sockets for rack ${m.id}`);return{...m,sockets:g||[]}}));return{...o,racks:f}}))}:{rooms:[]}}async function JQ(){const e=await Ve(`${Js}/status`,ei()),t=await Ti(e,"Failed to load statuses");return Array.isArray(t)?t:Array.isArray(t?.statuses)?t.statuses:[]}async function eZ(e){const t=await Ve(`${Js}/sockets/${e}/status`,ei());return Ti(t,`Failed to load status for ${e}`)}async function eP(e){const t=await Ve(`${Js}/sockets/${e}/toggle`,ei({method:"POST"}));return Ti(t,"Failed to toggle socket")}async function tP(e,t){const r=await Ve(`${Js}/sockets/${e}/${t?"on":"off"}`,ei({method:"POST"}));return Ti(r,`Failed to update ${e}`)}async function wk(){const e=await Ve(`${Js}/automation`,ei());return Ti(e,"Failed to load automations")}async function nP(e){const t=await Ve(`${Js}/automation`,ei({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e??{})}));return Ti(t,"Failed to create automation")}async function tZ(e){const t=await Ve(`${Js}/automation/${e}`,ei({method:"DELETE"}));if(!t.ok){const n=await t.text();throw new Error(n||"Failed to delete automation")}return!0}async function nZ(){const e=await JD();return e?.rooms?e.rooms.flatMap(t=>(t.racks||[]).flatMap(n=>(n.sockets||[]).map(r=>({id:r.socketId||r.id,name:r.name||r.socketId||r.id,status:r.status??r.state??null,roomId:t.id,rackId:n.id})))):[]}async function rZ(e){return eZ(e)}async function aZ(e){return eP(e)}async function sZ(e){return tP(e,!0)}async function iZ(e){return tP(e,!1)}async function oZ(e,t={}){const n={socketId:e};return t.durationMinutes?(n.type="AUTO_OFF",n.durationMinutes=t.durationMinutes,t.startNow!==void 0&&(n.startNow=t.startNow)):t.intervalMinutes?(n.type="INTERVAL_TOGGLE",n.intervalMinutes=t.intervalMinutes,n.mode=t.mode||"TOGGLE",t.pulseSeconds&&(n.pulseSeconds=t.pulseSeconds)):(t.turnOnAt||t.turnOffAt)&&(n.type="TIME_RANGE",t.turnOnAt&&(n.onTime=t.turnOnAt),t.turnOffAt&&(n.offTime=t.turnOffAt),t.daysOfWeek&&(n.daysOfWeek=t.daysOfWeek)),nP(n)}const lZ="_page_oqbfk_1",cZ="_hero_oqbfk_19",uZ="_title_oqbfk_43",dZ="_subtitle_oqbfk_55",fZ="_subtitleSmall_oqbfk_69",mZ="_feedback_oqbfk_81",hZ="_feedbackLabel_oqbfk_103",pZ="_feedbackMessage_oqbfk_117",yZ="_success_oqbfk_129",gZ="_error_oqbfk_137",vZ="_pending_oqbfk_145",bZ="_sectionHeader_oqbfk_153",_Z="_sectionTitle_oqbfk_167",xZ="_sectionHint_oqbfk_179",SZ="_refreshButton_oqbfk_191",wZ="_layerGrid_oqbfk_223",jZ="_layerCard_oqbfk_235",NZ="_layerHeader_oqbfk_255",AZ="_layerName_oqbfk_269",EZ="_layerId_oqbfk_281",CZ="_modeBadge_oqbfk_293",TZ="_modeBadgeLabel_oqbfk_319",kZ="_modeBadgeMeta_oqbfk_327",OZ="_statusRow_oqbfk_337",RZ="_statusLabel_oqbfk_359",MZ="_statusValue_oqbfk_373",IZ="_statusMeta_oqbfk_385",DZ="_on_oqbfk_413",PZ="_off_oqbfk_421",$Z="_auto_oqbfk_429",LZ="_unknown_oqbfk_437",BZ="_layerPlate_oqbfk_445",UZ="_layerPlateLabel_oqbfk_495",qZ="_layerPlateState_oqbfk_505",zZ="_plateOn_oqbfk_515",FZ="_actions_oqbfk_525",HZ="_durationField_oqbfk_537",VZ="_actionButton_oqbfk_567",KZ="_primary_oqbfk_613",GZ="_neutral_oqbfk_627",WZ="_ghost_oqbfk_639",YZ="_ghostButton_oqbfk_647",XZ="_selected_oqbfk_667",QZ="_meta_oqbfk_677",ZZ="_scheduleForm_oqbfk_695",JZ="_field_oqbfk_709",eJ="_submitButton_oqbfk_741",tJ="_scheduleCard_oqbfk_791",Ht={page:lZ,hero:cZ,title:uZ,subtitle:dZ,subtitleSmall:fZ,feedback:mZ,feedbackLabel:hZ,feedbackMessage:pZ,success:yZ,error:gZ,pending:vZ,sectionHeader:bZ,sectionTitle:_Z,sectionHint:xZ,refreshButton:SZ,layerGrid:wZ,layerCard:jZ,layerHeader:NZ,layerName:AZ,layerId:EZ,modeBadge:CZ,modeBadgeLabel:TZ,modeBadgeMeta:kZ,statusRow:OZ,statusLabel:RZ,statusValue:MZ,statusMeta:IZ,on:DZ,off:PZ,auto:$Z,unknown:LZ,layerPlate:BZ,layerPlateLabel:UZ,layerPlateState:qZ,plateOn:zZ,actions:FZ,durationField:HZ,actionButton:VZ,primary:KZ,neutral:GZ,ghost:WZ,ghostButton:YZ,selected:XZ,meta:QZ,scheduleForm:ZZ,field:JZ,submitButton:eJ,scheduleCard:tJ},nJ={turnOnAt:"",turnOffAt:"",durationMinutes:""},G_=e=>{const n=[e?.status,e?.state,e?.isOn,e?.on,e?.value,e].find(r=>typeof r<"u"&&r!==null);return typeof n=="string"?n.toUpperCase():typeof n=="boolean"?n?"ON":"OFF":Number.isFinite(Number(n))?Number(n)>0?"ON":"OFF":"UNKNOWN"},rJ=e=>e?(e instanceof Date?e:new Date(e)).toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}):"",jk=e=>{if(!e)return;const t=e instanceof Date?e:new Date(e),n=r=>String(r).padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())}T${n(t.getHours())}:${n(t.getMinutes())}:${n(t.getSeconds())}`};function aJ(){const[e,t]=p.useState([]),[n,r]=p.useState({status:"idle",message:""}),[i,o]=p.useState(null),[c,d]=p.useState(null),[f,m]=p.useState(!1),h=p.useMemo(()=>e.reduce((S,j)=>({...S,[j.id]:G_(j.status)}),{}),[e]),g=(S,j)=>{t(A=>A.map(E=>E.id===S?{...E,...j(E)}:E))},v=async S=>{try{const j=await rZ(S),A=G_(j);g(S,()=>({status:A,updatedAt:new Date(j?.timestamp??Date.now())}))}catch(j){console.error(`Could not refresh status for ${S}`,j),r({status:"error",message:j?.message??`Could not refresh ${S}`})}},x=async()=>{m(!0),r({status:"pending",message:"Fetching Shelly devices..."});try{const S=await nZ(),A=(Array.isArray(S)?S:Array.isArray(S?.devices)?S.devices:[]).map(E=>({id:E.id??E.deviceId??E.name,name:E.name??E.label??E.id??E.deviceId??"Unnamed device",status:G_(E.status??E.state),updatedAt:E.updatedAt?new Date(E.updatedAt):null,schedule:{...nJ}}));t(A),r({status:"success",message:"Device list is ready."}),await Promise.all(A.map(E=>v(E.id))),r({status:"idle",message:""})}catch(S){r({status:"error",message:S?.message??"Devices were not loaded."})}finally{m(!1)}};p.useEffect(()=>{x()},[]);const w=async(S,j)=>{o(S),r({status:"pending",message:`Sending ${j} command...`});try{j==="ON"?await sZ(S):j==="OFF"?await iZ(S):j==="TOGGLE"&&await aZ(S),r({status:"success",message:`${S} switched to ${j}.`}),await v(S)}catch(A){r({status:"error",message:A?.message??"Command was not sent."})}finally{o(null)}},_=async(S,j)=>{S.preventDefault();const A=e.find(C=>C.id===j),E={};if(A?.schedule?.turnOnAt&&(E.turnOnAt=jk(A.schedule.turnOnAt)),A?.schedule?.turnOffAt&&(E.turnOffAt=jk(A.schedule.turnOffAt)),A?.schedule?.durationMinutes&&(E.durationMinutes=Number.parseInt(A.schedule.durationMinutes,10)),!E.turnOnAt&&!E.turnOffAt&&!E.durationMinutes){r({status:"error",message:"Enter at least one time or duration."});return}d(j),r({status:"pending",message:`Saving schedule for ${j}...`});try{await oZ(j,E),r({status:"success",message:`Schedule saved for ${j}.`})}catch(C){r({status:"error",message:C?.message??"Schedule was not saved."})}finally{d(null)}};return a.jsxs("div",{className:Ht.page,children:[a.jsx(gs,{title:"Control Panel"}),a.jsxs("section",{className:Ht.hero,children:[a.jsxs("div",{children:[a.jsx("h1",{className:Ht.title,children:"Shelly Lighting Control"}),a.jsx("p",{className:Ht.subtitle,children:"All relays and layers are visible here. Each card represents a Shelly device identified by the registry ID (for example, PS01L02). For every device you can read status, turn it on or off, or submit an on/off schedule."}),a.jsxs("p",{className:Ht.subtitleSmall,children:["Endpoints: GET/POST under ",a.jsx("code",{children:"/api/shelly"})," handle status, on/off, toggle, and schedule."]})]}),a.jsxs("div",{className:`${Ht.feedback} ${Ht[n.status]||""}`,children:[a.jsx("span",{className:Ht.feedbackLabel,children:"Status"}),a.jsxs("p",{className:Ht.feedbackMessage,children:[n.status==="idle"&&"Ready for the next command",n.status==="pending"&&n.message,n.status==="success"&&n.message,n.status==="error"&&n.message]})]})]}),a.jsxs("section",{className:Ht.sectionHeader,children:[a.jsxs("div",{children:[a.jsx("h2",{className:Ht.sectionTitle,children:"Quick layer control"}),a.jsx("p",{className:Ht.sectionHint,children:"Click a layer plate to toggle it instantly; use the buttons below for precise commands."})]}),a.jsx("button",{type:"button",className:Ht.refreshButton,onClick:x,disabled:f,children:f?"Updating...":"Reload devices"})]}),a.jsx("section",{className:Ht.layerGrid,children:e.map(S=>a.jsxs("article",{className:Ht.layerCard,children:[a.jsxs("div",{className:Ht.layerHeader,children:[a.jsxs("div",{children:[a.jsx("div",{className:Ht.layerName,children:S.name}),a.jsx("div",{className:Ht.layerId,children:S.id})]}),a.jsxs("div",{className:`${Ht.modeBadge} ${Ht[h[S.id]?.toLowerCase?.()||"unknown"]}`,children:[a.jsx("span",{className:Ht.modeBadgeLabel,children:h[S.id]||"Unknown"}),a.jsxs("span",{className:Ht.modeBadgeMeta,children:["Last update ",rJ(S.updatedAt)]})]})]}),a.jsxs("button",{type:"button",className:`${Ht.layerPlate} ${h[S.id]==="ON"?Ht.plateOn:""}`,onClick:()=>w(S.id,"TOGGLE"),disabled:i===S.id,children:[a.jsx("span",{className:Ht.layerPlateLabel,children:"Click to change state"}),a.jsx("span",{className:Ht.layerPlateState,children:h[S.id]||"UNKNOWN"})]}),a.jsxs("div",{className:Ht.actions,children:[[{label:"Turn Off",value:"OFF",tone:"ghost"},{label:"Turn On",value:"ON",tone:"primary"}].map(j=>a.jsx("button",{type:"button",className:`${Ht.actionButton} ${Ht[j.tone]} ${h[S.id]===j.value?Ht.selected:""}`,disabled:i===S.id,onClick:()=>w(S.id,j.value),children:j.label},j.value)),a.jsx("button",{type:"button",className:`${Ht.actionButton} ${Ht.neutral}`,disabled:i===S.id,onClick:()=>w(S.id,"TOGGLE"),children:"Toggle"}),a.jsx("button",{type:"button",className:Ht.ghostButton,disabled:i===S.id||f,onClick:()=>v(S.id),children:"Refresh status"})]}),a.jsxs("form",{className:Ht.scheduleForm,onSubmit:j=>_(j,S.id),autoComplete:"off",children:[a.jsxs("div",{className:Ht.field,children:[a.jsx("span",{children:"Turn on at (local)"}),a.jsx("input",{type:"datetime-local",value:S.schedule.turnOnAt,onChange:j=>g(S.id,A=>({schedule:{...A.schedule,turnOnAt:j.target.value}})),step:"1"})]}),a.jsxs("div",{className:Ht.field,children:[a.jsx("span",{children:"Turn off at (local)"}),a.jsx("input",{type:"datetime-local",value:S.schedule.turnOffAt,onChange:j=>g(S.id,A=>({schedule:{...A.schedule,turnOffAt:j.target.value}})),step:"1"})]}),a.jsxs("div",{className:Ht.field,children:[a.jsx("span",{children:"Duration (minutes)"}),a.jsx("input",{type:"number",min:"1",placeholder:"e.g. 90",value:S.schedule.durationMinutes,onChange:j=>g(S.id,A=>({schedule:{...A.schedule,durationMinutes:j.target.value}}))})]}),a.jsx("button",{type:"submit",className:Ht.submitButton,disabled:c===S.id,children:c===S.id?"Saving...":"Submit schedule"})]}),a.jsxs("div",{className:Ht.meta,children:[a.jsxs("span",{children:["GET /api/shelly/devices/",S.id,"/status"]}),a.jsxs("span",{children:["POST /api/shelly/devices/",S.id,"/schedule"]})]})]},S.id))})]})}const sJ={415:"F1",445:"F2",480:"F3",515:"F4",555:"F5",590:"F6",630:"F7",680:"F8"},iJ=e=>String(e).replace(/[]/g,t=>"0123456789"["".indexOf(t)]);function q1(e){const t=iJ(String(e||"")).toLowerCase().replace(/[\s_]/g,"");return t?["temperature","temp","airtemp","airtemperature","atemp","atempc"].includes(t)?"temperature":["humidity","rh","relativehumidity","arh","arhc"].includes(t)?"humidity":["light","lux","illumination"].includes(t)?"lux":["tds","tdsppm","dissolvedtds"].includes(t)?"tds":["ec","electricalconductivity","dissolvedec"].includes(t)?"ec":t==="ph"?"ph":["do","dissolvedoxygen"].includes(t)?"do":["co2","co","co2ppm"].includes(t)?"co2":["watertemp","watertemperature","water_temp","dissolvedtemp"].includes(t)?"waterTemp":["fd1","fd_1"].includes(t)||["vis1","vis_1"].includes(t)?"vis1":["vis2","vis_2"].includes(t)?"vis2":["nir855","nir","nir_855"].includes(t)?"nir855":t==="colorspectrum"?"colorSpectrum":t:null}function Nk(e){const t=Number(e);return Number.isNaN(t)?null:t}function oJ(e=[]){const t=Array.isArray(e)?e:[],n={};for(const r of t){const i=r?.sensorType??r?.valueType??r?.type??r?.name;if(i==null)continue;const o=String(i),c=q1(i),d=c||o,f=Nk(r?.value);if(f==null)continue;const m=r?.unit||r?.units||r?.u||"",h=v=>{d&&(n[d]=v),o&&o!==d&&(n[o]=v)},g=v=>{d&&(n[d]=v),o&&o!==d&&(n[o]=v)};switch(c){case"temperature":case"humidity":case"co2":case"tds":case"ec":case"ph":case"do":case"waterTemp":case"lux":{h({value:f,unit:m,sensorType:o});break}case"colorSpectrum":{const v=["F1","F2","F3","F4","F5","F6","F7","F8","clear","nir"],x={};let w=0;for(const _ in r.value||{}){const S=Nk(r.value[_]);if(S!=null){const j=v[w++];j&&(n[j]=S),x[_]=S}}d&&(n[d]=x),o&&o!==d&&(n[o]=x);break}default:{if(/^\d{3}nm$/.test(c||"")){const v=(c||"").slice(0,3),x=sJ[v];g(f),x?n[x]=f:n[`${v}nm`]=f}else["clear","nir","vis1","vis2","nir855"].includes(c)?g(f):h({value:f,unit:m,sensorType:o});break}}}return n}function lJ(e){const t=e.temperature?.value,n=e.humidity?.value;return typeof t!="number"||typeof n!="number"||t<-20||t>60||n<0||n>100?null:e}function cJ(e={}){const t={};for(const n in e){const r=n.split("-")[0].toLowerCase();t[r]=e[n]===!0||e[n]==="true"||e[n]===1}return t}function uJ(e={}){const t=oJ(e.sensors||[]);return t.health=cJ(e.health),t}function z1(e){if(!e||!Array.isArray(e.sensors))return[];const t={};for(const n of e.sensors){const r=n.sensorType||n.valueType,i=n.unit||"",o=typeof r=="string"?q1(r):void 0,c=typeof r=="string"?r.trim().toLowerCase():void 0,d=typeof o=="string"&&o?o.replace(/\s+/g,""):typeof r=="string"?r.replace(/\s+/g,""):r,f=new Set;typeof o=="string"&&o&&f.add(o),typeof c=="string"&&c&&f.add(c);for(const m of n.data||[]){const h=Date.parse(m.timestamp);t[h]||(t[h]={timestamp:h,F1:0,F2:0,F3:0,F4:0,F5:0,F6:0,F7:0,F8:0,clear:0,nir:0,"405nm":0,"425nm":0,"450nm":0,"475nm":0,"515nm":0,"550nm":0,"555nm":0,"600nm":0,"640nm":0,"690nm":0,"745nm":0,VIS1:0,VIS2:0,NIR855:0,co2:{value:0,unit:"ppm"},temperature:{value:0,unit:"C"},humidity:{value:0,unit:"%"},lux:{value:0,unit:"lux"},tds:{value:0,unit:"ppm"},ec:{value:0,unit:"mS/cm"},ph:{value:0,unit:""},do:{value:0,unit:"mg/L"}});const g=t[h],v=m.value;switch(d){case"temperature":case"humidity":g[d]={value:Number(v),unit:i};break;case"light":case"lux":g.lux={value:Number(v),unit:i};break;case"co2":g.co2={value:Number(v),unit:i};break;case"tds":case"dissolvedTDS":g.tds={value:Number(v),unit:i};break;case"ec":case"dissolvedEC":g.ec={value:Number(v),unit:i};break;case"ph":g.ph={value:Number(v),unit:i};break;case"dissolvedOxygen":case"do":g.do={value:Number(v),unit:i};break;case"colorSpectrum":v&&typeof v=="object"&&(g.F1=Number(v["415nm"])||0,g.F2=Number(v["445nm"])||0,g.F3=Number(v["480nm"])||0,g.F4=Number(v["515nm"])||0,g.F5=Number(v["555nm"])||0,g.F6=Number(v["590nm"])||0,g.F7=Number(v["630nm"])||0,g.F8=Number(v["680nm"])||0,g.clear=Number(v.clear)||0,g.nir=Number(v.nir)||0);break;case"415nm":g.F1=Number(v);break;case"445nm":g.F2=Number(v);break;case"480nm":g.F3=Number(v);break;case"515nm":g.F4=Number(v);break;case"555nm":g.F5=Number(v);break;case"590nm":g.F6=Number(v);break;case"630nm":g.F7=Number(v);break;case"680nm":g.F8=Number(v);break;case"405nm":g["405nm"]=Number(v);break;case"425nm":g["425nm"]=Number(v);break;case"450nm":g["450nm"]=Number(v);break;case"475nm":g["475nm"]=Number(v);break;case"550nm":g["550nm"]=Number(v);break;case"600nm":g["600nm"]=Number(v);break;case"640nm":g["640nm"]=Number(v);break;case"690nm":g["690nm"]=Number(v);break;case"745nm":g["745nm"]=Number(v);break;case"VIS1":case"vis1":g.VIS1=Number(v);break;case"VIS2":case"vis2":g.VIS2=Number(v);break;case"NIR855":case"nir855":g.NIR855=Number(v);break;case"clear":g.clear=Number(v);break;case"nir":g.nir=Number(v);break}for(const x of f)if(!(!x||x in g))if(v&&typeof v=="object"&&"value"in v){const w=Number(v.value);g[x]={value:Number.isFinite(w)?w:null,unit:v.unit??i}}else{const w=Number(v);g[x]={value:Number.isFinite(w)?w:null,unit:i}}}}return Object.values(t).sort((n,r)=>n.timestamp-r.timestamp)}function Di(e){return e==null?"":String(e).toLowerCase().replace(/[^a-z0-9]/g,"")}const dJ="as7343";function fJ(e){return Di(e)===dJ}function F1(e,t){return`${e}|${t}`}const mJ=new Set(["timestamp","site","rack","layer","deviceId","farmId","unitType","unitId","layerId","receivedAt","meta"]),Ak=e=>{if(typeof e=="number")return Number.isFinite(e)?e:null;if(typeof e=="string"&&e.trim()!==""){const t=Number(e);return Number.isFinite(t)?t:null}return null},hJ=["/topic/hydroleaf/telemetry","/topic/hydroleaf/status","/topic/hydroleaf/event"];function pJ(e){if(!e||typeof e!="object"||Array.isArray(e))return{sensors:[],meta:{}};const t=[],n=e.meta&&typeof e.meta=="object"&&!Array.isArray(e.meta)?{...e.meta}:{};for(const[r,i]of Object.entries(e)){if(mJ.has(r)){r!=="meta"&&(n[r]=i);continue}if(r==="as7343_counts"&&i&&typeof i=="object"&&!Array.isArray(i)){for(const[c,d]of Object.entries(i)){const f=Ak(d);f!==null&&t.push({sensorType:c,value:f,unit:"counts",sensorName:"as7343"})}continue}const o=Ak(i);o!==null&&t.push({sensorType:r,value:o,unit:""})}return{sensors:t,meta:n}}const yJ={},gJ=yJ?.VITE_TELEMETRY_DEBUG==="true";function Ek(e,t){if(gJ){if(t===void 0){console.debug(`[telemetry] ${e}`);return}console.debug(`[telemetry] ${e}`,t)}}function rP(e={}){const t={};if(!e||typeof e!="object")return t;for(const n of Object.values(e))if(!(!n||typeof n!="object"))for(const[r,i]of Object.entries(n))!i||typeof i!="object"||(t[r]={...t[r]||{},...i});return t}function vJ(e={}){return!e||typeof e!="object"?[]:Object.entries(e).filter(([,t={}])=>Object.keys(t).length>0)}function bJ(e=[],t={}){const n=new Set,r=i=>{typeof i=="string"&&i.includes("telemetry")&&n.add(i)};return e.forEach(r),Object.keys(t||{}).forEach(r),n.add("telemetry"),n.add("hydroleaf/telemetry"),Array.from(n).filter(Boolean)}const _J=300*1e3,xJ="hydroleaf/telemetry",SJ=300,wJ=new Set(["controllers","deviceId","extra","health","layer","meta","mqttTopic","payload","sensors","site","siteId","rack","rackId","farmId","unitType","unitId","layerId","kind","online","schemaVersion","timestamp"]);function jJ(e=[],t=[]){const n=new Map;for(const r of e)r&&r.name&&n.set(r.name,r);for(const r of t)if(r&&r.name){const i=n.get(r.name)||{};n.set(r.name,{...i,...r})}return Array.from(n.values())}function H1(e,{scope:t}={}){const{token:n}=Xt(),[r,i]=p.useState({}),[o,c]=p.useState({}),[d,f]=p.useState({}),[m,h]=p.useState({}),g=p.useRef({deviceData:new Map,sensorData:new Map}),v=p.useRef(null),x=p.useCallback(k=>{k.sensorData.size>0&&c(P=>{const H={...P};return k.sensorData.forEach((K,B)=>{H[B]=K}),H}),k.deviceData.size>0&&i(P=>{let H=P;return k.deviceData.forEach((K,B)=>{const U=H[B]||{};let I=!1;const L={...U};K.forEach(($,G)=>{const te=U[G]||{};let re=!1;const M={...te};$.forEach((q,z)=>{M[z]=q,re=!0}),re&&(L[G]=M,I=!0)}),I&&(H===P&&(H={...P}),H[B]=L)}),H})},[]),w=p.useCallback(()=>{v.current||(v.current=setTimeout(()=>{const k=g.current;g.current={deviceData:new Map,sensorData:new Map},v.current=null,x(k)},SJ))},[x]),_=p.useCallback((k,P)=>{k&&h(H=>{const B=[...Array.isArray(H[k])?H[k]:[],P].slice(-200);return{...H,[k]:B}})},[]),S=p.useCallback(k=>{if(!k||typeof k!="object")return null;if(typeof k.online=="boolean")return k.online;if(typeof k.isOnline=="boolean")return k.isOnline;if(typeof k.status=="boolean")return k.status;if(typeof k.state=="boolean")return k.state;if(typeof k.status=="string"){const P=k.status.toLowerCase();if(P==="online")return!0;if(P==="offline")return!1}return null},[]),j=p.useCallback(k=>{if(!k||typeof k!="object")return null;const P=k.timestamp??k.ts??k.time??k.receivedAt;if(P==null)return null;if(typeof P=="number")return Number.isFinite(P)?P:null;const H=Date.parse(P);return Number.isNaN(H)?null:H},[]),A=p.useCallback((k,P=[])=>{if(!Array.isArray(P)||P.length===0)return;const H=Date.now();f(K=>{const B=new Map;let U=!1;for(const L of P){if(!fJ(L?.sensorName||L?.source))continue;const $=Di(L?.sensorType||L?.valueType);if(!$)continue;const G=Number(L?.value);if(!Number.isFinite(G))continue;const te=Di(L?.sensorName||L?.source)||$,re=F1($,te),q=(B.get(k)??K[k]??{})[re];let z;if(!q||H-q.windowStart>=_J)z={min:G,max:G,windowStart:H};else{const Y=G<q.min?G:q.min,Z=G>q.max?G:q.max;if(Y===q.min&&Z===q.max)continue;z={min:Y,max:Z,windowStart:q.windowStart}}const V={...B.get(k)??K[k]??{}};V[re]=z,B.set(k,V),U=!0}if(!U)return K;const I={...K};for(const[L,$]of B.entries())I[L]=$;return I})},[]),E=p.useMemo(()=>(Array.isArray(e)?e:[e]).filter(Boolean),[e]),C=p.useMemo(()=>n?{Authorization:`Bearer ${n}`}:{},[n]),T=p.useCallback((k,P)=>{Ek("received message",{topic:k,keys:P&&typeof P=="object"?Object.keys(P):[]});const H=P&&typeof P=="object"?P:null,K=H?.kind||null,B=H?.mqttTopic||null;let U=H?.payload??P;if(H&&U&&typeof U=="object"&&!Array.isArray(U)&&U.timestamp==null&&H.timestamp!=null&&(U={...U,timestamp:H.timestamp}),typeof U=="string")try{U=JSON.parse(U)}catch{U=H?.payload??P}if(!U||typeof U!="object")return;H&&typeof H=="object"&&U&&typeof U=="object"&&U.timestamp==null&&H.timestamp!=null&&(U.timestamp=H.timestamp);const I=Uf(U,H);if(!M1(I)){console.warn("Live telemetry message missing identity fields",{topic:k,identity:Ii(I)});return}if(!bG(I,t))return;const L=fs(I);if(!L){console.warn("Live telemetry message missing identity fields",{topic:k,identity:Ii(I)});return}K==="event"&&_(L,{...U,...I,deviceKey:L,receivedAt:Date.now()});const $=K==="status"?S(U):null;$!==null&&(U={...U,online:$});const G=K==="telemetry"||!K&&k===xJ;if(K==="telemetry"&&!Array.isArray(U.sensors)){const V=pJ(U);U={...U,...V}}if(Array.isArray(U.sensors)){const V=uJ(U),Y=G?lJ(V):V;Y&&G&&(g.current.sensorData.set(L,Y),w()),A(L,U.sensors)}const te={sensors:Array.isArray(U.sensors)?U.sensors:[],controllers:Array.isArray(U.controllers)?U.controllers:[],health:U.health||{},...I,deviceKey:L,kind:K,mqttTopic:B,timestamp:j(U),receivedAt:Date.now()};if($!==null&&(te.online=$),U&&typeof U=="object"&&!Array.isArray(U)){const V=Object.entries(U).reduce((Y,[Z,ee])=>(wJ.has(Z)||(Y[Z]=ee),Y),{});Object.keys(V).length>0&&(te.extra=V)}const re=K||k;if(!re)return;const M=g.current.deviceData,q=I.farmId||"unknown";M.has(q)||M.set(q,new Map);const z=M.get(q);z.has(re)||z.set(re,new Map),z.get(re).set(L,te),w()},[S,j,w,t,_,A]);p.useEffect(()=>{E.length>0&&Ek("subscribed topics",E)},[E]),p.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),B1(E,T,{connectHeaders:C,reconnectOnHeaderChange:!0});const O=p.useMemo(()=>{const k=new Set;for(const P of Object.values(r))for(const H of Object.values(P))for(const K of Object.keys(H))k.add(K);return Array.from(k)},[r]),R=p.useMemo(()=>{const k={};for(const P of Object.values(r))for(const H of Object.keys(P))for(const[K,B]of Object.entries(P[H])){const U=k[K]||{},I={...U?.extra||{},...B?.extra||{}},L=Math.max(Number.isFinite(U?.receivedAt)?U.receivedAt:0,Number.isFinite(B?.receivedAt)?B.receivedAt:0),$={...U,...B,controllers:jJ(U.controllers,B.controllers)};Object.keys(I).length>0&&($.extra=I),L>0&&($.receivedAt=L),k[K]=$}return k},[r]);return{deviceData:r,sensorData:o,availableDeviceKeys:O,mergedDevices:R,sensorExtrema:d,deviceEvents:m}}const NJ=Bn(),Sy=`${NJ}/api/sensor-config`;async function AJ(){const e=await Ve(Sy);if(!e.ok)throw new Error("Failed to fetch sensor configs");return e.json()}async function EJ(e){const t=await Ve(Sy,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create sensor config");return t.json()}async function CJ(e,t){const n=await Ve(`${Sy}/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update sensor config");return n.json()}async function TJ(e){const t=await Ve(`${Sy}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete sensor config");return t.json().catch(()=>{})}const Bl=e=>e==null?"":String(e).toLowerCase().replace(/[^a-z0-9]/g,""),kJ=[{id:"temperature",overviewLabel:"Temp",liveLabel:"Temp",typeAliases:["temperature","temp","airtemp","airtemperature","A_Temp","A_Temp_C"],contextOverrides:[{topics:["/topic/germinationTopic","germinationTopic"],models:["ds18b20"],label:"D_Temp"}],topicOverrides:[{match:["/topic/growSensors","growSensors"],label:"A_Temp"},{match:["/topic/germinationTopic","germinationTopic"],label:"G_Temp"},{match:["/topic/waterTank","waterTank"],label:"D_Temp"}],modelOverrides:[{match:"ds18b20",label:"D_Temp"},{match:"sht3x",label:"A_Temp"},{match:"hdc302x",label:"G_Temp"}]},{id:"humidity",overviewLabel:"RH",liveLabel:"RH",typeAliases:["humidity","rh","relativehumidity","A_RH","A_RH_C"],topicOverrides:[{match:["/topic/growSensors","growSensors"],label:"A_RH"},{match:["/topic/germinationTopic","germinationTopic"],label:"G_RH"}],modelOverrides:[{match:"sht3x",label:"A_RH"},{match:"hdc302x",label:"G_RH"}]},{id:"light",overviewLabel:"Light",liveLabel:"Light",typeAliases:["light","lux","illumination"]},{id:"co2",overviewLabel:"CO",liveLabel:"co2",typeAliases:["co2","co","co2ppm"]},{id:"ph",overviewLabel:"pH",liveLabel:"ph",typeAliases:["ph"]},{id:"dissolvedoxygen",overviewLabel:"DO",liveLabel:"DO",typeAliases:["dissolvedoxygen","oxygen","oxygenmgl","domgl","do"]},{id:"dissolvedec",overviewLabel:"EC",liveLabel:"EC",typeAliases:["dissolvedec","ec","ecmscm","electricalconductivity"]},{id:"dissolvedtds",overviewLabel:"TDS",liveLabel:"TDS",typeAliases:["dissolvedtds","tds","tdsppm"]},{id:"dissolvedtemp",overviewLabel:"Water Temp",liveLabel:"Water Temp",typeAliases:["dissolvedtemp","watertemp","water_temp","watertemperature"],topicOverrides:[{match:["/topic/waterTank","waterTank"],label:"D_Temp"},{match:["/topic/germinationTopic","germinationTopic"],label:"D_Temp"}]}],V1=new Map,aP=new Map;function lS(e){return e==null?[]:(Array.isArray(e)?e:[e]).map(n=>Bl(n)).filter(Boolean)}function Ck(e){return Array.isArray(e)?e.map(t=>{const n=lS(t.match);return!n.length||!t.label?null:{label:t.label,matchers:n}}).filter(Boolean):[]}function OJ(e){return Array.isArray(e)?e.map(t=>{if(!t?.label)return null;const n=lS(t.topics??t.topic),r=lS(t.models??t.model);return!n.length&&!r.length?null:{label:t.label,topicMatchers:n,modelMatchers:r}}).filter(Boolean):[]}for(const e of kJ){const t=Bl(e.id);if(!t)continue;const n=new Set([t]);for(const d of e.typeAliases||[]){const f=Bl(d);f&&n.add(f)}const r=Ck(e.modelOverrides),i=Ck(e.topicOverrides),o=OJ(e.contextOverrides),c={id:t,overviewLabel:e.overviewLabel??e.liveLabel??e.id,liveLabel:e.liveLabel??e.overviewLabel??e.id,typeAliases:[...n],modelOverrides:r,topicOverrides:i,contextOverrides:o};V1.set(t,c);for(const d of c.typeAliases)aP.set(d,t)}function RJ(e){const t=Bl(e);return t?aP.get(t)??null:null}function sP(e){const t=RJ(e);return t?V1.get(t)??null:null}function iP(e,t,n){if(!e||!Array.isArray(n)||!n.length)return null;const r=Bl(t);if(!r)return null;for(const i of n)for(const o of i.matchers)if(r===o||r.endsWith(o)||r.includes(o))return i.label;return null}function Tk(e,t){return t.length?e?t.some(n=>e===n||e.endsWith(n)||e.includes(n)):!1:!0}function MJ(e,t,n){if(!e||!Array.isArray(e.contextOverrides)||!e.contextOverrides.length)return null;const r=Bl(t),i=Bl(n);for(const o of e.contextOverrides)if(Tk(i,o.topicMatchers)&&Tk(r,o.modelMatchers))return o.label;return null}function IJ(e,t){return iP(e,t,e?.modelOverrides)}function oP(e,t){return iP(e,t,e?.topicOverrides)}function DJ(e,t){return e&&typeof e=="object"&&!Array.isArray(e)?{sensorModel:e.sensorModel??null,topic:e.topic??null}:{sensorModel:e??null,topic:t??null}}function W_(e,t,n){const r=sP(e);if(!r)return e;const{sensorModel:i,topic:o}=DJ(t,n),c=MJ(r,i,o);if(c)return c;const d=oP(r,o);if(d)return d;const f=IJ(r,i);return f||(r.liveLabel??e)}function PJ(e){return e?typeof e=="object"&&!Array.isArray(e)?{topic:e.topic??null}:{topic:e}:{topic:null}}function $J(e,t){const n=sP(e);if(!n)return e;const{topic:r}=PJ(t),i=oP(n,r);return i||n.overviewLabel}[...V1.keys()];const lP=p.createContext(null),cS="@@",Ul=e=>e==null?"":String(e).trim(),tf=e=>Ul(e).toLowerCase(),kh=e=>e==null?"":String(e).toLowerCase().replace(/[^a-z0-9]/g,""),cP=(e,t)=>{const n=Ul(e),r=Ul(t);return r?`${n}${cS}${r}`:n},LJ=e=>{const t=Ul(e);if(!t)return{sensorType:"",topic:""};const n=t.indexOf(cS);return n===-1?{sensorType:t,topic:""}:{sensorType:t.slice(0,n),topic:t.slice(n+cS.length)}},zc=e=>{if(e==null||e==="")return;const t=Number(e);return Number.isFinite(t)?t:void 0};function Y_(e){const t=e?.sensorType??e?.sensor_type;if(!t)return null;const n=LJ(t),r=Ul(e?.baseSensorType??e?.metric??e?.type??n.sensorType??t),i=Ul(e?.topic??e?.topicName??e?.topic_key??n.topic??""),o=zc(e?.idealRange?.min??e?.min??e?.minValue??e?.min_value),c=zc(e?.idealRange?.max??e?.max??e?.maxValue??e?.max_value),d=o!==void 0||c!==void 0?{min:o,max:c}:e?.idealRange,f=cP(r,i);return{...e,id:f,key:f,rawKey:t,sensorType:r,topic:i,canonicalType:tf(r||t),canonicalTopic:tf(i),minValue:o,maxValue:c,description:e?.description??"",idealRange:d}}function BJ({children:e,locationPath:t,allowUnauthenticated:n=!1}){const[r,i]=p.useState({}),[o,c]=p.useState(""),{isAuthenticated:d}=Xt(),f=p.useCallback(async()=>{try{c("");const E=await AJ(),C=(Array.isArray(E)?E:[]).reduce((T,O)=>{const R=Y_(O);return R&&(T[R.id]=R),T},{});i(C)}catch(E){c(E.message||"Failed to load sensor configs")}},[]),h=(t??(typeof window<"u"?window.location?.pathname:"")).startsWith("/monitoring"),g=(d||n)&&h;p.useEffect(()=>{if(!g){i({}),c("");return}f()},[f,g]);async function v({sensorType:E,topic:C,minValue:T,maxValue:O,description:R}){try{c("");const k=cP(E,C),P=Y_(await EJ({sensorType:k,topic:Ul(C)||void 0,minValue:zc(T),maxValue:zc(O),description:R??""})),H=P?.id??k;return i(K=>({...K,[H]:P})),P}catch(k){throw c(k.message||"Failed to create sensor config"),k}}async function x(E,C){try{c("");const T=r[E],O={...C,minValue:zc(C?.minValue),maxValue:zc(C?.maxValue),description:C?.description??""};T?.topic&&(O.topic=T.topic);const R=Y_(await CJ(E,O)),k=R?.id??E;return i(P=>({...P,[k]:R})),R}catch(T){throw c(T.message||"Failed to update sensor config"),T}}async function w(E){try{c(""),await TJ(E),i(C=>{const T={...C};return delete T[E],T})}catch(C){throw c(C.message||"Failed to delete sensor config"),C}}const _=p.useMemo(()=>{const E={};return Object.values(r).forEach(C=>{if(!C?.canonicalType)return;const T=E[C.canonicalType]??{default:null,byTopic:{}};C.canonicalTopic?T.byTopic[C.canonicalTopic]=C:T.default=C,E[C.canonicalType]=T}),E},[r]),S=p.useMemo(()=>{const E={},C={};return Object.values(r).forEach(T=>{if(!T?.sensorType)return;const O=T.canonicalTopic,R=W_(T.sensorType,{topic:T.topic})||T.sensorType,k=kh(R);if(k)if(O){const P=E[O]??{};P[k]||(P[k]=T),E[O]=P}else C[k]||(C[k]=T)}),{byTopic:E,global:C}},[r]),j=p.useCallback((E,C={})=>{const T=tf(C.topic),O=tf(C.metric);if(O){const P=_[O];if(P){if(T&&P.byTopic[T])return P.byTopic[T];if(P.default)return P.default}}const R=tf(E);if(R){const P=_[R];if(P){if(T&&P.byTopic[T])return P.byTopic[T];if(P.default)return P.default}}const k=new Set;C.label&&k.add(kh(C.label)),C.metric&&k.add(kh(W_(C.metric,{topic:C.topic}))),k.add(kh(W_(E,{sensorModel:C.sensorModel,topic:C.topic})));for(const P of k)if(P){if(T&&S.byTopic[T]?.[P])return S.byTopic[T][P];if(S.global[P])return S.global[P]}return null},[S,_]),A=p.useCallback((E,C={})=>j(E,C)?.idealRange??null,[j]);return a.jsx(lP.Provider,{value:{configs:r,error:o,reload:f,createConfig:v,updateConfig:x,deleteConfig:w,findConfig:j,findRange:A},children:e})}function K1(){const e=p.useContext(lP);if(!e)throw new Error("useSensorConfig must be used inside SensorConfigProvider");return e}function uP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=uP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function mn(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=uP(e))&&(r&&(r+=" "),r+=t);return r}var X_={},Q_={},kk;function UJ(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Q_)),Q_}var Z_={},Ok;function dP(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Z_)),Z_}var J_={},Rk;function fP(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(J_)),J_}var ex={},Mk;function G1(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let o=0,c="",d="",f=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const m=n[o];d?m==="\\"&&o+1<i?(o++,c+=n[o]):m===d?d="":c+=m:f?m==='"'||m==="'"?d=m:m==="]"?(f=!1,r.push(c),c=""):c+=m:m==="["?(f=!0,c&&(r.push(c),c="")):m==="."?c&&(r.push(c),c=""):c+=m,o++}return c&&r.push(c),r}e.toPath=t})(ex)),ex}var Ik;function W1(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UJ(),n=dP(),r=fP(),i=G1();function o(d,f,m){if(d==null)return m;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return m;const h=d[f];return h===void 0?n.isDeepKey(f)?o(d,i.toPath(f),m):m:h}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const h=d[f];return h===void 0?m:h}default:{if(Array.isArray(f))return c(d,f,m);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return m;const h=d[f];return h===void 0?m:h}}}function c(d,f,m){if(f.length===0)return m;let h=d;for(let g=0;g<f.length;g++){if(h==null||t.isUnsafeProperty(f[g]))return m;h=h[f[g]]}return h===void 0?m:h}e.get=o})(X_)),X_}var tx,Dk;function qJ(){return Dk||(Dk=1,tx=W1().get),tx}var zJ=qJ();const ql=ps(zJ);var nx={exports:{}},Sn={};var Pk;function FJ(){if(Pk)return Sn;Pk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(_){if(typeof _=="object"&&_!==null){var S=_.$$typeof;switch(S){case e:switch(_=_.type,_){case n:case i:case r:case f:case m:case v:return _;default:switch(_=_&&_.$$typeof,_){case c:case d:case g:case h:return _;case o:return _;default:return S}}case t:return S}}}return Sn.ContextConsumer=o,Sn.ContextProvider=c,Sn.Element=e,Sn.ForwardRef=d,Sn.Fragment=n,Sn.Lazy=g,Sn.Memo=h,Sn.Portal=t,Sn.Profiler=i,Sn.StrictMode=r,Sn.Suspense=f,Sn.SuspenseList=m,Sn.isContextConsumer=function(_){return w(_)===o},Sn.isContextProvider=function(_){return w(_)===c},Sn.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},Sn.isForwardRef=function(_){return w(_)===d},Sn.isFragment=function(_){return w(_)===n},Sn.isLazy=function(_){return w(_)===g},Sn.isMemo=function(_){return w(_)===h},Sn.isPortal=function(_){return w(_)===t},Sn.isProfiler=function(_){return w(_)===i},Sn.isStrictMode=function(_){return w(_)===r},Sn.isSuspense=function(_){return w(_)===f},Sn.isSuspenseList=function(_){return w(_)===m},Sn.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===i||_===r||_===f||_===m||typeof _=="object"&&_!==null&&(_.$$typeof===g||_.$$typeof===h||_.$$typeof===c||_.$$typeof===o||_.$$typeof===d||_.$$typeof===x||_.getModuleId!==void 0)},Sn.typeOf=w,Sn}var $k;function HJ(){return $k||($k=1,nx.exports=FJ()),nx.exports}var VJ=HJ(),ha=e=>e===0?0:e>0?1:-1,Pa=e=>typeof e=="number"&&e!=+e,Cl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ft=e=>(typeof e=="number"||e instanceof Number)&&!Pa(e),pa=e=>ft(e)||typeof e=="string",KJ=0,au=e=>{var t=++KJ;return"".concat(e||"").concat(t)},$s=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ft(t)&&typeof t!="string")return r;var o;if(Cl(t)){if(n==null)return r;var c=t.indexOf("%");o=n*parseFloat(t.slice(0,c))/100}else o=+t;return Pa(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},mP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},Ms=(e,t)=>ft(e)&&ft(t)?n=>e+n*(t-e):()=>t;function hP(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):ql(r,t))===n)}var Nn=e=>e===null||typeof e>"u",Hf=e=>Nn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),GJ=["viewBox","children"],WJ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Lk=["points","pathLength"],rx={svg:GJ,polygon:Lk,polyline:Lk},Y1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],X1=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(p.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Y1.includes(i)&&(r[i]=(o=>n[i](n,o)))}),r},YJ=(e,t,n)=>r=>(e(t,n,r),null),wy=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var o=e[i];Y1.includes(i)&&typeof o=="function"&&(r||(r={}),r[i]=YJ(o,t,n))}),r},Bk=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Uk=null,ax=null,pP=e=>{if(e===Uk&&Array.isArray(ax))return ax;var t=[];return p.Children.forEach(e,n=>{Nn(n)||(VJ.isFragment(n)?t=t.concat(pP(n.props.children)):t.push(n))}),ax=t,Uk=e,t};function Q1(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>Bk(i)):r=[Bk(t)],pP(e).forEach(i=>{var o=ql(i,"type.displayName")||ql(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var yP=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,XJ=(e,t,n,r)=>{var i,o=(i=r&&rx?.[r])!==null&&i!==void 0?i:[];return t.startsWith("data-")||typeof e!="function"&&(r&&o.includes(t)||WJ.includes(t))||n&&Y1.includes(t)},dn=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(p.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var c;XJ((c=r)===null||c===void 0?void 0:c[o],o,t,n)&&(i[o]=r[o])}),i},QJ=["children","width","height","viewBox","className","style","title","desc"];function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uS.apply(null,arguments)}function ZJ(e,t){if(e==null)return{};var n,r,i=JJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Z1=p.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:o,className:c,style:d,title:f,desc:m}=e,h=ZJ(e,QJ),g=o||{width:r,height:i,x:0,y:0},v=mn("recharts-surface",c);return p.createElement("svg",uS({},dn(h,!0,"svg"),{className:v,width:r,height:i,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),p.createElement("title",null,f),p.createElement("desc",null,m),n)}),eee=["children","className"];function dS(){return dS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dS.apply(null,arguments)}function tee(e,t){if(e==null)return{};var n,r,i=nee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ga=p.forwardRef((e,t)=>{var{children:n,className:r}=e,i=tee(e,eee),o=mn("recharts-layer",r);return p.createElement("g",dS({className:o},dn(i,!0),{ref:t}),n)}),gP=p.createContext(null),ree=()=>p.useContext(gP);function Tn(e){return function(){return e}}const vP=Math.cos,Ep=Math.sin,Bs=Math.sqrt,Cp=Math.PI,jy=2*Cp,fS=Math.PI,mS=2*fS,Sl=1e-6,aee=mS-Sl;function bP(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function see(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bP;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class iee{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bP:see(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,c){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+c}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let c=this._x1,d=this._y1,f=r-t,m=i-n,h=c-t,g=d-n,v=h*h+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(v>Sl)if(!(Math.abs(g*f-m*h)>Sl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-c,w=i-d,_=f*f+m*m,S=x*x+w*w,j=Math.sqrt(_),A=Math.sqrt(v),E=o*Math.tan((fS-Math.acos((_+v-S)/(2*j*A)))/2),C=E/A,T=E/j;Math.abs(C-1)>Sl&&this._append`L${t+C*h},${n+C*g}`,this._append`A${o},${o},0,0,${+(g*x>h*w)},${this._x1=t+T*f},${this._y1=n+T*m}`}}arc(t,n,r,i,o,c){if(t=+t,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let d=r*Math.cos(i),f=r*Math.sin(i),m=t+d,h=n+f,g=1^c,v=c?i-o:o-i;this._x1===null?this._append`M${m},${h}`:(Math.abs(this._x1-m)>Sl||Math.abs(this._y1-h)>Sl)&&this._append`L${m},${h}`,r&&(v<0&&(v=v%mS+mS),v>aee?this._append`A${r},${r},0,1,${g},${t-d},${n-f}A${r},${r},0,1,${g},${this._x1=m},${this._y1=h}`:v>Sl&&this._append`A${r},${r},0,${+(v>=fS)},${g},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function J1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new iee(t)}function ew(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _P(e){this._context=e}_P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ny(e){return new _P(e)}function xP(e){return e[0]}function SP(e){return e[1]}function wP(e,t){var n=Tn(!0),r=null,i=Ny,o=null,c=J1(d);e=typeof e=="function"?e:e===void 0?xP:Tn(e),t=typeof t=="function"?t:t===void 0?SP:Tn(t);function d(f){var m,h=(f=ew(f)).length,g,v=!1,x;for(r==null&&(o=i(x=c())),m=0;m<=h;++m)!(m<h&&n(g=f[m],m,f))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+e(g,m,f),+t(g,m,f));if(x)return o=null,x+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Tn(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Tn(+f),d):t},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Tn(!!f),d):n},d.curve=function(f){return arguments.length?(i=f,r!=null&&(o=i(r)),d):i},d.context=function(f){return arguments.length?(f==null?r=o=null:o=i(r=f),d):r},d}function Oh(e,t,n){var r=null,i=Tn(!0),o=null,c=Ny,d=null,f=J1(m);e=typeof e=="function"?e:e===void 0?xP:Tn(+e),t=typeof t=="function"?t:Tn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?SP:Tn(+n);function m(g){var v,x,w,_=(g=ew(g)).length,S,j=!1,A,E=new Array(_),C=new Array(_);for(o==null&&(d=c(A=f())),v=0;v<=_;++v){if(!(v<_&&i(S=g[v],v,g))===j)if(j=!j)x=v,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),w=v-1;w>=x;--w)d.point(E[w],C[w]);d.lineEnd(),d.areaEnd()}j&&(E[v]=+e(S,v,g),C[v]=+t(S,v,g),d.point(r?+r(S,v,g):E[v],n?+n(S,v,g):C[v]))}if(A)return d=null,A+""||null}function h(){return wP().defined(i).curve(c).context(o)}return m.x=function(g){return arguments.length?(e=typeof g=="function"?g:Tn(+g),r=null,m):e},m.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Tn(+g),m):e},m.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Tn(+g),m):r},m.y=function(g){return arguments.length?(t=typeof g=="function"?g:Tn(+g),n=null,m):t},m.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Tn(+g),m):t},m.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Tn(+g),m):n},m.lineX0=m.lineY0=function(){return h().x(e).y(t)},m.lineY1=function(){return h().x(e).y(n)},m.lineX1=function(){return h().x(r).y(t)},m.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Tn(!!g),m):i},m.curve=function(g){return arguments.length?(c=g,o!=null&&(d=c(o)),m):c},m.context=function(g){return arguments.length?(g==null?o=d=null:d=c(o=g),m):o},m}class jP{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function oee(e){return new jP(e,!0)}function lee(e){return new jP(e,!1)}const tw={draw(e,t){const n=Bs(t/Cp);e.moveTo(n,0),e.arc(0,0,n,0,jy)}},cee={draw(e,t){const n=Bs(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},NP=Bs(1/3),uee=NP*2,dee={draw(e,t){const n=Bs(t/uee),r=n*NP;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},fee={draw(e,t){const n=Bs(t),r=-n/2;e.rect(r,r,n,n)}},mee=.8908130915292852,AP=Ep(Cp/10)/Ep(7*Cp/10),hee=Ep(jy/10)*AP,pee=-vP(jy/10)*AP,yee={draw(e,t){const n=Bs(t*mee),r=hee*n,i=pee*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const c=jy*o/5,d=vP(c),f=Ep(c);e.lineTo(f*n,-d*n),e.lineTo(d*r-f*i,f*r+d*i)}e.closePath()}},sx=Bs(3),gee={draw(e,t){const n=-Bs(t/(sx*3));e.moveTo(0,n*2),e.lineTo(-sx*n,-n),e.lineTo(sx*n,-n),e.closePath()}},Qa=-.5,Za=Bs(3)/2,hS=1/Bs(12),vee=(hS/2+1)*3,bee={draw(e,t){const n=Bs(t/vee),r=n/2,i=n*hS,o=r,c=n*hS+n,d=-o,f=c;e.moveTo(r,i),e.lineTo(o,c),e.lineTo(d,f),e.lineTo(Qa*r-Za*i,Za*r+Qa*i),e.lineTo(Qa*o-Za*c,Za*o+Qa*c),e.lineTo(Qa*d-Za*f,Za*d+Qa*f),e.lineTo(Qa*r+Za*i,Qa*i-Za*r),e.lineTo(Qa*o+Za*c,Qa*c-Za*o),e.lineTo(Qa*d+Za*f,Qa*f-Za*d),e.closePath()}};function _ee(e,t){let n=null,r=J1(i);e=typeof e=="function"?e:Tn(e||tw),t=typeof t=="function"?t:Tn(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:Tn(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:Tn(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Tp(){}function kp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function EP(e){this._context=e}EP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xee(e){return new EP(e)}function CP(e){this._context=e}CP.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:kp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function See(e){return new CP(e)}function TP(e){this._context=e}TP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:kp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wee(e){return new TP(e)}function kP(e){this._context=e}kP.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function jee(e){return new kP(e)}function qk(e){return e<0?-1:1}function zk(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),c=(n-e._y1)/(i||r<0&&-0),d=(o*i+c*r)/(r+i);return(qk(o)+qk(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(d))||0}function Fk(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ix(e,t,n){var r=e._x0,i=e._y0,o=e._x1,c=e._y1,d=(o-r)/3;e._context.bezierCurveTo(r+d,i+d*t,o-d,c-d*n,o,c)}function Op(e){this._context=e}Op.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ix(this,this._t0,Fk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ix(this,Fk(this,n=zk(this,e,t)),n);break;default:ix(this,this._t0,n=zk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function OP(e){this._context=new RP(e)}(OP.prototype=Object.create(Op.prototype)).point=function(e,t){Op.prototype.point.call(this,t,e)};function RP(e){this._context=e}RP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function Nee(e){return new Op(e)}function Aee(e){return new OP(e)}function MP(e){this._context=e}MP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Hk(e),i=Hk(t),o=0,c=1;c<n;++o,++c)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[c],t[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Hk(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),c=new Array(n);for(i[0]=0,o[0]=2,c[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,c[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,c[t]-=r*c[t-1];for(i[n-1]=c[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(c[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Eee(e){return new MP(e)}function Ay(e,t){this._context=e,this._t=t}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Cee(e){return new Ay(e,.5)}function Tee(e){return new Ay(e,0)}function kee(e){return new Ay(e,1)}function su(e,t){if((c=e.length)>1)for(var n=1,r,i,o=e[t[0]],c,d=o.length;n<c;++n)for(i=o,o=e[t[n]],r=0;r<d;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function pS(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Oee(e,t){return e[t]}function Ree(e){const t=[];return t.key=e,t}function Mee(){var e=Tn([]),t=pS,n=su,r=Oee;function i(o){var c=Array.from(e.apply(this,arguments),Ree),d,f=c.length,m=-1,h;for(const g of o)for(d=0,++m;d<f;++d)(c[d][m]=[0,+r(g,c[d].key,m,o)]).data=g;for(d=0,h=ew(t(c));d<f;++d)c[h[d]].index=d;return n(c,h),c}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Tn(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Tn(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?pS:typeof o=="function"?o:Tn(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??su,i):n},i}function Iee(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,c;i<o;++i){for(c=n=0;n<r;++n)c+=e[n][i][1]||0;if(c)for(n=0;n<r;++n)e[n][i][1]/=c}su(e,t)}}function Dee(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var c=0,d=0;c<i;++c)d+=e[c][n][1]||0;r[n][1]+=r[n][0]=-d/2}su(e,t)}}function Pee(e,t){if(!(!((c=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,c;r<o;++r){for(var d=0,f=0,m=0;d<c;++d){for(var h=e[t[d]],g=h[r][1]||0,v=h[r-1][1]||0,x=(g-v)/2,w=0;w<d;++w){var _=e[t[w]],S=_[r][1]||0,j=_[r-1][1]||0;x+=S-j}f+=g,m+=x*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=m/f)}i[r-1][1]+=i[r-1][0]=n,su(e,t)}}var $ee=["type","size","sizeType"];function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yS.apply(null,arguments)}function Vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vk(Object(n),!0).forEach(function(r){Lee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lee(e,t,n){return(t=Bee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bee(e){var t=Uee(e,"string");return typeof t=="symbol"?t:t+""}function Uee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qee(e,t){if(e==null)return{};var n,r,i=zee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var IP={symbolCircle:tw,symbolCross:cee,symbolDiamond:dee,symbolSquare:fee,symbolStar:yee,symbolTriangle:gee,symbolWye:bee},Fee=Math.PI/180,Hee=e=>{var t="symbol".concat(Hf(e));return IP[t]||tw},Vee=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Fee;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Kee=(e,t)=>{IP["symbol".concat(Hf(e))]=t},nw=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=qee(e,$ee),o=Kk(Kk({},i),{},{type:t,size:n,sizeType:r}),c=()=>{var g=Hee(t),v=_ee().type(g).size(Vee(n,r,t));return v()},{className:d,cx:f,cy:m}=o,h=dn(o,!0);return f===+f&&m===+m&&n===+n?p.createElement("path",yS({},h,{className:mn("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(m,")"),d:c()})):null};nw.registerSymbol=Kee;function gS(){return gS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gS.apply(null,arguments)}function Gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(n),!0).forEach(function(r){rw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rw(e,t,n){return(t=Wee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wee(e){var t=Yee(e,"string");return typeof t=="symbol"?t:t+""}function Yee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ja=32;class aw extends p.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Ja/2,o=Ja/6,c=Ja/3,d=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return p.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Ja,y2:i,className:"recharts-legend-icon"});if(f==="line")return p.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Ja,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return p.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ja/8,"h").concat(Ja,"v").concat(Ja*3/4,"h").concat(-Ja,"z"),className:"recharts-legend-icon"});if(p.isValidElement(t.legendIcon)){var m=Gee({},t);return delete m.legendIcon,p.cloneElement(t.legendIcon,m)}return p.createElement(nw,{fill:d,cx:i,cy:i,size:Ja,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:c}=this.props,d={x:0,y:0,width:Ja,height:Ja},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,g)=>{var v=h.formatter||i,x=mn({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:h.inactive});if(h.type==="none")return null;var w=h.inactive?o:h.color,_=v?v(h.value,h,g):h.value;return p.createElement("li",gS({className:x,style:f,key:"legend-item-".concat(g)},wy(this.props,h,g)),p.createElement(Z1,{width:n,height:n,viewBox:d,style:m,"aria-label":"".concat(_," legend icon")},this.renderIcon(h,c)),p.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},_))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return p.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}rw(aw,"displayName","Legend");rw(aw,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var ox={},lx={},Wk;function Xee(){return Wk||(Wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let o=0;o<n.length;o++){const c=n[o],d=r(c);i.has(d)||i.set(d,c)}return Array.from(i.values())}e.uniqBy=t})(lx)),lx}var cx={},Yk;function DP(){return Yk||(Yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(cx)),cx}var ux={},dx={},fx={},Xk;function Qee(){return Xk||(Xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(fx)),fx}var Qk;function sw(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qee();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(dx)),dx}var mx={},Zk;function Zee(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(mx)),mx}var Jk;function Jee(){return Jk||(Jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sw(),n=Zee();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(ux)),ux}var hx={},px={},eO;function ete(){return eO||(eO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W1();function n(r){return function(i){return t.get(i,r)}}e.property=n})(px)),px}var yx={},gx={},vx={},bx={},tO;function PP(){return tO||(tO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(bx)),bx}var _x={},nO;function $P(){return nO||(nO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(_x)),_x}var xx={},rO;function iw(){return rO||(rO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(xx)),xx}var aO;function tte(){return aO||(aO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ow(),n=PP(),r=$P(),i=iw();function o(g,v,x){return typeof x!="function"?t.isMatch(g,v):c(g,v,function w(_,S,j,A,E,C){const T=x(_,S,j,A,E,C);return T!==void 0?!!T:c(_,S,w,C)},new Map)}function c(g,v,x,w){if(v===g)return!0;switch(typeof v){case"object":return d(g,v,x,w);case"function":return Object.keys(v).length>0?c(g,{...v},x,w):i.eq(g,v);default:return n.isObject(g)?typeof v=="string"?v==="":!0:i.eq(g,v)}}function d(g,v,x,w){if(v==null)return!0;if(Array.isArray(v))return m(g,v,x,w);if(v instanceof Map)return f(g,v,x,w);if(v instanceof Set)return h(g,v,x,w);const _=Object.keys(v);if(g==null)return _.length===0;if(_.length===0)return!0;if(w&&w.has(v))return w.get(v)===g;w&&w.set(v,g);try{for(let S=0;S<_.length;S++){const j=_[S];if(!r.isPrimitive(g)&&!(j in g)||v[j]===void 0&&g[j]!==void 0||v[j]===null&&g[j]!==null||!x(g[j],v[j],j,g,v,w))return!1}return!0}finally{w&&w.delete(v)}}function f(g,v,x,w){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[_,S]of v.entries()){const j=g.get(_);if(x(j,S,_,g,v,w)===!1)return!1}return!0}function m(g,v,x,w){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const _=new Set;for(let S=0;S<v.length;S++){const j=v[S];let A=!1;for(let E=0;E<g.length;E++){if(_.has(E))continue;const C=g[E];let T=!1;if(x(C,j,S,g,v,w)&&(T=!0),T){_.add(E),A=!0;break}}if(!A)return!1}return!0}function h(g,v,x,w){return v.size===0?!0:g instanceof Set?m([...g],[...v],x,w):!1}e.isMatchWith=o,e.isSetMatch=h})(vx)),vx}var sO;function ow(){return sO||(sO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tte();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(gx)),gx}var Sx={},wx={},jx={},iO;function LP(){return iO||(iO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(jx)),jx}var Nx={},oO;function lw(){return oO||(oO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Nx)),Nx}var Ax={},lO;function cw(){return lO||(lO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",c="[object Symbol]",d="[object Date]",f="[object Map]",m="[object Set]",h="[object Array]",g="[object Function]",v="[object ArrayBuffer]",x="[object Object]",w="[object Error]",_="[object DataView]",S="[object Uint8Array]",j="[object Uint8ClampedArray]",A="[object Uint16Array]",E="[object Uint32Array]",C="[object BigUint64Array]",T="[object Int8Array]",O="[object Int16Array]",R="[object Int32Array]",k="[object BigInt64Array]",P="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=v,e.arrayTag=h,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=C,e.booleanTag=i,e.dataViewTag=_,e.dateTag=d,e.errorTag=w,e.float32ArrayTag=P,e.float64ArrayTag=H,e.functionTag=g,e.int16ArrayTag=O,e.int32ArrayTag=R,e.int8ArrayTag=T,e.mapTag=f,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=n,e.symbolTag=c,e.uint16ArrayTag=A,e.uint32ArrayTag=E,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=j})(Ax)),Ax}var Ex={},cO;function nte(){return cO||(cO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Ex)),Ex}var uO;function BP(){return uO||(uO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),n=lw(),r=cw(),i=$P(),o=nte();function c(h,g){return d(h,void 0,h,new Map,g)}function d(h,g,v,x=new Map,w=void 0){const _=w?.(h,g,v,x);if(_!=null)return _;if(i.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const S=new Array(h.length);x.set(h,S);for(let j=0;j<h.length;j++)S[j]=d(h[j],j,v,x,w);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;x.set(h,S);for(const[j,A]of h)S.set(j,d(A,j,v,x,w));return S}if(h instanceof Set){const S=new Set;x.set(h,S);for(const j of h)S.add(d(j,void 0,v,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,S);for(let j=0;j<h.length;j++)S[j]=d(h[j],j,v,x,w);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,S),f(S,h,v,x,w),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return x.set(h,S),f(S,h,v,x,w),S}if(h instanceof Blob){const S=new Blob([h],{type:h.type});return x.set(h,S),f(S,h,v,x,w),S}if(h instanceof Error){const S=new h.constructor;return x.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,f(S,h,v,x,w),S}if(typeof h=="object"&&m(h)){const S=Object.create(Object.getPrototypeOf(h));return x.set(h,S),f(S,h,v,x,w),S}return h}function f(h,g,v=h,x,w){const _=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<_.length;S++){const j=_[S],A=Object.getOwnPropertyDescriptor(h,j);(A==null||A.writable)&&(h[j]=d(g[j],j,v,x,w))}}function m(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=d,e.copyProperties=f})(wx)),wx}var dO;function rte(){return dO||(dO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Sx)),Sx}var fO;function ate(){return fO||(fO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ow(),n=rte();function r(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=r})(yx)),yx}var Cx={},Tx={},kx={},mO;function ste(){return mO||(mO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP(),n=cw();function r(i,o){return t.cloneDeepWith(i,(c,d,f,m)=>{const h=o?.(c,d,f,m);if(h!=null)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(kx)),kx}var hO;function ite(){return hO||(hO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ste();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Tx)),Tx}var Ox={},Rx={},pO;function UP(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Rx)),Rx}var Mx={},yO;function ote(){return yO||(yO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lw();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Mx)),Mx}var gO;function lte(){return gO||(gO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dP(),n=UP(),r=ote(),i=G1();function o(c,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&c?.[d]==null?f=i.toPath(d):f=[d],f.length===0)return!1;let m=c;for(let h=0;h<f.length;h++){const g=f[h];if((m==null||!Object.hasOwn(m,g))&&!((Array.isArray(m)||r.isArguments(m))&&n.isIndex(g)&&g<m.length))return!1;m=m[g]}return!0}e.has=o})(Ox)),Ox}var vO;function cte(){return vO||(vO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ow(),n=fP(),r=ite(),i=W1(),o=lte();function c(d,f){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return f=r.cloneDeep(f),function(m){const h=i.get(m,d);return h===void 0?o.has(m,d):f===void 0?h===void 0:t.isMatch(h,f)}}e.matchesProperty=c})(Cx)),Cx}var bO;function ute(){return bO||(bO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DP(),n=ete(),r=ate(),i=cte();function o(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}e.iteratee=o})(hx)),hx}var _O;function dte(){return _O||(_O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xee(),n=DP(),r=Jee(),i=ute();function o(c,d=n.identity){return r.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(d)):[]}e.uniqBy=o})(ox)),ox}var Ix,xO;function fte(){return xO||(xO=1,Ix=dte().uniqBy),Ix}var mte=fte();const SO=ps(mte);function qP(e,t,n){return t===!0?SO(e,n):typeof t=="function"?SO(e,t):e}var Dx={exports:{}},Px={},$x={exports:{}},Lx={};var wO;function hte(){if(wO)return Lx;wO=1;var e=pu();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,c=e.useDebugValue;function d(g,v){var x=v(),w=r({inst:{value:x,getSnapshot:v}}),_=w[0].inst,S=w[1];return o(function(){_.value=x,_.getSnapshot=v,f(_)&&S({inst:_})},[g,x,v]),i(function(){return f(_)&&S({inst:_}),g(function(){f(_)&&S({inst:_})})},[g]),c(x),x}function f(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!n(g,x)}catch{return!0}}function m(g,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Lx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Lx}var jO;function pte(){return jO||(jO=1,$x.exports=hte()),$x.exports}var NO;function yte(){if(NO)return Px;NO=1;var e=pu(),t=pte();function n(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,c=e.useEffect,d=e.useMemo,f=e.useDebugValue;return Px.useSyncExternalStoreWithSelector=function(m,h,g,v,x){var w=o(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=d(function(){function j(O){if(!A){if(A=!0,E=O,O=v(O),x!==void 0&&_.hasValue){var R=_.value;if(x(R,O))return C=R}return C=O}if(R=C,r(E,O))return R;var k=v(O);return x!==void 0&&x(R,k)?(E=O,R):(E=O,C=k)}var A=!1,E,C,T=g===void 0?null:g;return[function(){return j(h())},T===null?void 0:function(){return j(T())}]},[h,g,v,x]);var S=i(m,w[0],w[1]);return c(function(){_.hasValue=!0,_.value=S},[S]),f(S),S},Px}var AO;function gte(){return AO||(AO=1,Dx.exports=yte()),Dx.exports}var vte=gte(),uw=p.createContext(null),bte=e=>e,Gn=()=>{var e=p.useContext(uw);return e?e.store.dispatch:bte},ap=()=>{},_te=()=>ap,xte=(e,t)=>e===t;function pt(e){var t=p.useContext(uw);return vte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:_te,t?t.store.getState:ap,t?t.store.getState:ap,t?e:ap,xte)}function Ste(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function wte(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function jte(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var EO=e=>Array.isArray(e)?e:[e];function Nte(e){const t=Array.isArray(e[0])?e[0]:e;return jte(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ate(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Ete=class{constructor(e){this.value=e}deref(){return this.value}},Cte=typeof WeakRef<"u"?WeakRef:Ete,Tte=0,CO=1;function Rh(){return{s:Tte,v:void 0,o:null,p:null}}function zP(e,t={}){let n=Rh();const{resultEqualityCheck:r}=t;let i,o=0;function c(){let d=n;const{length:f}=arguments;for(let g=0,v=f;g<v;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=d.o;w===null&&(d.o=w=new WeakMap);const _=w.get(x);_===void 0?(d=Rh(),w.set(x,d)):d=_}else{let w=d.p;w===null&&(d.p=w=new Map);const _=w.get(x);_===void 0?(d=Rh(),w.set(x,d)):d=_}}const m=d;let h;if(d.s===CO)h=d.v;else if(h=e.apply(null,arguments),o++,r){const g=i?.deref?.()??i;g!=null&&r(g,h)&&(h=g,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new Cte(h):h}return m.s=CO,m.v=h,h}return c.clearCache=()=>{n=Rh(),c.resetResultsCount()},c.resultsCount=()=>o,c.resetResultsCount=()=>{o=0},c}function kte(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,c=0,d,f={},m=i.pop();typeof m=="object"&&(f=m,m=i.pop()),Ste(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const h={...n,...f},{memoize:g,memoizeOptions:v=[],argsMemoize:x=zP,argsMemoizeOptions:w=[]}=h,_=EO(v),S=EO(w),j=Nte(i),A=g(function(){return o++,m.apply(null,arguments)},..._),E=x(function(){c++;const T=Ate(j,arguments);return d=A.apply(null,T),d},...S);return Object.assign(E,{resultFunc:m,memoizedResultFunc:A,dependencies:j,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var ke=kte(zP),Ote=Object.assign((e,t=ke)=>{wte(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((c,d,f)=>(c[n[f]]=d,c),{}))},{withTypes:()=>Ote}),Bx={},Ux={},qx={},TO;function Rte(){return TO||(TO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const c=t(r),d=t(i);if(c===d&&c===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?d-c:c-d}return 0};e.compareValues=n})(qx)),qx}var zx={},Fx={},kO;function FP(){return kO||(kO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Fx)),Fx}var OO;function Mte(){return OO||(OO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FP(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,c){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||c!=null&&Object.hasOwn(c,o)}e.isKey=i})(zx)),zx}var RO;function Ite(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rte(),n=Mte(),r=G1();function i(o,c,d,f){if(o==null)return[];d=f?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const m=(x,w)=>{let _=x;for(let S=0;S<w.length&&_!=null;++S)_=_[w[S]];return _},h=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:m(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?m(w,x):typeof w=="object"?w[x]:w,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return o.map(x=>({original:x,criteria:g.map(w=>h(w,x))})).slice().sort((x,w)=>{for(let _=0;_<g.length;_++){const S=t.compareValues(x.criteria[_],w.criteria[_],d[_]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(Ux)),Ux}var Hx={},MO;function Dte(){return MO||(MO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],o=Math.floor(r),c=(d,f)=>{for(let m=0;m<d.length;m++){const h=d[m];Array.isArray(h)&&f<o?c(h,f+1):i.push(h)}};return c(n,0),i}e.flatten=t})(Hx)),Hx}var Vx={},IO;function HP(){return IO||(IO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP(),n=sw(),r=PP(),i=iw();function o(c,d,f){return r.isObject(f)&&(typeof d=="number"&&n.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?i.eq(f[d],c):!1}e.isIterateeCall=o})(Vx)),Vx}var DO;function Pte(){return DO||(DO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ite(),n=Dte(),r=HP();function i(o,...c){const d=c.length;return d>1&&r.isIterateeCall(o,c[0],c[1])?c=[]:d>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(o,n.flatten(c),["asc"])}e.sortBy=i})(Bx)),Bx}var Kx,PO;function $te(){return PO||(PO=1,Kx=Pte().sortBy),Kx}var Lte=$te();const Ey=ps(Lte);var VP=e=>e.legend.settings,Bte=e=>e.legend.size,Ute=e=>e.legend.payload,qte=ke([Ute,VP],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Ey(r,n):r});function zte(){return pt(qte)}var Mh=1;function KP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=p.useState({height:0,left:0,top:0,width:0}),r=p.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),c={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(c.height-t.height)>Mh||Math.abs(c.left-t.left)>Mh||Math.abs(c.top-t.top)>Mh||Math.abs(c.width-t.width)>Mh)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function kr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Fte=typeof Symbol=="function"&&Symbol.observable||"@@observable",$O=Fte,Gx=()=>Math.random().toString(36).substring(7).split("").join("."),Hte={INIT:`@@redux/INIT${Gx()}`,REPLACE:`@@redux/REPLACE${Gx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gx()}`},Rp=Hte;function dw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GP(e,t,n){if(typeof e!="function")throw new Error(kr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kr(1));return n(GP)(e,t)}let r=e,i=t,o=new Map,c=o,d=0,f=!1;function m(){c===o&&(c=new Map,o.forEach((S,j)=>{c.set(j,S)}))}function h(){if(f)throw new Error(kr(3));return i}function g(S){if(typeof S!="function")throw new Error(kr(4));if(f)throw new Error(kr(5));let j=!0;m();const A=d++;return c.set(A,S),function(){if(j){if(f)throw new Error(kr(6));j=!1,m(),c.delete(A),o=null}}}function v(S){if(!dw(S))throw new Error(kr(7));if(typeof S.type>"u")throw new Error(kr(8));if(typeof S.type!="string")throw new Error(kr(17));if(f)throw new Error(kr(9));try{f=!0,i=r(i,S)}finally{f=!1}return(o=c).forEach(A=>{A()}),S}function x(S){if(typeof S!="function")throw new Error(kr(10));r=S,v({type:Rp.REPLACE})}function w(){const S=g;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(kr(11));function A(){const C=j;C.next&&C.next(h())}return A(),{unsubscribe:S(A)}},[$O](){return this}}}return v({type:Rp.INIT}),{dispatch:v,subscribe:g,getState:h,replaceReducer:x,[$O]:w}}function Vte(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Rp.INIT})>"u")throw new Error(kr(12));if(typeof n(void 0,{type:Rp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kr(13))})}function WP(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const c=t[o];typeof e[c]=="function"&&(n[c]=e[c])}const r=Object.keys(n);let i;try{Vte(n)}catch(o){i=o}return function(c={},d){if(i)throw i;let f=!1;const m={};for(let h=0;h<r.length;h++){const g=r[h],v=n[g],x=c[g],w=v(x,d);if(typeof w>"u")throw d&&d.type,new Error(kr(14));m[g]=w,f=f||w!==x}return f=f||r.length!==Object.keys(c).length,f?m:c}}function Mp(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Kte(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(kr(15))};const c={getState:i.getState,dispatch:(f,...m)=>o(f,...m)},d=e.map(f=>f(c));return o=Mp(...d)(i.dispatch),{...i,dispatch:o}}}function YP(e){return dw(e)&&"type"in e&&typeof e.type=="string"}var XP=Symbol.for("immer-nothing"),LO=Symbol.for("immer-draftable"),$a=Symbol.for("immer-state");function Ds(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var iu=Object.getPrototypeOf;function zl(e){return!!e&&!!e[$a]}function Pi(e){return e?QP(e)||Array.isArray(e)||!!e[LO]||!!e.constructor?.[LO]||Ty(e)||ky(e):!1}var Gte=Object.prototype.constructor.toString();function QP(e){if(!e||typeof e!="object")return!1;const t=iu(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Gte}function Ip(e,t){Cy(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Cy(e){const t=e[$a];return t?t.type_:Array.isArray(e)?1:Ty(e)?2:ky(e)?3:0}function vS(e,t){return Cy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZP(e,t,n){const r=Cy(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Wte(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ty(e){return e instanceof Map}function ky(e){return e instanceof Set}function wl(e){return e.copy_||e.base_}function bS(e,t){if(Ty(e))return new Map(e);if(ky(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=QP(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[$a];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const c=i[o],d=r[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[c]})}return Object.create(iu(e),r)}else{const r=iu(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function fw(e,t=!1){return Oy(e)||zl(e)||!Pi(e)||(Cy(e)>1&&(e.set=e.add=e.clear=e.delete=Yte),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>fw(r,!0))),e}function Yte(){Ds(2)}function Oy(e){return Object.isFrozen(e)}var Xte={};function Fl(e){const t=Xte[e];return t||Ds(0,e),t}var yf;function JP(){return yf}function Qte(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BO(e,t){t&&(Fl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function _S(e){xS(e),e.drafts_.forEach(Zte),e.drafts_=null}function xS(e){e===yf&&(yf=e.parent_)}function UO(e){return yf=Qte(yf,e)}function Zte(e){const t=e[$a];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function qO(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[$a].modified_&&(_S(t),Ds(4)),Pi(e)&&(e=Dp(t,e),t.parent_||Pp(t,e)),t.patches_&&Fl("Patches").generateReplacementPatches_(n[$a].base_,e,t.patches_,t.inversePatches_)):e=Dp(t,n,[]),_S(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==XP?e:void 0}function Dp(e,t,n){if(Oy(t))return t;const r=t[$a];if(!r)return Ip(t,(i,o)=>zO(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Pp(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,c=!1;r.type_===3&&(o=new Set(i),i.clear(),c=!0),Ip(o,(d,f)=>zO(e,r,i,d,f,n,c)),Pp(e,i,!1),n&&e.patches_&&Fl("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function zO(e,t,n,r,i,o,c){if(zl(i)){const d=o&&t&&t.type_!==3&&!vS(t.assigned_,r)?o.concat(r):void 0,f=Dp(e,i,d);if(ZP(n,r,f),zl(f))e.canAutoFreeze_=!1;else return}else c&&n.add(i);if(Pi(i)&&!Oy(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Dp(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Pp(e,i)}}function Pp(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fw(t,n)}function Jte(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:JP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=mw;n&&(i=[r],o=gf);const{revoke:c,proxy:d}=Proxy.revocable(i,o);return r.draft_=d,r.revoke_=c,d}var mw={get(e,t){if(t===$a)return e;const n=wl(e);if(!vS(n,t))return ene(e,n,t);const r=n[t];return e.finalized_||!Pi(r)?r:r===Wx(e.base_,t)?(Yx(e),e.copy_[t]=wS(r,e)):r},has(e,t){return t in wl(e)},ownKeys(e){return Reflect.ownKeys(wl(e))},set(e,t,n){const r=e$(wl(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Wx(wl(e),t),o=i?.[$a];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Wte(n,i)&&(n!==void 0||vS(e.base_,t)))return!0;Yx(e),SS(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Wx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Yx(e),SS(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=wl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Ds(11)},getPrototypeOf(e){return iu(e.base_)},setPrototypeOf(){Ds(12)}},gf={};Ip(mw,(e,t)=>{gf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});gf.deleteProperty=function(e,t){return gf.set.call(this,e,t,void 0)};gf.set=function(e,t,n){return mw.set.call(this,e[0],t,n,e[0])};function Wx(e,t){const n=e[$a];return(n?wl(n):e)[t]}function ene(e,t,n){const r=e$(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function e$(e,t){if(!(t in e))return;let n=iu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=iu(n)}}function SS(e){e.modified_||(e.modified_=!0,e.parent_&&SS(e.parent_))}function Yx(e){e.copy_||(e.copy_=bS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tne=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const c=this;return function(f=o,...m){return c.produce(f,h=>n.call(this,h,...m))}}typeof n!="function"&&Ds(6),r!==void 0&&typeof r!="function"&&Ds(7);let i;if(Pi(t)){const o=UO(this),c=wS(t,void 0);let d=!0;try{i=n(c),d=!1}finally{d?_S(o):xS(o)}return BO(o,r),qO(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===XP&&(i=void 0),this.autoFreeze_&&fw(i,!0),r){const o=[],c=[];Fl("Patches").generateReplacementPatches_(t,i,o,c),r(o,c)}return i}else Ds(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...d)=>this.produceWithPatches(c,f=>t(f,...d));let r,i;return[this.produce(t,n,(c,d)=>{r=c,i=d}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Pi(e)||Ds(8),zl(e)&&(e=ki(e));const t=UO(this),n=wS(e,void 0);return n[$a].isManual_=!0,xS(t),n}finishDraft(e,t){const n=e&&e[$a];(!n||!n.isManual_)&&Ds(9);const{scope_:r}=n;return BO(r,t),qO(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Fl("Patches").applyPatches_;return zl(e)?r(e,t):this.produce(e,i=>r(i,t))}};function wS(e,t){const n=Ty(e)?Fl("MapSet").proxyMap_(e,t):ky(e)?Fl("MapSet").proxySet_(e,t):Jte(e,t);return(t?t.scope_:JP()).drafts_.push(n),n}function ki(e){return zl(e)||Ds(10,e),t$(e)}function t$(e){if(!Pi(e)||Oy(e))return e;const t=e[$a];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=bS(e,t.scope_.immer_.useStrictShallowCopy_)}else n=bS(e,!0);return Ip(n,(r,i)=>{ZP(n,r,t$(i))}),t&&(t.finalized_=!1),n}var La=new tne,n$=La.produce;La.produceWithPatches.bind(La);La.setAutoFreeze.bind(La);La.setUseStrictShallowCopy.bind(La);La.applyPatches.bind(La);La.createDraft.bind(La);La.finishDraft.bind(La);function r$(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var nne=r$(),rne=r$,ane=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Mp:Mp.apply(null,arguments)};function ms(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Da(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>YP(r)&&r.type===e,n}var a$=class Xd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Xd.prototype)}static get[Symbol.species](){return Xd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Xd(...t[0].concat(this)):new Xd(...t.concat(this))}};function FO(e){return Pi(e)?n$(e,()=>{}):e}function Ih(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function sne(e){return typeof e=="boolean"}var ine=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let c=new a$;return n&&(sne(n)?c.push(nne):c.push(rne(n.extraArgument))),c},one="RTK_autoBatch",HO=e=>t=>{setTimeout(t,e)},lne=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,c=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:HO(10):e.type==="callback"?e.queueNotification:HO(e.timeout),m=()=>{c=!1,o&&(o=!1,d.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),v=r.subscribe(g);return d.add(h),()=>{v(),d.delete(h)}},dispatch(h){try{return i=!h?.meta?.[one],o=!i,o&&(c||(c=!0,f(m))),r.dispatch(h)}finally{i=!0}}})},cne=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new a$(e);return r&&i.push(lne(typeof r=="object"?r:void 0)),i};function une(e){const t=ine(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:c=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(dw(n))d=WP(n);else throw new Error(Da(1));let f;typeof r=="function"?f=r(t):f=t();let m=Mp;i&&(m=ane({trace:!1,...typeof i=="object"&&i}));const h=Kte(...f),g=cne(h);let v=typeof c=="function"?c(g):g();const x=m(...v);return GP(d,o,x)}function s$(e){const t={},n=[];let r;const i={addCase(o,c){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(Da(28));if(d in t)throw new Error(Da(29));return t[d]=c,i},addMatcher(o,c){return n.push({matcher:o,reducer:c}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function dne(e){return typeof e=="function"}function fne(e,t){let[n,r,i]=s$(t),o;if(dne(e))o=()=>FO(e());else{const d=FO(e);o=()=>d}function c(d=o(),f){let m=[n[f.type],...r.filter(({matcher:h})=>h(f)).map(({reducer:h})=>h)];return m.filter(h=>!!h).length===0&&(m=[i]),m.reduce((h,g)=>{if(g)if(zl(h)){const x=g(h,f);return x===void 0?h:x}else{if(Pi(h))return n$(h,v=>g(v,f));{const v=g(h,f);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},d)}return c.getInitialState=o,c}var mne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hne=(e=21)=>{let t="",n=e;for(;n--;)t+=mne[Math.random()*64|0];return t},pne=Symbol.for("rtk-slice-createasyncthunk");function yne(e,t){return`${e}/${t}`}function gne({creators:e}={}){const t=e?.asyncThunk?.[pne];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(Da(11));const c=(typeof r.reducers=="function"?r.reducers(bne()):r.reducers)||{},d=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(E,C){const T=typeof E=="string"?E:E.type;if(!T)throw new Error(Da(12));if(T in f.sliceCaseReducersByType)throw new Error(Da(13));return f.sliceCaseReducersByType[T]=C,m},addMatcher(E,C){return f.sliceMatchers.push({matcher:E,reducer:C}),m},exposeAction(E,C){return f.actionCreators[E]=C,m},exposeCaseReducer(E,C){return f.sliceCaseReducersByName[E]=C,m}};d.forEach(E=>{const C=c[E],T={reducerName:E,type:yne(i,E),createNotation:typeof r.reducers=="function"};xne(C)?wne(T,C,m,t):_ne(T,C,m)});function h(){const[E={},C=[],T=void 0]=typeof r.extraReducers=="function"?s$(r.extraReducers):[r.extraReducers],O={...E,...f.sliceCaseReducersByType};return fne(r.initialState,R=>{for(let k in O)R.addCase(k,O[k]);for(let k of f.sliceMatchers)R.addMatcher(k.matcher,k.reducer);for(let k of C)R.addMatcher(k.matcher,k.reducer);T&&R.addDefaultCase(T)})}const g=E=>E,v=new Map,x=new WeakMap;let w;function _(E,C){return w||(w=h()),w(E,C)}function S(){return w||(w=h()),w.getInitialState()}function j(E,C=!1){function T(R){let k=R[E];return typeof k>"u"&&C&&(k=Ih(x,T,S)),k}function O(R=g){const k=Ih(v,C,()=>new WeakMap);return Ih(k,R,()=>{const P={};for(const[H,K]of Object.entries(r.selectors??{}))P[H]=vne(K,R,()=>Ih(x,R,S),C);return P})}return{reducerPath:E,getSelectors:O,get selectors(){return O(T)},selectSlice:T}}const A={name:i,reducer:_,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...j(o),injectInto(E,{reducerPath:C,...T}={}){const O=C??o;return E.inject({reducerPath:O,reducer:_},T),{...A,...j(O,!0)}}};return A}}function vne(e,t,n,r){function i(o,...c){let d=t(o);return typeof d>"u"&&r&&(d=n()),e(d,...c)}return i.unwrapped=e,i}var bs=gne();function bne(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function _ne({type:e,reducerName:t,createNotation:n},r,i){let o,c;if("reducer"in r){if(n&&!Sne(r))throw new Error(Da(17));o=r.reducer,c=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,c?ms(e,c):ms(e))}function xne(e){return e._reducerDefinitionType==="asyncThunk"}function Sne(e){return e._reducerDefinitionType==="reducerWithPrepare"}function wne({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Da(18));const{payloadCreator:o,fulfilled:c,pending:d,rejected:f,settled:m,options:h}=n,g=i(e,o,h);r.exposeAction(t,g),c&&r.addCase(g.fulfilled,c),d&&r.addCase(g.pending,d),f&&r.addCase(g.rejected,f),m&&r.addMatcher(g.settled,m),r.exposeCaseReducer(t,{fulfilled:c||Dh,pending:d||Dh,rejected:f||Dh,settled:m||Dh})}function Dh(){}var jne="task",i$="listener",o$="completed",hw="cancelled",Nne=`task-${hw}`,Ane=`task-${o$}`,jS=`${i$}-${hw}`,Ene=`${i$}-${o$}`,Ry=class{constructor(e){this.code=e,this.message=`${jne} ${hw} (reason: ${e})`}name="TaskAbortError";message},pw=(e,t)=>{if(typeof e!="function")throw new TypeError(Da(32))},$p=()=>{},l$=(e,t=$p)=>(e.catch(t),e),c$=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Il=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Dl=e=>{if(e.aborted){const{reason:t}=e;throw new Ry(t)}};function u$(e,t){let n=$p;return new Promise((r,i)=>{const o=()=>i(new Ry(e.reason));if(e.aborted){o();return}n=c$(e,o),t.finally(()=>n()).then(r,i)}).finally(()=>{n=$p})}var Cne=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Ry?"cancelled":"rejected",error:n}}finally{t?.()}},Lp=e=>t=>l$(u$(e,t).then(n=>(Dl(e),n))),d$=e=>{const t=Lp(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Qc}=Object,VO={},My="listenerMiddleware",Tne=(e,t)=>{const n=r=>c$(e,()=>Il(r,e.reason));return(r,i)=>{pw(r);const o=new AbortController;n(o);const c=Cne(async()=>{Dl(e),Dl(o.signal);const d=await r({pause:Lp(o.signal),delay:d$(o.signal),signal:o.signal});return Dl(o.signal),d},()=>Il(o,Ane));return i?.autoJoin&&t.push(c.catch($p)),{result:Lp(e)(c),cancel(){Il(o,Nne)}}}},kne=(e,t)=>{const n=async(r,i)=>{Dl(t);let o=()=>{};const d=[new Promise((f,m)=>{let h=e({predicate:r,effect:(g,v)=>{v.unsubscribe(),f([g,v.getState(),v.getOriginalState()])}});o=()=>{h(),m()}})];i!=null&&d.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await u$(t,Promise.race(d));return Dl(t),f}finally{o()}};return(r,i)=>l$(n(r,i))},f$=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=ms(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Da(21));return pw(o),{predicate:i,type:t,effect:o}},m$=Qc(e=>{const{type:t,predicate:n,effect:r}=f$(e);return{id:hne(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Da(22))}}},{withTypes:()=>m$}),KO=(e,t)=>{const{type:n,effect:r,predicate:i}=f$(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},NS=e=>{e.pending.forEach(t=>{Il(t,jS)})},One=e=>()=>{e.forEach(NS),e.clear()},GO=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},h$=Qc(ms(`${My}/add`),{withTypes:()=>h$}),Rne=ms(`${My}/removeAll`),p$=Qc(ms(`${My}/remove`),{withTypes:()=>p$}),Mne=(...e)=>{console.error(`${My}/error`,...e)},Vf=(e={})=>{const t=new Map,{extra:n,onError:r=Mne}=e;pw(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),g=>{h.unsubscribe(),g?.cancelActive&&NS(h)}),o=h=>{const g=KO(t,h)??m$(h);return i(g)};Qc(o,{withTypes:()=>o});const c=h=>{const g=KO(t,h);return g&&(g.unsubscribe(),h.cancelActive&&NS(g)),!!g};Qc(c,{withTypes:()=>c});const d=async(h,g,v,x)=>{const w=new AbortController,_=kne(o,w.signal),S=[];try{h.pending.add(w),await Promise.resolve(h.effect(g,Qc({},v,{getOriginalState:x,condition:(j,A)=>_(j,A).then(Boolean),take:_,delay:d$(w.signal),pause:Lp(w.signal),extra:n,signal:w.signal,fork:Tne(w.signal,S),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((j,A,E)=>{j!==w&&(Il(j,jS),E.delete(j))})},cancel:()=>{Il(w,jS),h.pending.delete(w)},throwIfCancelled:()=>{Dl(w.signal)}})))}catch(j){j instanceof Ry||GO(r,j,{raisedBy:"effect"})}finally{await Promise.all(S),Il(w,Ene),h.pending.delete(w)}},f=One(t);return{middleware:h=>g=>v=>{if(!YP(v))return g(v);if(h$.match(v))return o(v.payload);if(Rne.match(v)){f();return}if(p$.match(v))return c(v.payload);let x=h.getState();const w=()=>{if(x===VO)throw new Error(Da(23));return x};let _;try{if(_=g(v),t.size>0){const S=h.getState(),j=Array.from(t.values());for(const A of j){let E=!1;try{E=A.predicate(v,S,x)}catch(C){E=!1,GO(r,C,{raisedBy:"predicate"})}E&&d(A,v,h,w)}}}finally{x=VO}return _},startListening:o,stopListening:c,clearListeners:f}};function Da(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ine={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},y$=bs({name:"chartLayout",initialState:Ine,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Dne,setLayout:Pne,setChartSize:$ne,setScale:Lne}=y$.actions,Bne=y$.reducer;function WO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(n),!0).forEach(function(r){Une(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Une(e,t,n){return(t=qne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qne(e){var t=zne(e,"string");return typeof t=="symbol"?t:t+""}function zne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bp=Math.PI/180,Fne=e=>e*180/Math.PI,Rr=(e,t,n,r)=>({x:e+Math.cos(-Bp*r)*n,y:t+Math.sin(-Bp*r)*n}),Hne=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Vne=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(r-o)**2)},Kne=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:o}=t,c=Vne({x:n,y:r},{x:i,y:o});if(c<=0)return{radius:c,angle:0};var d=(n-i)/c,f=Math.acos(d);return r>o&&(f=2*Math.PI-f),{radius:c,angle:Fne(f),angleInRadian:f}},Gne=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-o*360,endAngle:n-o*360}},Wne=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),o=Math.floor(r/360),c=Math.min(i,o);return e+c*360},Yne=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:o}=Kne({x:n,y:r},t),{innerRadius:c,outerRadius:d}=t;if(i<c||i>d||i===0)return null;var{startAngle:f,endAngle:m}=Gne(t),h=o,g;if(f<=m){for(;h>m;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=m}else{for(;h>f;)h-=360;for(;h<m;)h+=360;g=h>=m&&h<=f}return g?YO(YO({},t),{},{radius:i,angle:Wne(h,t)}):null};function XO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XO(Object(n),!0).forEach(function(r){Xne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xne(e,t,n){return(t=Qne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qne(e){var t=Zne(e,"string");return typeof t=="symbol"?t:t+""}function Zne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kr(e,t,n){return Nn(e)||Nn(t)?n:pa(t)?ql(e,t,n):typeof t=="function"?t(e):n}var Jne=(e,t,n,r,i)=>{var o,c=-1,d=(o=t?.length)!==null&&o!==void 0?o:0;if(d<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<d;f++){var m=f>0?n[f-1].coordinate:n[d-1].coordinate,h=n[f].coordinate,g=f>=d-1?n[0].coordinate:n[f+1].coordinate,v=void 0;if(ha(h-m)!==ha(g-h)){var x=[];if(ha(g-h)===ha(i[1]-i[0])){v=g;var w=h+i[1]-i[0];x[0]=Math.min(w,(w+m)/2),x[1]=Math.max(w,(w+m)/2)}else{v=m;var _=g+i[1]-i[0];x[0]=Math.min(h,(_+h)/2),x[1]=Math.max(h,(_+h)/2)}var S=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:c}=n[f]);break}}else{var j=Math.min(m,g),A=Math.max(m,g);if(e>(j+h)/2&&e<=(A+h)/2){({index:c}=n[f]);break}}}else if(t){for(var E=0;E<d;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<d-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===d-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:c}=t[E]);break}}return c},ere=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:o,verticalAlign:c,layout:d}=t;if((d==="vertical"||d==="horizontal"&&c==="middle")&&o!=="center"&&ft(e[o]))return is(is({},e),{},{[o]:e[o]+(r||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&c!=="middle"&&ft(e[c]))return is(is({},e),{},{[c]:e[c]+(i||0)})}return e},Wo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",g$=(e,t,n,r)=>{if(r)return e.map(d=>d.coordinate);var i,o,c=e.map(d=>(d.coordinate===t&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate));return i||c.push(t),o||c.push(n),c},v$=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:o,scale:c,realScaleType:d,isCategorical:f,categoricalDomain:m,tickCount:h,ticks:g,niceTicks:v,axisType:x}=e;if(!c)return null;var w=d==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,_=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(_=x==="angleAxis"&&o&&o.length>=2?ha(o[0]-o[1])*2*_:_,g||v){var S=(g||v||[]).map((j,A)=>{var E=r?r.indexOf(j):j;return{coordinate:c(E)+_,value:j,offset:_,index:A}});return S.filter(j=>!Pa(j.coordinate))}return f&&m?m.map((j,A)=>({coordinate:c(j)+_,value:j,index:A,offset:_})):c.ticks&&h!=null?c.ticks(h).map((j,A)=>({coordinate:c(j)+_,value:j,offset:_,index:A})):c.domain().map((j,A)=>({coordinate:c(j)+_,value:r?r[j]:j,index:A,offset:_}))},QO=1e-4,tre=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-QO,o=Math.max(r[0],r[1])+QO,c=e(t[0]),d=e(t[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([t[0],t[n-1]])}},nre=(e,t)=>{if(!t||t.length!==2||!ft(t[0])||!ft(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ft(e[0])||e[0]<n)&&(i[0]=n),(!ft(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},rre=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,c=0;c<t;++c){var d=Pa(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},are=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var c=Pa(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},sre={sign:rre,expand:Iee,none:su,silhouette:Dee,wiggle:Pee,positive:are},ire=(e,t,n)=>{var r=sre[n],i=Mee().keys(t).value((o,c)=>+Kr(o,c,0)).order(pS).offset(r);return i(e)};function b$(e){return e==null?void 0:String(e)}function ZO(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:o,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Nn(i[t.dataKey])){var d=hP(n,"value",i[t.dataKey]);if(d)return d.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var f=Kr(i,Nn(c)?t.dataKey:c);return Nn(f)?null:t.scale(f)}var JO=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:o,index:c}=e;if(t.type==="category")return n[c]?n[c].coordinate+r:null;var d=Kr(o,t.dataKey,t.scale.domain()[c]);return Nn(d)?null:t.scale(d)-i/2+r},ore=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},lre=e=>{var t=e.flat(2).filter(ft);return[Math.min(...t),Math.max(...t)]},cre=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],ure=(e,t,n)=>{if(e!=null)return cre(Object.keys(e).reduce((r,i)=>{var o=e[i],{stackedData:c}=o,d=c.reduce((f,m)=>{var h=lre(m.slice(t,n+1));return[Math.min(f[0],h[0]),Math.max(f[1],h[1])]},[1/0,-1/0]);return[Math.min(d[0],r[0]),Math.max(d[1],r[1])]},[1/0,-1/0]))},eR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vf=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Ey(t,h=>h.coordinate),o=1/0,c=1,d=i.length;c<d;c++){var f=i[c],m=i[c-1];o=Math.min((f.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function nR(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:o}=e;return is(is({},t),{},{dataKey:n,payload:r,value:i,name:o})}function Iy(e,t){if(e)return String(e);if(typeof t=="string")return t}function dre(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var o=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return o?{x:e,y:t}:null}return r?Yne({x:e,y:t},r):null}var fre=(e,t,n,r)=>{var i=t.find(m=>m&&m.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,{radius:c}=r;return is(is(is({},r),Rr(r.cx,r.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,{angle:f}=r;return is(is(is({},r),Rr(r.cx,r.cy,d,f)),{},{angle:f,radius:d})}return{x:0,y:0}},mre=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Fi=e=>e.layout.width,Hi=e=>e.layout.height,hre=e=>e.layout.scale,_$=e=>e.layout.margin,yw=ke(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),gw=ke(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),pre="data-recharts-item-index",yre="data-recharts-item-data-key",Dy=60;function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(r){gre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gre(e,t,n){return(t=vre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vre(e){var t=bre(e,"string");return typeof t=="symbol"?t:t+""}function bre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _re=e=>e.brush.height,xr=ke([Fi,Hi,_$,_re,yw,gw,VP,Bte],(e,t,n,r,i,o,c,d)=>{var f=o.reduce((w,_)=>{var{orientation:S}=_;if(!_.mirror&&!_.hide){var j=typeof _.width=="number"?_.width:Dy;return wo(wo({},w),{},{[S]:w[S]+j})}return w},{left:n.left||0,right:n.right||0}),m=i.reduce((w,_)=>{var{orientation:S}=_;return!_.mirror&&!_.hide?wo(wo({},w),{},{[S]:ql(w,"".concat(S))+_.height}):w},{top:n.top||0,bottom:n.bottom||0}),h=wo(wo({},m),f),g=h.bottom;h.bottom+=r,h=ere(h,c,d);var v=e-h.left-h.right,x=t-h.top-h.bottom;return wo(wo({brushBottom:g},h),{},{width:Math.max(v,0),height:Math.max(x,0)})}),xre=ke(xr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),x$=ke(Fi,Hi,(e,t)=>({x:0,y:0,width:e,height:t})),Sre=p.createContext(null),Wr=()=>p.useContext(Sre)!=null,Py=e=>e.brush,$y=ke([Py,xr,_$],(e,t,n)=>({height:e.height,x:ft(e.x)?e.x:t.left,y:ft(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:ft(e.width)?e.width:t.width})),vw=()=>{var e,t=Wr(),n=pt(xre),r=pt($y),i=(e=pt(Py))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},wre={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},S$=()=>{var e;return(e=pt(xr))!==null&&e!==void 0?e:wre},bw=()=>pt(Fi),_w=()=>pt(Hi),jre={top:0,right:0,bottom:0,left:0},Nre=()=>{var e;return(e=pt(t=>t.layout.margin))!==null&&e!==void 0?e:jre},gn=e=>e.layout.layoutType,Ly=()=>pt(gn),Are={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},w$=bs({name:"legend",initialState:Are,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=ki(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:aR,setLegendSettings:Ere,addLegendPayload:Cre,removeLegendPayload:Tre}=w$.actions,kre=w$.reducer,Ore=["contextPayload"];function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AS.apply(null,arguments)}function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(n),!0).forEach(function(r){xw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xw(e,t,n){return(t=Rre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rre(e){var t=Mre(e,"string");return typeof t=="symbol"?t:t+""}function Mre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ire(e,t){if(e==null)return{};var n,r,i=Dre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dre(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Pre(e){return e.value}function $re(e){var{contextPayload:t}=e,n=Ire(e,Ore),r=qP(t,e.payloadUniqBy,Pre),i=ou(ou({},n),{},{payload:r});return p.isValidElement(e.content)?p.cloneElement(e.content,i):typeof e.content=="function"?p.createElement(e.content,i):p.createElement(aw,i)}function Lre(e,t,n,r,i,o){var{layout:c,align:d,verticalAlign:f}=t,m,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&c==="vertical"?m={left:((r||0)-o.width)/2}:m=d==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?h={top:((i||0)-o.height)/2}:h=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),ou(ou({},m),h)}function Bre(e){var t=Gn();return p.useEffect(()=>{t(Ere(e))},[t,e]),null}function Ure(e){var t=Gn();return p.useEffect(()=>(t(aR(e)),()=>{t(aR({width:0,height:0}))}),[t,e]),null}function qre(e){var t=zte(),n=ree(),r=Nre(),{width:i,height:o,wrapperStyle:c,portal:d}=e,[f,m]=KP([t]),h=bw(),g=_w(),v=h-(r.left||0)-(r.right||0),x=Kf.getWidthOrHeight(e.layout,o,i,v),w=d?c:ou(ou({position:"absolute",width:x?.width||i||"auto",height:x?.height||o||"auto"},Lre(c,e,r,h,g,f)),c),_=d??n;if(_==null)return null;var S=p.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:m},p.createElement(Bre,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),p.createElement(Ure,{width:f.width,height:f.height}),p.createElement($re,AS({},e,x,{margin:r,chartWidth:h,chartHeight:g,contextPayload:t})));return op.createPortal(S,_)}class Kf extends p.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&ft(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return p.createElement(qre,this.props)}}xw(Kf,"displayName","Legend");xw(Kf,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ES.apply(null,arguments)}function iR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iR(Object(n),!0).forEach(function(r){zre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zre(e,t,n){return(t=Fre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fre(e){var t=Hre(e,"string");return typeof t=="symbol"?t:t+""}function Hre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vre(e){return Array.isArray(e)&&pa(e[0])&&pa(e[1])?e.join(" ~ "):e}var Kre=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:c,itemSorter:d,wrapperClassName:f,labelClassName:m,label:h,labelFormatter:g,accessibilityLayer:v=!1}=e,x=()=>{if(o&&o.length){var T={padding:0,margin:0},O=(d?Ey(o,d):o).map((R,k)=>{if(R.type==="none")return null;var P=R.formatter||c||Vre,{value:H,name:K}=R,B=H,U=K;if(P){var I=P(H,K,R,k,o);if(Array.isArray(I))[B,U]=I;else if(I!=null)B=I;else return null}var L=Xx({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},r);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:L},pa(U)?p.createElement("span",{className:"recharts-tooltip-item-name"},U):null,pa(U)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},B),p.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:T},O)}return null},w=Xx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),_=Xx({margin:0},i),S=!Nn(h),j=S?h:"",A=mn("recharts-default-tooltip",f),E=mn("recharts-tooltip-label",m);S&&g&&o!==void 0&&o!==null&&(j=g(h,o));var C=v?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",ES({className:A,style:w},C),p.createElement("p",{className:E,style:_},p.isValidElement(j)?j:"".concat(j)),x())},Id="recharts-tooltip-wrapper",Gre={visibility:"hidden"};function Wre(e){var{coordinate:t,translateX:n,translateY:r}=e;return mn(Id,{["".concat(Id,"-right")]:ft(n)&&t&&ft(t.x)&&n>=t.x,["".concat(Id,"-left")]:ft(n)&&t&&ft(t.x)&&n<t.x,["".concat(Id,"-bottom")]:ft(r)&&t&&ft(t.y)&&r>=t.y,["".concat(Id,"-top")]:ft(r)&&t&&ft(t.y)&&r<t.y})}function oR(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:c,tooltipDimension:d,viewBox:f,viewBoxDimension:m}=e;if(o&&ft(o[r]))return o[r];var h=n[r]-d-(i>0?i:0),g=n[r]+i;if(t[r])return c[r]?h:g;var v=f[r];if(v==null)return 0;if(c[r]){var x=h,w=v;return x<w?Math.max(g,v):Math.max(h,v)}if(m==null)return 0;var _=g+d,S=v+m;return _>S?Math.max(h,v):Math.max(g,v)}function Yre(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Xre(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:c,useTranslate3d:d,viewBox:f}=e,m,h,g;return c.height>0&&c.width>0&&n?(h=oR({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:c.width,viewBox:f,viewBoxDimension:f.width}),g=oR({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:c.height,viewBox:f,viewBoxDimension:f.height}),m=Yre({translateX:h,translateY:g,useTranslate3d:d})):m=Gre,{cssProperties:m,cssClasses:Wre({translateX:h,translateY:g,coordinate:n})}}function lR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ph(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lR(Object(n),!0).forEach(function(r){CS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CS(e,t,n){return(t=Qre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qre(e){var t=Zre(e,"string");return typeof t=="symbol"?t:t+""}function Zre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Jre extends p.PureComponent{constructor(){super(...arguments),CS(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),CS(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:c,hasPayload:d,isAnimationActive:f,offset:m,position:h,reverseDirection:g,useTranslate3d:v,viewBox:x,wrapperStyle:w,lastBoundingBox:_,innerRef:S,hasPortalFromProps:j}=this.props,{cssClasses:A,cssProperties:E}=Xre({allowEscapeViewBox:n,coordinate:c,offsetTopLeft:m,position:h,reverseDirection:g,tooltipBox:{height:_.height,width:_.width},useTranslate3d:v,viewBox:x}),C=j?{}:Ph(Ph({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),T=Ph(Ph({},C),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},w);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:T,ref:S},o)}}var eae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Nu={isSsr:eae()},j$=()=>pt(e=>e.rootProps.accessibilityLayer);function Ba(e){return Number.isFinite(e)}function Up(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TS.apply(null,arguments)}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(r){tae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tae(e,t,n){return(t=nae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nae(e){var t=rae(e,"string");return typeof t=="symbol"?t:t+""}function rae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dR={curveBasisClosed:See,curveBasisOpen:wee,curveBasis:xee,curveBumpX:oee,curveBumpY:lee,curveLinearClosed:jee,curveLinear:Ny,curveMonotoneX:Nee,curveMonotoneY:Aee,curveNatural:Eee,curveStep:Cee,curveStepAfter:kee,curveStepBefore:Tee},$h=e=>Ba(e.x)&&Ba(e.y),Dd=e=>e.x,Pd=e=>e.y,aae=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Hf(e));return(n==="curveMonotone"||n==="curveBump")&&t?dR["".concat(n).concat(t==="vertical"?"Y":"X")]:dR[n]||Ny},sae=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=e,c=aae(t,i),d=o?n.filter($h):n,f;if(Array.isArray(r)){var m=o?r.filter(g=>$h(g)):r,h=d.map((g,v)=>uR(uR({},g),{},{base:m[v]}));return i==="vertical"?f=Oh().y(Pd).x1(Dd).x0(g=>g.base.x):f=Oh().x(Dd).y1(Pd).y0(g=>g.base.y),f.defined($h).curve(c),f(h)}return i==="vertical"&&ft(r)?f=Oh().y(Pd).x1(Dd).x0(r):ft(r)?f=Oh().x(Dd).y1(Pd).y0(r):f=wP().x(Dd).y(Pd),f.defined($h).curve(c),f(d)},N$=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var o=n&&n.length?sae(e):r;return p.createElement("path",TS({},dn(e,!1),X1(e),{className:mn("recharts-curve",t),d:o===null?void 0:o,ref:i}))},iae=["x","y","top","left","width","height","className"];function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kS.apply(null,arguments)}function fR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fR(Object(n),!0).forEach(function(r){lae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lae(e,t,n){return(t=cae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cae(e){var t=uae(e,"string");return typeof t=="symbol"?t:t+""}function uae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dae(e,t){if(e==null)return{};var n,r,i=fae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var mae=(e,t,n,r,i,o)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),hae=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:o=0,height:c=0,className:d}=e,f=dae(e,iae),m=oae({x:t,y:n,top:r,left:i,width:o,height:c},f);return!ft(t)||!ft(n)||!ft(o)||!ft(c)||!ft(r)||!ft(i)?null:p.createElement("path",kS({},dn(m,!0),{className:mn("recharts-cross",d),d:mae(t,n,o,c,r,i)}))};function pae(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(r){gae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gae(e,t,n){return(t=vae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vae(e){var t=bae(e,"string");return typeof t=="symbol"?t:t+""}function bae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vi(e,t){var n=yae({},e),r=t,i=Object.keys(t),o=i.reduce((c,d)=>(c[d]===void 0&&r[d]!==void 0&&(c[d]=r[d]),c),n);return o}var Qx={},Zx={},Jx={},hR;function _ae(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t})(Jx)),Jx}var pR;function xae(){return pR||(pR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_ae(),n=LP(),r=lw(),i=cw(),o=iw();function c(m,h,g){return d(m,h,void 0,void 0,void 0,void 0,g)}function d(m,h,g,v,x,w,_){const S=_(m,h,g,v,x,w);if(S!==void 0)return S;if(typeof m==typeof h)switch(typeof m){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return m===h;case"number":return m===h||Object.is(m,h);case"function":return m===h;case"object":return f(m,h,w,_)}return f(m,h,w,_)}function f(m,h,g,v){if(Object.is(m,h))return!0;let x=r.getTag(m),w=r.getTag(h);if(x===i.argumentsTag&&(x=i.objectTag),w===i.argumentsTag&&(w=i.objectTag),x!==w)return!1;switch(x){case i.stringTag:return m.toString()===h.toString();case i.numberTag:{const j=m.valueOf(),A=h.valueOf();return o.eq(j,A)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(m.valueOf(),h.valueOf());case i.regexpTag:return m.source===h.source&&m.flags===h.flags;case i.functionTag:return m===h}g=g??new Map;const _=g.get(m),S=g.get(h);if(_!=null&&S!=null)return _===h;g.set(m,h),g.set(h,m);try{switch(x){case i.mapTag:{if(m.size!==h.size)return!1;for(const[j,A]of m.entries())if(!h.has(j)||!d(A,h.get(j),j,m,h,g,v))return!1;return!0}case i.setTag:{if(m.size!==h.size)return!1;const j=Array.from(m.values()),A=Array.from(h.values());for(let E=0;E<j.length;E++){const C=j[E],T=A.findIndex(O=>d(C,O,void 0,m,h,g,v));if(T===-1)return!1;A.splice(T,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(m)!==Buffer.isBuffer(h)||m.length!==h.length)return!1;for(let j=0;j<m.length;j++)if(!d(m[j],h[j],j,m,h,g,v))return!1;return!0}case i.arrayBufferTag:return m.byteLength!==h.byteLength?!1:f(new Uint8Array(m),new Uint8Array(h),g,v);case i.dataViewTag:return m.byteLength!==h.byteLength||m.byteOffset!==h.byteOffset?!1:f(new Uint8Array(m),new Uint8Array(h),g,v);case i.errorTag:return m.name===h.name&&m.message===h.message;case i.objectTag:{if(!(f(m.constructor,h.constructor,g,v)||t.isPlainObject(m)&&t.isPlainObject(h)))return!1;const A=[...Object.keys(m),...n.getSymbols(m)],E=[...Object.keys(h),...n.getSymbols(h)];if(A.length!==E.length)return!1;for(let C=0;C<A.length;C++){const T=A[C],O=m[T];if(!Object.hasOwn(h,T))return!1;const R=h[T];if(!d(O,R,T,m,h,g,v))return!1}return!0}default:return!1}}finally{g.delete(m),g.delete(h)}}e.isEqualWith=c})(Zx)),Zx}var e0={},yR;function Sae(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(e0)),e0}var gR;function wae(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xae(),n=Sae();function r(i,o){return t.isEqualWith(i,o,n.noop)}e.isEqual=r})(Qx)),Qx}var t0,vR;function jae(){return vR||(vR=1,t0=wae().isEqual),t0}var Nae=jae();const Aae=ps(Nae);function Eae(e){var t={},n=()=>null,r=!1,i=null,o=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var d=c,[f,...m]=d;if(typeof f=="number"){i=e.setTimeout(o.bind(null,m),f);return}o(f),i=e.setTimeout(o.bind(null,m));return}typeof c=="object"&&(t=c,n(t)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,i&&(i(),i=null),o(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>e}}var qp=1e-4,A$=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],E$=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),bR=(e,t)=>n=>{var r=A$(e,t);return E$(r,n)},Cae=(e,t)=>n=>{var r=A$(e,t),i=[...r.map((o,c)=>o*c).slice(1),0];return E$(i,n)},_R=function(){for(var t,n,r,i,o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];if(c.length===1)switch(c[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=c[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else c.length===4&&([t,r,n,i]=c);var m=bR(t,n),h=bR(r,i),g=Cae(t,n),v=w=>w>1?1:w<0?0:w,x=w=>{for(var _=w>1?1:w,S=_,j=0;j<8;++j){var A=m(S)-_,E=g(S);if(Math.abs(A-_)<qp||E<qp)return h(S);S=v(S-A/E)}return h(S)};return x.isStepper=!1,x},Tae=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,o=(c,d,f)=>{var m=-(c-d)*n,h=f*r,g=f+(m-h)*i/1e3,v=f*i/1e3+c;return Math.abs(v-d)<qp&&Math.abs(g)<qp?[d,0]:[v,g]};return o.isStepper=!0,o.dt=i,o},kae=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _R(e);case"spring":return Tae();default:if(e.split("(")[0]==="cubic-bezier")return _R(e)}return typeof e=="function"?e:null};function xR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(n),!0).forEach(function(r){Oae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oae(e,t,n){return(t=Rae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rae(e){var t=Mae(e,"string");return typeof t=="symbol"?t:t+""}function Mae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iae=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Dae=(e,t,n)=>e.map(r=>"".concat(Iae(r)," ").concat(t,"ms ").concat(n)).join(","),Pae=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),bf=(e,t)=>Object.keys(t).reduce((n,r)=>SR(SR({},n),{},{[r]:e(r,t[r])}),{});function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(r){$ae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $ae(e,t,n){return(t=Lae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lae(e){var t=Bae(e,"string");return typeof t=="symbol"?t:t+""}function Bae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zp=(e,t,n)=>e+(t-e)*n,OS=e=>{var{from:t,to:n}=e;return t!==n},C$=(e,t,n)=>{var r=bf((i,o)=>{if(OS(o)){var[c,d]=e(o.from,o.to,o.velocity);return Or(Or({},o),{},{from:c,velocity:d})}return o},t);return n<1?bf((i,o)=>OS(o)?Or(Or({},o),{},{velocity:zp(o.velocity,r[i].velocity,n),from:zp(o.from,r[i].from,n)}):o,t):C$(e,r,n-1)};function Uae(e,t,n,r,i,o){var c,d=r.reduce((v,x)=>Or(Or({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),f=()=>bf((v,x)=>x.from,d),m=()=>!Object.values(d).filter(OS).length,h=null,g=v=>{c||(c=v);var x=v-c,w=x/n.dt;d=C$(n,d,w),i(Or(Or(Or({},e),t),f())),c=v,m()||(h=o.setTimeout(g))};return()=>(h=o.setTimeout(g),()=>{h()})}function qae(e,t,n,r,i,o,c){var d=null,f=i.reduce((g,v)=>Or(Or({},g),{},{[v]:[e[v],t[v]]}),{}),m,h=g=>{m||(m=g);var v=(g-m)/r,x=bf((_,S)=>zp(...S,n(v)),f);if(o(Or(Or(Or({},e),t),x)),v<1)d=c.setTimeout(h);else{var w=bf((_,S)=>zp(...S,n(1)),f);o(Or(Or(Or({},e),t),w))}};return()=>(d=c.setTimeout(h),()=>{d()})}const zae=(e,t,n,r,i,o)=>{var c=Pae(e,t);return n.isStepper===!0?Uae(e,t,n,c,i,o):qae(e,t,n,r,c,i,o)};class Fae{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=c=>{c-r>=n?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}var Hae=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RS.apply(null,arguments)}function Vae(e,t){if(e==null)return{};var n,r,i=Kae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(n),!0).forEach(function(r){Tl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tl(e,t,n){return(t=Gae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gae(e){var t=Wae(e,"string");return typeof t=="symbol"?t:t+""}function Wae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yae(){return Eae(new Fae)}class Sw extends p.PureComponent{constructor(t,n){super(t,n),Tl(this,"mounted",!1),Tl(this,"manager",null),Tl(this,"stopJSAnimation",null),Tl(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:o,to:c,children:d,duration:f,animationManager:m}=this.props;if(this.manager=m,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||f<=0){this.state={style:{}},typeof d=="function"&&(this.state={style:c});return}if(o){if(typeof d=="function"){this.state={style:o};return}this.state={style:i?{[i]:o}:o}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:o,to:c,from:d}=this.props,{style:f}=this.state;if(r){if(!n){var m={style:i?{[i]:c}:c};this.state&&f&&(i&&f[i]!==c||!i&&f!==c)&&this.setState(m);return}if(!(Aae(t.to,c)&&t.canBegin&&t.isActive)){var h=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=h||o?d:t.to;if(this.state&&f){var v={style:i?{[i]:g}:g};(i&&f[i]!==g||!i&&f!==g)&&this.setState(v)}this.runAnimation(jo(jo({},this.props),{},{from:g,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:r,duration:i,easing:o,begin:c,onAnimationEnd:d,onAnimationStart:f}=t,m=zae(n,r,kae(o),i,this.changeStyle,this.manager.getTimeoutController()),h=()=>{this.stopJSAnimation=m()};this.manager.start([f,c,h,i,d])}runAnimation(t){var{begin:n,duration:r,attributeName:i,to:o,easing:c,onAnimationStart:d,onAnimationEnd:f,children:m}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof c=="function"||typeof m=="function"||c==="spring"){this.runJSAnimation(t);return}var h=i?{[i]:o}:o,g=Dae(Object.keys(h),r,c);this.manager.start([d,n,jo(jo({},h),{},{transition:g}),r,f])}render(){var t=this.props,{children:n,begin:r,duration:i,attributeName:o,easing:c,isActive:d,from:f,to:m,canBegin:h,onAnimationEnd:g,shouldReAnimate:v,onAnimationReStart:x,animationManager:w}=t,_=Vae(t,Hae),S=p.Children.count(n),j=this.state.style;if(typeof n=="function")return n(j);if(!d||S===0||i<=0)return n;var A=E=>{var{style:C={},className:T}=E.props,O=p.cloneElement(E,jo(jo({},_),{},{style:jo(jo({},C),j),className:T}));return O};return S===1?A(p.Children.only(n)):p.createElement("div",null,p.Children.map(n,E=>A(E)))}}Tl(Sw,"displayName","Animate");Tl(Sw,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var Xae=p.createContext(null);function Hl(e){var t,n,r=p.useContext(Xae);return p.createElement(Sw,RS({},e,{animationManager:(t=(n=e.animationManager)!==null&&n!==void 0?n:r)!==null&&t!==void 0?t:Yae()}))}function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fp.apply(null,arguments)}var NR=(e,t,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),c=r>=0?1:-1,d=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,m;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,v=4;g<v;g++)h[g]=i[g]>o?o:i[g];m="M".concat(e,",").concat(t+c*h[0]),h[0]>0&&(m+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(f,",").concat(e+d*h[0],",").concat(t)),m+="L ".concat(e+n-d*h[1],",").concat(t),h[1]>0&&(m+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+c*h[1])),m+="L ".concat(e+n,",").concat(t+r-c*h[2]),h[2]>0&&(m+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(f,`,
        `).concat(e+n-d*h[2],",").concat(t+r)),m+="L ".concat(e+d*h[3],",").concat(t+r),h[3]>0&&(m+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+r-c*h[3])),m+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);m="M ".concat(e,",").concat(t+c*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+d*x,",").concat(t,`
            L `).concat(e+n-d*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+n,",").concat(t+c*x,`
            L `).concat(e+n,",").concat(t+r-c*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+n-d*x,",").concat(t+r,`
            L `).concat(e+d*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e,",").concat(t+r-c*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return m},Qae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ww=e=>{var t=Vi(e,Qae),n=p.useRef(null),[r,i]=p.useState(-1);p.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&i(j)}catch{}},[]);var{x:o,y:c,width:d,height:f,radius:m,className:h}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:_}=t;if(o!==+o||c!==+c||d!==+d||f!==+f||d===0||f===0)return null;var S=mn("recharts-rectangle",h);return _?p.createElement(Hl,{canBegin:r>0,from:{width:d,height:f,x:o,y:c},to:{width:d,height:f,x:o,y:c},duration:v,animationEasing:g,isActive:_},j=>{var{width:A,height:E,x:C,y:T}=j;return p.createElement(Hl,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:w,easing:g},p.createElement("path",Fp({},dn(t,!0),{className:S,d:NR(C,T,A,E,m),ref:n})))}):p.createElement("path",Fp({},dn(t,!0),{className:S,d:NR(o,c,d,f,m)}))};function T$(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:o}=e,c=Rr(t,n,r,i),d=Rr(t,n,r,o);return{points:[c,d],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MS.apply(null,arguments)}var Zae=(e,t)=>{var n=ha(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Lh=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:o,isExternal:c,cornerRadius:d,cornerIsExternal:f}=e,m=d*(c?1:-1)+r,h=Math.asin(d/m)/Bp,g=f?i:i+o*h,v=Rr(t,n,m,g),x=Rr(t,n,r,g),w=f?i-o*h:i,_=Rr(t,n,m*Math.cos(h*Bp),w);return{center:v,circleTangency:x,lineTangency:_,theta:h}},k$=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:c}=e,d=Zae(o,c),f=o+d,m=Rr(t,n,i,o),h=Rr(t,n,i,f),g="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>f),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var v=Rr(t,n,r,o),x=Rr(t,n,r,f);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(t,",").concat(n," Z");return g},Jae=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:m}=e,h=ha(m-f),{circleTangency:g,lineTangency:v,theta:x}=Lh({cx:t,cy:n,radius:i,angle:f,sign:h,cornerRadius:o,cornerIsExternal:d}),{circleTangency:w,lineTangency:_,theta:S}=Lh({cx:t,cy:n,radius:i,angle:m,sign:-h,cornerRadius:o,cornerIsExternal:d}),j=d?Math.abs(f-m):Math.abs(f-m)-x-S;if(j<0)return c?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):k$({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:m});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(r>0){var{circleTangency:E,lineTangency:C,theta:T}=Lh({cx:t,cy:n,radius:r,angle:f,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:O,lineTangency:R,theta:k}=Lh({cx:t,cy:n,radius:r,angle:m,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),P=d?Math.abs(f-m):Math.abs(f-m)-T-k;if(P<0&&o===0)return"".concat(A,"L").concat(t,",").concat(n,"Z");A+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(P>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else A+="L".concat(t,",").concat(n,"Z");return A},ese={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},O$=e=>{var t=Vi(e,ese),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:c,forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:h,className:g}=t;if(o<i||m===h)return null;var v=mn("recharts-sector",g),x=o-i,w=$s(c,x,0,!0),_;return w>0&&Math.abs(m-h)<360?_=Jae({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(w,x/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:h}):_=k$({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:m,endAngle:h}),p.createElement("path",MS({},dn(t,!0),{className:v,d:_}))};function tse(e,t,n){var r,i,o,c;if(e==="horizontal")r=t.x,o=r,i=n.top,c=n.top+n.height;else if(e==="vertical")i=t.y,c=i,r=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:d,cy:f,innerRadius:m,outerRadius:h,angle:g}=t,v=Rr(d,f,m,g),x=Rr(d,f,h,g);r=v.x,i=v.y,o=x.x,c=x.y}else return T$(t);return[{x:r,y:i},{x:o,y:c}]}var n0={},r0={},a0={},AR;function nse(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FP();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(a0)),a0}var ER;function rse(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nse();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(r0)),r0}var CR;function ase(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),n=rse();function r(i,o,c){c&&typeof c!="number"&&t.isIterateeCall(i,o,c)&&(o=c=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),c=c===void 0?i<o?1:-1:n.toFinite(c);const d=Math.max(Math.ceil((o-i)/(c||1)),0),f=new Array(d);for(let m=0;m<d;m++)f[m]=i,i+=c;return f}e.range=r})(n0)),n0}var s0,TR;function sse(){return TR||(TR=1,s0=ase().range),s0}var ise=sse();const R$=ps(ise);function Bo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ose(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jw(e){let t,n,r;e.length!==2?(t=Bo,n=(d,f)=>Bo(e(d),f),r=(d,f)=>e(d)-f):(t=e===Bo||e===ose?e:lse,n=e,r=e);function i(d,f,m=0,h=d.length){if(m<h){if(t(f,f)!==0)return h;do{const g=m+h>>>1;n(d[g],f)<0?m=g+1:h=g}while(m<h)}return m}function o(d,f,m=0,h=d.length){if(m<h){if(t(f,f)!==0)return h;do{const g=m+h>>>1;n(d[g],f)<=0?m=g+1:h=g}while(m<h)}return m}function c(d,f,m=0,h=d.length){const g=i(d,f,m,h-1);return g>m&&r(d[g-1],f)>-r(d[g],f)?g-1:g}return{left:i,center:c,right:o}}function lse(){return 0}function M$(e){return e===null?NaN:+e}function*cse(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const use=jw(Bo),Gf=use.right;jw(M$).center;class kR extends Map{constructor(t,n=mse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(OR(this,t))}has(t){return super.has(OR(this,t))}set(t,n){return super.set(dse(this,t),n)}delete(t){return super.delete(fse(this,t))}}function OR({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function dse({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function fse({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function mse(e){return e!==null&&typeof e=="object"?e.valueOf():e}function hse(e=Bo){if(e===Bo)return I$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function I$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const pse=Math.sqrt(50),yse=Math.sqrt(10),gse=Math.sqrt(2);function Hp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),c=o>=pse?10:o>=yse?5:o>=gse?2:1;let d,f,m;return i<0?(m=Math.pow(10,-i)/c,d=Math.round(e*m),f=Math.round(t*m),d/m<e&&++d,f/m>t&&--f,m=-m):(m=Math.pow(10,i)*c,d=Math.round(e/m),f=Math.round(t/m),d*m<e&&++d,f*m>t&&--f),f<d&&.5<=n&&n<2?Hp(e,t,n*2):[d,f,m]}function IS(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,c]=r?Hp(t,e,n):Hp(e,t,n);if(!(o>=i))return[];const d=o-i+1,f=new Array(d);if(r)if(c<0)for(let m=0;m<d;++m)f[m]=(o-m)/-c;else for(let m=0;m<d;++m)f[m]=(o-m)*c;else if(c<0)for(let m=0;m<d;++m)f[m]=(i+m)/-c;else for(let m=0;m<d;++m)f[m]=(i+m)*c;return f}function DS(e,t,n){return t=+t,e=+e,n=+n,Hp(e,t,n)[2]}function PS(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?DS(t,e,n):DS(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function RR(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function MR(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function D$(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?I$:hse(i);r>n;){if(r-n>600){const f=r-n+1,m=t-n+1,h=Math.log(f),g=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*g*(f-g)/f)*(m-f/2<0?-1:1),x=Math.max(n,Math.floor(t-m*g/f+v)),w=Math.min(r,Math.floor(t+(f-m)*g/f+v));D$(e,t,x,w,i)}const o=e[t];let c=n,d=r;for($d(e,n,t),i(e[r],o)>0&&$d(e,n,r);c<d;){for($d(e,c,d),++c,--d;i(e[c],o)<0;)++c;for(;i(e[d],o)>0;)--d}i(e[n],o)===0?$d(e,n,d):(++d,$d(e,d,r)),d<=t&&(n=d+1),t<=d&&(r=d-1)}return e}function $d(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function vse(e,t,n){if(e=Float64Array.from(cse(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return MR(e);if(t>=1)return RR(e);var r,i=(r-1)*t,o=Math.floor(i),c=RR(D$(e,o).subarray(0,o+1)),d=MR(e.subarray(o+1));return c+(d-c)*(i-o)}}function bse(e,t,n=M$){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),c=+n(e[o],o,e),d=+n(e[o+1],o+1,e);return c+(d-c)*(i-o)}}function _se(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function _s(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ki(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $S=Symbol("implicit");function Nw(){var e=new kR,t=[],n=[],r=$S;function i(o){let c=e.get(o);if(c===void 0){if(r!==$S)return r;e.set(o,c=t.push(o)-1)}return n[c%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new kR;for(const c of o)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Nw(t,n).unknown(r)},_s.apply(i,arguments),i}function Aw(){var e=Nw().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,c,d=!1,f=0,m=0,h=.5;delete e.unknown;function g(){var v=t().length,x=i<r,w=x?i:r,_=x?r:i;o=(_-w)/Math.max(1,v-f+m*2),d&&(o=Math.floor(o)),w+=(_-w-o*(v-f))*h,c=o*(1-f),d&&(w=Math.round(w),c=Math.round(c));var S=_se(v).map(function(j){return w+o*j});return n(x?S.reverse():S)}return e.domain=function(v){return arguments.length?(t(v),g()):t()},e.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,d=!0,g()},e.bandwidth=function(){return c},e.step=function(){return o},e.round=function(v){return arguments.length?(d=!!v,g()):d},e.padding=function(v){return arguments.length?(f=Math.min(1,m=+v),g()):f},e.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),g()):f},e.paddingOuter=function(v){return arguments.length?(m=+v,g()):m},e.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),g()):h},e.copy=function(){return Aw(t(),[r,i]).round(d).paddingInner(f).paddingOuter(m).align(h)},_s.apply(g(),arguments)}function P$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return P$(t())},e}function xse(){return P$(Aw.apply(null,arguments).paddingInner(1))}function Ew(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $$(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Wf(){}var _f=.7,Vp=1/_f,Zc="\\s*([+-]?\\d+)\\s*",xf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sse=/^#([0-9a-f]{3,8})$/,wse=new RegExp(`^rgb\\(${Zc},${Zc},${Zc}\\)$`),jse=new RegExp(`^rgb\\(${ti},${ti},${ti}\\)$`),Nse=new RegExp(`^rgba\\(${Zc},${Zc},${Zc},${xf}\\)$`),Ase=new RegExp(`^rgba\\(${ti},${ti},${ti},${xf}\\)$`),Ese=new RegExp(`^hsl\\(${xf},${ti},${ti}\\)$`),Cse=new RegExp(`^hsla\\(${xf},${ti},${ti},${xf}\\)$`),IR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ew(Wf,Sf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:DR,formatHex:DR,formatHex8:Tse,formatHsl:kse,formatRgb:PR,toString:PR});function DR(){return this.rgb().formatHex()}function Tse(){return this.rgb().formatHex8()}function kse(){return L$(this).formatHsl()}function PR(){return this.rgb().formatRgb()}function Sf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sse.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$R(t):n===3?new ya(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wse.exec(e))?new ya(t[1],t[2],t[3],1):(t=jse.exec(e))?new ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Nse.exec(e))?Bh(t[1],t[2],t[3],t[4]):(t=Ase.exec(e))?Bh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ese.exec(e))?UR(t[1],t[2]/100,t[3]/100,1):(t=Cse.exec(e))?UR(t[1],t[2]/100,t[3]/100,t[4]):IR.hasOwnProperty(e)?$R(IR[e]):e==="transparent"?new ya(NaN,NaN,NaN,0):null}function $R(e){return new ya(e>>16&255,e>>8&255,e&255,1)}function Bh(e,t,n,r){return r<=0&&(e=t=n=NaN),new ya(e,t,n,r)}function Ose(e){return e instanceof Wf||(e=Sf(e)),e?(e=e.rgb(),new ya(e.r,e.g,e.b,e.opacity)):new ya}function LS(e,t,n,r){return arguments.length===1?Ose(e):new ya(e,t,n,r??1)}function ya(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ew(ya,LS,$$(Wf,{brighter(e){return e=e==null?Vp:Math.pow(Vp,e),new ya(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new ya(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ya(Pl(this.r),Pl(this.g),Pl(this.b),Kp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LR,formatHex:LR,formatHex8:Rse,formatRgb:BR,toString:BR}));function LR(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}`}function Rse(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}${kl((isNaN(this.opacity)?1:this.opacity)*255)}`}function BR(){const e=Kp(this.opacity);return`${e===1?"rgb(":"rgba("}${Pl(this.r)}, ${Pl(this.g)}, ${Pl(this.b)}${e===1?")":`, ${e})`}`}function Kp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kl(e){return e=Pl(e),(e<16?"0":"")+e.toString(16)}function UR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ps(e,t,n,r)}function L$(e){if(e instanceof Ps)return new Ps(e.h,e.s,e.l,e.opacity);if(e instanceof Wf||(e=Sf(e)),!e)return new Ps;if(e instanceof Ps)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),c=NaN,d=o-i,f=(o+i)/2;return d?(t===o?c=(n-r)/d+(n<r)*6:n===o?c=(r-t)/d+2:c=(t-n)/d+4,d/=f<.5?o+i:2-o-i,c*=60):d=f>0&&f<1?0:c,new Ps(c,d,f,e.opacity)}function Mse(e,t,n,r){return arguments.length===1?L$(e):new Ps(e,t,n,r??1)}function Ps(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ew(Ps,Mse,$$(Wf,{brighter(e){return e=e==null?Vp:Math.pow(Vp,e),new Ps(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new Ps(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ya(i0(e>=240?e-240:e+120,i,r),i0(e,i,r),i0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ps(qR(this.h),Uh(this.s),Uh(this.l),Kp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kp(this.opacity);return`${e===1?"hsl(":"hsla("}${qR(this.h)}, ${Uh(this.s)*100}%, ${Uh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qR(e){return e=(e||0)%360,e<0?e+360:e}function Uh(e){return Math.max(0,Math.min(1,e||0))}function i0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Cw=e=>()=>e;function Ise(e,t){return function(n){return e+n*t}}function Dse(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Pse(e){return(e=+e)==1?B$:function(t,n){return n-t?Dse(t,n,e):Cw(isNaN(t)?n:t)}}function B$(e,t){var n=t-e;return n?Ise(e,n):Cw(isNaN(e)?t:e)}const zR=(function e(t){var n=Pse(t);function r(i,o){var c=n((i=LS(i)).r,(o=LS(o)).r),d=n(i.g,o.g),f=n(i.b,o.b),m=B$(i.opacity,o.opacity);return function(h){return i.r=c(h),i.g=d(h),i.b=f(h),i.opacity=m(h),i+""}}return r.gamma=e,r})(1);function $se(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Lse(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Bse(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),c;for(c=0;c<r;++c)i[c]=Au(e[c],t[c]);for(;c<n;++c)o[c]=t[c];return function(d){for(c=0;c<r;++c)o[c]=i[c](d);return o}}function Use(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qse(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Au(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var BS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o0=new RegExp(BS.source,"g");function zse(e){return function(){return e}}function Fse(e){return function(t){return e(t)+""}}function Hse(e,t){var n=BS.lastIndex=o0.lastIndex=0,r,i,o,c=-1,d=[],f=[];for(e=e+"",t=t+"";(r=BS.exec(e))&&(i=o0.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),d[c]?d[c]+=o:d[++c]=o),(r=r[0])===(i=i[0])?d[c]?d[c]+=i:d[++c]=i:(d[++c]=null,f.push({i:c,x:Gp(r,i)})),n=o0.lastIndex;return n<t.length&&(o=t.slice(n),d[c]?d[c]+=o:d[++c]=o),d.length<2?f[0]?Fse(f[0].x):zse(t):(t=f.length,function(m){for(var h=0,g;h<t;++h)d[(g=f[h]).i]=g.x(m);return d.join("")})}function Au(e,t){var n=typeof t,r;return t==null||n==="boolean"?Cw(t):(n==="number"?Gp:n==="string"?(r=Sf(t))?(t=r,zR):Hse:t instanceof Sf?zR:t instanceof Date?Use:Lse(t)?$se:Array.isArray(t)?Bse:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qse:Gp)(e,t)}function Tw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Vse(e,t){t===void 0&&(t=e,e=Au);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(c){var d=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return o[d](c-d)}}function Kse(e){return function(){return e}}function Wp(e){return+e}var FR=[0,1];function aa(e){return e}function US(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Kse(isNaN(t)?NaN:.5)}function Gse(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Wse(e,t,n){var r=e[0],i=e[1],o=t[0],c=t[1];return i<r?(r=US(i,r),o=n(c,o)):(r=US(r,i),o=n(o,c)),function(d){return o(r(d))}}function Yse(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),c=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<r;)i[c]=US(e[c],e[c+1]),o[c]=n(t[c],t[c+1]);return function(d){var f=Gf(e,d,1,r)-1;return o[f](i[f](d))}}function Yf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function By(){var e=FR,t=FR,n=Au,r,i,o,c=aa,d,f,m;function h(){var v=Math.min(e.length,t.length);return c!==aa&&(c=Gse(e[0],e[v-1])),d=v>2?Yse:Wse,f=m=null,g}function g(v){return v==null||isNaN(v=+v)?o:(f||(f=d(e.map(r),t,n)))(r(c(v)))}return g.invert=function(v){return c(i((m||(m=d(t,e.map(r),Gp)))(v)))},g.domain=function(v){return arguments.length?(e=Array.from(v,Wp),h()):e.slice()},g.range=function(v){return arguments.length?(t=Array.from(v),h()):t.slice()},g.rangeRound=function(v){return t=Array.from(v),n=Tw,h()},g.clamp=function(v){return arguments.length?(c=v?!0:aa,h()):c!==aa},g.interpolate=function(v){return arguments.length?(n=v,h()):n},g.unknown=function(v){return arguments.length?(o=v,g):o},function(v,x){return r=v,i=x,h()}}function kw(){return By()(aa,aa)}function Xse(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function lu(e){return e=Yp(Math.abs(e)),e?e[1]:NaN}function Qse(e,t){return function(n,r){for(var i=n.length,o=[],c=0,d=e[0],f=0;i>0&&d>0&&(f+d+1>r&&(d=Math.max(1,r-f)),o.push(n.substring(i-=d,i+d)),!((f+=d+1)>r));)d=e[c=(c+1)%e.length];return o.reverse().join(t)}}function Zse(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Jse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wf(e){if(!(t=Jse.exec(e)))throw new Error("invalid format: "+e);var t;return new Ow({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}wf.prototype=Ow.prototype;function Ow(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ow.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eie(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var U$;function tie(e,t){var n=Yp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(U$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return o===c?r:o>c?r+new Array(o-c+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Yp(e,Math.max(0,t+o-1))[0]}function HR(e,t){var n=Yp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const VR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xse,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HR(e*100,t),r:HR,s:tie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KR(e){return e}var GR=Array.prototype.map,WR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nie(e){var t=e.grouping===void 0||e.thousands===void 0?KR:Qse(GR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?KR:Zse(GR.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function m(g){g=wf(g);var v=g.fill,x=g.align,w=g.sign,_=g.symbol,S=g.zero,j=g.width,A=g.comma,E=g.precision,C=g.trim,T=g.type;T==="n"?(A=!0,T="g"):VR[T]||(E===void 0&&(E=12),C=!0,T="g"),(S||v==="0"&&x==="=")&&(S=!0,v="0",x="=");var O=_==="$"?n:_==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",R=_==="$"?r:/[%p]/.test(T)?c:"",k=VR[T],P=/[defgprs%]/.test(T);E=E===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function H(K){var B=O,U=R,I,L,$;if(T==="c")U=k(K)+U,K="";else{K=+K;var G=K<0||1/K<0;if(K=isNaN(K)?f:k(Math.abs(K),E),C&&(K=eie(K)),G&&+K==0&&w!=="+"&&(G=!1),B=(G?w==="("?w:d:w==="-"||w==="("?"":w)+B,U=(T==="s"?WR[8+U$/3]:"")+U+(G&&w==="("?")":""),P){for(I=-1,L=K.length;++I<L;)if($=K.charCodeAt(I),48>$||$>57){U=($===46?i+K.slice(I+1):K.slice(I))+U,K=K.slice(0,I);break}}}A&&!S&&(K=t(K,1/0));var te=B.length+K.length+U.length,re=te<j?new Array(j-te+1).join(v):"";switch(A&&S&&(K=t(re+K,re.length?j-U.length:1/0),re=""),x){case"<":K=B+K+U+re;break;case"=":K=B+re+K+U;break;case"^":K=re.slice(0,te=re.length>>1)+B+K+U+re.slice(te);break;default:K=re+B+K+U;break}return o(K)}return H.toString=function(){return g+""},H}function h(g,v){var x=m((g=wf(g),g.type="f",g)),w=Math.max(-8,Math.min(8,Math.floor(lu(v)/3)))*3,_=Math.pow(10,-w),S=WR[8+w/3];return function(j){return x(_*j)+S}}return{format:m,formatPrefix:h}}var qh,Rw,q$;rie({thousands:",",grouping:[3],currency:["$",""]});function rie(e){return qh=nie(e),Rw=qh.format,q$=qh.formatPrefix,qh}function aie(e){return Math.max(0,-lu(Math.abs(e)))}function sie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lu(t)/3)))*3-lu(Math.abs(e)))}function iie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,lu(t)-lu(e))+1}function z$(e,t,n,r){var i=PS(e,t,n),o;switch(r=wf(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=sie(i,c))&&(r.precision=o),q$(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=iie(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=aie(i))&&(r.precision=o-(r.type==="%")*2);break}}return Rw(r)}function Yo(e){var t=e.domain;return e.ticks=function(n){var r=t();return IS(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return z$(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,c=r[i],d=r[o],f,m,h=10;for(d<c&&(m=c,c=d,d=m,m=i,i=o,o=m);h-- >0;){if(m=DS(c,d,n),m===f)return r[i]=c,r[o]=d,t(r);if(m>0)c=Math.floor(c/m)*m,d=Math.ceil(d/m)*m;else if(m<0)c=Math.ceil(c*m)/m,d=Math.floor(d*m)/m;else break;f=m}return e},e}function F$(){var e=kw();return e.copy=function(){return Yf(e,F$())},_s.apply(e,arguments),Yo(e)}function H$(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Wp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return H$(e).unknown(t)},e=arguments.length?Array.from(e,Wp):[0,1],Yo(n)}function V$(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],c;return o<i&&(c=n,n=r,r=c,c=i,i=o,o=c),e[n]=t.floor(i),e[r]=t.ceil(o),e}function YR(e){return Math.log(e)}function XR(e){return Math.exp(e)}function oie(e){return-Math.log(-e)}function lie(e){return-Math.exp(-e)}function cie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uie(e){return e===10?cie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function die(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QR(e){return(t,n)=>-e(-t,n)}function Mw(e){const t=e(YR,XR),n=t.domain;let r=10,i,o;function c(){return i=die(r),o=uie(r),n()[0]<0?(i=QR(i),o=QR(o),e(oie,lie)):e(YR,XR),t}return t.base=function(d){return arguments.length?(r=+d,c()):r},t.domain=function(d){return arguments.length?(n(d),c()):n()},t.ticks=d=>{const f=n();let m=f[0],h=f[f.length-1];const g=h<m;g&&([m,h]=[h,m]);let v=i(m),x=i(h),w,_;const S=d==null?10:+d;let j=[];if(!(r%1)&&x-v<S){if(v=Math.floor(v),x=Math.ceil(x),m>0){for(;v<=x;++v)for(w=1;w<r;++w)if(_=v<0?w/o(-v):w*o(v),!(_<m)){if(_>h)break;j.push(_)}}else for(;v<=x;++v)for(w=r-1;w>=1;--w)if(_=v>0?w/o(-v):w*o(v),!(_<m)){if(_>h)break;j.push(_)}j.length*2<S&&(j=IS(m,h,S))}else j=IS(v,x,Math.min(x-v,S)).map(o);return g?j.reverse():j},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=wf(f)).precision==null&&(f.trim=!0),f=Rw(f)),d===1/0)return f;const m=Math.max(1,r*d/t.ticks().length);return h=>{let g=h/o(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=m?f(h):""}},t.nice=()=>n(V$(n(),{floor:d=>o(Math.floor(i(d))),ceil:d=>o(Math.ceil(i(d)))})),t}function K$(){const e=Mw(By()).domain([1,10]);return e.copy=()=>Yf(e,K$()).base(e.base()),_s.apply(e,arguments),e}function ZR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Iw(e){var t=1,n=e(ZR(t),JR(t));return n.constant=function(r){return arguments.length?e(ZR(t=+r),JR(t)):t},Yo(n)}function G$(){var e=Iw(By());return e.copy=function(){return Yf(e,G$()).constant(e.constant())},_s.apply(e,arguments)}function e2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function mie(e){return e<0?-e*e:e*e}function Dw(e){var t=e(aa,aa),n=1;function r(){return n===1?e(aa,aa):n===.5?e(fie,mie):e(e2(n),e2(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Yo(t)}function Pw(){var e=Dw(By());return e.copy=function(){return Yf(e,Pw()).exponent(e.exponent())},_s.apply(e,arguments),e}function hie(){return Pw.apply(null,arguments).exponent(.5)}function t2(e){return Math.sign(e)*e*e}function pie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function W$(){var e=kw(),t=[0,1],n=!1,r;function i(o){var c=pie(e(o));return isNaN(c)?r:n?Math.round(c):c}return i.invert=function(o){return e.invert(t2(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,Wp)).map(t2)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return W$(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},_s.apply(i,arguments),Yo(i)}function Y$(){var e=[],t=[],n=[],r;function i(){var c=0,d=Math.max(1,t.length);for(n=new Array(d-1);++c<d;)n[c-1]=bse(e,c/d);return o}function o(c){return c==null||isNaN(c=+c)?r:t[Gf(n,c)]}return o.invertExtent=function(c){var d=t.indexOf(c);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},o.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let d of c)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Bo),i()},o.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},o.unknown=function(c){return arguments.length?(r=c,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Y$().domain(e).range(t).unknown(r)},_s.apply(o,arguments)}function X$(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function c(f){return f!=null&&f<=f?i[Gf(r,f,0,n)]:o}function d(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return c}return c.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},c.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,d()):i.slice()},c.invertExtent=function(f){var m=i.indexOf(f);return m<0?[NaN,NaN]:m<1?[e,r[0]]:m>=n?[r[n-1],t]:[r[m-1],r[m]]},c.unknown=function(f){return arguments.length&&(o=f),c},c.thresholds=function(){return r.slice()},c.copy=function(){return X$().domain([e,t]).range(i).unknown(o)},_s.apply(Yo(c),arguments)}function Q$(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Gf(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var c=t.indexOf(o);return[e[c-1],e[c]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Q$().domain(e).range(t).unknown(n)},_s.apply(i,arguments)}const l0=new Date,c0=new Date;function hr(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const c=i(o),d=i.ceil(o);return o-c<d-o?c:d},i.offset=(o,c)=>(t(o=new Date(+o),c==null?1:Math.floor(c)),o),i.range=(o,c,d)=>{const f=[];if(o=i.ceil(o),d=d==null?1:Math.floor(d),!(o<c)||!(d>0))return f;let m;do f.push(m=new Date(+o)),t(o,d),e(o);while(m<o&&o<c);return f},i.filter=o=>hr(c=>{if(c>=c)for(;e(c),!o(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;t(c,-1),!o(c););else for(;--d>=0;)for(;t(c,1),!o(c););}),n&&(i.count=(o,c)=>(l0.setTime(+o),c0.setTime(+c),e(l0),e(c0),Math.floor(n(l0,c0))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?c=>r(c)%o===0:c=>i.count(0,c)%o===0):i)),i}const Xp=hr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?hr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xp);Xp.range;const Ni=1e3,ls=Ni*60,Ai=ls*60,$i=Ai*24,$w=$i*7,n2=$i*30,u0=$i*365,Ol=hr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getUTCSeconds());Ol.range;const Lw=hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ni)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getMinutes());Lw.range;const Bw=hr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getUTCMinutes());Bw.range;const Uw=hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ni-e.getMinutes()*ls)},(e,t)=>{e.setTime(+e+t*Ai)},(e,t)=>(t-e)/Ai,e=>e.getHours());Uw.range;const qw=hr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ai)},(e,t)=>(t-e)/Ai,e=>e.getUTCHours());qw.range;const Xf=hr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ls)/$i,e=>e.getDate()-1);Xf.range;const Uy=hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$i,e=>e.getUTCDate()-1);Uy.range;const Z$=hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$i,e=>Math.floor(e/$i));Z$.range;function Yl(e){return hr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ls)/$w)}const qy=Yl(0),Qp=Yl(1),yie=Yl(2),gie=Yl(3),cu=Yl(4),vie=Yl(5),bie=Yl(6);qy.range;Qp.range;yie.range;gie.range;cu.range;vie.range;bie.range;function Xl(e){return hr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/$w)}const zy=Xl(0),Zp=Xl(1),_ie=Xl(2),xie=Xl(3),uu=Xl(4),Sie=Xl(5),wie=Xl(6);zy.range;Zp.range;_ie.range;xie.range;uu.range;Sie.range;wie.range;const zw=hr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zw.range;const Fw=hr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Fw.range;const Li=hr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Li.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Li.range;const Bi=hr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Bi.range;function J$(e,t,n,r,i,o){const c=[[Ol,1,Ni],[Ol,5,5*Ni],[Ol,15,15*Ni],[Ol,30,30*Ni],[o,1,ls],[o,5,5*ls],[o,15,15*ls],[o,30,30*ls],[i,1,Ai],[i,3,3*Ai],[i,6,6*Ai],[i,12,12*Ai],[r,1,$i],[r,2,2*$i],[n,1,$w],[t,1,n2],[t,3,3*n2],[e,1,u0]];function d(m,h,g){const v=h<m;v&&([m,h]=[h,m]);const x=g&&typeof g.range=="function"?g:f(m,h,g),w=x?x.range(m,+h+1):[];return v?w.reverse():w}function f(m,h,g){const v=Math.abs(h-m)/g,x=jw(([,,S])=>S).right(c,v);if(x===c.length)return e.every(PS(m/u0,h/u0,g));if(x===0)return Xp.every(Math.max(PS(m,h,g),1));const[w,_]=c[v/c[x-1][2]<c[x][2]/v?x-1:x];return w.every(_)}return[d,f]}const[jie,Nie]=J$(Bi,Fw,zy,Z$,qw,Bw),[Aie,Eie]=J$(Li,zw,qy,Xf,Uw,Lw);function d0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function f0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ld(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Cie(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,c=e.shortDays,d=e.months,f=e.shortMonths,m=Bd(i),h=Ud(i),g=Bd(o),v=Ud(o),x=Bd(c),w=Ud(c),_=Bd(d),S=Ud(d),j=Bd(f),A=Ud(f),E={a:G,A:te,b:re,B:M,c:null,d:l2,e:l2,f:Qie,g:ooe,G:coe,H:Wie,I:Yie,j:Xie,L:eL,m:Zie,M:Jie,p:q,q:z,Q:d2,s:f2,S:eoe,u:toe,U:noe,V:roe,w:aoe,W:soe,x:null,X:null,y:ioe,Y:loe,Z:uoe,"%":u2},C={a:V,A:Y,b:Z,B:ee,c:null,d:c2,e:c2,f:hoe,g:joe,G:Aoe,H:doe,I:foe,j:moe,L:nL,m:poe,M:yoe,p:ie,q:xe,Q:d2,s:f2,S:goe,u:voe,U:boe,V:_oe,w:xoe,W:Soe,x:null,X:null,y:woe,Y:Noe,Z:Eoe,"%":u2},T={a:H,A:K,b:B,B:U,c:I,d:i2,e:i2,f:Hie,g:s2,G:a2,H:o2,I:o2,j:Uie,L:Fie,m:Bie,M:qie,p:P,q:Lie,Q:Kie,s:Gie,S:zie,u:Mie,U:Iie,V:Die,w:Rie,W:Pie,x:L,X:$,y:s2,Y:a2,Z:$ie,"%":Vie};E.x=O(n,E),E.X=O(r,E),E.c=O(t,E),C.x=O(n,C),C.X=O(r,C),C.c=O(t,C);function O(X,Ae){return function(he){var ue=[],Xe=-1,Ue=0,ye=X.length,je,Ee,qe;for(he instanceof Date||(he=new Date(+he));++Xe<ye;)X.charCodeAt(Xe)===37&&(ue.push(X.slice(Ue,Xe)),(Ee=r2[je=X.charAt(++Xe)])!=null?je=X.charAt(++Xe):Ee=je==="e"?" ":"0",(qe=Ae[je])&&(je=qe(he,Ee)),ue.push(je),Ue=Xe+1);return ue.push(X.slice(Ue,Xe)),ue.join("")}}function R(X,Ae){return function(he){var ue=Ld(1900,void 0,1),Xe=k(ue,X,he+="",0),Ue,ye;if(Xe!=he.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Ae&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Ue=f0(Ld(ue.y,0,1)),ye=Ue.getUTCDay(),Ue=ye>4||ye===0?Zp.ceil(Ue):Zp(Ue),Ue=Uy.offset(Ue,(ue.V-1)*7),ue.y=Ue.getUTCFullYear(),ue.m=Ue.getUTCMonth(),ue.d=Ue.getUTCDate()+(ue.w+6)%7):(Ue=d0(Ld(ue.y,0,1)),ye=Ue.getDay(),Ue=ye>4||ye===0?Qp.ceil(Ue):Qp(Ue),Ue=Xf.offset(Ue,(ue.V-1)*7),ue.y=Ue.getFullYear(),ue.m=Ue.getMonth(),ue.d=Ue.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),ye="Z"in ue?f0(Ld(ue.y,0,1)).getUTCDay():d0(Ld(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(ye+5)%7:ue.w+ue.U*7-(ye+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,f0(ue)):d0(ue)}}function k(X,Ae,he,ue){for(var Xe=0,Ue=Ae.length,ye=he.length,je,Ee;Xe<Ue;){if(ue>=ye)return-1;if(je=Ae.charCodeAt(Xe++),je===37){if(je=Ae.charAt(Xe++),Ee=T[je in r2?Ae.charAt(Xe++):je],!Ee||(ue=Ee(X,he,ue))<0)return-1}else if(je!=he.charCodeAt(ue++))return-1}return ue}function P(X,Ae,he){var ue=m.exec(Ae.slice(he));return ue?(X.p=h.get(ue[0].toLowerCase()),he+ue[0].length):-1}function H(X,Ae,he){var ue=x.exec(Ae.slice(he));return ue?(X.w=w.get(ue[0].toLowerCase()),he+ue[0].length):-1}function K(X,Ae,he){var ue=g.exec(Ae.slice(he));return ue?(X.w=v.get(ue[0].toLowerCase()),he+ue[0].length):-1}function B(X,Ae,he){var ue=j.exec(Ae.slice(he));return ue?(X.m=A.get(ue[0].toLowerCase()),he+ue[0].length):-1}function U(X,Ae,he){var ue=_.exec(Ae.slice(he));return ue?(X.m=S.get(ue[0].toLowerCase()),he+ue[0].length):-1}function I(X,Ae,he){return k(X,t,Ae,he)}function L(X,Ae,he){return k(X,n,Ae,he)}function $(X,Ae,he){return k(X,r,Ae,he)}function G(X){return c[X.getDay()]}function te(X){return o[X.getDay()]}function re(X){return f[X.getMonth()]}function M(X){return d[X.getMonth()]}function q(X){return i[+(X.getHours()>=12)]}function z(X){return 1+~~(X.getMonth()/3)}function V(X){return c[X.getUTCDay()]}function Y(X){return o[X.getUTCDay()]}function Z(X){return f[X.getUTCMonth()]}function ee(X){return d[X.getUTCMonth()]}function ie(X){return i[+(X.getUTCHours()>=12)]}function xe(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var Ae=O(X+="",E);return Ae.toString=function(){return X},Ae},parse:function(X){var Ae=R(X+="",!1);return Ae.toString=function(){return X},Ae},utcFormat:function(X){var Ae=O(X+="",C);return Ae.toString=function(){return X},Ae},utcParse:function(X){var Ae=R(X+="",!0);return Ae.toString=function(){return X},Ae}}}var r2={"-":"",_:" ",0:"0"},Sr=/^\s*\d+/,Tie=/^%/,kie=/[\\^$*+?|[\]().{}]/g;function ln(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Oie(e){return e.replace(kie,"\\$&")}function Bd(e){return new RegExp("^(?:"+e.map(Oie).join("|")+")","i")}function Ud(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Rie(e,t,n){var r=Sr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Mie(e,t,n){var r=Sr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Iie(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Die(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Pie(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function a2(e,t,n){var r=Sr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function s2(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $ie(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Lie(e,t,n){var r=Sr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Bie(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function i2(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Uie(e,t,n){var r=Sr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function o2(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function qie(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function zie(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Fie(e,t,n){var r=Sr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Hie(e,t,n){var r=Sr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Vie(e,t,n){var r=Tie.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Kie(e,t,n){var r=Sr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Gie(e,t,n){var r=Sr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function l2(e,t){return ln(e.getDate(),t,2)}function Wie(e,t){return ln(e.getHours(),t,2)}function Yie(e,t){return ln(e.getHours()%12||12,t,2)}function Xie(e,t){return ln(1+Xf.count(Li(e),e),t,3)}function eL(e,t){return ln(e.getMilliseconds(),t,3)}function Qie(e,t){return eL(e,t)+"000"}function Zie(e,t){return ln(e.getMonth()+1,t,2)}function Jie(e,t){return ln(e.getMinutes(),t,2)}function eoe(e,t){return ln(e.getSeconds(),t,2)}function toe(e){var t=e.getDay();return t===0?7:t}function noe(e,t){return ln(qy.count(Li(e)-1,e),t,2)}function tL(e){var t=e.getDay();return t>=4||t===0?cu(e):cu.ceil(e)}function roe(e,t){return e=tL(e),ln(cu.count(Li(e),e)+(Li(e).getDay()===4),t,2)}function aoe(e){return e.getDay()}function soe(e,t){return ln(Qp.count(Li(e)-1,e),t,2)}function ioe(e,t){return ln(e.getFullYear()%100,t,2)}function ooe(e,t){return e=tL(e),ln(e.getFullYear()%100,t,2)}function loe(e,t){return ln(e.getFullYear()%1e4,t,4)}function coe(e,t){var n=e.getDay();return e=n>=4||n===0?cu(e):cu.ceil(e),ln(e.getFullYear()%1e4,t,4)}function uoe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ln(t/60|0,"0",2)+ln(t%60,"0",2)}function c2(e,t){return ln(e.getUTCDate(),t,2)}function doe(e,t){return ln(e.getUTCHours(),t,2)}function foe(e,t){return ln(e.getUTCHours()%12||12,t,2)}function moe(e,t){return ln(1+Uy.count(Bi(e),e),t,3)}function nL(e,t){return ln(e.getUTCMilliseconds(),t,3)}function hoe(e,t){return nL(e,t)+"000"}function poe(e,t){return ln(e.getUTCMonth()+1,t,2)}function yoe(e,t){return ln(e.getUTCMinutes(),t,2)}function goe(e,t){return ln(e.getUTCSeconds(),t,2)}function voe(e){var t=e.getUTCDay();return t===0?7:t}function boe(e,t){return ln(zy.count(Bi(e)-1,e),t,2)}function rL(e){var t=e.getUTCDay();return t>=4||t===0?uu(e):uu.ceil(e)}function _oe(e,t){return e=rL(e),ln(uu.count(Bi(e),e)+(Bi(e).getUTCDay()===4),t,2)}function xoe(e){return e.getUTCDay()}function Soe(e,t){return ln(Zp.count(Bi(e)-1,e),t,2)}function woe(e,t){return ln(e.getUTCFullYear()%100,t,2)}function joe(e,t){return e=rL(e),ln(e.getUTCFullYear()%100,t,2)}function Noe(e,t){return ln(e.getUTCFullYear()%1e4,t,4)}function Aoe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?uu(e):uu.ceil(e),ln(e.getUTCFullYear()%1e4,t,4)}function Eoe(){return"+0000"}function u2(){return"%"}function d2(e){return+e}function f2(e){return Math.floor(+e/1e3)}var Dc,aL,sL;Coe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Coe(e){return Dc=Cie(e),aL=Dc.format,Dc.parse,sL=Dc.utcFormat,Dc.utcParse,Dc}function Toe(e){return new Date(e)}function koe(e){return e instanceof Date?+e:+new Date(+e)}function Hw(e,t,n,r,i,o,c,d,f,m){var h=kw(),g=h.invert,v=h.domain,x=m(".%L"),w=m(":%S"),_=m("%I:%M"),S=m("%I %p"),j=m("%a %d"),A=m("%b %d"),E=m("%B"),C=m("%Y");function T(O){return(f(O)<O?x:d(O)<O?w:c(O)<O?_:o(O)<O?S:r(O)<O?i(O)<O?j:A:n(O)<O?E:C)(O)}return h.invert=function(O){return new Date(g(O))},h.domain=function(O){return arguments.length?v(Array.from(O,koe)):v().map(Toe)},h.ticks=function(O){var R=v();return e(R[0],R[R.length-1],O??10)},h.tickFormat=function(O,R){return R==null?T:m(R)},h.nice=function(O){var R=v();return(!O||typeof O.range!="function")&&(O=t(R[0],R[R.length-1],O??10)),O?v(V$(R,O)):h},h.copy=function(){return Yf(h,Hw(e,t,n,r,i,o,c,d,f,m))},h}function Ooe(){return _s.apply(Hw(Aie,Eie,Li,zw,qy,Xf,Uw,Lw,Ol,aL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Roe(){return _s.apply(Hw(jie,Nie,Bi,Fw,zy,Uy,qw,Bw,Ol,sL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fy(){var e=0,t=1,n,r,i,o,c=aa,d=!1,f;function m(g){return g==null||isNaN(g=+g)?f:c(i===0?.5:(g=(o(g)-n)*i,d?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t]=g,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),m):[e,t]},m.clamp=function(g){return arguments.length?(d=!!g,m):d},m.interpolator=function(g){return arguments.length?(c=g,m):c};function h(g){return function(v){var x,w;return arguments.length?([x,w]=v,c=g(x,w),m):[c(0),c(1)]}}return m.range=h(Au),m.rangeRound=h(Tw),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return o=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),m}}function Xo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iL(){var e=Yo(Fy()(aa));return e.copy=function(){return Xo(e,iL())},Ki.apply(e,arguments)}function oL(){var e=Mw(Fy()).domain([1,10]);return e.copy=function(){return Xo(e,oL()).base(e.base())},Ki.apply(e,arguments)}function lL(){var e=Iw(Fy());return e.copy=function(){return Xo(e,lL()).constant(e.constant())},Ki.apply(e,arguments)}function Vw(){var e=Dw(Fy());return e.copy=function(){return Xo(e,Vw()).exponent(e.exponent())},Ki.apply(e,arguments)}function Moe(){return Vw.apply(null,arguments).exponent(.5)}function cL(){var e=[],t=aa;function n(r){if(r!=null&&!isNaN(r=+r))return t((Gf(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Bo),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>vse(e,o/r))},n.copy=function(){return cL(t).domain(e)},Ki.apply(n,arguments)}function Hy(){var e=0,t=.5,n=1,r=1,i,o,c,d,f,m=aa,h,g=!1,v;function x(_){return isNaN(_=+_)?v:(_=.5+((_=+h(_))-o)*(r*_<r*o?d:f),m(g?Math.max(0,Math.min(1,_)):_))}x.domain=function(_){return arguments.length?([e,t,n]=_,i=h(e=+e),o=h(t=+t),c=h(n=+n),d=i===o?0:.5/(o-i),f=o===c?0:.5/(c-o),r=o<i?-1:1,x):[e,t,n]},x.clamp=function(_){return arguments.length?(g=!!_,x):g},x.interpolator=function(_){return arguments.length?(m=_,x):m};function w(_){return function(S){var j,A,E;return arguments.length?([j,A,E]=S,m=Vse(_,[j,A,E]),x):[m(0),m(.5),m(1)]}}return x.range=w(Au),x.rangeRound=w(Tw),x.unknown=function(_){return arguments.length?(v=_,x):v},function(_){return h=_,i=_(e),o=_(t),c=_(n),d=i===o?0:.5/(o-i),f=o===c?0:.5/(c-o),r=o<i?-1:1,x}}function uL(){var e=Yo(Hy()(aa));return e.copy=function(){return Xo(e,uL())},Ki.apply(e,arguments)}function dL(){var e=Mw(Hy()).domain([.1,1,10]);return e.copy=function(){return Xo(e,dL()).base(e.base())},Ki.apply(e,arguments)}function fL(){var e=Iw(Hy());return e.copy=function(){return Xo(e,fL()).constant(e.constant())},Ki.apply(e,arguments)}function Kw(){var e=Dw(Hy());return e.copy=function(){return Xo(e,Kw()).exponent(e.exponent())},Ki.apply(e,arguments)}function Ioe(){return Kw.apply(null,arguments).exponent(.5)}const Qd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Aw,scaleDiverging:uL,scaleDivergingLog:dL,scaleDivergingPow:Kw,scaleDivergingSqrt:Ioe,scaleDivergingSymlog:fL,scaleIdentity:H$,scaleImplicit:$S,scaleLinear:F$,scaleLog:K$,scaleOrdinal:Nw,scalePoint:xse,scalePow:Pw,scaleQuantile:Y$,scaleQuantize:X$,scaleRadial:W$,scaleSequential:iL,scaleSequentialLog:oL,scaleSequentialPow:Vw,scaleSequentialQuantile:cL,scaleSequentialSqrt:Moe,scaleSequentialSymlog:lL,scaleSqrt:hie,scaleSymlog:G$,scaleThreshold:Q$,scaleTime:Ooe,scaleUtc:Roe,tickFormat:z$},Symbol.toStringTag,{value:"Module"}));var Ql=e=>e.chartData,Doe=ke([Ql],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Gw=(e,t,n,r)=>r?Doe(e):Ql(e);function du(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Ba(t)&&Ba(n))return!0}return!1}function m2(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Poe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,o;if(Ba(n))i=n;else if(typeof n=="function")return;if(Ba(r))o=r;else if(typeof r=="function")return;var c=[i,o];if(du(c))return c}}function $oe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(du(r))return m2(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,c,d;if(i==="auto")t!=null&&(c=Math.min(...t));else if(ft(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&eR.test(i)){var f=eR.exec(i);if(f==null||t==null)c=void 0;else{var m=+f[1];c=t[0]-m}}else c=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(ft(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&tR.test(o)){var h=tR.exec(o);if(h==null||t==null)d=void 0;else{var g=+h[1];d=t[1]+g}}else d=t?.[1];var v=[c,d];if(du(v))return t==null?v:m2(v,t,n)}}}var Eu=1e9,Loe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Yw,$n=!0,hs="[DecimalError] ",$l=hs+"Invalid argument: ",Ww=hs+"Exponent out of range: ",Cu=Math.floor,jl=Math.pow,Boe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ia,_r=1e7,Mn=7,mL=9007199254740991,Jp=Cu(mL/Mn),ct={};ct.absoluteValue=ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ct.comparedTo=ct.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ct.decimalPlaces=ct.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Mn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ct.dividedBy=ct.div=function(e){return Oi(this,new this.constructor(e))};ct.dividedToIntegerBy=ct.idiv=function(e){var t=this,n=t.constructor;return jn(Oi(t,new n(e),0,1),n.precision)};ct.equals=ct.eq=function(e){return!this.cmp(e)};ct.exponent=function(){return lr(this)};ct.greaterThan=ct.gt=function(e){return this.cmp(e)>0};ct.greaterThanOrEqualTo=ct.gte=function(e){return this.cmp(e)>=0};ct.isInteger=ct.isint=function(){return this.e>this.d.length-2};ct.isNegative=ct.isneg=function(){return this.s<0};ct.isPositive=ct.ispos=function(){return this.s>0};ct.isZero=function(){return this.s===0};ct.lessThan=ct.lt=function(e){return this.cmp(e)<0};ct.lessThanOrEqualTo=ct.lte=function(e){return this.cmp(e)<1};ct.logarithm=ct.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ia))throw Error(hs+"NaN");if(n.s<1)throw Error(hs+(n.s?"NaN":"-Infinity"));return n.eq(Ia)?new r(0):($n=!1,t=Oi(jf(n,o),jf(e,o),o),$n=!0,jn(t,i))};ct.minus=ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?yL(t,e):hL(t,(e.s=-e.s,e))};ct.modulo=ct.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(hs+"NaN");return n.s?($n=!1,t=Oi(n,e,0,1).times(e),$n=!0,n.minus(t)):jn(new r(n),i)};ct.naturalExponential=ct.exp=function(){return pL(this)};ct.naturalLogarithm=ct.ln=function(){return jf(this)};ct.negated=ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ct.plus=ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hL(t,e):yL(t,(e.s=-e.s,e))};ct.precision=ct.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($l+e);if(t=lr(i)+1,r=i.d.length-1,n=r*Mn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};ct.squareRoot=ct.sqrt=function(){var e,t,n,r,i,o,c,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(hs+"NaN")}for(e=lr(d),$n=!1,i=Math.sqrt(+d),i==0||i==1/0?(t=Zs(d.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Cu((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=c=n+3;;)if(o=r,r=o.plus(Oi(d,o,c+2)).times(.5),Zs(o.d).slice(0,c)===(t=Zs(r.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(jn(o,n+1,0),o.times(o).eq(d)){r=o;break}}else if(t!="9999")break;c+=4}return $n=!0,jn(r,n)};ct.times=ct.mul=function(e){var t,n,r,i,o,c,d,f,m,h=this,g=h.constructor,v=h.d,x=(e=new g(e)).d;if(!h.s||!e.s)return new g(0);for(e.s*=h.s,n=h.e+e.e,f=v.length,m=x.length,f<m&&(o=v,v=x,x=o,c=f,f=m,m=c),o=[],c=f+m,r=c;r--;)o.push(0);for(r=m;--r>=0;){for(t=0,i=f+r;i>r;)d=o[i]+x[r]*v[i-r-1]+t,o[i--]=d%_r|0,t=d/_r|0;o[i]=(o[i]+t)%_r|0}for(;!o[--c];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,$n?jn(e,g.precision):e};ct.toDecimalPlaces=ct.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ni(e,0,Eu),t===void 0?t=r.rounding:ni(t,0,8),jn(n,e+lr(n)+1,t))};ct.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Vl(r,!0):(ni(e,0,Eu),t===void 0?t=i.rounding:ni(t,0,8),r=jn(new i(r),e+1,t),n=Vl(r,!0,e+1)),n};ct.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?Vl(i):(ni(e,0,Eu),t===void 0?t=o.rounding:ni(t,0,8),r=jn(new o(i),e+lr(i)+1,t),n=Vl(r.abs(),!1,e+lr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ct.toInteger=ct.toint=function(){var e=this,t=e.constructor;return jn(new t(e),lr(e)+1,t.rounding)};ct.toNumber=function(){return+this};ct.toPower=ct.pow=function(e){var t,n,r,i,o,c,d=this,f=d.constructor,m=12,h=+(e=new f(e));if(!e.s)return new f(Ia);if(d=new f(d),!d.s){if(e.s<1)throw Error(hs+"Infinity");return d}if(d.eq(Ia))return d;if(r=f.precision,e.eq(Ia))return jn(d,r);if(t=e.e,n=e.d.length-1,c=t>=n,o=d.s,c){if((n=h<0?-h:h)<=mL){for(i=new f(Ia),t=Math.ceil(r/Mn+4),$n=!1;n%2&&(i=i.times(d),p2(i.d,t)),n=Cu(n/2),n!==0;)d=d.times(d),p2(d.d,t);return $n=!0,e.s<0?new f(Ia).div(i):jn(i,r)}}else if(o<0)throw Error(hs+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,$n=!1,i=e.times(jf(d,r+m)),$n=!0,i=pL(i),i.s=o,i};ct.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=lr(i),r=Vl(i,n<=o.toExpNeg||n>=o.toExpPos)):(ni(e,1,Eu),t===void 0?t=o.rounding:ni(t,0,8),i=jn(new o(i),e,t),n=lr(i),r=Vl(i,e<=n||n<=o.toExpNeg,e)),r};ct.toSignificantDigits=ct.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ni(e,1,Eu),t===void 0?t=r.rounding:ni(t,0,8)),jn(new r(n),e,t)};ct.toString=ct.valueOf=ct.val=ct.toJSON=ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=lr(e),n=e.constructor;return Vl(e,t<=n.toExpNeg||t>=n.toExpPos)};function hL(e,t){var n,r,i,o,c,d,f,m,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),$n?jn(t,g):t;if(f=e.d,m=t.d,c=e.e,i=t.e,f=f.slice(),o=c-i,o){for(o<0?(r=f,o=-o,d=m.length):(r=m,i=c,d=f.length),c=Math.ceil(g/Mn),d=c>d?c+1:d+1,o>d&&(o=d,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(d=f.length,o=m.length,d-o<0&&(o=d,r=m,m=f,f=r),n=0;o;)n=(f[--o]=f[o]+m[o]+n)/_r|0,f[o]%=_r;for(n&&(f.unshift(n),++i),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=i,$n?jn(t,g):t}function ni(e,t,n){if(e!==~~e||e<t||e>n)throw Error($l+e)}function Zs(e){var t,n,r,i=e.length-1,o="",c=e[0];if(i>0){for(o+=c,t=1;t<i;t++)r=e[t]+"",n=Mn-r.length,n&&(o+=ko(n)),o+=r;c=e[t],r=c+"",n=Mn-r.length,n&&(o+=ko(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}var Oi=(function(){function e(r,i){var o,c=0,d=r.length;for(r=r.slice();d--;)o=r[d]*i+c,r[d]=o%_r|0,c=o/_r|0;return c&&r.unshift(c),r}function t(r,i,o,c){var d,f;if(o!=c)f=o>c?1:-1;else for(d=f=0;d<o;d++)if(r[d]!=i[d]){f=r[d]>i[d]?1:-1;break}return f}function n(r,i,o){for(var c=0;o--;)r[o]-=c,c=r[o]<i[o]?1:0,r[o]=c*_r+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,c){var d,f,m,h,g,v,x,w,_,S,j,A,E,C,T,O,R,k,P=r.constructor,H=r.s==i.s?1:-1,K=r.d,B=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(hs+"Division by zero");for(f=r.e-i.e,R=B.length,T=K.length,x=new P(H),w=x.d=[],m=0;B[m]==(K[m]||0);)++m;if(B[m]>(K[m]||0)&&--f,o==null?A=o=P.precision:c?A=o+(lr(r)-lr(i))+1:A=o,A<0)return new P(0);if(A=A/Mn+2|0,m=0,R==1)for(h=0,B=B[0],A++;(m<T||h)&&A--;m++)E=h*_r+(K[m]||0),w[m]=E/B|0,h=E%B|0;else{for(h=_r/(B[0]+1)|0,h>1&&(B=e(B,h),K=e(K,h),R=B.length,T=K.length),C=R,_=K.slice(0,R),S=_.length;S<R;)_[S++]=0;k=B.slice(),k.unshift(0),O=B[0],B[1]>=_r/2&&++O;do h=0,d=t(B,_,R,S),d<0?(j=_[0],R!=S&&(j=j*_r+(_[1]||0)),h=j/O|0,h>1?(h>=_r&&(h=_r-1),g=e(B,h),v=g.length,S=_.length,d=t(g,_,v,S),d==1&&(h--,n(g,R<v?k:B,v))):(h==0&&(d=h=1),g=B.slice()),v=g.length,v<S&&g.unshift(0),n(_,g,S),d==-1&&(S=_.length,d=t(B,_,R,S),d<1&&(h++,n(_,R<S?k:B,S))),S=_.length):d===0&&(h++,_=[0]),w[m++]=h,d&&_[0]?_[S++]=K[C]||0:(_=[K[C]],S=1);while((C++<T||_[0]!==void 0)&&A--)}return w[0]||w.shift(),x.e=f,jn(x,c?o+lr(x)+1:o)}})();function pL(e,t){var n,r,i,o,c,d,f=0,m=0,h=e.constructor,g=h.precision;if(lr(e)>16)throw Error(Ww+lr(e));if(!e.s)return new h(Ia);for($n=!1,d=g,c=new h(.03125);e.abs().gte(.1);)e=e.times(c),m+=5;for(r=Math.log(jl(2,m))/Math.LN10*2+5|0,d+=r,n=i=o=new h(Ia),h.precision=d;;){if(i=jn(i.times(e),d),n=n.times(++f),c=o.plus(Oi(i,n,d)),Zs(c.d).slice(0,d)===Zs(o.d).slice(0,d)){for(;m--;)o=jn(o.times(o),d);return h.precision=g,t==null?($n=!0,jn(o,g)):o}o=c}}function lr(e){for(var t=e.e*Mn,n=e.d[0];n>=10;n/=10)t++;return t}function m0(e,t,n){if(t>e.LN10.sd())throw $n=!0,n&&(e.precision=n),Error(hs+"LN10 precision limit exceeded");return jn(new e(e.LN10),t)}function ko(e){for(var t="";e--;)t+="0";return t}function jf(e,t){var n,r,i,o,c,d,f,m,h,g=1,v=10,x=e,w=x.d,_=x.constructor,S=_.precision;if(x.s<1)throw Error(hs+(x.s?"NaN":"-Infinity"));if(x.eq(Ia))return new _(0);if(t==null?($n=!1,m=S):m=t,x.eq(10))return t==null&&($n=!0),m0(_,m);if(m+=v,_.precision=m,n=Zs(w),r=n.charAt(0),o=lr(x),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=Zs(x.d),r=n.charAt(0),g++;o=lr(x),r>1?(x=new _("0."+n),o++):x=new _(r+"."+n.slice(1))}else return f=m0(_,m+2,S).times(o+""),x=jf(new _(r+"."+n.slice(1)),m-v).plus(f),_.precision=S,t==null?($n=!0,jn(x,S)):x;for(d=c=x=Oi(x.minus(Ia),x.plus(Ia),m),h=jn(x.times(x),m),i=3;;){if(c=jn(c.times(h),m),f=d.plus(Oi(c,new _(i),m)),Zs(f.d).slice(0,m)===Zs(d.d).slice(0,m))return d=d.times(2),o!==0&&(d=d.plus(m0(_,m+2,S).times(o+""))),d=Oi(d,new _(g),m),_.precision=S,t==null?($n=!0,jn(d,S)):d;d=f,i+=2}}function h2(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Cu(n/Mn),e.d=[],r=(n+1)%Mn,n<0&&(r+=Mn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Mn;r<i;)e.d.push(+t.slice(r,r+=Mn));t=t.slice(r),r=Mn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),$n&&(e.e>Jp||e.e<-Jp))throw Error(Ww+n)}else e.s=0,e.e=0,e.d=[0];return e}function jn(e,t,n){var r,i,o,c,d,f,m,h,g=e.d;for(c=1,o=g[0];o>=10;o/=10)c++;if(r=t-c,r<0)r+=Mn,i=t,m=g[h=0];else{if(h=Math.ceil((r+1)/Mn),o=g.length,h>=o)return e;for(m=o=g[h],c=1;o>=10;o/=10)c++;r%=Mn,i=r-Mn+c}if(n!==void 0&&(o=jl(10,c-i-1),d=m/o%10|0,f=t<0||g[h+1]!==void 0||m%o,f=n<4?(d||f)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||f||n==6&&(r>0?i>0?m/jl(10,c-i):0:g[h-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return f?(o=lr(e),g.length=1,t=t-o-1,g[0]=jl(10,(Mn-t%Mn)%Mn),e.e=Cu(-t/Mn)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=h,o=1,h--):(g.length=h+1,o=jl(10,Mn-r),g[h]=i>0?(m/jl(10,c-i)%jl(10,i)|0)*o:0),f)for(;;)if(h==0){(g[0]+=o)==_r&&(g[0]=1,++e.e);break}else{if(g[h]+=o,g[h]!=_r)break;g[h--]=0,o=1}for(r=g.length;g[--r]===0;)g.pop();if($n&&(e.e>Jp||e.e<-Jp))throw Error(Ww+lr(e));return e}function yL(e,t){var n,r,i,o,c,d,f,m,h,g,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),$n?jn(t,x):t;if(f=e.d,g=t.d,r=t.e,m=e.e,f=f.slice(),c=m-r,c){for(h=c<0,h?(n=f,c=-c,d=g.length):(n=g,r=m,d=f.length),i=Math.max(Math.ceil(x/Mn),d)+2,c>i&&(c=i,n.length=1),n.reverse(),i=c;i--;)n.push(0);n.reverse()}else{for(i=f.length,d=g.length,h=i<d,h&&(d=i),i=0;i<d;i++)if(f[i]!=g[i]){h=f[i]<g[i];break}c=0}for(h&&(n=f,f=g,g=n,t.s=-t.s),d=f.length,i=g.length-d;i>0;--i)f[d++]=0;for(i=g.length;i>c;){if(f[--i]<g[i]){for(o=i;o&&f[--o]===0;)f[o]=_r-1;--f[o],f[i]+=_r}f[i]-=g[i]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,$n?jn(t,x):t):new v(0)}function Vl(e,t,n){var r,i=lr(e),o=Zs(e.d),c=o.length;return t?(n&&(r=n-c)>0?o=o.charAt(0)+"."+o.slice(1)+ko(r):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ko(-i-1)+o,n&&(r=n-c)>0&&(o+=ko(r))):i>=c?(o+=ko(i+1-c),n&&(r=n-i-1)>0&&(o=o+"."+ko(r))):((r=i+1)<c&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-c)>0&&(i+1===c&&(o+="."),o+=ko(r))),e.s<0?"-"+o:o}function p2(e,t){if(e.length>t)return e.length=t,!0}function gL(e){var t,n,r;function i(o){var c=this;if(!(c instanceof i))return new i(o);if(c.constructor=i,o instanceof i){c.s=o.s,c.e=o.e,c.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error($l+o);if(o>0)c.s=1;else if(o<0)o=-o,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(o===~~o&&o<1e7){c.e=0,c.d=[o];return}return h2(c,o.toString())}else if(typeof o!="string")throw Error($l+o);if(o.charCodeAt(0)===45?(o=o.slice(1),c.s=-1):c.s=1,Boe.test(o))h2(c,o);else throw Error($l+o)}if(i.prototype=ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=gL,i.config=i.set=Uoe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Uoe(e){if(!e||typeof e!="object")throw Error(hs+"Object expected");var t,n,r,i=["precision",1,Eu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Cu(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error($l+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error($l+n+": "+r);return this}var Yw=gL(Loe);Ia=new Yw(1);const yn=Yw;var qoe=e=>e,vL={},bL=e=>e===vL,y2=e=>function t(){return arguments.length===0||arguments.length===1&&bL(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},_L=(e,t)=>e===1?t:y2(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(c=>c!==vL).length;return o>=e?t(...r):_L(e-o,y2(function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=r.map(h=>bL(h)?d.shift():h);return t(...m,...d)}))}),Vy=e=>_L(e.length,e),qS=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},zoe=Vy((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Foe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return qoe;var i=n.reverse(),o=i[0],c=i.slice(1);return function(){return c.reduce((d,f)=>f(d),o(...arguments))}},zS=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),xL=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((c,d)=>{var f;return c===((f=t)===null||f===void 0?void 0:f[d])})||(t=i,n=e(...i)),n}};function SL(e){var t;return e===0?t=1:t=Math.floor(new yn(e).abs().log(10).toNumber())+1,t}function wL(e,t,n){for(var r=new yn(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}Vy((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Vy((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Vy((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var jL=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},NL=(e,t,n)=>{if(e.lte(0))return new yn(0);var r=SL(e.toNumber()),i=new yn(10).pow(r),o=e.div(i),c=r!==1?.05:.1,d=new yn(Math.ceil(o.div(c).toNumber())).add(n).mul(c),f=d.mul(i);return t?new yn(f.toNumber()):new yn(Math.ceil(f.toNumber()))},Hoe=(e,t,n)=>{var r=new yn(1),i=new yn(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new yn(10).pow(SL(e)-1),i=new yn(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new yn(Math.floor(e)))}else e===0?i=new yn(Math.floor((t-1)/2)):n||(i=new yn(Math.floor(e)));var c=Math.floor((t-1)/2),d=Foe(zoe(f=>i.add(new yn(f-c).mul(r)).toNumber()),qS);return d(0,t)},AL=function(t,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new yn(0),tickMin:new yn(0),tickMax:new yn(0)};var c=NL(new yn(n).sub(t).div(r-1),i,o),d;t<=0&&n>=0?d=new yn(0):(d=new yn(t).add(n).div(2),d=d.sub(new yn(d).mod(c)));var f=Math.ceil(d.sub(t).div(c).toNumber()),m=Math.ceil(new yn(n).sub(d).div(c).toNumber()),h=f+m+1;return h>r?AL(t,n,r,i,o+1):(h<r&&(m=n>0?m+(r-h):m,f=n>0?f:f+(r-h)),{step:c,tickMin:d.sub(new yn(f).mul(c)),tickMax:d.add(new yn(m).mul(c))})};function Voe(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[c,d]=jL([t,n]);if(c===-1/0||d===1/0){var f=d===1/0?[c,...qS(0,r-1).map(()=>1/0)]:[...qS(0,r-1).map(()=>-1/0),d];return t>n?zS(f):f}if(c===d)return Hoe(c,r,i);var{step:m,tickMin:h,tickMax:g}=AL(c,d,o,i,0),v=wL(h,g.add(new yn(.1).mul(m)),m);return t>n?zS(v):v}function Koe(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,c]=jL([n,r]);if(o===-1/0||c===1/0)return[n,r];if(o===c)return[o];var d=Math.max(t,2),f=NL(new yn(c).sub(o).div(d-1),i,0),m=[...wL(new yn(o),new yn(c),f),c];return i===!1&&(m=m.map(h=>Math.round(h))),n>r?zS(m):m}var Goe=xL(Voe),Woe=xL(Koe),EL=e=>e.rootProps.maxBarSize,Yoe=e=>e.rootProps.barGap,CL=e=>e.rootProps.barCategoryGap,Xoe=e=>e.rootProps.barSize,Ky=e=>e.rootProps.stackOffset,Xw=e=>e.options.chartName,Qw=e=>e.rootProps.syncId,TL=e=>e.rootProps.syncMethod,Zw=e=>e.options.eventEmitter,wi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ma={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Gy=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Qoe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wi.angleAxisId,includeHidden:!1,name:void 0,reversed:wi.reversed,scale:wi.scale,tick:wi.tick,tickCount:void 0,ticks:void 0,type:wi.type,unit:void 0},Zoe={allowDataOverflow:Ma.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ma.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ma.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ma.scale,tick:Ma.tick,tickCount:Ma.tickCount,ticks:void 0,type:Ma.type,unit:void 0},Joe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:wi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wi.scale,tick:wi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ele={allowDataOverflow:Ma.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ma.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ma.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ma.scale,tick:Ma.tick,tickCount:Ma.tickCount,ticks:void 0,type:"category",unit:void 0},Jw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Joe:Qoe,ej=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?ele:Zoe,Wy=e=>e.polarOptions,tj=ke([Fi,Hi,xr],Hne),kL=ke([Wy,tj],(e,t)=>{if(e!=null)return $s(e.innerRadius,t,0)}),OL=ke([Wy,tj],(e,t)=>{if(e!=null)return $s(e.outerRadius,t,t*.8)}),tle=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},RL=ke([Wy],tle);ke([Jw,RL],Gy);var ML=ke([tj,kL,OL],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ke([ej,ML],Gy);var nle=ke([gn,Wy,kL,OL,Fi,Hi],(e,t,n,r,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:c,cy:d,startAngle:f,endAngle:m}=t;return{cx:$s(c,i,i/2),cy:$s(d,o,o/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:m,clockWise:!1}}}),wr=(e,t)=>t,Yy=(e,t,n)=>n;function g2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g2(Object(n),!0).forEach(function(r){rle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rle(e,t,n){return(t=ale(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ale(e){var t=sle(e,"string");return typeof t=="symbol"?t:t+""}function sle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FS=[0,"auto"],Oa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Gi=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??Oa},Ra={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:FS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Dy},Qo=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??Ra},ile={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},nj=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??ile},va=(e,t,n)=>{switch(t){case"xAxis":return Gi(e,n);case"yAxis":return Qo(e,n);case"zAxis":return nj(e,n);case"angleAxis":return Jw(e,n);case"radiusAxis":return ej(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ole=(e,t,n)=>{switch(t){case"xAxis":return Gi(e,n);case"yAxis":return Qo(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Qf=(e,t,n)=>{switch(t){case"xAxis":return Gi(e,n);case"yAxis":return Qo(e,n);case"angleAxis":return Jw(e,n);case"radiusAxis":return ej(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},IL=e=>e.graphicalItems.countOfBars>0;function DL(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Xy=e=>e.graphicalItems.cartesianItems,lle=ke([wr,Yy],DL),PL=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Zf=ke([Xy,va,lle],PL),$L=e=>e.filter(t=>t.stackId===void 0),cle=ke([Zf],$L),LL=e=>e.map(t=>t.data).filter(Boolean).flat(1),ule=ke([Zf],LL),BL=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Qy=ke([ule,Gw],BL),UL=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Kr(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Kr(i,r)}))):e.map(r=>({value:r})),Zy=ke([Qy,va,Zf],UL);function qL(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Zl(e){return e.filter(t=>pa(t)||t instanceof Date).map(Number).filter(t=>Pa(t)===!1)}function dle(e,t,n){return!n||typeof t!="number"||Pa(t)?[]:n.length?Zl(n.flatMap(r=>{var i=Kr(e,r.dataKey),o,c;if(Array.isArray(i)?[o,c]=i:o=c=i,!(!Ba(o)||!Ba(c)))return[t-o,t+c]})):[]}var zL=(e,t,n)=>{var r={},i=t.reduce((o,c)=>(c.stackId==null||(o[c.stackId]==null&&(o[c.stackId]=[]),o[c.stackId].push(c)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[c,d]=o,f=d.map(m=>m.dataKey);return[c,{stackedData:ire(e,f,n),graphicalItems:d}]}))},HS=ke([Qy,Zf,Ky],zL),FL=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var o=ure(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},fle=ke([HS,Ql,wr],FL),HL=(e,t,n,r)=>n.length>0?e.flatMap(i=>n.flatMap(o=>{var c,d,f=(c=o.errorBars)===null||c===void 0?void 0:c.filter(h=>qL(r,h)),m=Kr(i,(d=t.dataKey)!==null&&d!==void 0?d:o.dataKey);return{value:m,errorDomain:dle(i,m,f)}})).filter(Boolean):t?.dataKey!=null?e.map(i=>({value:Kr(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),mle=ke(Qy,va,cle,wr,HL);function hle(e){var{value:t}=e;if(pa(t)||t instanceof Date)return t}var ple=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Zl(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},yle=(e,t,n)=>{var r=e.map(hle).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&mP(r))?R$(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},rj=e=>{var t;if(e==null||!("domain"in e))return FS;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Zl(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:FS},aj=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),c=Math.min(...o),d=Math.max(...o);return[c,d]}},VL=e=>e.referenceElements.dots,Tu=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),gle=ke([VL,wr,Yy],Tu),KL=e=>e.referenceElements.areas,vle=ke([KL,wr,Yy],Tu),GL=e=>e.referenceElements.lines,ble=ke([GL,wr,Yy],Tu),WL=(e,t)=>{var n=Zl(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},_le=ke(gle,wr,WL),YL=(e,t)=>{var n=Zl(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},xle=ke([vle,wr],YL),XL=(e,t)=>{var n=Zl(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Sle=ke(ble,wr,XL),wle=ke(_le,Sle,xle,(e,t,n)=>aj(e,n,t)),jle=ke([va],rj),QL=(e,t,n,r,i)=>{var o=Poe(t,e.allowDataOverflow);return o??$oe(t,aj(n,i,ple(r)),e.allowDataOverflow)},Nle=ke([va,jle,fle,mle,wle],QL),Ale=[0,1],ZL=(e,t,n,r,i,o,c)=>{if(!(e==null||n==null||n.length===0)){var{dataKey:d,type:f}=e,m=Wo(t,o);return m&&d==null?R$(0,n.length):f==="category"?yle(r,e,m):i==="expand"?Ale:c}},sj=ke([va,gn,Qy,Zy,Ky,wr,Nle],ZL),JL=(e,t,n,r,i)=>{if(e!=null){var{scale:o,type:c}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":c==="category"?"band":"linear";if(typeof o=="string"){var d="scale".concat(Hf(o));return d in Qd?d:"point"}}},Jf=ke([va,gn,IL,Xw,wr],JL);function Ele(e){if(e!=null){if(e in Qd)return Qd[e]();var t="scale".concat(Hf(e));if(t in Qd)return Qd[t]()}}function ij(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=Ele(t);if(i!=null){var o=i.domain(n).range(r);return tre(o),o}}}var e3=(e,t,n)=>{var r=rj(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&du(e))return Goe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&du(e))return Woe(e,t.tickCount,t.allowDecimals)}},oj=ke([sj,Qf,Jf],e3),t3=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&du(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],c=t[1],d=n[n.length-1];return[Math.min(i,o),Math.max(c,d)]}return t},Cle=ke([va,sj,oj,wr],t3),Tle=ke(Zy,va,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Zl(e.map(d=>d.value))).sort((d,f)=>d-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o+1]-r[o];n=Math.min(n,c)}return n/i}}),n3=ke(Tle,gn,CL,xr,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Ba(e))return 0;var o=t==="vertical"?r.height:r.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var c=$s(n,e*o),d=e*o/2;return d-c-(d-c)/o*c}return 0}),kle=(e,t)=>{var n=Gi(e,t);return n==null||typeof n.padding!="string"?0:n3(e,"xAxis",t,n.padding)},Ole=(e,t)=>{var n=Qo(e,t);return n==null||typeof n.padding!="string"?0:n3(e,"yAxis",t,n.padding)},Rle=ke(Gi,kle,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),Mle=ke(Qo,Ole,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),Ile=ke([xr,Rle,$y,Py,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),Dle=ke([xr,gn,Mle,$y,Py,(e,t,n)=>n],(e,t,n,r,i,o)=>{var{padding:c}=i;return o?[r.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),em=(e,t,n,r)=>{var i;switch(t){case"xAxis":return Ile(e,n,r);case"yAxis":return Dle(e,n,r);case"zAxis":return(i=nj(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return RL(e);case"radiusAxis":return ML(e,n);default:return}},r3=ke([va,em],Gy),qo=ke([va,Jf,Cle,r3],ij);ke(Zf,wr,(e,t)=>e.flatMap(n=>{var r;return(r=n.errorBars)!==null&&r!==void 0?r:[]}).filter(n=>qL(t,n)));function a3(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Jy=(e,t)=>t,eg=(e,t,n)=>n,Ple=ke(yw,Jy,eg,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(a3)),$le=ke(gw,Jy,eg,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(a3)),s3=(e,t)=>({width:e.width,height:t.height}),Lle=(e,t)=>{var n=typeof t.width=="number"?t.width:Dy;return{width:n,height:e.height}},i3=ke(xr,Gi,s3),Ble=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Ule=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},qle=ke(Hi,xr,Ple,Jy,eg,(e,t,n,r,i)=>{var o={},c;return n.forEach(d=>{var f=s3(t,d);c==null&&(c=Ble(t,r,e));var m=r==="top"&&!i||r==="bottom"&&i;o[d.id]=c-Number(m)*f.height,c+=(m?-1:1)*f.height}),o}),zle=ke(Fi,xr,$le,Jy,eg,(e,t,n,r,i)=>{var o={},c;return n.forEach(d=>{var f=Lle(t,d);c==null&&(c=Ule(t,r,e));var m=r==="left"&&!i||r==="right"&&i;o[d.id]=c-Number(m)*f.width,c+=(m?-1:1)*f.width}),o}),Fle=(e,t)=>{var n=xr(e),r=Gi(e,t);if(r!=null){var i=qle(e,r.orientation,r.mirror),o=i[t];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},Hle=(e,t)=>{var n=xr(e),r=Qo(e,t);if(r!=null){var i=zle(e,r.orientation,r.mirror),o=i[t];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},o3=ke(xr,Qo,(e,t)=>{var n=typeof t.width=="number"?t.width:Dy;return{width:n,height:e.height}}),v2=(e,t,n)=>{switch(t){case"xAxis":return i3(e,n).width;case"yAxis":return o3(e,n).height;default:return}},l3=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:c}=n,d=Wo(e,r),f=t.map(m=>m.value);if(c&&d&&o==="category"&&i&&mP(f))return f}},lj=ke([gn,Zy,va,wr],l3),c3=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,c=Wo(e,r);if(c&&(i==="number"||o!=="auto"))return t.map(d=>d.value)}},cj=ke([gn,Zy,Qf,wr],c3),b2=ke([gn,ole,Jf,qo,lj,cj,em,oj,wr],(e,t,n,r,i,o,c,d,f)=>{if(t==null)return null;var m=Wo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:o,duplicateDomain:i,isCategorical:m,niceTicks:d,range:c,realScaleType:n,scale:r}}),Vle=(e,t,n,r,i,o,c,d,f)=>{if(!(t==null||r==null)){var m=Wo(e,f),{type:h,ticks:g,tickCount:v}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,w=h==="category"&&r.bandwidth?r.bandwidth()/x:0;w=f==="angleAxis"&&o!=null&&o.length>=2?ha(o[0]-o[1])*2*w:w;var _=g||i;if(_){var S=_.map((j,A)=>{var E=c?c.indexOf(j):j;return{index:A,coordinate:r(E)+w,value:j,offset:w}});return S.filter(j=>!Pa(j.coordinate))}return m&&d?d.map((j,A)=>({coordinate:r(j)+w,value:j,index:A,offset:w})):r.ticks?r.ticks(v).map(j=>({coordinate:r(j)+w,value:j,offset:w})):r.domain().map((j,A)=>({coordinate:r(j)+w,value:c?c[j]:j,index:A,offset:w}))}},u3=ke([gn,Qf,Jf,qo,oj,em,lj,cj,wr],Vle),Kle=(e,t,n,r,i,o,c)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var d=Wo(e,c),{tickCount:f}=t,m=0;return m=c==="angleAxis"&&r?.length>=2?ha(r[0]-r[1])*2*m:m,d&&o?o.map((h,g)=>({coordinate:n(h)+m,value:h,index:g,offset:m})):n.ticks?n.ticks(f).map(h=>({coordinate:n(h)+m,value:h,offset:m})):n.domain().map((h,g)=>({coordinate:n(h)+m,value:i?i[h]:h,index:g,offset:m}))}},zo=ke([gn,Qf,qo,em,lj,cj,wr],Kle),ri=ke(va,qo,(e,t)=>{if(!(e==null||t==null))return ey(ey({},e),{},{scale:t})}),Gle=ke([va,Jf,sj,r3],ij);ke((e,t,n)=>nj(e,n),Gle,(e,t)=>{if(!(e==null||t==null))return ey(ey({},e),{},{scale:t})});var Wle=ke([gn,yw,gw],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),d3=e=>e.options.defaultTooltipEventType,f3=e=>e.options.validateTooltipEventTypes;function m3(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function uj(e,t){var n=d3(e),r=f3(e);return m3(t,n,r)}function Yle(e){return pt(t=>uj(t,e))}var h3=(e,t)=>{var n,r=Number(t);if(!(Pa(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Xle=e=>e.tooltip.settings,Do={active:!1,index:null,dataKey:void 0,coordinate:void 0},Qle={itemInteraction:{click:Do,hover:Do},axisInteraction:{click:Do,hover:Do},keyboardInteraction:Do,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},p3=bs({name:"tooltip",initialState:Qle,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=ki(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Zle,removeTooltipEntrySettings:Jle,setTooltipSettingsState:ece,setActiveMouseOverItemIndex:y3,mouseLeaveItem:tce,mouseLeaveChart:g3,setActiveClickItemIndex:nce,setMouseOverAxisIndex:v3,setMouseClickAxisIndex:rce,setSyncInteraction:VS,setKeyboardInteraction:KS}=p3.actions,ace=p3.reducer;function _2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(n),!0).forEach(function(r){sce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sce(e,t,n){return(t=ice(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ice(e){var t=oce(e,"string");return typeof t=="symbol"?t:t+""}function oce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lce(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function cce(e){return e.index!=null}var b3=(e,t,n,r)=>{if(t==null)return Do;var i=lce(e,t,n);if(i==null)return Do;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(cce(i)){if(o)return zh(zh({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return zh(zh({},Do),{},{coordinate:i.coordinate})},dj=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!Ba(r))return n;var i=0,o=1/0;return t.length>0&&(o=t.length-1),String(Math.max(i,Math.min(r,o)))},_3=(e,t,n,r,i,o,c,d)=>{if(!(o==null||d==null)){var f=c[0],m=f==null?void 0:d(f.positions,o);if(m!=null)return m;var h=i?.[Number(o)];if(h)return n==="horizontal"?{x:h.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:h.coordinate}}},x3=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var c;return((c=o.settings)===null||c===void 0?void 0:c.dataKey)===i})},tm=e=>e.options.tooltipPayloadSearcher,ku=e=>e.tooltip;function x2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function S2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x2(Object(n),!0).forEach(function(r){uce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uce(e,t,n){return(t=dce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dce(e){var t=fce(e,"string");return typeof t=="symbol"?t:t+""}function fce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mce(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function hce(e,t){return e??t}var S3=(e,t,n,r,i,o,c)=>{if(!(t==null||o==null)){var{chartData:d,computedData:f,dataStartIndex:m,dataEndIndex:h}=n,g=[];return e.reduce((v,x)=>{var w,{dataDefinedOnItem:_,settings:S}=x,j=hce(_,d),A=mce(j,m,h),E=(w=S?.dataKey)!==null&&w!==void 0?w:r?.dataKey,C=S?.nameKey,T;if(r!=null&&r.dataKey&&Array.isArray(A)&&!Array.isArray(A[0])&&c==="axis"?T=hP(A,r.dataKey,i):T=o(A,t,f,C),Array.isArray(T))T.forEach(R=>{var k=S2(S2({},S),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});v.push(nR({tooltipEntrySettings:k,dataKey:R.dataKey,payload:R.payload,value:Kr(R.payload,R.dataKey),name:R.name}))});else{var O;v.push(nR({tooltipEntrySettings:S,dataKey:E,payload:T,value:Kr(T,E),name:(O=Kr(T,C))!==null&&O!==void 0?O:S?.name}))}return v},g)}},jr=e=>{var t=gn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ou=e=>e.tooltip.settings.axisId,Mr=e=>{var t=jr(e),n=Ou(e);return Qf(e,t,n)},fj=ke([Mr,gn,IL,Xw,jr],JL),pce=ke([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),yce=ke([jr,Ou],DL),tg=ke([pce,Mr,yce],PL),gce=ke([tg],LL),Jl=ke([gce,Ql],BL),mj=ke([Jl,Mr,tg],UL),vce=ke([Mr],rj),bce=ke([Jl,tg,Ky],zL),_ce=ke([bce,Ql,jr],FL),xce=ke([tg],$L),Sce=ke([Jl,Mr,xce,jr],HL),wce=ke([VL,jr,Ou],Tu),jce=ke([wce,jr],WL),Nce=ke([KL,jr,Ou],Tu),Ace=ke([Nce,jr],YL),Ece=ke([GL,jr,Ou],Tu),Cce=ke([Ece,jr],XL),Tce=ke([jce,Cce,Ace],aj),kce=ke([Mr,vce,_ce,Sce,Tce],QL),w3=ke([Mr,gn,Jl,mj,Ky,jr,kce],ZL),Oce=ke([w3,Mr,fj],e3),Rce=ke([Mr,w3,Oce,jr],t3),j3=e=>{var t=jr(e),n=Ou(e),r=!1;return em(e,t,n,r)},N3=ke([Mr,j3],Gy),A3=ke([Mr,fj,Rce,N3],ij),Mce=ke([gn,mj,Mr,jr],l3),Ice=ke([gn,mj,Mr,jr],c3),Dce=(e,t,n,r,i,o,c,d)=>{if(t){var{type:f}=t,m=Wo(e,d);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/h:0;return g=d==="angleAxis"&&i!=null&&i?.length>=2?ha(i[0]-i[1])*2*g:g,m&&c?c.map((v,x)=>({coordinate:r(v)+g,value:v,index:x,offset:g})):r.domain().map((v,x)=>({coordinate:r(v)+g,value:o?o[v]:v,index:x,offset:g}))}}},Wi=ke([gn,Mr,fj,A3,j3,Mce,Ice,jr],Dce),hj=ke([d3,f3,Xle],(e,t,n)=>m3(n.shared,e,t)),E3=e=>e.tooltip.settings.trigger,pj=e=>e.tooltip.settings.defaultIndex,ng=ke([ku,hj,E3,pj],b3),Kl=ke([ng,Jl],dj),C3=ke([Wi,Kl],h3),T3=ke([ng],e=>{if(e)return e.dataKey}),k3=ke([ku,hj,E3,pj],x3),Pce=ke([Fi,Hi,gn,xr,Wi,pj,k3,tm],_3),$ce=ke([ng,Pce],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Lce=ke([ng],e=>e.active),Bce=ke([k3,Kl,Ql,Mr,C3,tm,hj],S3),Uce=ke([Bce],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function w2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(n),!0).forEach(function(r){qce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qce(e,t,n){return(t=zce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zce(e){var t=Fce(e,"string");return typeof t=="symbol"?t:t+""}function Fce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hce=()=>pt(Mr),Vce=()=>{var e=Hce(),t=pt(Wi),n=pt(A3);return vf(j2(j2({},e),{},{scale:n}),t)},Kce=()=>pt(Xw),yj=(e,t)=>t,O3=(e,t,n)=>n,gj=(e,t,n,r)=>r,Gce=ke(Wi,e=>Ey(e,t=>t.coordinate)),vj=ke([ku,yj,O3,gj],b3),R3=ke([vj,Jl],dj),Wce=(e,t,n)=>{if(t!=null){var r=ku(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},M3=ke([ku,yj,O3,gj],x3),ty=ke([Fi,Hi,gn,xr,Wi,gj,M3,tm],_3),Yce=ke([vj,ty],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),I3=ke(Wi,R3,h3),Xce=ke([M3,R3,Ql,Mr,I3,tm,yj],S3),Qce=ke([vj],e=>({isActive:e.active,activeIndex:e.index})),Zce=(e,t,n,r,i,o,c,d)=>{if(!(!e||!t||!r||!i||!o)){var f=dre(e.chartX,e.chartY,t,n,d);if(f){var m=mre(f,t),h=Jne(m,c,o,r,i),g=fre(t,o,h,f);return{activeIndex:String(h),activeCoordinate:g}}}};function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GS.apply(null,arguments)}function N2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(n),!0).forEach(function(r){Jce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jce(e,t,n){return(t=eue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eue(e){var t=tue(e,"string");return typeof t=="symbol"?t:t+""}function tue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nue(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:c,cursor:d,tooltipEventType:f,chartName:m}=e,h=t,g=n,v=r;if(!d||!h||m!=="ScatterChart"&&f!=="axis")return null;var x,w;if(m==="ScatterChart")x=h,w=hae;else if(m==="BarChart")x=pae(c,h,i,o),w=ww;else if(c==="radial"){var{cx:_,cy:S,radius:j,startAngle:A,endAngle:E}=T$(h);x={cx:_,cy:S,startAngle:A,endAngle:E,innerRadius:j,outerRadius:j},w=O$}else x={points:tse(c,h,i)},w=N$;var C=typeof d=="object"&&"className"in d?d.className:void 0,T=Fh(Fh(Fh(Fh({stroke:"#ccc",pointerEvents:"none"},i),x),dn(d,!1)),{},{payload:g,payloadIndex:v,className:mn("recharts-tooltip-cursor",C)});return p.isValidElement(d)?p.cloneElement(d,T):p.createElement(w,T)}function rue(e){var t=Vce(),n=S$(),r=Ly(),i=Kce();return p.createElement(nue,GS({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var D3=p.createContext(null),aue=()=>p.useContext(D3),h0={exports:{}},A2;function sue(){return A2||(A2=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,m,h){this.fn=f,this.context=m,this.once=h||!1}function o(f,m,h,g,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,g||f,v),w=n?n+m:m;return f._events[w]?f._events[w].fn?f._events[w]=[f._events[w],x]:f._events[w].push(x):(f._events[w]=x,f._eventsCount++),f}function c(f,m){--f._eventsCount===0?f._events=new r:delete f._events[m]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],h,g;if(this._eventsCount===0)return m;for(g in h=this._events)t.call(h,g)&&m.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},d.prototype.listeners=function(m){var h=n?n+m:m,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,x=g.length,w=new Array(x);v<x;v++)w[v]=g[v].fn;return w},d.prototype.listenerCount=function(m){var h=n?n+m:m,g=this._events[h];return g?g.fn?1:g.length:0},d.prototype.emit=function(m,h,g,v,x,w){var _=n?n+m:m;if(!this._events[_])return!1;var S=this._events[_],j=arguments.length,A,E;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),j){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,g),!0;case 4:return S.fn.call(S.context,h,g,v),!0;case 5:return S.fn.call(S.context,h,g,v,x),!0;case 6:return S.fn.call(S.context,h,g,v,x,w),!0}for(E=1,A=new Array(j-1);E<j;E++)A[E-1]=arguments[E];S.fn.apply(S.context,A)}else{var C=S.length,T;for(E=0;E<C;E++)switch(S[E].once&&this.removeListener(m,S[E].fn,void 0,!0),j){case 1:S[E].fn.call(S[E].context);break;case 2:S[E].fn.call(S[E].context,h);break;case 3:S[E].fn.call(S[E].context,h,g);break;case 4:S[E].fn.call(S[E].context,h,g,v);break;default:if(!A)for(T=1,A=new Array(j-1);T<j;T++)A[T-1]=arguments[T];S[E].fn.apply(S[E].context,A)}}return!0},d.prototype.on=function(m,h,g){return o(this,m,h,g,!1)},d.prototype.once=function(m,h,g){return o(this,m,h,g,!0)},d.prototype.removeListener=function(m,h,g,v){var x=n?n+m:m;if(!this._events[x])return this;if(!h)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===h&&(!v||w.once)&&(!g||w.context===g)&&c(this,x);else{for(var _=0,S=[],j=w.length;_<j;_++)(w[_].fn!==h||v&&!w[_].once||g&&w[_].context!==g)&&S.push(w[_]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},d.prototype.removeAllListeners=function(m){var h;return m?(h=n?n+m:m,this._events[h]&&c(this,h)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(h0)),h0.exports}var iue=sue();const oue=ps(iue);var Nf=new oue,WS="recharts.syncEvent.tooltip",E2="recharts.syncEvent.brush";function P3(e,t){if(t){var n=Number.parseInt(t,10);if(!Pa(n))return e?.[n]}}var lue={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},$3=bs({name:"options",initialState:lue,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cue=$3.reducer,{createEventEmitter:uue}=$3.actions;function due(e){return e.tooltip.syncInteraction}var fue={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},L3=bs({name:"chartData",initialState:fue,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:C2,setDataStartEndIndexes:mue,setComputedData:lPe}=L3.actions,hue=L3.reducer,B3=()=>{};function pue(){var e=pt(Qw),t=pt(Zw),n=Gn(),r=pt(TL),i=pt(Wi),o=Ly(),c=vw(),d=pt(f=>f.rootProps.className);p.useEffect(()=>{if(e==null)return B3;var f=(m,h,g)=>{if(t!==g&&e===m){if(r==="index"){n(h);return}if(i!=null){var v;if(typeof r=="function"){var x={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},w=r(i,x);v=i[w]}else r==="value"&&(v=i.find(O=>String(O.value)===h.payload.label));var{coordinate:_}=h.payload;if(v==null||h.payload.active===!1||_==null||c==null){n(VS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:S,y:j}=_,A=Math.min(S,c.x+c.width),E=Math.min(j,c.y+c.height),C={x:o==="horizontal"?v.coordinate:A,y:o==="horizontal"?E:v.coordinate},T=VS({active:h.payload.active,coordinate:C,dataKey:h.payload.dataKey,index:String(v.index),label:h.payload.label});n(T)}}};return Nf.on(WS,f),()=>{Nf.off(WS,f)}},[d,n,t,e,r,i,o,c])}function yue(){var e=pt(Qw),t=pt(Zw),n=Gn();p.useEffect(()=>{if(e==null)return B3;var r=(i,o,c)=>{t!==c&&e===i&&n(mue(o))};return Nf.on(E2,r),()=>{Nf.off(E2,r)}},[n,t,e])}function gue(){var e=Gn();p.useEffect(()=>{e(uue())},[e]),pue(),yue()}function vue(e,t,n,r,i,o){var c=pt(v=>Wce(v,e,t)),d=pt(Zw),f=pt(Qw),m=pt(TL),h=pt(due),g=h?.active;p.useEffect(()=>{if(!g&&f!=null&&d!=null){var v=VS({active:o,coordinate:n,dataKey:c,index:i,label:typeof r=="number"?String(r):r});Nf.emit(WS,f,v,d)}},[g,n,c,i,r,d,f,m,o])}function T2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function k2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(n),!0).forEach(function(r){bue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bue(e,t,n){return(t=_ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ue(e){var t=xue(e,"string");return typeof t=="symbol"?t:t+""}function xue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sue(e){return e.dataKey}function wue(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(Kre,t)}var O2=[],jue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Nu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function rg(e){var t=Vi(e,jue),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:c,filterNull:d,isAnimationActive:f,offset:m,payloadUniqBy:h,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:w,cursor:_,shared:S,trigger:j,defaultIndex:A,portal:E,axisId:C}=t,T=Gn(),O=typeof A=="number"?String(A):A;p.useEffect(()=>{T(ece({shared:S,trigger:j,axisId:C,active:n,defaultIndex:O}))},[T,S,j,C,n,O]);var R=vw(),k=j$(),P=Yle(S),{activeIndex:H,isActive:K}=pt(Z=>Qce(Z,P,j,O)),B=pt(Z=>Xce(Z,P,j,O)),U=pt(Z=>I3(Z,P,j,O)),I=pt(Z=>Yce(Z,P,j,O)),L=B,$=aue(),G=n??K,[te,re]=KP([L,G]),M=P==="axis"?U:void 0;vue(P,j,I,M,H,G);var q=E??$;if(q==null)return null;var z=L??O2;G||(z=O2),d&&z.length&&(z=qP(L.filter(Z=>Z.value!=null&&(Z.hide!==!0||t.includeHidden)),h,Sue));var V=z.length>0,Y=p.createElement(Jre,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:f,active:G,coordinate:I,hasPayload:V,offset:m,position:g,reverseDirection:v,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:te,innerRef:re,hasPortalFromProps:!!E},wue(c,k2(k2({},t),{},{payload:z,label:M,active:G,coordinate:I,accessibilityLayer:k})));return p.createElement(p.Fragment,null,op.createPortal(Y,q),G&&p.createElement(rue,{cursor:_,tooltipEventType:P,coordinate:I,payload:L,index:H}))}var p0={},y0={},R2;function Nue(){return R2||(R2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=0,i={}){typeof i!="object"&&(i={});let o=null,c=null,d=null,f=0,m=null,h;const{leading:g=!1,trailing:v=!0,maxWait:x}=i,w="maxWait"in i,_=w?Math.max(Number(x)||0,r):0,S=R=>(o!==null&&(h=n.apply(c,o)),o=c=null,f=R,h),j=R=>(f=R,m=setTimeout(T,r),g&&o!==null?S(R):h),A=R=>(m=null,v&&o!==null?S(R):h),E=R=>{if(d===null)return!0;const k=R-d,P=k>=r||k<0,H=w&&R-f>=_;return P||H},C=R=>{const k=d===null?0:R-d,P=r-k,H=_-(R-f);return w?Math.min(P,H):P},T=()=>{const R=Date.now();if(E(R))return A(R);m=setTimeout(T,C(R))},O=function(...R){const k=Date.now(),P=E(k);if(o=R,c=this,d=k,P){if(m===null)return j(k);if(w)return clearTimeout(m),m=setTimeout(T,r),S(k)}return m===null&&(m=setTimeout(T,r)),h};return O.cancel=()=>{m!==null&&clearTimeout(m),f=0,d=o=c=m=null},O.flush=()=>m===null?h:A(Date.now()),O}e.debounce=t})(y0)),y0}var M2;function Aue(){return M2||(M2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nue();function n(r,i=0,o={}){const{leading:c=!0,trailing:d=!0}=o;return t.debounce(r,i,{leading:c,maxWait:i,trailing:d})}e.throttle=n})(p0)),p0}var g0,I2;function Eue(){return I2||(I2=1,g0=Aue().throttle),g0}var Cue=Eue();const Tue=ps(Cue);var nf=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function D2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function v0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(n),!0).forEach(function(r){kue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kue(e,t,n){return(t=Oue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oue(e){var t=Rue(e,"string");return typeof t=="symbol"?t:t+""}function Rue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ag=p.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:c=0,minHeight:d,maxHeight:f,children:m,debounce:h=0,id:g,className:v,onResize:x,style:w={}}=e,_=p.useRef(null),S=p.useRef();S.current=x,p.useImperativeHandle(t,()=>_.current);var[j,A]=p.useState({containerWidth:r.width,containerHeight:r.height}),E=p.useCallback((T,O)=>{A(R=>{var k=Math.round(T),P=Math.round(O);return R.containerWidth===k&&R.containerHeight===P?R:{containerWidth:k,containerHeight:P}})},[]);p.useEffect(()=>{var T=P=>{var H,{width:K,height:B}=P[0].contentRect;E(K,B),(H=S.current)===null||H===void 0||H.call(S,K,B)};h>0&&(T=Tue(T,h,{trailing:!0,leading:!1}));var O=new ResizeObserver(T),{width:R,height:k}=_.current.getBoundingClientRect();return E(R,k),O.observe(_.current),()=>{O.disconnect()}},[E,h]);var C=p.useMemo(()=>{var{containerWidth:T,containerHeight:O}=j;if(T<0||O<0)return null;nf(Cl(i)||Cl(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),nf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var R=Cl(i)?T:i,k=Cl(o)?O:o;return n&&n>0&&(R?k=R/n:k&&(R=k*n),f&&k>f&&(k=f)),nf(R>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,k,i,o,c,d,n),p.Children.map(m,P=>p.cloneElement(P,{width:R,height:k,style:v0({width:R,height:k},P.props.style)}))},[n,m,o,f,d,c,j,i]);return p.createElement("div",{id:g?"".concat(g):void 0,className:mn("recharts-responsive-container",v),style:v0(v0({},w),{},{width:i,height:o,minWidth:c,minHeight:d,maxHeight:f}),ref:_},p.createElement("div",{style:{width:0,height:0,overflow:"visible"}},C))}),bj=e=>null;bj.displayName="Cell";function P2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(n),!0).forEach(function(r){Mue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mue(e,t,n){return(t=Iue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iue(e){var t=Due(e,"string");return typeof t=="symbol"?t:t+""}function Due(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pc={widthCache:{},cacheCount:0},Pue=2e3,$ue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$2="recharts_measurement_span";function Lue(e){var t=YS({},e);return Object.keys(t).forEach(n=>{t[n]||delete t[n]}),t}var rf=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Nu.isSsr)return{width:0,height:0};var r=Lue(n),i=JSON.stringify({text:t,copyStyle:r});if(Pc.widthCache[i])return Pc.widthCache[i];try{var o=document.getElementById($2);o||(o=document.createElement("span"),o.setAttribute("id",$2),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var c=YS(YS({},$ue),r);Object.assign(o.style,c),o.textContent="".concat(t);var d=o.getBoundingClientRect(),f={width:d.width,height:d.height};return Pc.widthCache[i]=f,++Pc.cacheCount>Pue&&(Pc.cacheCount=0,Pc.widthCache={}),f}catch{return{width:0,height:0}}},L2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Uue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,U3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},que=Object.keys(U3),Fc="NaN";function zue(e,t){return e*U3[t]}class fa{static parse(t){var n,[,r,i]=(n=Uue.exec(t))!==null&&n!==void 0?n:[];return new fa(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Pa(t)&&(this.unit=""),n!==""&&!Bue.test(n)&&(this.num=NaN,this.unit=""),que.includes(n)&&(this.num=zue(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new fa(NaN,""):new fa(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new fa(NaN,""):new fa(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new fa(NaN,""):new fa(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new fa(NaN,""):new fa(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pa(this.num)}}function q3(e){if(e.includes(Fc))return Fc;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,o]=(n=L2.exec(t))!==null&&n!==void 0?n:[],c=fa.parse(r??""),d=fa.parse(o??""),f=i==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Fc;t=t.replace(L2,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,h,g,v]=(m=B2.exec(t))!==null&&m!==void 0?m:[],x=fa.parse(h??""),w=fa.parse(v??""),_=g==="+"?x.add(w):x.subtract(w);if(_.isNaN())return Fc;t=t.replace(B2,_.toString())}return t}var U2=/\(([^()]*)\)/;function Fue(e){for(var t=e,n;(n=U2.exec(t))!=null;){var[,r]=n;t=t.replace(U2,q3(r))}return t}function Hue(e){var t=e.replace(/\s+/g,"");return t=Fue(t),t=q3(t),t}function Vue(e){try{return Hue(e)}catch{return Fc}}function b0(e){var t=Vue(e.slice(5,-1));return t===Fc?"":t}var Kue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Gue=["dx","dy","angle","className","breakAll"];function XS(){return XS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XS.apply(null,arguments)}function q2(e,t){if(e==null)return{};var n,r,i=Wue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var z3=/[ \f\n\r\t\v\u2028\u2029]+/,F3=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Nn(t)||(n?i=t.toString().split(""):i=t.toString().split(z3));var o=i.map(d=>({word:d,width:rf(d,r).width})),c=n?0:rf("",r).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},Yue=(e,t,n,r,i)=>{var{maxLines:o,children:c,style:d,breakAll:f}=e,m=ft(o),h=c,g=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce((B,U)=>{var{word:I,width:L}=U,$=B[B.length-1];if($&&(r==null||i||$.width+L+n<Number(r)))$.words.push(I),$.width+=L+n;else{var G={words:[I],width:L};B.push(G)}return B},[])},v=g(t),x=H=>H.reduce((K,B)=>K.width>B.width?K:B);if(!m||i)return v;var w=v.length>o||x(v).width>Number(r);if(!w)return v;for(var _="",S=H=>{var K=h.slice(0,H),B=F3({breakAll:f,style:d,children:K+_}).wordsWithComputedWidth,U=g(B),I=U.length>o||x(U).width>Number(r);return[I,U]},j=0,A=h.length-1,E=0,C;j<=A&&E<=h.length-1;){var T=Math.floor((j+A)/2),O=T-1,[R,k]=S(O),[P]=S(T);if(!R&&!P&&(j=T+1),R&&P&&(A=T-1),!R&&P){C=k;break}E++}return C||v},z2=e=>{var t=Nn(e)?[]:e.toString().split(z3);return[{words:t}]},Xue=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:c}=e;if((t||n)&&!Nu.isSsr){var d,f,m=F3({breakAll:o,children:r,style:i});if(m){var{wordsWithComputedWidth:h,spaceWidth:g}=m;d=h,f=g}else return z2(r);return Yue({breakAll:o,children:r,maxLines:c,style:i},d,f,t,n)}return z2(r)},F2="#808080",_j=p.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:c=!1,textAnchor:d="start",verticalAnchor:f="end",fill:m=F2}=e,h=q2(e,Kue),g=p.useMemo(()=>Xue({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:x,angle:w,className:_,breakAll:S}=h,j=q2(h,Gue);if(!pa(n)||!pa(r))return null;var A=n+(ft(v)?v:0),E=r+(ft(x)?x:0),C;switch(f){case"start":C=b0("calc(".concat(o,")"));break;case"middle":C=b0("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:C=b0("calc(".concat(g.length-1," * -").concat(i,")"));break}var T=[];if(c){var O=g[0].width,{width:R}=h;T.push("scale(".concat(ft(R)?R/O:1,")"))}return w&&T.push("rotate(".concat(w,", ").concat(A,", ").concat(E,")")),T.length&&(j.transform=T.join(" ")),p.createElement("text",XS({},dn(j,!0),{ref:t,x:A,y:E,className:mn("recharts-text",_),textAnchor:d,fill:m.includes("url")?F2:m}),g.map((k,P)=>{var H=k.words.join(S?"":" ");return p.createElement("tspan",{x:A,dy:P===0?C:i,key:"".concat(H,"-").concat(P)},H)}))});_j.displayName="Text";var Que=["offset"],Zue=["labelRef"];function H2(e,t){if(e==null)return{};var n,r,i=Jue(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Jue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function V2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(n),!0).forEach(function(r){ede(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ede(e,t,n){return(t=tde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tde(e){var t=nde(e,"string");return typeof t=="symbol"?t:t+""}function nde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(null,arguments)}var rde=e=>{var{value:t,formatter:n}=e,r=Nn(e.children)?t:e.children;return typeof n=="function"?n(r):r},xj=e=>e!=null&&typeof e=="function",ade=(e,t)=>{var n=ha(t-e),r=Math.min(Math.abs(t-e),360);return n*r},sde=(e,t,n)=>{var{position:r,viewBox:i,offset:o,className:c}=e,{cx:d,cy:f,innerRadius:m,outerRadius:h,startAngle:g,endAngle:v,clockWise:x}=i,w=(m+h)/2,_=ade(g,v),S=_>=0?1:-1,j,A;r==="insideStart"?(j=g+S*o,A=x):r==="insideEnd"?(j=v-S*o,A=!x):r==="end"&&(j=v+S*o,A=x),A=_<=0?A:!A;var E=Rr(d,f,w,j),C=Rr(d,f,w,j+(A?1:-1)*359),T="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(A?0:1,`,
    `).concat(C.x,",").concat(C.y),O=Nn(e.id)?au("recharts-radial-line-"):e.id;return p.createElement("text",ji({},n,{dominantBaseline:"central",className:mn("recharts-radial-bar-label",c)}),p.createElement("defs",null,p.createElement("path",{id:O,d:T})),p.createElement("textPath",{xlinkHref:"#".concat(O)},t))},ide=e=>{var{viewBox:t,offset:n,position:r}=e,{cx:i,cy:o,innerRadius:c,outerRadius:d,startAngle:f,endAngle:m}=t,h=(f+m)/2;if(r==="outside"){var{x:g,y:v}=Rr(i,o,d+n,h);return{x:g,y:v,textAnchor:g>=i?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(c+d)/2,{x:w,y:_}=Rr(i,o,x,h);return{x:w,y:_,textAnchor:"middle",verticalAnchor:"middle"}},ode=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,{x:o,y:c,width:d,height:f}=t,m=f>=0?1:-1,h=m*r,g=m>0?"end":"start",v=m>0?"start":"end",x=d>=0?1:-1,w=x*r,_=x>0?"end":"start",S=x>0?"start":"end";if(i==="top"){var j={x:o+d/2,y:c-m*r,textAnchor:"middle",verticalAnchor:g};return ir(ir({},j),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var A={x:o+d/2,y:c+f+h,textAnchor:"middle",verticalAnchor:v};return ir(ir({},A),n?{height:Math.max(n.y+n.height-(c+f),0),width:d}:{})}if(i==="left"){var E={x:o-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return ir(ir({},E),n?{width:Math.max(E.x-n.x,0),height:f}:{})}if(i==="right"){var C={x:o+d+w,y:c+f/2,textAnchor:S,verticalAnchor:"middle"};return ir(ir({},C),n?{width:Math.max(n.x+n.width-C.x,0),height:f}:{})}var T=n?{width:d,height:f}:{};return i==="insideLeft"?ir({x:o+w,y:c+f/2,textAnchor:S,verticalAnchor:"middle"},T):i==="insideRight"?ir({x:o+d-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},T):i==="insideTop"?ir({x:o+d/2,y:c+h,textAnchor:"middle",verticalAnchor:v},T):i==="insideBottom"?ir({x:o+d/2,y:c+f-h,textAnchor:"middle",verticalAnchor:g},T):i==="insideTopLeft"?ir({x:o+w,y:c+h,textAnchor:S,verticalAnchor:v},T):i==="insideTopRight"?ir({x:o+d-w,y:c+h,textAnchor:_,verticalAnchor:v},T):i==="insideBottomLeft"?ir({x:o+w,y:c+f-h,textAnchor:S,verticalAnchor:g},T):i==="insideBottomRight"?ir({x:o+d-w,y:c+f-h,textAnchor:_,verticalAnchor:g},T):i&&typeof i=="object"&&(ft(i.x)||Cl(i.x))&&(ft(i.y)||Cl(i.y))?ir({x:o+$s(i.x,d),y:c+$s(i.y,f),textAnchor:"end",verticalAnchor:"end"},T):ir({x:o+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},T)},lde=e=>"cx"in e&&ft(e.cx);function Fr(e){var{offset:t=5}=e,n=H2(e,Que),r=ir({offset:t},n),{viewBox:i,position:o,value:c,children:d,content:f,className:m="",textBreakAll:h,labelRef:g}=r,v=vw(),x=i||v;if(!x||Nn(c)&&Nn(d)&&!p.isValidElement(f)&&typeof f!="function")return null;if(p.isValidElement(f)){var{labelRef:w}=r,_=H2(r,Zue);return p.cloneElement(f,_)}var S;if(typeof f=="function"){if(S=p.createElement(f,r),p.isValidElement(S))return S}else S=rde(r);var j=lde(x),A=dn(r,!0);if(j&&(o==="insideStart"||o==="insideEnd"||o==="end"))return sde(r,S,A);var E=j?ide(r):ode(r,x);return p.createElement(_j,ji({ref:g,className:mn("recharts-label",m)},A,E,{breakAll:h}),S)}Fr.displayName="Label";var H3=e=>{var{cx:t,cy:n,angle:r,startAngle:i,endAngle:o,r:c,radius:d,innerRadius:f,outerRadius:m,x:h,y:g,top:v,left:x,width:w,height:_,clockWise:S,labelViewBox:j}=e;if(j)return j;if(ft(w)&&ft(_)){if(ft(h)&&ft(g))return{x:h,y:g,width:w,height:_};if(ft(v)&&ft(x))return{x:v,y:x,width:w,height:_}}if(ft(h)&&ft(g))return{x:h,y:g,width:0,height:0};if(ft(t)&&ft(n))return{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:f||0,outerRadius:m||d||c||0,clockWise:S};if(e.viewBox)return e.viewBox},cde=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?p.createElement(Fr,ji({key:"label-implicit"},r)):pa(e)?p.createElement(Fr,ji({key:"label-implicit",value:e},r)):p.isValidElement(e)?e.type===Fr?p.cloneElement(e,ir({key:"label-implicit"},r)):p.createElement(Fr,ji({key:"label-implicit",content:e},r)):xj(e)?p.createElement(Fr,ji({key:"label-implicit",content:e},r)):e&&typeof e=="object"?p.createElement(Fr,ji({},e,{key:"label-implicit"},r)):null},ude=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var{children:i,labelRef:o}=t,c=H3(t),d=Q1(i,Fr).map((m,h)=>p.cloneElement(m,{viewBox:n||c,key:"label-".concat(h)}));if(!r)return d;var f=cde(t.label,n||c,o);return[f,...d]};Fr.parseViewBox=H3;Fr.renderCallByParent=ude;var _0={},x0={},K2;function dde(){return K2||(K2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(x0)),x0}var S0={},G2;function fde(){return G2||(G2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(S0)),S0}var W2;function mde(){return W2||(W2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dde(),n=fde(),r=sw();function i(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=i})(_0)),_0}var w0,Y2;function hde(){return Y2||(Y2=1,w0=mde().last),w0}var pde=hde();const yde=ps(pde);var gde=["valueAccessor"],vde=["data","dataKey","clockWise","id","textBreakAll"];function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ny.apply(null,arguments)}function X2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X2(Object(n),!0).forEach(function(r){bde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bde(e,t,n){return(t=_de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _de(e){var t=xde(e,"string");return typeof t=="symbol"?t:t+""}function xde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z2(e,t){if(e==null)return{};var n,r,i=Sde(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Sde(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wde=e=>Array.isArray(e.value)?yde(e.value):e.value;function Uo(e){var{valueAccessor:t=wde}=e,n=Z2(e,gde),{data:r,dataKey:i,clockWise:o,id:c,textBreakAll:d}=n,f=Z2(n,vde);return!r||!r.length?null:p.createElement(ga,{className:"recharts-label-list"},r.map((m,h)=>{var g=Nn(i)?t(m,h):Kr(m&&m.payload,i),v=Nn(c)?{}:{id:"".concat(c,"-").concat(h)};return p.createElement(Fr,ny({},dn(m,!0),f,v,{parentViewBox:m.parentViewBox,value:g,textBreakAll:d,viewBox:Fr.parseViewBox(Nn(o)?m:Q2(Q2({},m),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Uo.displayName="LabelList";function jde(e,t){return e?e===!0?p.createElement(Uo,{key:"labelList-implicit",data:t}):p.isValidElement(e)||xj(e)?p.createElement(Uo,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?p.createElement(Uo,ny({data:t},e,{key:"labelList-implicit"})):null:null}function Nde(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:r}=e,i=Q1(r,Uo).map((c,d)=>p.cloneElement(c,{data:t,key:"labelList-".concat(d)}));if(!n)return i;var o=jde(e.label,t);return[o,...i]}Uo.renderCallByParent=Nde;function QS(){return QS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QS.apply(null,arguments)}var V3=e=>{var{cx:t,cy:n,r,className:i}=e,o=mn("recharts-dot",i);return t===+t&&n===+n&&r===+r?p.createElement("circle",QS({},dn(e,!1),X1(e),{className:o,cx:t,cy:n,r})):null},Ade={radiusAxis:{},angleAxis:{}},K3=bs({name:"polarAxis",initialState:Ade,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:cPe,removeRadiusAxis:uPe,addAngleAxis:dPe,removeAngleAxis:fPe}=K3.actions,Ede=K3.reducer,Cde={countOfBars:0,cartesianItems:[],polarItems:[]},G3=bs({name:"graphicalItems",initialState:Cde,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=ki(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=ki(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=ki(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addBar:Tde,removeBar:kde,addCartesianGraphicalItem:Ode,replaceCartesianGraphicalItem:Rde,removeCartesianGraphicalItem:Mde,addPolarGraphicalItem:mPe,removePolarGraphicalItem:hPe}=G3.actions,Ide=G3.reducer;function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(r){Dde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dde(e,t,n){return(t=Pde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pde(e){var t=$de(e,"string");return typeof t=="symbol"?t:t+""}function $de(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lde(e){var t=Gn(),n=p.useRef(null);return p.useEffect(()=>{var r=eM(eM({},e),{},{stackId:b$(e.stackId)});n.current===null?t(Ode(r)):n.current!==r&&t(Rde({prev:n.current,next:r})),n.current=r},[t,e]),p.useEffect(()=>()=>{n.current&&(t(Mde(n.current)),n.current=null)},[t]),null}var j0={},tM;function Bde(){return tM||(tM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(j0)),j0}var N0,nM;function Ude(){return nM||(nM=1,N0=Bde().isPlainObject),N0}var qde=Ude();const zde=ps(qde);function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ry.apply(null,arguments)}var rM=(e,t,n,r,i)=>{var o=n-r,c;return c="M ".concat(e,",").concat(t),c+="L ".concat(e+n,",").concat(t),c+="L ".concat(e+n-o/2,",").concat(t+i),c+="L ".concat(e+n-o/2-r,",").concat(t+i),c+="L ".concat(e,",").concat(t," Z"),c},Fde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Hde=e=>{var t=Vi(e,Fde),n=p.useRef(),[r,i]=p.useState(-1);p.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&i(S)}catch{}},[]);var{x:o,y:c,upperWidth:d,lowerWidth:f,height:m,className:h}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isUpdateAnimationActive:w}=t;if(o!==+o||c!==+c||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var _=mn("recharts-trapezoid",h);return w?p.createElement(Hl,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:m,x:o,y:c},to:{upperWidth:d,lowerWidth:f,height:m,x:o,y:c},duration:v,animationEasing:g,isActive:w},S=>{var{upperWidth:j,lowerWidth:A,height:E,x:C,y:T}=S;return p.createElement(Hl,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},p.createElement("path",ry({},dn(t,!0),{className:_,d:rM(C,T,j,A,E),ref:n})))}):p.createElement("g",null,p.createElement("path",ry({},dn(t,!0),{className:_,d:rM(o,c,d,f,m)})))},Vde=["option","shapeType","propTransformer","activeClassName","isActive"];function Kde(e,t){if(e==null)return{};var n,r,i=Gde(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Gde(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aM(Object(n),!0).forEach(function(r){Wde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wde(e,t,n){return(t=Yde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yde(e){var t=Xde(e,"string");return typeof t=="symbol"?t:t+""}function Xde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qde(e,t){return ay(ay({},t),e)}function Zde(e,t){return e==="symbols"}function sM(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return p.createElement(ww,n);case"trapezoid":return p.createElement(Hde,n);case"sector":return p.createElement(O$,n);case"symbols":if(Zde(t))return p.createElement(nw,n);break;default:return null}}function Jde(e){return p.isValidElement(e)?e.props:e}function efe(e){var{option:t,shapeType:n,propTransformer:r=Qde,activeClassName:i="recharts-active-shape",isActive:o}=e,c=Kde(e,Vde),d;if(p.isValidElement(t))d=p.cloneElement(t,ay(ay({},c),Jde(t)));else if(typeof t=="function")d=t(c);else if(zde(t)&&typeof t!="boolean"){var f=r(t,c);d=p.createElement(sM,{shapeType:n,elementProps:f})}else{var m=c;d=p.createElement(sM,{shapeType:n,elementProps:m})}return o?p.createElement(ga,{className:i},d):d}var W3=(e,t)=>{var n=Gn();return(r,i)=>o=>{e?.(r,i,o),n(y3({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Y3=e=>{var t=Gn();return(n,r)=>i=>{e?.(n,r,i),t(tce())}},X3=(e,t)=>{var n=Gn();return(r,i)=>o=>{e?.(r,i,o),n(nce({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function Q3(e){var{fn:t,args:n}=e,r=Gn(),i=Wr();return p.useEffect(()=>{if(!i){var o=t(n);return r(Zle(o)),()=>{r(Jle(o))}}},[t,n,r,i]),null}var tfe=()=>{};function Z3(e){var{legendPayload:t}=e,n=Gn(),r=Wr();return p.useEffect(()=>r?tfe:(n(Cre(t)),()=>{n(Tre(t))}),[n,r,t]),null}function J3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=p.useRef(au(t)),r=p.useRef(e);return r.current!==e&&(n.current=au(t),r.current=e),n.current}var nfe=ke([xr],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),rfe=ke([nfe,Fi,Hi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),afe=e=>{var t=Wr();return pt(n=>ri(n,"xAxis",e,t))},sfe=e=>{var t=Wr();return pt(n=>ri(n,"yAxis",e,t))},Sj=()=>pt(rfe),ife=()=>pt(Uce);function iM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(n),!0).forEach(function(r){ofe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ofe(e,t,n){return(t=lfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lfe(e){var t=cfe(e,"string");return typeof t=="symbol"?t:t+""}function cfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ufe=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:o}=e;if(i===!1||t.x==null||t.y==null)return null;var c=oM(oM({index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},dn(i,!1)),X1(i)),d;return p.isValidElement(i)?d=p.cloneElement(i,c):typeof i=="function"?d=i(c):d=p.createElement(V3,c),p.createElement(ga,{className:"recharts-active-dot"},d)};function dfe(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i}=e,o=pt(Kl),c=ife();if(t==null||c==null)return null;var d=t.find(f=>c.includes(f.payload));return Nn(d)?null:ufe({point:d,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:r})}var ffe=()=>{var e=Gn();return p.useEffect(()=>(e(Tde()),()=>{e(kde())})),null},mfe=["children"];function hfe(e,t){if(e==null)return{};var n,r,i=pfe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pfe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lM=()=>{},eB=p.createContext({addErrorBar:lM,removeErrorBar:lM}),yfe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},tB=p.createContext(yfe);function nB(e){var{children:t}=e,n=hfe(e,mfe);return p.createElement(tB.Provider,{value:n},t)}var gfe=()=>p.useContext(tB),rB=e=>{var{children:t,xAxisId:n,yAxisId:r,zAxisId:i,dataKey:o,data:c,stackId:d,hide:f,type:m,barSize:h}=e,[g,v]=p.useState([]),x=p.useCallback(S=>{v(j=>[...j,S])},[v]),w=p.useCallback(S=>{v(j=>j.filter(A=>A!==S))},[v]),_=Wr();return p.createElement(eB.Provider,{value:{addErrorBar:x,removeErrorBar:w}},p.createElement(Lde,{type:m,data:c,xAxisId:n,yAxisId:r,zAxisId:i,dataKey:o,errorBars:g,stackId:d,hide:f,barSize:h,isPanorama:_}),t)};function vfe(e){var{addErrorBar:t,removeErrorBar:n}=p.useContext(eB);return p.useEffect(()=>(t(e),()=>{n(e)}),[t,n,e]),null}var bfe=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function aB(e,t,n){return(t=_fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _fe(e){var t=xfe(e,"string");return typeof t=="symbol"?t:t+""}function xfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af.apply(null,arguments)}function Sfe(e,t){if(e==null)return{};var n,r,i=wfe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wfe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jfe(e){var{direction:t,width:n,dataKey:r,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:d}=e,f=Sfe(e,bfe),m=dn(f,!1),{data:h,dataPointFormatter:g,xAxisId:v,yAxisId:x,errorBarOffset:w}=gfe(),_=afe(v),S=sfe(x);if(_?.scale==null||S?.scale==null||h==null||t==="x"&&_.type!=="number")return null;var j=h.map(A=>{var{x:E,y:C,value:T,errorVal:O}=g(A,r,t);if(!O)return null;var R=[],k,P;if(Array.isArray(O)?[k,P]=O:k=P=O,t==="x"){var{scale:H}=_,K=C+w,B=K+n,U=K-n,I=H(T-k),L=H(T+P);R.push({x1:L,y1:B,x2:L,y2:U}),R.push({x1:I,y1:K,x2:L,y2:K}),R.push({x1:I,y1:B,x2:I,y2:U})}else if(t==="y"){var{scale:$}=S,G=E+w,te=G-n,re=G+n,M=$(T-k),q=$(T+P);R.push({x1:te,y1:q,x2:re,y2:q}),R.push({x1:G,y1:M,x2:G,y2:q}),R.push({x1:te,y1:M,x2:re,y2:M})}var z="".concat(E+w,"px ").concat(C+w,"px");return p.createElement(ga,Af({className:"recharts-errorBar",key:"bar-".concat(R.map(V=>"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)))},m),R.map(V=>{var Y=i?{transformOrigin:"".concat(V.x1-5,"px")}:void 0;return p.createElement(Hl,{from:{transform:"scaleY(0)",transformOrigin:z},to:{transform:"scaleY(1)",transformOrigin:z},begin:o,easing:d,isActive:i,duration:c,key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2),style:{transformOrigin:z}},p.createElement("line",Af({},V,{style:Y})))}))});return p.createElement(ga,{className:"recharts-errorBars"},j)}var sB=p.createContext(void 0);function Nfe(e){var t=p.useContext(sB);return e??t??"x"}function iB(e){var{direction:t,children:n}=e;return p.createElement(sB.Provider,{value:t},n)}var oB={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function Afe(e){var t=Nfe(e.direction),{width:n,isAnimationActive:r,animationBegin:i,animationDuration:o,animationEasing:c}=Vi(e,oB);return p.createElement(p.Fragment,null,p.createElement(vfe,{dataKey:e.dataKey,direction:t}),p.createElement(jfe,Af({},e,{direction:t,width:n,isAnimationActive:r,animationBegin:i,animationDuration:o,animationEasing:c})))}class lB extends p.Component{render(){return p.createElement(Afe,this.props)}}aB(lB,"defaultProps",oB);aB(lB,"displayName","ErrorBar");var Efe="Invariant failed";function Cfe(e,t){throw new Error(Efe)}var Tfe=["x","y"];function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZS.apply(null,arguments)}function cM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cM(Object(n),!0).forEach(function(r){kfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kfe(e,t,n){return(t=Ofe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ofe(e){var t=Rfe(e,"string");return typeof t=="symbol"?t:t+""}function Rfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mfe(e,t){if(e==null)return{};var n,r,i=Ife(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ife(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Dfe(e,t){var{x:n,y:r}=e,i=Mfe(e,Tfe),o="".concat(n),c=parseInt(o,10),d="".concat(r),f=parseInt(d,10),m="".concat(t.height||i.height),h=parseInt(m,10),g="".concat(t.width||i.width),v=parseInt(g,10);return qd(qd(qd(qd(qd({},t),i),c?{x:c}:{}),f?{y:f}:{}),{},{height:h,width:v,name:t.name,radius:t.radius})}function cB(e){return p.createElement(efe,ZS({shapeType:"rectangle",propTransformer:Dfe,activeClassName:"recharts-active-bar"},e))}var Pfe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(ft(t))return t;var o=ft(r)||Nn(r);return o?t(r,i):(o||Cfe(),n)}};function wj(e,t){var n,r,i=pt(m=>Gi(m,e)),o=pt(m=>Qo(m,t)),c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Oa.allowDataOverflow,d=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:Ra.allowDataOverflow,f=c||d;return{needClip:f,needClipX:c,needClipY:d}}function uB(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=Sj(),{needClipX:o,needClipY:c,needClip:d}=wj(t,n);if(!d)return null;var{x:f,y:m,width:h,height:g}=i;return p.createElement("clipPath",{id:"clipPath-".concat(r)},p.createElement("rect",{x:o?f:f-h/2,y:c?m:m-g/2,width:o?h:h*2,height:c?g:g*2}))}var $fe=["onMouseEnter","onMouseLeave","onClick"],Lfe=["value","background","tooltipPosition"],Bfe=["onMouseEnter","onClick","onMouseLeave"];function Ef(){return Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ef.apply(null,arguments)}function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(r){sg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sg(e,t,n){return(t=Ufe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ufe(e){var t=qfe(e,"string");return typeof t=="symbol"?t:t+""}function qfe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JS(e,t){if(e==null)return{};var n,r,i=zfe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zfe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ffe=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:Iy(n,t),payload:e}]};function Hfe(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:o,hide:c,unit:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Iy(o,t),hide:c,type:e.tooltipType,color:e.fill,unit:d}}}function Vfe(e){var t=pt(Kl),{data:n,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:c,onMouseLeave:d,onClick:f}=o,m=JS(o,$fe),h=W3(c,r),g=Y3(d),v=X3(f,r);if(!i||n==null)return null;var x=dn(i,!1);return p.createElement(p.Fragment,null,n.map((w,_)=>{var{value:S,background:j,tooltipPosition:A}=w,E=JS(w,Lfe);if(!j)return null;var C=h(w,_),T=g(w,_),O=v(w,_),R=Hr(Hr(Hr(Hr(Hr({option:i,isActive:String(_)===t},E),{},{fill:"#eee"},j),x),wy(m,w,_)),{},{onMouseEnter:C,onMouseLeave:T,onClick:O,dataKey:r,index:_,className:"recharts-bar-background-rectangle"});return p.createElement(cB,Ef({key:"background-bar-".concat(_)},R))}))}function dB(e){var{data:t,props:n,showLabels:r}=e,i=dn(n,!1),{shape:o,dataKey:c,activeBar:d}=n,f=pt(Kl),m=pt(T3),{onMouseEnter:h,onClick:g,onMouseLeave:v}=n,x=JS(n,Bfe),w=W3(h,c),_=Y3(v),S=X3(g,c);return t?p.createElement(p.Fragment,null,t.map((j,A)=>{var E=d&&String(A)===f&&(m==null||c===m),C=E?d:o,T=Hr(Hr(Hr({},i),j),{},{isActive:E,option:C,index:A,dataKey:c});return p.createElement(ga,Ef({className:"recharts-bar-rectangle"},wy(x,j,A),{onMouseEnter:w(j,A),onMouseLeave:_(j,A),onClick:S(j,A),key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(A)}),p.createElement(cB,T))}),r&&Uo.renderCallByParent(n,t)):null}function Kfe(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:f,onAnimationEnd:m,onAnimationStart:h}=t,g=n.current,v=J3(t,"recharts-bar-"),[x,w]=p.useState(!1),_=p.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),S=p.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return p.createElement(Hl,{begin:c,duration:d,isActive:o,easing:f,from:{t:0},to:{t:1},onAnimationEnd:_,onAnimationStart:S,key:v},j=>{var{t:A}=j,E=A===1?r:r.map((C,T)=>{var O=g&&g[T];if(O){var R=Ms(O.x,C.x),k=Ms(O.y,C.y),P=Ms(O.width,C.width),H=Ms(O.height,C.height);return Hr(Hr({},C),{},{x:R(A),y:k(A),width:P(A),height:H(A)})}if(i==="horizontal"){var K=Ms(0,C.height),B=K(A);return Hr(Hr({},C),{},{y:C.y+C.height-B,height:B})}var U=Ms(0,C.width),I=U(A);return Hr(Hr({},C),{},{width:I})});return A>0&&(n.current=E),p.createElement(ga,null,p.createElement(dB,{props:t,data:E,showLabels:!x}))})}function Gfe(e){var{data:t,isAnimationActive:n}=e,r=p.useRef(null);return n&&t&&t.length&&(r.current==null||r.current!==t)?p.createElement(Kfe,{previousRectanglesRef:r,props:e}):p.createElement(dB,{props:e,data:t,showLabels:!0})}var fB=0,Wfe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Kr(e,t)}};class Yfe extends p.PureComponent{constructor(){super(...arguments),sg(this,"id",au("recharts-bar-"))}render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:c,needClip:d,background:f,id:m,layout:h}=this.props;if(t)return null;var g=mn("recharts-bar",i),v=Nn(m)?this.id:m;return p.createElement(ga,{className:g},d&&p.createElement("defs",null,p.createElement(uB,{clipPathId:v,xAxisId:o,yAxisId:c})),p.createElement(ga,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):null},p.createElement(Vfe,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),p.createElement(Gfe,this.props)),p.createElement(iB,{direction:h==="horizontal"?"y":"x"},this.props.children))}}var mB={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Nu.isSsr,legendType:"rect",minPointSize:fB,xAxisId:0,yAxisId:0};function Xfe(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:c,animationBegin:d,animationDuration:f,animationEasing:m,isAnimationActive:h}=Vi(e,mB),{needClip:g}=wj(t,n),v=Ly(),x=Wr(),w=p.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:o,stackId:b$(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,o,e.stackId]),_=Q1(e.children,bj),S=pt(E=>jme(E,t,n,x,w,_));if(v!=="vertical"&&v!=="horizontal")return null;var j,A=S?.[0];return A==null||A.height==null||A.width==null?j=0:j=v==="vertical"?A.height/2:A.width/2,p.createElement(nB,{xAxisId:t,yAxisId:n,data:S,dataPointFormatter:Wfe,errorBarOffset:j},p.createElement(Yfe,Ef({},e,{layout:v,needClip:g,data:S,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:c,animationBegin:d,animationDuration:f,animationEasing:m,isAnimationActive:h})))}function Qfe(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:c,yAxis:d,xAxisTicks:f,yAxisTicks:m,stackedData:h,displayedData:g,offset:v,cells:x}=e,w=t==="horizontal"?d:c,_=h?w.scale.domain():null,S=ore({numericAxis:w});return g.map((j,A)=>{var E,C,T,O,R,k;h?E=nre(h[A],_):(E=Kr(j,n),Array.isArray(E)||(E=[S,E]));var P=Pfe(r,fB)(E[1],A);if(t==="horizontal"){var H,[K,B]=[d.scale(E[0]),d.scale(E[1])];C=JO({axis:c,ticks:f,bandSize:o,offset:i.offset,entry:j,index:A}),T=(H=B??K)!==null&&H!==void 0?H:void 0,O=i.size;var U=K-B;if(R=Pa(U)?0:U,k={x:C,y:v.top,width:O,height:v.height},Math.abs(P)>0&&Math.abs(R)<Math.abs(P)){var I=ha(R||P)*(Math.abs(P)-Math.abs(R));T-=I,R+=I}}else{var[L,$]=[c.scale(E[0]),c.scale(E[1])];if(C=L,T=JO({axis:d,ticks:m,bandSize:o,offset:i.offset,entry:j,index:A}),O=$-L,R=i.size,k={x:v.left,y:T,width:v.width,height:R},Math.abs(P)>0&&Math.abs(O)<Math.abs(P)){var G=ha(O||P)*(Math.abs(P)-Math.abs(O));O+=G}}var te=Hr(Hr({},j),{},{x:C,y:T,width:O,height:R,value:h?E:E[1],payload:j,background:k,tooltipPosition:{x:C+O/2,y:T+R/2}},x&&x[A]&&x[A].props);return te})}class ig extends p.PureComponent{render(){return p.createElement(rB,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},p.createElement(ffe,null),p.createElement(Z3,{legendPayload:Ffe(this.props)}),p.createElement(Q3,{fn:Hfe,args:this.props}),p.createElement(Xfe,this.props))}}sg(ig,"displayName","Bar");sg(ig,"defaultProps",mB);function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(r){Zfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zfe(e,t,n){return(t=Jfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jfe(e){var t=eme(e,"string");return typeof t=="symbol"?t:t+""}function eme(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tme=(e,t)=>t,nme=(e,t,n)=>n,rme=(e,t,n,r)=>r,jj=(e,t,n,r,i)=>i,ame=(e,t,n,r,i)=>i.maxBarSize,sme=(e,t,n,r,i,o)=>o,fM=(e,t,n)=>{var r=n??e;if(!Nn(r))return $s(r,t,0)},ime=ke([gn,Xy,tme,nme,rme],(e,t,n,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),ome=(e,t,n,r)=>{var i=gn(e);return i==="horizontal"?HS(e,"yAxis",n,r):HS(e,"xAxis",t,r)},lme=(e,t,n)=>{var r=gn(e);return r==="horizontal"?v2(e,"xAxis",t):v2(e,"yAxis",n)};function cme(e){return e.stackId!=null&&e.dataKey!=null}var ume=(e,t,n)=>{var r={},i=e.filter(cme),o=e.filter(m=>m.stackId==null),c=i.reduce((m,h)=>(m[h.stackId]||(m[h.stackId]=[]),m[h.stackId].push(h),m),r),d=Object.entries(c).map(m=>{var[h,g]=m,v=g.map(w=>w.dataKey),x=fM(t,n,g[0].barSize);return{stackId:h,dataKeys:v,barSize:x}}),f=o.map(m=>{var h=[m.dataKey].filter(v=>v!=null),g=fM(t,n,m.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...d,...f]},dme=ke([ime,Xoe,lme],ume),fme=(e,t,n,r,i)=>{var o,c,d=gn(e),f=EL(e),{maxBarSize:m}=i,h=Nn(m)?f:m,g,v;return d==="horizontal"?(g=ri(e,"xAxis",t,r),v=zo(e,"xAxis",t,r)):(g=ri(e,"yAxis",n,r),v=zo(e,"yAxis",n,r)),(o=(c=vf(g,v,!0))!==null&&c!==void 0?c:h)!==null&&o!==void 0?o:0},hB=(e,t,n,r)=>{var i=gn(e),o,c;return i==="horizontal"?(o=ri(e,"xAxis",t,r),c=zo(e,"xAxis",t,r)):(o=ri(e,"yAxis",n,r),c=zo(e,"yAxis",n,r)),vf(o,c)};function mme(e,t,n,r,i){var o=r.length;if(!(o<1)){var c=$s(e,n,0,!0),d,f=[];if(Ba(r[0].barSize)){var m=!1,h=n/o,g=r.reduce((j,A)=>j+(A.barSize||0),0);g+=(o-1)*c,g>=n&&(g-=(o-1)*c,c=0),g>=n&&h>0&&(m=!0,h*=.9,g=o*h);var v=(n-g)/2>>0,x={offset:v-c,size:0};d=r.reduce((j,A)=>{var E,C={stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:x.offset+x.size+c,size:m?h:(E=A.barSize)!==null&&E!==void 0?E:0}},T=[...j,C];return x=T[T.length-1].position,T},f)}else{var w=$s(t,n,0,!0);n-2*w-(o-1)*c<=0&&(c=0);var _=(n-2*w-(o-1)*c)/o;_>1&&(_>>=0);var S=Ba(i)?Math.min(_,i):_;d=r.reduce((j,A,E)=>[...j,{stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:w+(_+c)*E+(_-S)/2,size:S}}],f)}return d}}var hme=(e,t,n,r,i,o,c)=>{var d=Nn(c)?t:c,f=mme(n,r,i!==o?i:o,e,d);return i!==o&&f!=null&&(f=f.map(m=>Hh(Hh({},m),{},{position:Hh(Hh({},m.position),{},{offset:m.position.offset-i/2})}))),f},pme=ke([dme,EL,Yoe,CL,fme,hB,ame],hme),yme=(e,t,n,r)=>ri(e,"xAxis",t,r),gme=(e,t,n,r)=>ri(e,"yAxis",n,r),vme=(e,t,n,r)=>zo(e,"xAxis",t,r),bme=(e,t,n,r)=>zo(e,"yAxis",n,r),_me=ke([pme,jj],(e,t)=>{if(e!=null){var n=e.find(r=>r.stackId===t.stackId&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),xme=(e,t)=>{if(!(!e||t?.dataKey==null)){var{stackId:n}=t;if(n!=null){var r=e[n];if(r){var{stackedData:i}=r;if(i){var o=i.find(c=>c.key===t.dataKey);return o}}}}},Sme=ke([Xy,jj],(e,t)=>{if(e.some(n=>n.type==="bar"&&t.dataKey===n.dataKey&&t.stackId===n.stackId&&t.stackId===n.stackId))return t}),wme=ke([ome,jj],xme),jme=ke([xr,yme,gme,vme,bme,_me,gn,Gw,hB,wme,Sme,sme],(e,t,n,r,i,o,c,d,f,m,h,g)=>{var{chartData:v,dataStartIndex:x,dataEndIndex:w}=d;if(!(h==null||o==null||c!=="horizontal"&&c!=="vertical"||t==null||n==null||r==null||i==null||f==null)){var{data:_}=h,S;if(_!=null&&_.length>0?S=_:S=v?.slice(x,w+1),S!=null)return Qfe({layout:c,barSettings:h,pos:o,bandSize:f,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:m,displayedData:S,offset:e,cells:g})}}),Nme=e=>{var{chartData:t}=e,n=Gn(),r=Wr();return p.useEffect(()=>r?()=>{}:(n(C2(t)),()=>{n(C2(void 0))}),[t,n,r]),null},mM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},pB=bs({name:"brush",initialState:mM,reducers:{setBrushSettings(e,t){return t.payload==null?mM:t.payload}}}),{setBrushSettings:pPe}=pB.actions,Ame=pB.reducer;function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(r){yB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yB(e,t,n){return(t=Eme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eme(e){var t=Cme(e,"string");return typeof t=="symbol"?t:t+""}function Cme(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tme=(e,t)=>{var{x:n,y:r}=e,{x:i,y:o}=t;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}};class og{static create(t){return new og(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}yB(og,"EPS",1e-4);var kme=e=>{var t=Object.keys(e).reduce((n,r)=>Vh(Vh({},n),{},{[r]:og.create(e[r])}),{});return Vh(Vh({},t),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(o=>{var[c,d]=o;return[c,t[c].apply(d,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>t[r].isInRange(n[r]))}})};function Ome(e){return(e%180+180)%180}var Rme=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Ome(i),c=o*Math.PI/180,d=Math.atan(r/n),f=c>d&&c<Math.PI-d?r/Math.sin(c):n/Math.cos(c);return Math.abs(f)},Mme={dots:[],areas:[],lines:[]},gB=bs({name:"referenceElements",initialState:Mme,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ki(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ki(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ki(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:yPe,removeDot:gPe,addArea:Ime,removeArea:Dme,addLine:vPe,removeLine:bPe}=gB.actions,Pme=gB.reducer,vB=p.createContext(void 0),$me=e=>{var{children:t}=e,[n]=p.useState("".concat(au("recharts"),"-clip")),r=Sj();if(r==null)return null;var{x:i,y:o,width:c,height:d}=r;return p.createElement(vB.Provider,{value:n},p.createElement("defs",null,p.createElement("clipPath",{id:n},p.createElement("rect",{x:i,y:o,height:d,width:c}))),t)},Lme=()=>p.useContext(vB);function pM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(n),!0).forEach(function(r){Nj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nj(e,t,n){return(t=Bme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bme(e){var t=Ume(e,"string");return typeof t=="symbol"?t:t+""}function Ume(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e1(){return e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e1.apply(null,arguments)}var qme=(e,t,n,r,i,o,c)=>{var{x1:d,x2:f,y1:m,y2:h}=c;if(i==null||o==null)return null;var g=kme({x:i,y:o}),v={x:e?g.x.apply(d,{position:"start"}):g.x.rangeMin,y:n?g.y.apply(m,{position:"start"}):g.y.rangeMin},x={x:t?g.x.apply(f,{position:"end"}):g.x.rangeMax,y:r?g.y.apply(h,{position:"end"}):g.y.rangeMax};return c.ifOverflow==="discard"&&(!g.isInRange(v)||!g.isInRange(x))?null:Tme(v,x)},zme=(e,t)=>{var n;return p.isValidElement(e)?n=p.cloneElement(e,t):typeof e=="function"?n=e(t):n=p.createElement(ww,e1({},t,{className:"recharts-reference-area-rect"})),n};function Fme(e){var t=Gn();return p.useEffect(()=>(t(Ime(e)),()=>{t(Dme(e))})),null}function Hme(e){var{x1:t,x2:n,y1:r,y2:i,className:o,shape:c,xAxisId:d,yAxisId:f}=e,m=Lme(),h=Wr(),g=pt(C=>qo(C,"xAxis",d,h)),v=pt(C=>qo(C,"yAxis",f,h));if(g==null||!v==null)return null;var x=pa(t),w=pa(n),_=pa(r),S=pa(i);if(!x&&!w&&!_&&!S&&!c)return null;var j=qme(x,w,_,S,g,v,e);if(!j&&!c)return null;var A=e.ifOverflow==="hidden",E=A?"url(#".concat(m,")"):void 0;return p.createElement(ga,{className:mn("recharts-reference-area",o)},zme(c,yM(yM({clipPath:E},dn(e,!0)),j)),Fr.renderCallByParent(e,j))}function Vme(e){return p.createElement(p.Fragment,null,p.createElement(Fme,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),p.createElement(Hme,e))}class Aj extends p.Component{render(){return p.createElement(Vme,this.props)}}Nj(Aj,"displayName","ReferenceArea");Nj(Aj,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});function A0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function bB(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function Kme(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Rme(r,n)}function Gme(e,t,n){var r=n==="width",{x:i,y:o,width:c,height:d}=e;return t===1?{start:r?i:o,end:r?i+c:o+d}:{start:r?i+c:o+d,end:r?i:o}}function sy(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function Wme(e,t){return bB(e,t+1)}function Yme(e,t,n,r,i){for(var o=(r||[]).slice(),{start:c,end:d}=t,f=0,m=1,h=c,g=function(){var w=r?.[f];if(w===void 0)return{v:bB(r,m)};var _=f,S,j=()=>(S===void 0&&(S=n(w,_)),S),A=w.coordinate,E=f===0||sy(e,A,j,h,d);E||(f=0,h=c,m+=1),E&&(h=A+e*(j()/2+i),f+=m)},v;m<=o.length;)if(v=g(),v)return v.v;return[]}function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(r){Xme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xme(e,t,n){return(t=Qme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qme(e){var t=Zme(e,"string");return typeof t=="symbol"?t:t+""}function Zme(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jme(e,t,n,r,i){for(var o=(r||[]).slice(),c=o.length,{start:d}=t,{end:f}=t,m=function(v){var x=o[v],w,_=()=>(w===void 0&&(w=n(x,v)),w);if(v===c-1){var S=e*(x.coordinate+e*_()/2-f);o[v]=x=zr(zr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else o[v]=x=zr(zr({},x),{},{tickCoord:x.coordinate});var j=sy(e,x.tickCoord,_,d,f);j&&(f=x.tickCoord-e*(_()/2+i),o[v]=zr(zr({},x),{},{isShow:!0}))},h=c-1;h>=0;h--)m(h);return o}function ehe(e,t,n,r,i,o){var c=(r||[]).slice(),d=c.length,{start:f,end:m}=t;if(o){var h=r[d-1],g=n(h,d-1),v=e*(h.coordinate+e*g/2-m);c[d-1]=h=zr(zr({},h),{},{tickCoord:v>0?h.coordinate-v*e:h.coordinate});var x=sy(e,h.tickCoord,()=>g,f,m);x&&(m=h.tickCoord-e*(g/2+i),c[d-1]=zr(zr({},h),{},{isShow:!0}))}for(var w=o?d-1:d,_=function(A){var E=c[A],C,T=()=>(C===void 0&&(C=n(E,A)),C);if(A===0){var O=e*(E.coordinate-e*T()/2-f);c[A]=E=zr(zr({},E),{},{tickCoord:O<0?E.coordinate-O*e:E.coordinate})}else c[A]=E=zr(zr({},E),{},{tickCoord:E.coordinate});var R=sy(e,E.tickCoord,T,f,m);R&&(f=E.tickCoord+e*(T()/2+i),c[A]=zr(zr({},E),{},{isShow:!0}))},S=0;S<w;S++)_(S);return c}function Ej(e,t,n){var{tick:r,ticks:i,viewBox:o,minTickGap:c,orientation:d,interval:f,tickFormatter:m,unit:h,angle:g}=e;if(!i||!i.length||!r)return[];if(ft(f)||Nu.isSsr){var v;return(v=Wme(i,ft(f)?f:0))!==null&&v!==void 0?v:[]}var x=[],w=d==="top"||d==="bottom"?"width":"height",_=h&&w==="width"?rf(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(E,C)=>{var T=typeof m=="function"?m(E.value,C):E.value;return w==="width"?Kme(rf(T,{fontSize:t,letterSpacing:n}),_,g):rf(T,{fontSize:t,letterSpacing:n})[w]},j=i.length>=2?ha(i[1].coordinate-i[0].coordinate):1,A=Gme(o,j,w);return f==="equidistantPreserveStart"?Yme(j,A,S,i,c):(f==="preserveStart"||f==="preserveStartEnd"?x=ehe(j,A,S,i,c,f==="preserveStartEnd"):x=Jme(j,A,S,i,c),x.filter(E=>E.isShow))}var the=["viewBox"],nhe=["viewBox"];function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hc.apply(null,arguments)}function vM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(n),!0).forEach(function(r){Cj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bM(e,t){if(e==null)return{};var n,r,i=rhe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Cj(e,t,n){return(t=ahe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ahe(e){var t=she(e,"string");return typeof t=="symbol"?t:t+""}function she(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Zo extends p.Component{constructor(t){super(t),this.tickRefs=p.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=bM(t,the),o=this.props,{viewBox:c}=o,d=bM(o,nhe);return!A0(r,c)||!A0(i,d)||!A0(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:o,orientation:c,tickSize:d,mirror:f,tickMargin:m}=this.props,h,g,v,x,w,_,S=f?-1:1,j=t.tickSize||d,A=ft(t.tickCoord)?t.tickCoord:t.coordinate;switch(c){case"top":h=g=t.coordinate,x=r+ +!f*o,v=x-S*j,_=v-S*m,w=A;break;case"left":v=x=t.coordinate,g=n+ +!f*i,h=g-S*j,w=h-S*m,_=A;break;case"right":v=x=t.coordinate,g=n+ +f*i,h=g+S*j,w=h+S*m,_=A;break;default:h=g=t.coordinate,x=r+ +f*o,v=x+S*j,_=v+S*m,w=A;break}return{line:{x1:h,y1:v,x2:g,y2:x},tick:{x:w,y:_}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,r;switch(t){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:o,mirror:c,axisLine:d}=this.props,f=fr(fr(fr({},dn(this.props,!1)),dn(d,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var m=+(o==="top"&&!c||o==="bottom"&&c);f=fr(fr({},f),{},{x1:t,y1:n+m*i,x2:t+r,y2:n+m*i})}else{var h=+(o==="left"&&!c||o==="right"&&c);f=fr(fr({},f),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return p.createElement("line",Hc({},f,{className:mn("recharts-cartesian-axis-line",ql(d,"className"))}))}static renderTickItem(t,n,r){var i,o=mn(n.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))i=p.cloneElement(t,fr(fr({},n),{},{className:o}));else if(typeof t=="function")i=t(fr(fr({},n),{},{className:o}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=mn(c,t.className)),i=p.createElement(_j,Hc({},n,{className:c}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:c,tickFormatter:d,unit:f}=this.props,m=Ej(fr(fr({},this.props),{},{ticks:r}),t,n),h=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=dn(this.props,!1),x=dn(c,!1),w=fr(fr({},v),{},{fill:"none"},dn(i,!1)),_=m.map((S,j)=>{var{line:A,tick:E}=this.getTickLineCoord(S),C=fr(fr(fr(fr({textAnchor:h,verticalAnchor:g},v),{},{stroke:"none",fill:o},x),E),{},{index:j,payload:S,visibleTicksCount:m.length,tickFormatter:d});return p.createElement(ga,Hc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},wy(this.props,S,j)),i&&p.createElement("line",Hc({},w,A,{className:mn("recharts-cartesian-axis-tick-line",ql(i,"className"))})),c&&Zo.renderTickItem(c,C,"".concat(typeof d=="function"?d(S.value,j):S.value).concat(f||"")))});return _.length>0?p.createElement("g",{className:"recharts-cartesian-axis-ticks"},_):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:c}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:p.createElement(ga,{className:mn("recharts-cartesian-axis",i),ref:d=>{if(d){var f=d.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(f);var m=f[0];if(m){var h=window.getComputedStyle(m).fontSize,g=window.getComputedStyle(m).letterSpacing;(h!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(m).fontSize,letterSpacing:window.getComputedStyle(m).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,c),Fr.renderCallByParent(this.props))}}Cj(Zo,"displayName","CartesianAxis");Cj(Zo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ihe=["x1","y1","x2","y2","key"],ohe=["offset"],lhe=["xAxisId","yAxisId"],che=["xAxisId","yAxisId"];function _M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(n),!0).forEach(function(r){uhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uhe(e,t,n){return(t=dhe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dhe(e){var t=fhe(e,"string");return typeof t=="symbol"?t:t+""}function fhe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rl.apply(null,arguments)}function iy(e,t){if(e==null)return{};var n,r,i=mhe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hhe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:o,height:c,ry:d}=e;return p.createElement("rect",{x:r,y:i,ry:d,width:o,height:c,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function _B(e,t){var n;if(p.isValidElement(e))n=p.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:o,y2:c,key:d}=t,f=iy(t,ihe),m=dn(f,!1),{offset:h}=m,g=iy(m,ohe);n=p.createElement("line",Rl({},g,{x1:r,y1:i,x2:o,y2:c,fill:"none",key:d}))}return n}function phe(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:c}=e,d=iy(e,lhe),f=i.map((m,h)=>{var g=Vr(Vr({},d),{},{x1:t,y1:m,x2:t+n,y2:m,key:"line-".concat(h),index:h});return _B(r,g)});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function yhe(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:o,yAxisId:c}=e,d=iy(e,che),f=i.map((m,h)=>{var g=Vr(Vr({},d),{},{x1:m,y1:t,x2:m,y2:t+n,key:"line-".concat(h),index:h});return _B(r,g)});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function ghe(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:o,height:c,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var m=d.map(g=>Math.round(g+i-i)).sort((g,v)=>g-v);i!==m[0]&&m.unshift(0);var h=m.map((g,v)=>{var x=!m[v+1],w=x?i+c-g:m[v+1]-g;if(w<=0)return null;var _=v%t.length;return p.createElement("rect",{key:"react-".concat(v),y:g,x:r,height:w,width:o,stroke:"none",fill:t[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function vhe(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:o,width:c,height:d,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var m=f.map(g=>Math.round(g+i-i)).sort((g,v)=>g-v);i!==m[0]&&m.unshift(0);var h=m.map((g,v)=>{var x=!m[v+1],w=x?i+c-g:m[v+1]-g;if(w<=0)return null;var _=v%n.length;return p.createElement("rect",{key:"react-".concat(v),x:g,y:o,width:w,height:d,stroke:"none",fill:n[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var bhe=(e,t)=>{var{xAxis:n,width:r,height:i,offset:o}=e;return g$(Ej(Vr(Vr(Vr({},Zo.defaultProps),n),{},{ticks:v$(n),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},_he=(e,t)=>{var{yAxis:n,width:r,height:i,offset:o}=e;return g$(Ej(Vr(Vr(Vr({},Zo.defaultProps),n),{},{ticks:v$(n),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},xhe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function nm(e){var t=bw(),n=_w(),r=S$(),i=Vr(Vr({},Vi(e,xhe)),{},{x:ft(e.x)?e.x:r.left,y:ft(e.y)?e.y:r.top,width:ft(e.width)?e.width:r.width,height:ft(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:c,x:d,y:f,width:m,height:h,syncWithTicks:g,horizontalValues:v,verticalValues:x}=i,w=Wr(),_=pt(P=>b2(P,"xAxis",o,w)),S=pt(P=>b2(P,"yAxis",c,w));if(!ft(m)||m<=0||!ft(h)||h<=0||!ft(d)||d!==+d||!ft(f)||f!==+f)return null;var j=i.verticalCoordinatesGenerator||bhe,A=i.horizontalCoordinatesGenerator||_he,{horizontalPoints:E,verticalPoints:C}=i;if((!E||!E.length)&&typeof A=="function"){var T=v&&v.length,O=A({yAxis:S?Vr(Vr({},S),{},{ticks:T?v:S.ticks}):void 0,width:t,height:n,offset:r},T?!0:g);nf(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(E=O)}if((!C||!C.length)&&typeof j=="function"){var R=x&&x.length,k=j({xAxis:_?Vr(Vr({},_),{},{ticks:R?x:_.ticks}):void 0,width:t,height:n,offset:r},R?!0:g);nf(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(C=k)}return p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(hhe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),p.createElement(ghe,Rl({},i,{horizontalPoints:E})),p.createElement(vhe,Rl({},i,{verticalPoints:C})),p.createElement(phe,Rl({},i,{offset:r,horizontalPoints:E,xAxis:_,yAxis:S})),p.createElement(yhe,Rl({},i,{offset:r,verticalPoints:C,xAxis:_,yAxis:S})))}nm.displayName="CartesianGrid";var xB=(e,t,n,r)=>ri(e,"xAxis",t,r),SB=(e,t,n,r)=>zo(e,"xAxis",t,r),wB=(e,t,n,r)=>ri(e,"yAxis",n,r),jB=(e,t,n,r)=>zo(e,"yAxis",n,r),She=ke([gn,xB,wB,SB,jB],(e,t,n,r,i)=>Wo(e,"xAxis")?vf(t,r,!1):vf(n,i,!1)),whe=(e,t,n,r,i)=>i,jhe=ke([Xy,whe],(e,t)=>{if(e.some(n=>n.type==="line"&&t.dataKey===n.dataKey&&t.data===n.data))return t}),Nhe=ke([gn,xB,wB,SB,jB,jhe,She,Gw],(e,t,n,r,i,o,c,d)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:h}=d;if(!(o==null||t==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null)){var{dataKey:g,data:v}=o,x;if(v!=null&&v.length>0?x=v:x=f?.slice(m,h+1),x!=null)return Hhe({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}}),Ahe=["type","layout","connectNulls","needClip"],Ehe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function NB(e,t){if(e==null)return{};var n,r,i=Che(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Che(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(n),!0).forEach(function(r){lg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lg(e,t,n){return(t=The(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function The(e){var t=khe(e,"string");return typeof t=="symbol"?t:t+""}function khe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fu.apply(null,arguments)}var Ohe=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:Iy(n,t),payload:e}]};function Rhe(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:o,name:c,hide:d,unit:f}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:Iy(c,t),hide:d,type:e.tooltipType,color:e.stroke,unit:f}}}var AB=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Mhe(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}var Ihe=(e,t,n)=>{var r=n.reduce((g,v)=>g+v);if(!r)return AB(t,e);for(var i=Math.floor(e/r),o=e%r,c=t-e,d=[],f=0,m=0;f<n.length;m+=n[f],++f)if(m+n[f]>o){d=[...n.slice(0,f),o-m];break}var h=d.length%2===0?[0,c]:[c];return[...Mhe(n,i),...d,...h].map(g=>"".concat(g,"px")).join(", ")};function Dhe(e,t){var n;if(p.isValidElement(e))n=p.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=mn("recharts-line-dot",typeof e!="boolean"?e.className:"");n=p.createElement(V3,fu({},t,{className:r}))}return n}function Phe(e,t){return e==null?!1:t?!0:e.length===1}function $he(e){var{clipPathId:t,points:n,props:r}=e,{dot:i,dataKey:o,needClip:c}=r;if(!Phe(n,i))return null;var d=yP(i),f=dn(r,!1),m=dn(i,!0),h=n.map((v,x)=>{var w=Is(Is(Is({key:"dot-".concat(x),r:3},f),m),{},{index:x,cx:v.x,cy:v.y,dataKey:o,value:v.value,payload:v.payload,points:n});return Dhe(i,w)}),g={clipPath:c?"url(#clipPath-".concat(d?"":"dots-").concat(t,")"):null};return p.createElement(ga,fu({className:"recharts-line-dots",key:"dots"},g),h)}function t1(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:i,props:o,showLabels:c}=e,{type:d,layout:f,connectNulls:m,needClip:h}=o,g=NB(o,Ahe),v=Is(Is({},dn(g,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):null,points:r,type:d,layout:f,connectNulls:m,strokeDasharray:i??o.strokeDasharray});return p.createElement(p.Fragment,null,r?.length>1&&p.createElement(N$,fu({},v,{pathRef:n})),p.createElement($he,{points:r,clipPathId:t,props:o}),c&&Uo.renderCallByParent(o,r))}function Lhe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Bhe(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:c,strokeDasharray:d,isAnimationActive:f,animationBegin:m,animationDuration:h,animationEasing:g,animateNewValues:v,width:x,height:w,onAnimationEnd:_,onAnimationStart:S}=n,j=i.current,A=J3(n,"recharts-line-"),[E,C]=p.useState(!1),T=p.useCallback(()=>{typeof _=="function"&&_(),C(!1)},[_]),O=p.useCallback(()=>{typeof S=="function"&&S(),C(!0)},[S]),R=Lhe(r.current),k=o.current;return p.createElement(Hl,{begin:m,duration:h,isActive:f,easing:g,from:{t:0},to:{t:1},onAnimationEnd:T,onAnimationStart:O,key:A},P=>{var{t:H}=P,K=Ms(k,R+k),B=Math.min(K(H),R),U;if(d){var I="".concat(d).split(/[,\s]+/gim).map(G=>parseFloat(G));U=Ihe(B,R,I)}else U=AB(R,B);if(j){var L=j.length/c.length,$=H===1?c:c.map((G,te)=>{var re=Math.floor(te*L);if(j[re]){var M=j[re],q=Ms(M.x,G.x),z=Ms(M.y,G.y);return Is(Is({},G),{},{x:q(H),y:z(H)})}if(v){var V=Ms(x*2,G.x),Y=Ms(w/2,G.y);return Is(Is({},G),{},{x:V(H),y:Y(H)})}return Is(Is({},G),{},{x:G.x,y:G.y})});return i.current=$,p.createElement(t1,{props:n,points:$,clipPathId:t,pathRef:r,showLabels:!E,strokeDasharray:U})}return H>0&&R>0&&(i.current=c,o.current=B),p.createElement(t1,{props:n,points:c,clipPathId:t,pathRef:r,showLabels:!E,strokeDasharray:U})})}function Uhe(e){var{clipPathId:t,props:n}=e,{points:r,isAnimationActive:i}=n,o=p.useRef(null),c=p.useRef(0),d=p.useRef(null),f=o.current;return i&&r&&r.length&&f!==r?p.createElement(Bhe,{props:n,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:c,pathRef:d}):p.createElement(t1,{props:n,points:r,clipPathId:t,pathRef:d,showLabels:!0})}var qhe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Kr(e.payload,t)});class zhe extends p.Component{constructor(){super(...arguments),lg(this,"id",au("recharts-line-"))}render(){var t,{hide:n,dot:r,points:i,className:o,xAxisId:c,yAxisId:d,top:f,left:m,width:h,height:g,id:v,needClip:x,layout:w}=this.props;if(n)return null;var _=mn("recharts-line",o),S=Nn(v)?this.id:v,{r:j=3,strokeWidth:A=2}=(t=dn(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},E=yP(r),C=j*2+A;return p.createElement(p.Fragment,null,p.createElement(ga,{className:_},x&&p.createElement("defs",null,p.createElement(uB,{clipPathId:S,xAxisId:c,yAxisId:d}),!E&&p.createElement("clipPath",{id:"clipPath-dots-".concat(S)},p.createElement("rect",{x:m-C/2,y:f-C/2,width:h+C,height:g+C}))),p.createElement(Uhe,{props:this.props,clipPathId:S}),p.createElement(iB,{direction:w==="horizontal"?"y":"x"},p.createElement(nB,{xAxisId:c,yAxisId:d,data:i,dataPointFormatter:qhe,errorBarOffset:0},this.props.children))),p.createElement(dfe,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var EB={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Nu.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Fhe(e){var t=Vi(e,EB),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:c,connectNulls:d,dot:f,hide:m,isAnimationActive:h,label:g,legendType:v,xAxisId:x,yAxisId:w}=t,_=NB(t,Ehe),{needClip:S}=wj(x,w),{height:j,width:A,x:E,y:C}=Sj(),T=Ly(),O=Wr(),R=p.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),k=pt(P=>Nhe(P,x,w,O,R));return T!=="horizontal"&&T!=="vertical"?null:p.createElement(zhe,fu({},_,{connectNulls:d,dot:f,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:o,animationEasing:c,isAnimationActive:h,hide:m,label:g,legendType:v,xAxisId:x,yAxisId:w,points:k,layout:T,height:j,width:A,left:E,top:C,needClip:S}))}function Hhe(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,dataKey:c,bandSize:d,displayedData:f}=e;return f.map((m,h)=>{var g=Kr(m,c);return t==="horizontal"?{x:ZO({axis:n,ticks:i,bandSize:d,entry:m,index:h}),y:Nn(g)?null:r.scale(g),value:g,payload:m}:{x:Nn(g)?null:n.scale(g),y:ZO({axis:r,ticks:o,bandSize:d,entry:m,index:h}),value:g,payload:m}})}class cg extends p.PureComponent{render(){return p.createElement(rB,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},p.createElement(Z3,{legendPayload:Ohe(this.props)}),p.createElement(Q3,{fn:Rhe,args:this.props}),p.createElement(Fhe,this.props))}}lg(cg,"displayName","Line");lg(cg,"defaultProps",EB);function SM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(n),!0).forEach(function(r){Vhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vhe(e,t,n){return(t=Khe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Khe(e){var t=Ghe(e,"string");return typeof t=="symbol"?t:t+""}function Ghe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Whe={xAxis:{},yAxis:{},zAxis:{}},CB=bs({name:"cartesianAxis",initialState:Whe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=wM(wM({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:Yhe,removeXAxis:Xhe,addYAxis:Qhe,removeYAxis:Zhe,addZAxis:_Pe,removeZAxis:xPe,updateYAxisWidth:Jhe}=CB.actions,epe=CB.reducer,tpe=["children"],npe=["dangerouslySetInnerHTML","ticks"];function TB(e,t,n){return(t=rpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rpe(e){var t=ape(e,"string");return typeof t=="symbol"?t:t+""}function ape(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(null,arguments)}function kB(e,t){if(e==null)return{};var n,r,i=spe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function spe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ipe(e){var t=Gn(),n=p.useMemo(()=>{var{children:o}=e,c=kB(e,tpe);return c},[e]),r=pt(o=>Gi(o,n.id)),i=n===r;return p.useEffect(()=>(t(Yhe(n)),()=>{t(Xhe(n))}),[n,t]),i?e.children:null}var ope=e=>{var{xAxisId:t,className:n}=e,r=pt(x$),i=Wr(),o="xAxis",c=pt(x=>qo(x,o,t,i)),d=pt(x=>u3(x,o,t,i)),f=pt(x=>i3(x,t)),m=pt(x=>Fle(x,t));if(f==null||m==null)return null;var{dangerouslySetInnerHTML:h,ticks:g}=e,v=kB(e,npe);return p.createElement(Zo,n1({},v,{scale:c,x:m.x,y:m.y,width:f.width,height:f.height,className:mn("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:d}))},lpe=e=>{var t,n,r,i,o;return p.createElement(ipe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter},p.createElement(ope,e))};class Ru extends p.Component{render(){return p.createElement(lpe,this.props)}}TB(Ru,"displayName","XAxis");TB(Ru,"defaultProps",{allowDataOverflow:Oa.allowDataOverflow,allowDecimals:Oa.allowDecimals,allowDuplicatedCategory:Oa.allowDuplicatedCategory,height:Oa.height,hide:!1,mirror:Oa.mirror,orientation:Oa.orientation,padding:Oa.padding,reversed:Oa.reversed,scale:Oa.scale,tickCount:Oa.tickCount,type:Oa.type,xAxisId:0});var cpe=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=e,c=0;if(t){t.forEach(h=>{if(h){var g=h.getBoundingClientRect();g.width>c&&(c=g.width)}});var d=n?n.getBoundingClientRect().width:0,f=i+o,m=c+f+d+(n?r:0);return Math.round(m)}return 0},upe=["dangerouslySetInnerHTML","ticks"];function OB(e,t,n){return(t=dpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dpe(e){var t=fpe(e,"string");return typeof t=="symbol"?t:t+""}function fpe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r1.apply(null,arguments)}function mpe(e,t){if(e==null)return{};var n,r,i=hpe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hpe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ppe(e){var t=Gn();return p.useEffect(()=>(t(Qhe(e)),()=>{t(Zhe(e))}),[e,t]),null}var ype=e=>{var t,{yAxisId:n,className:r,width:i,label:o}=e,c=p.useRef(null),d=p.useRef(null),f=pt(x$),m=Wr(),h=Gn(),g="yAxis",v=pt(E=>qo(E,g,n,m)),x=pt(E=>o3(E,n)),w=pt(E=>Hle(E,n)),_=pt(E=>u3(E,g,n,m));if(p.useLayoutEffect(()=>{var E;if(!(i!=="auto"||!x||xj(o)||p.isValidElement(o))){var C=c.current,T=C==null||(E=C.tickRefs)===null||E===void 0?void 0:E.current,{tickSize:O,tickMargin:R}=C.props,k=cpe({ticks:T,label:d.current,labelGapWithTick:5,tickSize:O,tickMargin:R});Math.round(x.width)!==Math.round(k)&&h(Jhe({id:n,width:k}))}},[c,c==null||(t=c.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,h,o,n,i]),x==null||w==null)return null;var{dangerouslySetInnerHTML:S,ticks:j}=e,A=mpe(e,upe);return p.createElement(Zo,r1({},A,{ref:c,labelRef:d,scale:v,x:w.x,y:w.y,width:x.width,height:x.height,className:mn("recharts-".concat(g," ").concat(g),r),viewBox:f,ticks:_}))},gpe=e=>{var t,n,r,i,o;return p.createElement(p.Fragment,null,p.createElement(ppe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter}),p.createElement(ype,e))},vpe={allowDataOverflow:Ra.allowDataOverflow,allowDecimals:Ra.allowDecimals,allowDuplicatedCategory:Ra.allowDuplicatedCategory,hide:!1,mirror:Ra.mirror,orientation:Ra.orientation,padding:Ra.padding,reversed:Ra.reversed,scale:Ra.scale,tickCount:Ra.tickCount,type:Ra.type,width:Ra.width,yAxisId:0};class Mu extends p.Component{render(){return p.createElement(gpe,this.props)}}OB(Mu,"displayName","YAxis");OB(Mu,"defaultProps",vpe);var E0={exports:{}},C0={};var jM;function bpe(){if(jM)return C0;jM=1;var e=pu();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,c=e.useMemo,d=e.useDebugValue;return C0.useSyncExternalStoreWithSelector=function(f,m,h,g,v){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(T){if(!j){if(j=!0,A=T,T=g(T),v!==void 0&&w.hasValue){var O=w.value;if(v(O,T))return E=O}return E=T}if(O=E,n(A,T))return O;var R=g(T);return v!==void 0&&v(O,R)?(A=T,O):(A=T,E=R)}var j=!1,A,E,C=h===void 0?null:h;return[function(){return S(m())},C===null?void 0:function(){return S(C())}]},[m,h,g,v]);var _=r(f,x[0],x[1]);return o(function(){w.hasValue=!0,w.value=_},[_]),d(_),_},C0}var NM;function _pe(){return NM||(NM=1,E0.exports=bpe()),E0.exports}_pe();function xpe(e){e()}function Spe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xpe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var AM={notify(){},get:()=>[]};function wpe(e,t){let n,r=AM,i=0,o=!1;function c(_){h();const S=r.subscribe(_);let j=!1;return()=>{j||(j=!0,S(),g())}}function d(){r.notify()}function f(){w.onStateChange&&w.onStateChange()}function m(){return o}function h(){i++,n||(n=e.subscribe(f),r=Spe())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=AM)}function v(){o||(o=!0,h())}function x(){o&&(o=!1,g())}const w={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:m,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>r};return w}var jpe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Npe=jpe(),Ape=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Epe=Ape(),Cpe=()=>Npe||Epe?p.useLayoutEffect:p.useEffect,Tpe=Cpe(),kpe=Symbol.for("react-redux-context"),Ope=typeof globalThis<"u"?globalThis:{};function Rpe(){if(!p.createContext)return{};const e=Ope[kpe]??=new Map;let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var Mpe=Rpe();function Ipe(e){const{children:t,context:n,serverState:r,store:i}=e,o=p.useMemo(()=>{const f=wpe(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),c=p.useMemo(()=>i.getState(),[i]);Tpe(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,c]);const d=n||Mpe;return p.createElement(d.Provider,{value:o},t)}var Dpe=Ipe,Ppe=(e,t)=>t,Tj=ke([Ppe,gn,nle,jr,N3,Wi,Gce,xr],Zce),kj=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},RB=ms("mouseClick"),MB=Vf();MB.startListening({actionCreator:RB,effect:(e,t)=>{var n=e.payload,r=Tj(t.getState(),kj(n));r?.activeIndex!=null&&t.dispatch(rce({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var a1=ms("mouseMove"),IB=Vf();IB.startListening({actionCreator:a1,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=uj(r,r.tooltip.settings.shared),o=Tj(r,kj(n));i==="axis"&&(o?.activeIndex!=null?t.dispatch(v3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(g3()))}});function $pe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var EM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},DB=bs({name:"rootProps",initialState:EM,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:EM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Lpe=DB.reducer,{updateOptions:Bpe}=DB.actions,PB=bs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:SPe}=PB.actions,Upe=PB.reducer,$B=ms("keyDown"),LB=ms("focus"),Oj=Vf();Oj.startListening({actionCreator:$B,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var c=Number(dj(i,Jl(n))),d=Wi(n);if(o==="Enter"){var f=ty(n,"axis","hover",String(i.index));t.dispatch(KS({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var m=Wle(n),h=m==="left-to-right"?1:-1,g=o==="ArrowRight"?1:-1,v=c+g*h;if(!(d==null||v>=d.length||v<0)){var x=ty(n,"axis","hover",String(v));t.dispatch(KS({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Oj.startListening({actionCreator:LB,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",c=ty(n,"axis","hover",String(o));t.dispatch(KS({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:c}))}}}});var ns=ms("externalEvent"),BB=Vf();BB.startListening({actionCreator:ns,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:$ce(n),activeDataKey:T3(n),activeIndex:Kl(n),activeLabel:C3(n),activeTooltipIndex:Kl(n),isTooltipActive:Lce(n)};e.payload.handler(r,e.payload.reactEvent)}}});var qpe=ke([ku],e=>e.tooltipItemPayloads),zpe=ke([qpe,tm,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(d=>d.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var c=t(o,n);return c}}}),UB=ms("touchMove"),qB=Vf();qB.startListening({actionCreator:UB,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=uj(r,r.tooltip.settings.shared);if(i==="axis"){var o=Tj(r,kj({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(v3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var c,d=n.touches[0],f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var m=f.getAttribute(pre),h=(c=f.getAttribute(yre))!==null&&c!==void 0?c:void 0,g=zpe(t.getState(),m,h);t.dispatch(y3({activeDataKey:h,activeIndex:m,activeCoordinate:g}))}}});var Fpe=WP({brush:Ame,cartesianAxis:epe,chartData:hue,graphicalItems:Ide,layout:Bne,legend:kre,options:cue,polarAxis:Ede,polarOptions:Upe,referenceElements:Pme,rootProps:Lpe,tooltip:ace}),Hpe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return une({reducer:Fpe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([MB.middleware,IB.middleware,Oj.middleware,BB.middleware,qB.middleware]),devTools:{serialize:{replacer:$pe},name:"recharts-".concat(n)}})};function Vpe(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Wr(),o=p.useRef(null);if(i)return n;o.current==null&&(o.current=Hpe(t,r));var c=uw;return p.createElement(Dpe,{context:c,store:o.current},n)}function Kpe(e){var{layout:t,width:n,height:r,margin:i}=e,o=Gn(),c=Wr();return p.useEffect(()=>{c||(o(Pne(t)),o($ne({width:n,height:r})),o(Dne(i)))},[o,c,t,n,r,i]),null}function Gpe(e){var t=Gn();return p.useEffect(()=>{t(Bpe(e))},[t,e]),null}var Wpe=["children"];function Ype(e,t){if(e==null)return{};var n,r,i=Xpe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xpe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oy.apply(null,arguments)}var Qpe={width:"100%",height:"100%"},Zpe=p.forwardRef((e,t)=>{var n=bw(),r=_w(),i=j$();if(!Up(n)||!Up(r))return null;var{children:o,otherAttributes:c,title:d,desc:f}=e,m,h;return typeof c.tabIndex=="number"?m=c.tabIndex:m=i?0:void 0,typeof c.role=="string"?h=c.role:h=i?"application":void 0,p.createElement(Z1,oy({},c,{title:d,desc:f,role:h,tabIndex:m,width:n,height:r,style:Qpe,ref:t}),o)}),Jpe=e=>{var{children:t}=e,n=pt($y);if(!n)return null;var{width:r,height:i,y:o,x:c}=n;return p.createElement(Z1,{width:r,height:i,x:c,y:o},t)},CM=p.forwardRef((e,t)=>{var{children:n}=e,r=Ype(e,Wpe),i=Wr();return i?p.createElement(Jpe,null,n):p.createElement(Zpe,oy({ref:t},r),n)});function eye(){var e=Gn(),[t,n]=p.useState(null),r=pt(hre);return p.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;Ba(o)&&o!==r&&e(Lne(o))}},[t,e,r]),n}function TM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TM(Object(n),!0).forEach(function(r){nye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nye(e,t,n){return(t=rye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rye(e){var t=aye(e,"string");return typeof t=="symbol"?t:t+""}function aye(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sye=p.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:c,onDoubleClick:d,onMouseDown:f,onMouseEnter:m,onMouseLeave:h,onMouseMove:g,onMouseUp:v,onTouchEnd:x,onTouchMove:w,onTouchStart:_,style:S,width:j}=e,A=Gn(),[E,C]=p.useState(null),[T,O]=p.useState(null);gue();var R=eye(),k=p.useCallback(z=>{R(z),typeof t=="function"&&t(z),C(z),O(z)},[R,t,C,O]),P=p.useCallback(z=>{A(RB(z)),A(ns({handler:o,reactEvent:z}))},[A,o]),H=p.useCallback(z=>{A(a1(z)),A(ns({handler:m,reactEvent:z}))},[A,m]),K=p.useCallback(z=>{A(g3()),A(ns({handler:h,reactEvent:z}))},[A,h]),B=p.useCallback(z=>{A(a1(z)),A(ns({handler:g,reactEvent:z}))},[A,g]),U=p.useCallback(()=>{A(LB())},[A]),I=p.useCallback(z=>{A($B(z.key))},[A]),L=p.useCallback(z=>{A(ns({handler:c,reactEvent:z}))},[A,c]),$=p.useCallback(z=>{A(ns({handler:d,reactEvent:z}))},[A,d]),G=p.useCallback(z=>{A(ns({handler:f,reactEvent:z}))},[A,f]),te=p.useCallback(z=>{A(ns({handler:v,reactEvent:z}))},[A,v]),re=p.useCallback(z=>{A(ns({handler:_,reactEvent:z}))},[A,_]),M=p.useCallback(z=>{A(UB(z)),A(ns({handler:w,reactEvent:z}))},[A,w]),q=p.useCallback(z=>{A(ns({handler:x,reactEvent:z}))},[A,x]);return p.createElement(D3.Provider,{value:E},p.createElement(gP.Provider,{value:T},p.createElement("div",{className:mn("recharts-wrapper",r),style:tye({position:"relative",cursor:"default",width:j,height:i},S),onClick:P,onContextMenu:L,onDoubleClick:$,onFocus:U,onKeyDown:I,onMouseDown:G,onMouseEnter:H,onMouseLeave:K,onMouseMove:B,onMouseUp:te,onTouchEnd:q,onTouchMove:M,onTouchStart:re,ref:k},n)))}),iye=["children","className","width","height","style","compact","title","desc"];function oye(e,t){if(e==null)return{};var n,r,i=lye(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cye=p.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:o,style:c,compact:d,title:f,desc:m}=e,h=oye(e,iye),g=dn(h,!1);return d?p.createElement(CM,{otherAttributes:g,title:f,desc:m},n):p.createElement(sye,{className:r,style:c,width:i,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(CM,{otherAttributes:g,title:f,desc:m,ref:t},p.createElement($me,null,n)))}),uye=["width","height"];function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s1.apply(null,arguments)}function dye(e,t){if(e==null)return{};var n,r,i=fye(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fye(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var mye={top:5,right:5,bottom:5,left:5},hye={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:mye,reverseStackOrder:!1,syncMethod:"index"},zB=p.forwardRef(function(t,n){var r,i=Vi(t.categoricalChartProps,hye),{width:o,height:c}=i,d=dye(i,uye);if(!Up(o)||!Up(c))return null;var{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,categoricalChartProps:v}=t,x={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return p.createElement(Vpe,{preloadedState:{options:x},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:f},p.createElement(Nme,{chartData:v.data}),p.createElement(Kpe,{width:o,height:c,layout:i.layout,margin:i.margin}),p.createElement(Gpe,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),p.createElement(cye,s1({},d,{width:o,height:c,ref:n})))}),pye=["axis"],FB=p.forwardRef((e,t)=>p.createElement(zB,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pye,tooltipPayloadSearcher:P3,categoricalChartProps:e,ref:t})),yye=["axis","item"],HB=p.forwardRef((e,t)=>p.createElement(zB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yye,tooltipPayloadSearcher:P3,categoricalChartProps:e,ref:t}));const Vc=["#4E79A7","#F28E2B","#E15759","#76B7B2","#59A14F","#EDC949","#AF7AA1","#FF9DA7","#9C755F","#BAB0AC"],i1={F1:"#8a2be2",F2:"#1e90ff",F3:"#00ffff",F4:"#32cd32",F5:"#9acd32",F6:"#ffa500",F7:"#ff4500",F8:"#ff0000",clear:"#888888",nir:"#800000",lux:"#ffd700","405nm":"#7b68ee","425nm":"#4169e1","450nm":"#0000ff","475nm":"#00bfff","515nm":"#32cd32","550nm":"#adff2f","555nm":"#9acd32","600nm":"#ffa500","640nm":"#ff6347","690nm":"#8b0000","745nm":"#800000",VIS1:"#696969",VIS2:"#a9a9a9",NIR855:"#4b0082"},gye="_chart_1ulpr_1",vye={chart:gye},kM=[["F1","F1 (400430 nm)"],["F2","F2 (430460 nm)"],["F3","F3 (460500 nm)"],["F4","F4 (500530 nm)"],["F5","F5 (530570 nm)"],["F6","F6 (570610 nm)"],["F7","F7 (610650 nm)"],["F8","F8 (650700 nm)"],["clear","Full Spectrum of Visible Light"],["nir","Near infrared"]],OM={F1:"415nm",F2:"445nm",F3:"480nm",F4:"515nm",F5:"555nm",F6:"590nm",F7:"630nm",F8:"680nm"},RM=[["405nm","405 nm"],["425nm","425 nm"],["450nm","450 nm"],["475nm","475 nm"],["515nm","515 nm"],["550nm","550 nm"],["555nm","555 nm"],["600nm","600 nm"],["640nm","640 nm"],["690nm","690 nm"],["745nm","745 nm"],["VIS1","VIS1"],["VIS2","VIS2"],["NIR855","NIR855"]];function bye({sensorData:e}){const{bandMeta:t,bandMap:n}=p.useMemo(()=>{if(!e)return{bandMeta:kM,bandMap:OM};const o=Object.keys(e);return RM.some(([d])=>o.includes(d))?{bandMeta:RM,bandMap:{}}:{bandMeta:kM,bandMap:OM}},[e]),{findRange:r}=K1(),i=p.useMemo(()=>e?t.map(([o,c],d)=>{const f=n[o]||o,m=r(f);return{key:o,index:d,name:c,value:e[o]||0,min:m?.min,max:m?.max}}):[],[e,t,n,r]);return a.jsx(ag,{className:vye.chart,width:"100%",height:400,debounce:200,children:a.jsxs(HB,{data:i,margin:{top:20,right:30,left:0,bottom:50},isAnimationActive:!1,animationDuration:0,children:[a.jsx(nm,{strokeDasharray:"3 3"}),a.jsx(Ru,{dataKey:"index",type:"number",domain:[-.5,i.length-.5],ticks:i.map(o=>o.index),tickFormatter:o=>i[o]?.name,angle:-30,textAnchor:"end",interval:0,height:60,tick:{fontSize:10}}),a.jsx(Mu,{domain:[0,900],allowDataOverflow:!0,children:a.jsx(Fr,{value:"Raw Intensity",angle:-90,position:"insideLeft"})}),i.map(o=>o.min!==void 0&&o.max!==void 0&&a.jsx(Aj,{x1:o.index-.5,x2:o.index+.5,y1:o.min,y2:o.max,fill:i1[o.key]||Vc[o.index%Vc.length],fillOpacity:.1,stroke:"none"},`range-${o.index}`)),a.jsx(rg,{}),a.jsx(ig,{dataKey:"value",isAnimationActive:!1,animationDuration:0,children:i.map((o,c)=>a.jsx(bj,{fill:i1[o.key]||Vc[c%Vc.length]},`cell-${c}`))})]})})}const _ye=my.memo(bye),xye="_page_1n60h_1",Sye="_pageGrid_1n60h_25",wye="_sectionCard_1n60h_37",jye="_sectionHeader_1n60h_55",Nye="_chartSection_1n60h_73",Aye="_chartStack_1n60h_85",Eye="_chartBlock_1n60h_97",Cye="_subSectionHeader_1n60h_109",Tye="_selectorRow_1n60h_125",kye="_selectorLabel_1n60h_141",Oye="_deviceSelect_1n60h_157",Rye="_metricSelectorRow_1n60h_175",Mye="_metricSelect_1n60h_175",Iye="_selectorHint_1n60h_209",Dye="_lastUpdated_1n60h_219",Pye="_chartWrapper_1n60h_229",$ye="_chartEmpty_1n60h_247",Lye="_devicesSection_1n60h_259",Bye="_deviceGrid_1n60h_271",Uye="_deviceCard_1n60h_283",qye="_deviceCardHeader_1n60h_305",zye="_deviceTopic_1n60h_319",Fye="_deviceId_1n60h_335",Hye="_deviceLayer_1n60h_347",Vye="_deviceMetaBlock_1n60h_357",Kye="_deviceMeta_1n60h_357",Gye="_deviceHealth_1n60h_381",Wye="_metricGrid_1n60h_399",Yye="_metricTile_1n60h_411",Xye="_metricLabel_1n60h_427",Qye="_metricValue_1n60h_437",Zye="_metricRange_1n60h_451",Jye="_metricOk_1n60h_463",ege="_metricAlert_1n60h_471",tge="_metricIdle_1n60h_479",nge="_metricEmpty_1n60h_487",rge="_metaGrid_1n60h_499",age="_metaItem_1n60h_515",sge="_metaLabel_1n60h_529",ige="_metaValue_1n60h_543",Rt={page:xye,pageGrid:Sye,sectionCard:wye,sectionHeader:jye,chartSection:Nye,chartStack:Aye,chartBlock:Eye,subSectionHeader:Cye,selectorRow:Tye,selectorLabel:kye,deviceSelect:Oye,metricSelectorRow:Rye,metricSelect:Mye,selectorHint:Iye,lastUpdated:Dye,chartWrapper:Pye,chartEmpty:$ye,devicesSection:Lye,deviceGrid:Bye,deviceCard:Uye,deviceCardHeader:qye,deviceTopic:zye,deviceId:Fye,deviceLayer:Hye,deviceMetaBlock:Vye,deviceMeta:Kye,deviceHealth:Gye,metricGrid:Wye,metricTile:Yye,metricLabel:Xye,metricValue:Qye,metricRange:Zye,metricOk:Jye,metricAlert:ege,metricIdle:tge,metricEmpty:nge,metaGrid:rge,metaItem:age,metaLabel:sge,metaValue:ige};function o1(e){return e==null?"":String(e).toLowerCase().replace(/[^a-z0-9]/g,"")}const oge={AirTemp:"airTemp",WaterTemp:"waterTemp",Humidity:"humidity",Light:"light",pH:"ph",EC:"ec",A_Temp_C:"airTemp",A_RH_C:"humidity",co2:"co2"},lge={airtemp:["airtemp","atemp","atempc","a_temp","a_temp_c","atempg","airtemperature","temperature"],watertemp:["watertemp","watertempc","dtemp","d_temp","dissolvedtemp","dissolvedtemperature","water_temp","water_temp_c","watertemperature"],humidity:["humidity","relativehumidity","a_rh","arh","arhc","a_rh_c","rh"],light:["light","lux","ppfd"],ph:["ph"],ec:["ec","dissolvedec","electricalconductivity"],co2:["co2","co2ppm"]},cge=[{id:"post-transplant",daysLabel:"15-21",minDay:15,maxDay:21,description:"Post-Transplant  Early Vegetative (NFT channels)",params:{AirTemp:{min:23,max:26,unit:"C"},WaterTemp:{min:20,max:22,unit:"C"},Humidity:{min:65,max:70,unit:"%"},Light:{min:8e3,max:12e3,unit:"lux"},pH:{min:5.8,max:6.1},EC:{min:1,max:1.2,unit:"mS/cm"}}},{id:"vegetative-growth",daysLabel:"22-35",minDay:22,maxDay:35,description:"Vegetative Growth  Leaf Development",params:{AirTemp:{min:22,max:25,unit:"C"},WaterTemp:{min:20,max:22,unit:"C"},Humidity:{min:60,max:65,unit:"%"},Light:{min:12e3,max:15e3,unit:"lux"},pH:{min:5.8,max:6.2},EC:{min:1.2,max:1.6,unit:"mS/cm"}}},{id:"mature-vegetative",daysLabel:"36-50",minDay:36,maxDay:50,description:"Mature Vegetative  Pre-Harvest",params:{AirTemp:{min:22,max:25,unit:"C"},WaterTemp:{min:19,max:21,unit:"C"},Humidity:{min:55,max:60,unit:"%"},Light:{min:15e3,max:18e3,unit:"lux"},pH:{min:5.8,max:6.2},EC:{min:1.4,max:1.8,unit:"mS/cm"}}},{id:"harvest-regrowth",daysLabel:"51-60",minDay:51,maxDay:60,description:"Harvest & Regrowth Cycle",params:{AirTemp:{min:22,max:25,unit:"C"},WaterTemp:{min:19,max:21,unit:"C"},Humidity:{min:55,max:60,unit:"%"},Light:{min:15e3,max:18e3,unit:"lux"},pH:{min:5.8,max:6.2},EC:{min:1.4,max:1.6,unit:"mS/cm"}}}],uge=[{id:"early-vegetative",daysLabel:"1-10",minDay:1,maxDay:10,description:"Early Vegetative (Post-Transplant, Root Establishment)",params:{A_Temp_C:{min:23,max:26,unit:"C"},A_RH_C:{min:65,max:72,unit:"%"},light:{min:8e3,max:12e3,unit:"lux"},co2:{min:600,max:900,unit:"ppm"}},spectral:{control:"monitor",target_fullscale:{minPct:60,maxPct:80},note:"Keep VIS1/FD1 ~6080% FS; avoid saturation (>95%)."}},{id:"main-vegetative",daysLabel:"11-30",minDay:11,maxDay:30,description:"Main Vegetative Growth  Leaf Expansion",params:{A_Temp_C:{min:22,max:25,unit:"C"},A_RH_C:{min:58,max:65,unit:"%"},light:{min:12e3,max:16e3,unit:"lux"},co2:{min:700,max:1200,unit:"ppm"}},spectral:{control:"monitor",target_fullscale:{minPct:55,maxPct:75},note:"Maintain stable spectrum; lower gain if VIS1 >85% FS."}},{id:"mature-vegetative-harvest",daysLabel:"31-46",minDay:31,maxDay:46,description:"Mature Vegetative  Harvest & Regrowth",params:{A_Temp_C:{min:22,max:25,unit:"C"},A_RH_C:{min:55,max:60,unit:"%"},light:{min:15e3,max:18e3,unit:"lux"},co2:{min:800,max:1200,unit:"ppm"}},spectral:{control:"monitor",target_fullscale:{minPct:50,maxPct:70},note:"Use same range after harvest to support regrowth."}}];function ly(e){if(e==null||e==="")return;const t=Number(e);return Number.isFinite(t)?t:void 0}function dge(e){if(!e)return null;const t=ly(e.min),n=ly(e.max);return t===void 0&&n===void 0?null:{min:t,max:n,unit:e.unit||void 0}}function fge(e){return e?e.replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\s+/g," ").trim().replace(/\b([a-z])/g,t=>t.toUpperCase()):""}function VB(e,t={}){const{groupId:n}=t,r=[],i=e?.params&&typeof e.params=="object"?e.params:{};for(const[o,c]of Object.entries(i)){const d=oge[o]||o,f=o1(d),m=dge(c);if(!f||!m)continue;const h=new Set([f]),g=lge[f];if(Array.isArray(g))for(const v of g){const x=o1(v);x&&h.add(x)}r.push({key:o,sanitizedKey:f,aliases:[...h],displayLabel:c?.label||fge(o),range:m,groupId:n})}return{...e,entries:r}}function mge(e,t){if(!Array.isArray(e)||!e.length)return null;const n=Number.isFinite(t)?Math.max(1,Math.floor(t)):1,r=e.find(d=>!(d.minDay!==void 0&&n<d.minDay||d.maxDay!==void 0&&n>d.maxDay));if(r)return{...r,isBeforeDefinedRange:!1,isBeyondDefinedRange:!1};const i=[...e].sort((d,f)=>(d.minDay??0)-(f.minDay??0)),o=i[0],c=i[i.length-1];return n<(o?.minDay??1)?{...o,isBeforeDefinedRange:!0,isBeyondDefinedRange:!1}:{...c,isBeforeDefinedRange:!1,isBeyondDefinedRange:n>(c?.maxDay??n)}}const hge={id:"solution",label:"NFT Solution Channels",topics:["wateroutput","watertank","actuatoroxygenpump"],stages:cge.map(e=>VB(e,{groupId:"solution"}))},pge={id:"environment",label:"Grow Sensors",topics:["growsensors"],stages:uge.map(e=>VB(e,{groupId:"environment"}))},yge=[hge,pge];function gge(e){const t=new Map,n=new Map,r=[],i=[];for(const o of yge){const c=mge(o.stages,e);if(!c)continue;const d={groupId:o.id,groupLabel:o.label,description:c.description,daysLabel:c.daysLabel||"",isBeforeRange:!!c.isBeforeDefinedRange,isBeyondRange:!!c.isBeyondDefinedRange,metrics:c.entries.map(m=>({label:m.displayLabel,range:m.range}))};if(o.id==="environment"&&c.spectral){const{control:m,target_fullscale:h,note:g}=c.spectral,v=[];if(m&&v.push(`Spectral control: ${m}`),h){const x=ly(h.minPct),w=ly(h.maxPct);(x!==void 0||w!==void 0)&&v.push(`Target VIS1/FD1: ${x??"?"}${w??"?"}% full-scale`)}g&&v.push(g),v.length&&(d.notes=v,i.push(...v))}r.push(d);const f=Array.isArray(o.topics)&&o.topics.length?o.topics:null;for(const m of c.entries)for(const h of m.aliases){const g={...m.range,stageDescription:c.description,stageDaysLabel:c.daysLabel,stageGroupId:o.id,stageGroupLabel:o.label,stageBeyondDefinedRange:!!c.isBeyondDefinedRange,stageBeforeDefinedRange:!!c.isBeforeDefinedRange};if(f)for(const v of f){const x=o1(v);if(!x)continue;const w=t.get(x)??new Map;w.set(h,g),t.set(x,w)}else n.set(h,g)}}return{rangeLookup:{byTopic:t,global:n},summaries:r,notes:i}}const vge="_wrapper_1g2o0_1",bge="_statusRow_1g2o0_15",_ge="_statusDot_1g2o0_31",xge="_connecting_1g2o0_47",Sge="_open_1g2o0_57",wge="_reconnecting_1g2o0_67",jge="_statusText_1g2o0_77",Nge="_statusSubdued_1g2o0_85",Age="_errorBanner_1g2o0_95",Ege="_chartEmpty_1g2o0_113",No={wrapper:vge,statusRow:bge,statusDot:_ge,connecting:xge,open:Sge,reconnecting:wge,statusText:jge,statusSubdued:Nge,errorBanner:Age,chartEmpty:Ege},KB={},T0=480,Kh=Bn(),Cge=KB?.VITE_METRIC_STREAM_URL||"/api/metrics/stream",Tge=KB?.VITE_METRIC_HISTORY_URL||"/api/metrics/history",k0=2e3,kge=3e4,GB=e=>{if(!e)return Kh;if(!Kh)return e;if(/^https?:\/\//i.test(e)){const t=new URL(e);return`${Kh}${t.pathname}${t.search}`}return`${Kh}${e.startsWith("/")?"":"/"}${e}`},MM=GB(Cge),Oge=GB(Tge);function O0(e){if(!Number.isFinite(e))return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function IM(e,t){return`${e||"global"}::${t}`}function DM(e){if(!e||typeof e!="object")return null;const t=Uf(e,e),n=fs(t),r=Di(e.metric||e.measurementType||e.type),i=Di(e.sensorModel||e.source||e.sensorName)||r,o=e.metricKey||e.measurementKey||(r?F1(r,i):null),c=Number(e.value??e.metricValue??e.data??e.y),d=Number(e.timestamp??e.time??e.ts??Date.now());return!o||!Number.isFinite(c)||!Number.isFinite(d)||!n?null:{deviceKey:n,identity:t,metricKey:o,value:c,timestamp:d}}function Rge({selectedDeviceKey:e,selectedDeviceIdentity:t,selectedMetricKey:n,metricLabel:r,metricUnit:i}){const{isAuthenticated:o,loadingProfile:c,token:d}=Xt(),f=p.useRef(new Map),m=p.useRef(null),h=p.useRef(k0),g=p.useRef(null),v=p.useRef(null),x=p.useRef(typeof document>"u"?!0:!document.hidden),[w,_]=p.useState([]),[S,j]=p.useState("idle"),[A,E]=p.useState(null),[C,T]=p.useState(""),[O,R]=p.useState(""),k=p.useMemo(()=>!e||!n?"":IM(e,n),[e,n]),P=()=>{x.current&&(m.current||(m.current=requestAnimationFrame(()=>{m.current=null;const I=k?f.current.get(k)||[]:[];_([...I])})))},H=(I,L)=>{const G=[...f.current.get(I)||[],L];G.length>T0&&G.splice(0,G.length-T0),f.current.set(I,G),I===k&&P()},K=()=>{x.current=typeof document>"u"?!0:!document.hidden,x.current&&P()};p.useEffect(()=>{P()},[k]),p.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[]),p.useEffect(()=>{if(!k){_([]);return}if(c)return;if(!o||!d){T("Sign in to view history data.");return}const I=new AbortController,{signal:L}=I;return(async()=>{try{T("");const G=new URLSearchParams({metricKey:n||"",limit:String(T0)}),te=Uf(t||{},{}),re=Ii(te);Object.entries(re).forEach(([ee,ie])=>{ie==null||ie===""||G.set(ee,String(ie))});const M=`${Oge}?${G.toString()}`,q=await Ve(M,{signal:L});if(q.status===401){T("Session expired. Please sign in again.");return}if(!q.ok)throw new Error(`History request failed (${q.status})`);const z=await q.text();if(!z){f.current.set(k,[]),P();return}const V=JSON.parse(z),Z=(Array.isArray(V)?V:Array.isArray(V?.data)?V.data:[]).map(DM).filter(Boolean).filter(ee=>!e||ee.deviceKey===e).filter(ee=>ee.metricKey===n).sort((ee,ie)=>ee.timestamp-ie.timestamp).map(ee=>({timestamp:ee.timestamp,value:ee.value}));if(L.aborted)return;f.current.set(k,Z),P(),h.current=k0}catch{L.aborted||T("Unable to load history data")}})(),()=>I.abort()},[o,c,t,e,n,k,d]),p.useEffect(()=>{let I=!1;const L=()=>{v.current&&(v.current.abort(),v.current=null)},$=()=>{if(L(),I)return;const M=h.current;g.current=setTimeout(re,M),h.current=Math.min(M*2,kge),j("reconnecting")},G=M=>{const q=DM(M);if(!q||e&&q.deviceKey&&q.deviceKey!==e||n&&q.metricKey!==n)return;const z=IM(q.deviceKey,q.metricKey);H(z,{timestamp:q.timestamp,value:q.value}),E(q.timestamp)},te=M=>{let q=M;try{q=typeof M=="string"?JSON.parse(M):M}catch{q=null}Array.isArray(q)?q.forEach(z=>G(z)):G(q)},re=()=>{if(!I){if(L(),R(""),c){j("idle");return}if(!o||!d){R("Sign in to view live metrics."),j("idle");return}j(M=>M==="open"?"open":"connecting");try{if(!MM)return;const M=new AbortController;v.current=M,Ve(MM,{signal:M.signal,headers:{Accept:"text/event-stream"}}).then(async q=>{if(M.signal.aborted)return;if(q.status===401){R("Session expired. Please sign in again.");return}if(!q.ok)throw new Error(`Stream request failed (${q.status})`);if(!q.body)throw new Error("Stream response body unavailable");h.current=k0,j("open");const z=q.body.getReader(),V=new TextDecoder;let Y="";for(;!I;){const{value:Z,done:ee}=await z.read();if(ee)break;Y+=V.decode(Z,{stream:!0});const ie=Y.split(/\n\n/);Y=ie.pop()??"",ie.forEach(xe=>{const Ae=xe.split(/\r?\n/).filter(he=>he.startsWith("data:")).map(he=>he.replace(/^data:\s?/,""));Ae.length>0&&te(Ae.join(`
`))})}!I&&!M.signal.aborted&&$()}).catch(()=>{!I&&!M.signal.aborted&&$()})}catch{$()}}};return re(),()=>{I=!0,L(),g.current&&(clearTimeout(g.current),g.current=null),m.current&&cancelAnimationFrame(m.current)}},[o,c,e,n,d]);const B=p.useMemo(()=>{switch(S){case"open":return"Live";case"reconnecting":return"Reconnecting";case"connecting":return"Connecting";default:return"Idle"}},[S]),U=p.useMemo(()=>r?i?`${r} (${i})`:r:"Value",[r,i]);return a.jsxs("div",{className:No.wrapper,children:[a.jsxs("div",{className:No.statusRow,children:[a.jsx("div",{className:`${No.statusDot} ${No[S]||""}`,"aria-label":"stream status"}),a.jsx("span",{className:No.statusText,children:B}),a.jsx("span",{className:No.statusSubdued,children:A?`Last update ${O0(A)}`:"Waiting for updates"})]}),(C||O)&&a.jsxs("div",{className:No.errorBanner,children:[C&&`History unavailable: ${C}`,C&&O?" ":"",O&&`Live stream unavailable: ${O}`]}),!k&&a.jsx("div",{className:No.chartEmpty,children:"Select a device and metric to start streaming."}),k&&a.jsx(ag,{width:"100%",height:360,debounce:100,children:a.jsxs(FB,{data:w,margin:{top:16,right:28,bottom:28,left:16},children:[a.jsx(nm,{stroke:"#1f2a44",strokeDasharray:"4 4"}),a.jsx(Ru,{dataKey:"timestamp",type:"number",scale:"time",tickFormatter:O0,stroke:"#2b3c5c",tick:{fontSize:12,fill:"#1f2d4d",fontWeight:500},allowDataOverflow:!0}),a.jsx(Mu,{tick:{fontSize:12,fill:"#1f2d4d",fontWeight:500},stroke:"#2b3c5c",tickLine:{stroke:"#2b3c5c"},domain:["auto","auto"]}),a.jsx(rg,{cursor:{stroke:"#6f9bff",strokeDasharray:"5 5"},contentStyle:{backgroundColor:"rgba(7, 15, 32, 0.94)",border:"1px solid #31507f",borderRadius:8,color:"#e4ecff",boxShadow:"0 12px 28px rgba(4, 11, 26, 0.55)"},labelFormatter:I=>`Time: ${O0(I)}`,formatter:I=>[I,U]}),a.jsx(cg,{type:"monotone",dataKey:"value",stroke:"#7fb5ff",strokeWidth:2,dot:!1,isAnimationActive:!1,connectNulls:!0})]})})]})}const Mge=new Set(["timestamp","deviceId","deviceKey","layerId","unitId","unitType","farmId"]);function Ige(e,t,n){if(!e||!n)return null;const{byTopic:r,global:i}=n,o=Di(t);if(o&&r?.has(o)){const c=r.get(o);if(c?.has(e))return c.get(e)}return i?.has(e)?i.get(e):null}function Dge(e){if(e==null||Number.isNaN(e))return"-";if(typeof e=="number"){const n=Math.abs(e)>=100?0:1;return e.toFixed(n)}return String(e)}function WB(e){return Number.isFinite(e)?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):""}function Pge({topic:e,device:t,rangeLookup:n}){const{findRange:r}=K1(),o=(Array.isArray(t?.sensors)?t.sensors:[]).map((d,f)=>{const m=d?.sensorType||d?.valueType||"Metric",h=Di(m),g=d?.sensorName||d?.source||"",v=Ige(h,e,n)||r(m,{topic:e,sensorModel:g}),x=typeof d?.value=="number"?d.value:Number(d?.value),w=Number.isFinite(x),_=v&&w?x>=v.min&&x<=v.max:!0,S=w?_?Rt.metricOk:Rt.metricAlert:Rt.metricIdle,j=Dge(w?x:d?.value),A=d?.unit?` ${d.unit}`:"";return{key:`${m}-${g||f}`,label:m,valueDisplay:`${j}${A}`,range:v,statusClass:S}}),c=[];for(const[d,f]of Object.entries(t?.extra||{}))Mge.has(d)||c.push({key:d,value:f});return a.jsxs("div",{className:Rt.deviceCard,children:[a.jsxs("div",{className:Rt.deviceCardHeader,children:[a.jsxs("div",{children:[a.jsx("div",{className:Rt.deviceTopic,children:e}),a.jsx("div",{className:Rt.deviceId,children:t?.deviceId||"Unknown"}),t?.layerId&&a.jsxs("div",{className:Rt.deviceLayer,children:["Layer ",t.layerId]})]}),a.jsxs("div",{className:Rt.deviceMetaBlock,children:[t?.receivedAt&&a.jsxs("span",{className:Rt.deviceMeta,children:["Updated ",WB(t.receivedAt)]}),t?.health&&Object.keys(t.health).length>0&&a.jsx("span",{className:Rt.deviceHealth,children:Object.values(t.health).every(Boolean)?"Healthy":"Attention"})]})]}),a.jsxs("div",{className:Rt.metricGrid,children:[o.length===0&&a.jsx("div",{className:Rt.metricEmpty,children:"No live metrics yet"}),o.map(d=>a.jsxs("div",{className:`${Rt.metricTile} ${d.statusClass}`,children:[a.jsx("div",{className:Rt.metricLabel,children:d.label}),a.jsx("div",{className:Rt.metricValue,children:d.valueDisplay}),d.range&&a.jsxs("div",{className:Rt.metricRange,children:["Target: ",d.range.min??"-","  ",d.range.max??"-"]})]},d.key))]}),c.length>0&&a.jsx("div",{className:Rt.metaGrid,children:c.map(d=>a.jsxs("div",{className:Rt.metaItem,children:[a.jsx("div",{className:Rt.metaLabel,children:d.key}),a.jsx("div",{className:Rt.metaValue,children:String(d.value)})]},d.key))})]})}function $ge(){const{deviceData:e,mergedDevices:t,sensorData:n}=H1(xy),[r,i]=p.useState(""),[o,c]=p.useState(""),d=p.useMemo(()=>gge(21),[]),f=p.useMemo(()=>rP(e),[e]),m=p.useMemo(()=>vJ(f),[f]),h=p.useMemo(()=>{const S=[];for(const[j,A]of m)for(const[E,C]of Object.entries(A||{}))S.push({topic:j,id:E,device:C});return S},[m]);p.useEffect(()=>{!r&&h.length>0&&i(h[0].id)},[h,r]);const g=r?n[r]:null,v=h.find(S=>S.id===r),x=p.useMemo(()=>{const S=r?t[r]:null;if(Array.isArray(S?.sensors))return S.sensors;const j=v?.device?.sensors;return Array.isArray(j)?j:[]},[t,r,v]),w=p.useMemo(()=>{const S=new Set,j=[];for(const A of x){const E=A?.sensorType||A?.valueType,C=Di(E);if(!C)continue;const T=A?.sensorName||A?.source||"",O=E||"Metric",R=Di(T)||C,k=F1(C,R);if(S.has(k))continue;S.add(k);const P=Number(A?.value),H=Number.isFinite(P);j.push({key:k,label:T?`${O}  ${T}`:O,unit:A?.unit||"",hasNumeric:H})}return j.filter(A=>A.hasNumeric)},[x]);p.useEffect(()=>{if(!r){c("");return}if(w.length===0){c("");return}w.some(S=>S.key===o)||c(w[0].key)},[w,r,o]);const _=p.useMemo(()=>w.find(S=>S.key===o),[w,o]);return a.jsxs("div",{className:Rt.page,children:[a.jsx(gs,{title:"NFT Live Overview"}),a.jsxs("div",{className:Rt.pageGrid,children:[a.jsxs("section",{className:`${Rt.sectionCard} ${Rt.chartSection}`,children:[a.jsx("div",{className:Rt.sectionHeader,children:"Live charts"}),a.jsxs("div",{className:Rt.selectorRow,children:[a.jsxs("label",{className:Rt.selectorLabel,children:["Device",a.jsxs("select",{value:r,onChange:S=>i(S.target.value),className:Rt.deviceSelect,children:[a.jsx("option",{value:"",disabled:!0,children:"Select a device"}),h.map(S=>a.jsxs("option",{value:S.id,children:[S.topic,"  ",S.device?.deviceId||S.id]},S.id))]})]}),v?.device?.receivedAt&&a.jsxs("div",{className:Rt.lastUpdated,children:["Last update ",WB(v.device.receivedAt)]})]}),a.jsxs("div",{className:Rt.chartStack,children:[a.jsxs("div",{className:Rt.chartBlock,children:[a.jsx("div",{className:Rt.subSectionHeader,children:"Spectrum snapshot"}),a.jsx("div",{className:Rt.chartWrapper,children:g?a.jsx(_ye,{sensorData:g}):a.jsx("div",{className:Rt.chartEmpty,children:"Select a device to view its latest spectrum"})})]}),a.jsxs("div",{className:Rt.chartBlock,children:[a.jsx("div",{className:Rt.subSectionHeader,children:"Metric trend"}),a.jsxs("div",{className:Rt.metricSelectorRow,children:[a.jsxs("label",{className:Rt.selectorLabel,children:["Metric",a.jsxs("select",{value:o,onChange:S=>c(S.target.value),className:Rt.metricSelect,disabled:w.length===0,children:[w.length===0&&a.jsx("option",{value:"",children:"No numeric metrics available"}),w.map(S=>a.jsx("option",{value:S.key,children:S.label},S.key))]})]}),w.length>1&&a.jsx("div",{className:Rt.selectorHint,children:"Each sensor is charted separatelypick a metric to stream live values."})]}),a.jsx("div",{className:Rt.chartWrapper,children:a.jsx(Rge,{selectedDeviceKey:r,selectedDeviceIdentity:v?.device||t[r],selectedMetricKey:o,metricLabel:_?.label,metricUnit:_?.unit})})]})]})]}),a.jsxs("section",{className:`${Rt.sectionCard} ${Rt.devicesSection}`,children:[a.jsx("div",{className:Rt.sectionHeader,children:"Metrics by device"}),a.jsxs("div",{className:Rt.deviceGrid,children:[h.length===0&&a.jsx("div",{className:Rt.metricEmpty,children:"Waiting for devices to publish data..."}),h.map(({topic:S,id:j,device:A})=>a.jsx(Pge,{topic:S,device:t[j]||A,rangeLookup:d.rangeLookup},`${S}-${j}`))]})]})]})]})}function Lge(){return a.jsx($ge,{})}const Bge="_wrapper_1owa8_1",Uge="_video_1owa8_27",qge="_errorBox_1owa8_43",zge="_statusBar_1owa8_167",Fge="_reloadButton_1owa8_199",Hge="_error_1owa8_43",Ao={wrapper:Bge,video:Uge,errorBox:qge,statusBar:zge,reloadButton:Fge,error:Hge},YB={},XB=YB?.VITE_CAM_BASE_URL||"",Vge=XB,Kge=YB?.VITE_STREAM_MODE||"webrtc",Gge=Kge.toLowerCase()==="hls"?"hls":"webrtc",QB=e=>e?.replace(/\/$/,"")??"",Wge=e=>(Array.isArray(e?.roles)?e.roles:e?.role?[e.role]:[]).includes("SUPER_ADMIN")||us(e,kt.ADMIN_OVERVIEW_VIEW),Yge=()=>QB(Vge),Xge=()=>Gge,Qge=()=>QB(XB),Zge=({cameraId:e})=>{const t=Qge();if(!t)throw new Error("Missing live HLS base URL. Set VITE_CAM_BASE_URL.");if(!e)throw new Error("Missing cameraId for live stream.");const n=cy.find(r=>r.id===e);return n?.streamId?`${t}/${n.streamId}/index.m3u8`:(console.error("[Cameras] Unknown cameraId",e),null)},cy=[{id:"S2L1",name:"S2L1",streamId:"S2L1"},{id:"S2L2",name:"S2L2",streamId:"S2L2"},{id:"S2L3",name:"S2L3",streamId:"S2L3"},{id:"S2L4",name:"S2L4",streamId:"S2L4"},{id:"S1L2",name:"S1L2",streamId:"S1L2"},{id:"S1L3",name:"S1L3",streamId:"S1L3"}];class Zd{static isSupported(){return!1}loadSource(){}attachMedia(){}on(){}destroy(){}}Zd.Events={ERROR:"error",MANIFEST_PARSED:"manifest_parsed"};const Jge="_wrapper_15mxr_1",eve="_video_15mxr_11",tve="_overlay_15mxr_25",nve="_overlayContent_15mxr_47",rve="_message_15mxr_61",ave="_retryButton_15mxr_77",$c={wrapper:Jge,video:eve,overlay:tve,overlayContent:nve,message:rve,retryButton:ave},Cs={idle:"idle",loading:"loading",playing:"playing",recovering:"recovering",offline:"offline"},PM=new Set([404,502]),$M=[1e3,2e3,4e3,8e3,15e3],sve=8,LM=e=>e===404?"We couldn't find this live stream. The camera may be offline.":e===502?"The live stream is temporarily unavailable. Please try again.":"Unable to load the camera stream.";function ive({cameraId:e,reloadKey:t=0,videoClassName:n="",wrapperClassName:r="",videoRef:i,onStatusChange:o,onError:c,enabled:d=!0}){const f=p.useRef(null),m=i||f,h=p.useRef(null),[g,v]=p.useState(Cs.idle),[x,w]=p.useState(""),_=p.useRef(null),S=p.useRef(0),j=p.useRef(0),A=p.useRef(null),E=p.useRef(o),C=p.useRef(c),T=p.useRef(g),O=p.useRef(null);p.useEffect(()=>{E.current=o},[o]),p.useEffect(()=>{C.current=c},[c]);const R=L=>{v(L),T.current=L,E.current?.(L)},k=()=>{_.current&&(clearTimeout(_.current),_.current=null)},P=(L,$)=>{$?.name!=="AbortError"&&console.error("[LiveHlsPlayer]",$),k(),w(L),C.current?.(L),R(Cs.offline)},H=()=>{h.current&&(h.current.destroy(),h.current=null)},K=()=>{H(),k(),S.current=0,w(""),R(Cs.loading),O.current?.()},B=p.useMemo(()=>{if(!e)return{url:"",error:null};try{return{url:Zge({cameraId:e}),error:null}}catch(L){return{url:"",error:L}}},[e]);p.useEffect(()=>{let L=!0;const $=m.current,G={current:!1};if(!$||!d)return;k(),S.current=0;const te=()=>{L&&(w(""),R(Cs.playing))},re=(Y,Z)=>{if(!L||_.current)return;if(S.current>=sve){P(Z||"Unable to start live playback.",Y);return}const ee=$M[Math.min(S.current,$M.length-1)];S.current+=1,R(Cs.recovering),_.current=setTimeout(()=>{_.current=null,O.current?.()},ee)},M=async Y=>{if(L&&Y===j.current)try{await $.play()}catch(Z){if(!L||Z?.name==="AbortError")return;if(Z?.name==="NotAllowedError"){re(Z);return}re(Z)}},q=()=>{!L||G.current||(G.current=!0,M(j.current))},z=()=>{L&&re(new Error("Video element error"))},V=async()=>{if(!L)return;if(!e){P("No camera selected.",new Error("Missing cameraId"));return}if(B.error){P("Live stream unavailable.",B.error);return}const Y=B.url;if(!Y){P("Offline / Unknown camera",new Error("Unknown cameraId"));return}w(""),T.current!==Cs.recovering&&R(Cs.loading),G.current=!1,j.current+=1,A.current&&A.current.abort();const Z=new AbortController;A.current=Z;try{if($.canPlayType("application/vnd.apple.mpegurl")){const ee=await fetch(Y,{signal:Z.signal});if(!ee.ok&&PM.has(ee.status)){const ie=new Error(`HLS playlist error (${ee.status})`);throw ie.statusCode=ee.status,ie}$.src=Y;return}if(!Zd.isSupported())throw new Error("HLS playback is not supported in this browser.");if(!h.current){const ee=new Zd({enableWorker:!0,lowLatencyMode:!0});h.current=ee,ee.on(Zd.Events.ERROR,(ie,xe)=>{if(!L)return;const X=xe?.response?.code;if(X&&PM.has(X)){re(xe,LM(X));return}xe?.fatal&&re(xe,"Live stream unavailable.")}),ee.on(Zd.Events.MANIFEST_PARSED,q)}h.current.stopLoad(),h.current.detachMedia(),h.current.loadSource(Y),h.current.attachMedia($)}catch(ee){re(ee,LM(ee?.statusCode))}};return O.current=V,$.addEventListener("playing",te),$.addEventListener("error",z),$.addEventListener("canplay",q),$.muted=!0,$.playsInline=!0,V(),()=>{L=!1,A.current&&(A.current.abort(),A.current=null),k(),H(),$.removeEventListener("playing",te),$.removeEventListener("error",z),$.removeEventListener("canplay",q),$.pause(),$.removeAttribute("src"),$.load()}},[e,d,B.error,B.url,m]),p.useEffect(()=>{d&&O.current&&(S.current=0,k(),O.current())},[d,t]);const U=g===Cs.loading?"Loading stream":g===Cs.recovering?"Reconnecting":g===Cs.offline?x||"Live stream unavailable.":"",I=g===Cs.offline&&x!=="Offline / Unknown camera";return a.jsxs("div",{className:`${$c.wrapper} ${r}`,children:[a.jsx("video",{ref:m,className:`${$c.video} ${n}`,autoPlay:!0,playsInline:!0,muted:!0}),U?a.jsx("div",{className:$c.overlay,role:"status","aria-live":"polite",children:a.jsxs("div",{className:$c.overlayContent,children:[a.jsx("p",{className:$c.message,children:U}),I?a.jsx("button",{type:"button",className:$c.retryButton,onClick:K,children:"Retry"}):null]})}):null]})}const ove="_wrapper_17jv1_1",lve="_video_17jv1_13",cve="_overlay_17jv1_27",uve="_overlayContent_17jv1_47",dve="_message_17jv1_65",fve="_statusRow_17jv1_79",mve="_statusError_17jv1_93",vl={wrapper:ove,video:lve,overlay:cve,overlayContent:uve,message:dve,statusRow:fve,statusError:mve},Eo={connecting:"connecting",error:"error"};function hve({streamName:e="stream",videoClassName:t="",wrapperClassName:n="",videoRef:r,onStatusChange:i,onError:o}){const c=p.useRef(null),d=r||c,[f,m]=p.useState(Eo.connecting),[h,g]=p.useState(""),v=p.useRef(i),x=p.useRef(o);p.useEffect(()=>{v.current=i},[i]),p.useEffect(()=>{x.current=o},[o]);const w=j=>{m(j),v.current?.(j)},_=(j,A)=>{console.error("[WebRTCPlayer]",A),g(j),x.current?.(j),w(Eo.error)};p.useEffect(()=>{new RTCPeerConnection,new AbortController,new MediaStream,d.current,w(Eo.connecting),g("");{_("WebRTC signaling base URL is not configured. Set VITE_WEBRTC_SIGNALING_URL (no /v2/webrtc).");return}},[e,d]);const S=f===Eo.connecting?"Connecting to live stream":f===Eo.error?h||"Live stream unavailable.":"";return a.jsxs("div",{className:`${vl.wrapper} ${n}`,children:[a.jsx("video",{ref:d,className:`${vl.video} ${t}`,autoPlay:!0,playsInline:!0,muted:!0}),S?a.jsx("div",{className:vl.overlay,role:f===Eo.error?"alert":"status","aria-live":"polite",children:a.jsx("div",{className:vl.overlayContent,children:a.jsx("p",{className:vl.message,children:S})})}):null,a.jsxs("div",{className:`${vl.statusRow} ${f===Eo.error?vl.statusError:""}`,"aria-live":"polite",children:["Status: ",f,f===Eo.error&&h?`  ${h}`:""]})]})}const pve="S2L4";function yve(){const{role:e,roles:t,permissions:n}=Xt(),r=p.useMemo(()=>({role:e,roles:t,permissions:n}),[n,e,t]),i=Wge(r),o=p.useMemo(()=>cy.find(_=>_.id===pve)||cy[0]||null,[]),[c,d]=p.useState(0),[f,m]=p.useState("idle"),[h,g]=p.useState(""),v=Xge(),x=()=>{d(_=>_+1),g(""),m("loading")},w=i?h?"Live stream unavailable.":f==="loading"?"Loading stream":o?`Live stream  ${o.name}`:"No camera feed configured for germination.":"Live is available to admins only.";return a.jsxs("div",{className:Ao.wrapper,children:[i?o?v==="hls"?a.jsx(ive,{cameraId:o.id,reloadKey:c,videoClassName:Ao.video,onStatusChange:_=>{m(_),_==="playing"&&g("")},onError:g},`${o.id}-${c}`):a.jsx(hve,{streamName:o.streamId||o.id,videoClassName:Ao.video,onStatusChange:_=>{m(_),_==="playing"&&g("")},onError:g},`${o.id}-${c}`):a.jsx("div",{className:Ao.video}):a.jsxs("div",{className:Ao.errorBox,role:"alert",children:[a.jsx("h3",{children:"Admins only"}),a.jsx("p",{children:"Live camera access is restricted to admins."})]}),a.jsxs("div",{className:Ao.statusBar,children:[a.jsx("span",{className:!o||h||!i?Ao.error:"",children:w}),a.jsx("button",{type:"button",onClick:x,className:Ao.reloadButton,disabled:!i,children:"Reload"})]})]})}const gve=Bn(),Rj=`${gve}/api/germination`;function Mj(e){return!e||typeof e!="object"?{startTime:null}:{startTime:(e.startTime??e.startedAt??e.triggeredAt??null)||null}}async function vve({signal:e}={}){const t=await Ve(Rj,{signal:e});if(t.status===404)return{startTime:null};if(!t.ok)throw new Error(`Failed to load germination status: ${t.status}`);const n=await t.json();return Mj(n)}async function bve(e,{signal:t}={}){const n=await Ve(Rj,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTime:e}),signal:t});if(!n.ok)throw new Error(`Failed to update germination start time: ${n.status}`);const r=await n.json();return Mj(r)}async function _ve({signal:e}={}){const t=await Ve(`${Rj}/start`,{method:"POST",signal:e});if(!t.ok)throw new Error(`Failed to trigger germination start: ${t.status}`);const n=await t.json();return Mj(n)}const R0=[{id:"seed-germination",daysLabel:"1-3",minDay:1,maxDay:3,description:"Seed Germination (Pre-Sprout)",params:{A_Temp_G:{min:27,max:30},A_Temp_W:{min:26,max:28},A_RH_G:{min:90,max:99},light:{min:0,max:300},pH:{min:5.8,max:6},EC:{min:0,max:.3}}},{id:"sprouting",daysLabel:"4-6",minDay:4,maxDay:6,description:"Sprouting & Cotyledon Expansion",params:{A_Temp_G:{min:25,max:28},A_Temp_W:{min:23,max:25},A_RH_G:{min:85,max:90},light:{min:1e3,max:2500},pH:{min:5.8,max:6},EC:{min:.3,max:.5}}},{id:"early-root",daysLabel:"7-9",minDay:7,maxDay:9,description:"Early Root Development",params:{A_Temp_G:{min:23,max:25},A_Temp_W:{min:21,max:23},A_RH_G:{min:75,max:80},light:{min:4500,max:6e3},pH:{min:5.8,max:6},EC:{min:.5,max:.7}}},{id:"pre-transplant",daysLabel:"10-14",minDay:10,maxDay:14,description:"Pre-Transplant Root Strengthening",params:{A_Temp_G:{min:23,max:25},A_Temp_W:{min:21,max:23},A_RH_G:{min:70,max:75},light:{min:6e3,max:8e3},pH:{min:5.8,max:6.1},EC:{min:.7,max:.9}}}];function xve(e){if(!Number.isFinite(e)||e<1)return null;const t=R0.find(r=>e>=r.minDay&&e<=r.maxDay);if(t)return{...t,isBeyondDefinedRange:!1};const n=R0[R0.length-1];return n?{...n,isBeyondDefinedRange:e>n.maxDay}:null}function Sve(e,t){if(!t||!e)return null;const{params:n={}}=t;if(!n||typeof n!="object")return null;let r=n[e];if(!r){const f=String(e).toLowerCase(),m=Object.entries(n).find(([h])=>h.toLowerCase()===f);if(!m)return null;[,r]=m}if(!r)return null;const{min:i,max:o}=r,c=typeof i=="number"&&Number.isFinite(i),d=typeof o=="number"&&Number.isFinite(o);return!c&&!d?null:{min:c?i:void 0,max:d?o:void 0,sourceKey:t.id,stageDescription:t.description,stageDaysLabel:t.daysLabel,stageBeyondDefinedRange:!!t.isBeyondDefinedRange}}const wve=Bn(),Ij={rest:{historyAggregated:`${wve}/api/records/history/aggregated`},ws:{baseUrl:eD(),topics:xy}},jve=60*1e3,Po=e=>e?String(e).trim():"",BM=e=>{if(!e)return"";const t=String(e).trim();return t?`${t.charAt(0).toUpperCase()}${t.slice(1).toLowerCase()}`:""},Nve=e=>{if(e==null||e==="")return"";const t=String(e).trim();return t?` ${t}`:""},ZB=e=>{const t=Po(e?.nodeType||e?.meta?.nodeType||e?.extra?.nodeType),n=Po(e?.nodeId||e?.meta?.nodeId||e?.extra?.nodeId),r=e?.nodeInstance??e?.meta?.nodeInstance??e?.extra?.nodeInstance,i=Nve(r);return t&&n?`${BM(t)} ${n}${i}`:t&&r?`${BM(t)}${i}`:n?`Node ${n}${i}`:Po(e?.displayName)||Po(e?.deviceName)||Po(e?.name)||"Sensor node"},JB=e=>{const t=Po(e?.rackId||e?.rack||e?.meta?.rackId||e?.meta?.rack),n=Po(e?.siteId||e?.site||e?.systemId||e?.system);return!t||!n?"":`${t}  ${n}`},Ave=e=>{const t=ZB(e),n=JB(e);return n?`${t}  ${n}`:t},Eve=e=>Po(e?.deviceId||e?.deviceKey||""),Cve=()=>!0;function ug({stageDetails:e=null,topics:t=Ij.ws.topics,filterDevice:n=Cve,staleThresholdMs:r=jve,scope:i=null}={}){const{deviceData:o,mergedDevices:c}=H1(t,{scope:i}),[d,f]=p.useState(()=>Date.now());p.useEffect(()=>{const S=setInterval(()=>{f(Date.now())},15e3);return()=>clearInterval(S)},[]);const m=p.useMemo(()=>rP(o),[o]),h=p.useMemo(()=>bJ(t,m),[m,t]),g=p.useMemo(()=>n,[n]),v=p.useMemo(()=>{const S={};return h.forEach(j=>{const A=m[j];A&&Object.entries(A).forEach(([E,C])=>{g(C)&&(S[E]=c?.[E]||C)})}),S},[m,g,c,h]),x=p.useMemo(()=>Object.entries(v).map(([S,j])=>({id:S,label:Ave(j),sensors:j?.sensors||[]})),[v]),w=Object.keys(v).length>0,_=p.useMemo(()=>{if(!w)return[];const S=v||{},j=Object.keys(S),A=new Map;function E(C){return C==null?"":String(C).toLowerCase().replace(/[^a-z0-9]/g,"")}return j.forEach(C=>{const T=S[C]||{},{sensors:O=[],health:R={}}=T,k=ZB(T),P=JB(T),H=Eve(T),K=T?.timestamp||T?.receivedAt||0;O.forEach(B=>{const U=B?.sensorType||B?.valueType,I=B?.sensorName||B?.source||"-";if(!U)return;const L=E(U),$=E(I)||L,G=`${L}|${$}`;A.has(G)||A.set(G,{measurementType:U,sensorType:B?.sensorType??U,sensorModel:I,values:[]});const te=B?.sensorName?.toLowerCase(),re=te?R[te]??R[B?.sensorName]:void 0;A.get(G).values.push({id:C,title:k,subtitle:P,debugId:H,rawValue:B?.value,unit:B?.unit||"",timestamp:K,healthy:re==null?null:!!re})})}),Array.from(A.values()).map(C=>{const O=(e?.stage?Sve(C.measurementType,e.stage):null)??null,R=C.values.map(M=>{const q=typeof M.rawValue=="number"?M.rawValue:Number(M.rawValue),z=!Number.isNaN(q),V=M.timestamp?d-M.timestamp:Number.POSITIVE_INFINITY,Y=M.healthy===!1?"ERROR":V>r?"STALE":"OK";return{id:M.id,title:M.title,subtitle:M.subtitle,debugId:M.debugId,displayValue:M.rawValue===void 0||M.rawValue===null?"-":`${typeof M.rawValue=="number"?M.rawValue.toFixed(1):M.rawValue}${M.unit?` ${M.unit}`:""}`,numericValue:z?q:null,healthy:M.healthy,status:Y}}),k=R.filter(M=>M.numericValue!==null),P=O&&typeof O.min=="number"&&Number.isFinite(O.min),H=O&&typeof O.max=="number"&&Number.isFinite(O.max),K=O&&k.length>0?k.some(M=>{const q=M.numericValue;return q===null?!1:!!(P&&q<O.min||H&&q>O.max)}):!1,B=.01,U=!K&&O&&k.length>0?k.some(M=>{const q=M.numericValue;if(q===null)return!1;const z=P&&Math.abs(q-O.min)<=Math.max(Math.abs(O.min)*B,B),V=H&&Math.abs(q-O.max)<=Math.max(Math.abs(O.max)*B,B);return z||V}):!1,I=!O||k.length===0?"none":K?"alert":U?"warning":"ok",L=R.filter(M=>M.healthy===!0),$=R.filter(M=>M.healthy===!1),G=R.some(M=>M.healthy===null);let te="No data",re="neutral";return R.length===0?(te="No data",re="neutral"):K?(te="Out of range",re="alert"):$.length>0?(te="Check sensors",re="warning"):I==="warning"?(te="Approaching limit",re="warning"):L.length>0&&!G?(te="Stable",re="success"):(te="Monitoring",re="neutral"),{measurementType:C.measurementType,sensorType:C.sensorType,sensorModel:C.sensorModel,label:C.measurementType,range:O,rangeStatus:I,stageDescription:O?.stageDescription??"",stageDaysLabel:O?.stageDaysLabel??"",stageBeyondDefinedRange:O?.stageBeyondDefinedRange??!1,status:te,tone:re,values:R}})},[v,w,d,e,r]);return{devices:v,deviceOptions:x,hasTopics:w,metricReports:_}}function os(e){const t=d=>`${d}`.padStart(2,"0"),n=e.getFullYear(),r=t(e.getMonth()+1),i=t(e.getDate()),o=t(e.getHours()),c=t(e.getMinutes());return`${n}-${r}-${i}T${o}:${c}`}function Kc(e){if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function Cf(e){const t=new Date;switch(e){case"1h":return{from:new Date(t.getTime()-3600*1e3),to:t};case"6h":return{from:new Date(t.getTime()-360*60*1e3),to:t};case"24h":return{from:new Date(t.getTime()-1440*60*1e3),to:t};default:return{from:new Date(t.getTime()-3600*1e3),to:t}}}function e5(e,t){if(!t)return null;const n=t.toLowerCase(),r={temperature:e.temperature?.value,humidity:e.humidity?.value,light:e.lux?.value??e.light?.value,lux:e.lux?.value??e.light?.value,tds:e.tds?.value,dissolvedtds:e.tds?.value,ec:e.ec?.value,dissolvedec:e.ec?.value,ph:e.ph?.value,do:e.do?.value,dissolvedoxygen:e.do?.value};if(n in r&&r[n]!==void 0){const o=r[n];return o===null||Number.isNaN(Number(o))?null:Number(o)}const i=e[t]??e[n];if(typeof i=="number")return Number.isNaN(i)?null:i;if(i&&typeof i=="object"&&"value"in i){const o=Number(i.value);return Number.isNaN(o)?null:o}return null}function UM(e){if(typeof e!="number"||Number.isNaN(e))return"-";const t=Math.abs(e);let n=0;return t>=100||Number.isInteger(e)?n=0:t>=10||t>=1?n=1:t>=.1?n=2:n=3,Number(e.toFixed(n)).toString()}async function Tve({identity:e,from:t,to:n,sensorType:r,metricKey:i,signal:o}){const c=Ii(e||{}),d=new URLSearchParams({from:t.toISOString(),to:n.toISOString()});Object.entries(c).forEach(([v,x])=>{x==null||x===""||d.set(v,String(x))}),r&&d.append("sensorType",r);const f=await Ve(`${Ij.rest.historyAggregated}?${d.toString()}`,{signal:o});if(!f.ok)throw new Error(`Request failed with status ${f.status}`);const m=await f.json();return z1(m).map(v=>({time:v.timestamp,value:e5(v,i)})).filter(v=>v.value!==null)}const kve="_page_s1za4_1",Ove="_timerSection_s1za4_17",Rve="_timerControls_s1za4_37",Mve="_timerButtons_s1za4_63",Ive="_timeInput_s1za4_77",Dve="_timerButton_s1za4_63",Pve="_startButton_s1za4_143",$ve="_saveButton_s1za4_155",Lve="_clearButton_s1za4_167",Bve="_timerFeedback_s1za4_179",Uve="_infoMessage_s1za4_189",qve="_successMessage_s1za4_197",zve="_elapsedWrapper_s1za4_205",Fve="_elapsedLabel_s1za4_217",Hve="_elapsedValue_s1za4_231",Vve="_stageSummary_s1za4_245",Kve="_stageSummaryLabel_s1za4_267",Gve="_stageSummaryContent_s1za4_283",Wve="_stageSummaryName_s1za4_295",Yve="_stageSummaryDays_s1za4_307",Xve="_stageSummaryPlaceholder_s1za4_317",Qve="_sectionCard_s1za4_327",Zve="_cameraSection_s1za4_349",Jve="_metricsSection_s1za4_357",ebe="_chartSection_s1za4_365",tbe="_reportGrid_s1za4_373",nbe="_reportCard_s1za4_385",rbe="_reportCardHeader_s1za4_419",abe="_reportMetric_s1za4_433",sbe="_reportStatus_s1za4_445",ibe="_reportMeta_s1za4_467",obe="_reportModel_s1za4_483",lbe="_reportRange_s1za4_491",cbe="_rangeOk_s1za4_499",ube="_rangeWarning_s1za4_507",dbe="_rangeAlert_s1za4_515",fbe="_reportValues_s1za4_523",mbe="_reportValueItem_s1za4_541",hbe="_reportDot_s1za4_557",pbe="_reportDevice_s1za4_573",ybe="_reportDeviceMeta_s1za4_581",gbe="_reportDeviceSub_s1za4_597",vbe="_reportValue_s1za4_523",bbe="_statusBadge_s1za4_619",_be="_statusOk_s1za4_639",xbe="_statusStale_s1za4_651",Sbe="_statusError_s1za4_663",wbe="_healthy_s1za4_675",jbe="_unhealthy_s1za4_685",Nbe="_unknown_s1za4_695",Abe="_successTone_s1za4_705",Ebe="_warningTone_s1za4_715",Cbe="_alertTone_s1za4_725",Tbe="_neutralTone_s1za4_735",kbe="_sectionHeader_s1za4_743",Obe="_sectionTitle_s1za4_757",Rbe="_headerToggle_s1za4_773",Mbe="_headerToggleLabel_s1za4_789",Ibe="_headerToggleInput_s1za4_797",Dbe="_cameraWrapper_s1za4_811",Pbe="_emptyState_s1za4_821",$be="_chartControls_s1za4_831",Lbe="_chartSelectors_s1za4_845",Bbe="_chartLabel_s1za4_859",Ube="_chartSelect_s1za4_845",qbe="_rangeControls_s1za4_911",zbe="_rangeLabel_s1za4_923",Fbe="_rangeButtons_s1za4_939",Hbe="_rangeButton_s1za4_939",Vbe="_rangeButtonActive_s1za4_989",Kbe="_customRangeInputs_s1za4_1003",Gbe="_refreshButton_s1za4_1015",Wbe="_chartArea_s1za4_1053",Ybe="_chartMessage_s1za4_1087",Xbe="_spectrumCharts_s1za4_1099",Qbe="_spectrumBadge_s1za4_1111",Zbe="_spectrumBadgeWarning_s1za4_1139",Jbe="_spectrumNote_s1za4_1151",e_e="_errorMessage_s1za4_1161",De={page:kve,timerSection:Ove,timerControls:Rve,timerButtons:Mve,timeInput:Ive,timerButton:Dve,startButton:Pve,saveButton:$ve,clearButton:Lve,timerFeedback:Bve,infoMessage:Uve,successMessage:qve,elapsedWrapper:zve,elapsedLabel:Fve,elapsedValue:Hve,stageSummary:Vve,stageSummaryLabel:Kve,stageSummaryContent:Gve,stageSummaryName:Wve,stageSummaryDays:Yve,stageSummaryPlaceholder:Xve,sectionCard:Qve,cameraSection:Zve,metricsSection:Jve,chartSection:ebe,reportGrid:tbe,reportCard:nbe,reportCardHeader:rbe,reportMetric:abe,reportStatus:sbe,reportMeta:ibe,reportModel:obe,reportRange:lbe,rangeOk:cbe,rangeWarning:ube,rangeAlert:dbe,reportValues:fbe,reportValueItem:mbe,reportDot:hbe,reportDevice:pbe,reportDeviceMeta:ybe,reportDeviceSub:gbe,reportValue:vbe,statusBadge:bbe,statusOk:_be,statusStale:xbe,statusError:Sbe,healthy:wbe,unhealthy:jbe,unknown:Nbe,successTone:Abe,warningTone:Ebe,alertTone:Cbe,neutralTone:Tbe,sectionHeader:kbe,sectionTitle:Obe,headerToggle:Rbe,headerToggleLabel:Mbe,headerToggleInput:Ibe,cameraWrapper:Dbe,emptyState:Pbe,chartControls:$be,chartSelectors:Lbe,chartLabel:Bbe,chartSelect:Ube,rangeControls:qbe,rangeLabel:zbe,rangeButtons:Fbe,rangeButton:Hbe,rangeButtonActive:Vbe,customRangeInputs:Kbe,refreshButton:Gbe,chartArea:Wbe,chartMessage:Ybe,spectrumCharts:Xbe,spectrumBadge:Qbe,spectrumBadgeWarning:Zbe,spectrumNote:Jbe,errorMessage:e_e};function t5({metricReports:e,headerActions:t=null}){return a.jsxs("section",{className:`${De.sectionCard} ${De.metricsSection}`,children:[a.jsxs("div",{className:De.sectionHeader,children:[a.jsx("h2",{className:De.sectionTitle,children:"Live sensors data"}),t]}),e.length>0?a.jsx("div",{className:De.reportGrid,children:e.map(n=>{const r=n.rangeStatus==="alert"?De.rangeAlert:n.rangeStatus==="warning"?De.rangeWarning:n.rangeStatus==="ok"?De.rangeOk:"",i=n.stageDescription?`${n.stageDescription}${n.stageDaysLabel?`  Days ${n.stageDaysLabel}`:""}${n.stageBeyondDefinedRange?"  Beyond schedule":""}`:"",o=i?`Target range (${i})`:"Target range",c=UM(n.range?.min),d=UM(n.range?.max);return a.jsxs("article",{className:`${De.reportCard} ${De[`${n.tone}Tone`]}`,children:[a.jsxs("header",{className:De.reportCardHeader,children:[a.jsx("h3",{className:De.reportMetric,children:n.label}),a.jsx("span",{className:De.reportStatus,children:n.status})]}),a.jsxs("div",{className:De.reportMeta,children:[a.jsx("span",{className:De.reportModel,children:n.sensorModel}),n.range?a.jsxs("span",{className:`${De.reportRange} ${r}`,children:[o,": ",c," - ",d]}):a.jsx("span",{className:De.reportRange,children:"No configured range"})]}),a.jsx("ul",{className:De.reportValues,children:n.values.map(f=>{const m=f.healthy===!0?De.healthy:f.healthy===!1?De.unhealthy:De.unknown,h=f.status==="ERROR"?De.statusError:f.status==="STALE"?De.statusStale:De.statusOk;return a.jsxs("li",{className:De.reportValueItem,title:f.debugId||void 0,children:[a.jsx("span",{className:`${De.reportDot} ${m}`}),a.jsxs("div",{className:De.reportDeviceMeta,children:[a.jsx("span",{className:De.reportDevice,children:f.title}),f.subtitle?a.jsx("span",{className:De.reportDeviceSub,children:f.subtitle}):null]}),a.jsx("span",{className:`${De.statusBadge} ${h}`,children:f.status}),a.jsx("span",{className:De.reportValue,children:f.displayValue})]},f.id)})})]},`${n.measurementType}-${n.sensorModel}`)})}):a.jsx("div",{className:De.emptyState,children:"No summary data available."})]})}const t_e=({xDataKey:e,series:t=[],yLabel:n,title:r,height:i=300,xDomain:o,showLegend:c=!0})=>{const d=p.useMemo(()=>{if(!t.length)return[];const m=new Map;for(const h of t)if(h?.data?.length)for(const g of h.data){const v=g?.[e];if(v==null)continue;const x=m.get(v)??{[e]:v};h.yDataKey in g&&(x[h.yDataKey]=g[h.yDataKey]),m.set(v,x)}return Array.from(m.values()).sort((h,g)=>h[e]-g[e])},[t,e]),f=p.useMemo(()=>{const m=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return h=>{if(h==null)return"";const g=h instanceof Date?h:new Date(h);return Number.isNaN(g.getTime())?"":m.format(g)}},[]);return a.jsx(ag,{width:"100%",height:i,debounce:200,children:a.jsxs(FB,{data:d,margin:{top:20,right:30,left:12,bottom:50},isAnimationActive:!1,children:[a.jsx(nm,{stroke:"#1f2a44",strokeDasharray:"4 4"}),a.jsx(Ru,{dataKey:e,type:"number",scale:"time",domain:o??["auto","auto"],tick:{fontSize:12,fill:"#1f2d4d",fontWeight:500},stroke:"#2b3c5c",tickFormatter:f,allowDataOverflow:!0}),a.jsx(Mu,{tick:{fontSize:12,fill:"#1f2d4d",fontWeight:500},stroke:"#2b3c5c",tickLine:{stroke:"#2b3c5c"},children:n&&a.jsx(Fr,{value:n,angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#22345c",fontSize:12,fontWeight:500}})}),a.jsx(rg,{cursor:{stroke:"#6f9bff",strokeDasharray:"5 5"},contentStyle:{backgroundColor:"rgba(7, 15, 32, 0.94)",border:"1px solid #31507f",borderRadius:8,color:"#e4ecff",boxShadow:"0 12px 28px rgba(4, 11, 26, 0.55)"},labelStyle:{color:"#9fb6ff"},itemStyle:{color:"#e4ecff"},labelFormatter:m=>f(m)}),c&&a.jsx(Kf,{wrapperStyle:{paddingTop:12,color:"#d0dcff"}}),t.map((m,h)=>a.jsx(cg,{type:"monotone",dataKey:m.yDataKey,name:m.name,stroke:m.color||Vc[h%Vc.length],strokeWidth:2,dot:!1,isAnimationActive:!1,connectNulls:!0},m.name)),r&&a.jsx("text",{x:"50%",y:0,textAnchor:"middle",dominantBaseline:"hanging",fill:"#f0f5ff",style:{fontSize:14,letterSpacing:"0.04em"},children:r})]})})},Dj=my.memo(t_e);function n5({deviceOptions:e,selectedDeviceKey:t,onDeviceChange:n,availableMetrics:r,selectedMetricKey:i,onMetricChange:o,emptyStateLabel:c,rangePreset:d,rangeOptions:f,onRangePreset:m,customFrom:h,customTo:g,onCustomFrom:v,onCustomTo:x,onRefresh:w,chartError:_,chartLoading:S,chartSeries:j,chartYLabel:A,chartDomain:E,emptyStateMessage:C=null}){const T=C||(c?`No sensor nodes available for ${c} rack.`:"No sensor nodes available for this rack."),O=e.length>0,k=!!(t&&i)?"No data available for the selected range.":"Select a sensor and metric to view historical trends.";return a.jsxs("section",{className:`${De.sectionCard} ${De.chartSection}`,children:[a.jsx("div",{className:De.sectionHeader,children:a.jsx("h2",{className:De.sectionTitle,children:"Historical trends"})}),e.length?a.jsxs("div",{className:De.chartControls,children:[a.jsxs("div",{className:De.chartSelectors,children:[a.jsxs("label",{className:De.chartLabel,children:["Sensor node",a.jsx("select",{className:De.chartSelect,value:t,onChange:P=>n(P.target.value),children:e.map(P=>a.jsx("option",{value:P.id,children:P.label},P.id))})]}),a.jsxs("label",{className:De.chartLabel,children:["Metric",a.jsx("select",{className:De.chartSelect,value:i,onChange:P=>o(P.target.value),disabled:!r.length,children:r.map(P=>a.jsx("option",{value:P.key,children:P.label},P.key))})]})]}),a.jsxs("div",{className:De.rangeControls,children:[a.jsx("span",{className:De.rangeLabel,children:"Range"}),a.jsx("div",{className:De.rangeButtons,children:f.map(P=>a.jsx("button",{type:"button",className:`${De.rangeButton} ${d===P.key?De.rangeButtonActive:""}`,onClick:()=>m(P.key),children:P.label},P.key))})]}),d==="custom"&&a.jsxs("div",{className:De.customRangeInputs,children:[a.jsxs("label",{className:De.chartLabel,children:["From",a.jsx("input",{type:"datetime-local",value:h,onChange:P=>v(P.target.value),className:De.timeInput,max:g||void 0})]}),a.jsxs("label",{className:De.chartLabel,children:["To",a.jsx("input",{type:"datetime-local",value:g,onChange:P=>x(P.target.value),className:De.timeInput,min:h||void 0})]})]}),a.jsx("button",{type:"button",className:De.refreshButton,onClick:w,children:"Refresh"})]}):a.jsx("div",{className:De.emptyState,children:T}),_&&a.jsx("div",{className:De.errorMessage,children:_}),a.jsx("div",{className:De.chartArea,children:O?S?a.jsx("div",{className:De.chartMessage,children:"Loading historical data"}):j.length?a.jsx(Dj,{xDataKey:"time",series:j,yLabel:A,xDomain:E}):a.jsx("div",{className:De.chartMessage,children:k}):a.jsx("div",{className:De.chartMessage,children:T})})]})}const n_e=[{key:"1h",label:"Last hour"},{key:"6h",label:"Last 6 hours"},{key:"24h",label:"Last 24 hours"},{key:"custom",label:"Custom"}];function M0(e){if(!e)return null;const t=new Date(e);if(Number.isNaN(t.getTime()))return null;const n=Date.now()-t.getTime(),r=n<0?0:n,i=Math.floor(r/1e3),o=Math.floor(i/86400),c=Math.floor(i%86400/3600),d=Math.floor(i%3600/60),f=i%60;return{days:o,hours:c,minutes:d,seconds:f}}function r_e(e){return e?[`${e.days}d`,`${e.hours.toString().padStart(2,"0")}h`,`${e.minutes.toString().padStart(2,"0")}m`,`${e.seconds.toString().padStart(2,"0")}s`].join(" : "):"Set a start time to begin tracking"}function I0(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":os(t)}const a_e=new Set(["s01-germination","germination"]),D0=e=>e==null?"":String(e).trim().toLowerCase(),s_e=e=>{const t=D0(e?.unitType),n=D0(e?.unitId);if(t==="rack"&&n)return n;const r=[e?.rackId,e?.rack,e?.extra?.rackId,e?.extra?.rack_id,e?.meta?.rackId,e?.meta?.rack_id];for(const i of r){const o=D0(i);if(o)return o}return""};function i_e(){const e=p.useMemo(()=>W=>{const fe=s_e(W);return fe?a_e.has(fe):!1},[]),[t,n]=p.useState(""),[r,i]=p.useState(()=>M0("")),[o,c]=p.useState(!0),[d,f]=p.useState(""),[m,h]=p.useState(!1),[g,v]=p.useState(""),[x,w]=p.useState(""),[_,S]=p.useState("1h"),[j,A]=p.useState(()=>{const W=new Date,fe=new Date(W.getTime()-360*60*1e3);return os(fe)}),[E,C]=p.useState(()=>os(new Date)),[T,O]=p.useState(0),[R,k]=p.useState(""),[P,H]=p.useState(""),[K,B]=p.useState([]),[U,I]=p.useState(null),[L,$]=p.useState(""),[G,te]=p.useState(!1),re=p.useMemo(()=>{if(!t)return null;const W=Kc(t);if(!W)return null;let fe;if(r&&typeof r.days=="number")fe=r.days+1;else{const ve=Date.now()-W.getTime(),se=ve<0?0:ve;fe=Math.floor(se/864e5)+1}const we=Number.isFinite(fe)?Math.max(1,fe):1,de=xve(we);return de?{dayNumber:we,stage:de,beyondDefinedRange:!!de.isBeyondDefinedRange}:null},[t,r]);p.useEffect(()=>{i(M0(t))},[t]),p.useEffect(()=>{let W=!1;const fe=new AbortController;return(async()=>{c(!0),f("");try{const de=await vve({signal:fe.signal});if(W)return;n(I0(de.startTime))}catch(de){if(W||fe.signal.aborted)return;console.error("Failed to load germination status",de),f("Unable to load germination start time. Please try again.")}finally{W||c(!1)}})(),()=>{W=!0,fe.abort()}},[]),p.useEffect(()=>{if(!t)return;const W=setInterval(()=>{i(M0(t))},1e3);return()=>clearInterval(W)},[t]);const{devices:M,deviceOptions:q,metricReports:z}=ug({stageDetails:re,filterDevice:e});p.useEffect(()=>{if(!q.length){k("");return}(!R||!M[R])&&k(q[0].id)},[q,M,R]);const V=p.useMemo(()=>{const W=M[R];if(!W)return[];const fe=new Map;return(W.sensors||[]).forEach(we=>{const de=we?.sensorType||we?.valueType;if(!de)return;const ve=de.toLowerCase();if(fe.has(ve))return;const se=we?.sensorName||we?.source,Re=se&&se.toLowerCase()==="as7343",Je=Re?`as7343_counts_${de}`:de,le=Re?`AS7343 ${de}`:de;fe.set(ve,{key:ve,sensorType:Je,unit:we?.unit||"",label:le,historyKey:Je})}),Array.from(fe.values())},[M,R]);p.useEffect(()=>{if(!V.length){H("");return}V.some(fe=>fe.key===P)||H(V[0].key)},[V,P]);const Y=p.useMemo(()=>{const W=V.find(fe=>fe.key===P);return W?{key:W.key,sensorType:W.sensorType,unit:W.unit,label:W.label,historyKey:W.historyKey}:null},[V,P]),Z=Y?.key??"",ee=Y?.sensorType??"",ie=Y?.historyKey??Z,xe=W=>{v(""),w(""),f(""),n(W.target.value)},X=()=>{v(""),w(""),f(""),n("")},Ae=async()=>{const W=Kc(t);if(t&&!W){v(""),w("Please enter a valid start time before saving.");return}const fe=W?W.toISOString():null;h(!0),v(""),w(""),f("");try{const we=await bve(fe),de=I0(we.startTime);n(de),v(W||fe?"Start time saved.":"Start time cleared.")}catch(we){console.error("Failed to save germination start time",we),w("Unable to save start time. Please try again.")}finally{h(!1)}},he=async()=>{h(!0),v(""),w(""),f("");try{const W=await _ve(),fe=I0(W.startTime)||os(new Date);n(fe),v("Germination timer started.")}catch(W){console.error("Failed to trigger germination start",W),w("Unable to start the germination timer. Please try again.")}finally{h(!1)}},ue=()=>{if(_==="custom"){const W=os(new Date);C(W)}O(W=>W+1)};p.useEffect(()=>{if(_!=="custom"||j&&E)return;const{from:W,to:fe}=Cf("6h");A(os(W)),C(os(fe))},[_,j,E]),p.useEffect(()=>{if(!R||!Z){B([]),I(null);return}const W=_==="custom"?(()=>{const ve=Kc(j),se=Kc(E);return!ve||!se||ve>=se?null:{from:ve,to:se}})():Cf(_);if(!W){B([]),I(null);return}let fe=!1;const we=new AbortController;return(async()=>{te(!0),$("");try{const ve=await Tve({identity:M[R],from:W.from,to:W.to,sensorType:ee,metricKey:ie,signal:we.signal});if(fe)return;B(ve),I([W.from.getTime(),W.to.getTime()])}catch(ve){if(fe||we.signal.aborted)return;console.error("Failed to load historical data",ve),$("Unable to load historical data. Please try again."),B([]),I([W.from.getTime(),W.to.getTime()])}finally{fe||te(!1)}})(),()=>{fe=!0,we.abort()}},[j,E,_,T,R,Z,ie,ee]);const Xe=Y?.label??"",Ue=Y?.unit??"",ye=Xe||ee||Z,je=p.useMemo(()=>!Z||K.length===0?[]:[{name:ye,data:K,yDataKey:"value"}],[K,ye,Z]),Ee=p.useMemo(()=>Z?Ue?`${Xe} (${Ue})`:Xe||ye:"",[ye,Z,Xe,Ue]),qe=o?{type:"info",message:"Loading start time"}:d?{type:"error",message:d}:x?{type:"error",message:x}:g?{type:"success",message:g}:null;return a.jsxs("div",{className:De.page,children:[a.jsx(gs,{title:"Germination"}),a.jsxs("section",{className:De.timerSection,children:[a.jsxs("div",{className:De.timerControls,children:[a.jsxs("label",{children:["Start time",a.jsx("input",{type:"datetime-local",value:t,onChange:xe,className:De.timeInput})]}),a.jsxs("div",{className:De.timerButtons,children:[a.jsx("button",{type:"button",className:`${De.timerButton} ${De.startButton}`,onClick:he,disabled:m||o,children:"Start now"}),a.jsx("button",{type:"button",className:`${De.timerButton} ${De.saveButton}`,onClick:Ae,disabled:m||o,children:"Save"}),a.jsx("button",{type:"button",className:`${De.timerButton} ${De.clearButton}`,onClick:X,disabled:m||!t,children:"Clear"})]})]}),qe&&a.jsx("div",{className:De.timerFeedback,children:a.jsx("span",{className:qe.type==="error"?De.errorMessage:qe.type==="success"?De.successMessage:De.infoMessage,children:qe.message})}),a.jsxs("div",{className:De.elapsedWrapper,children:[a.jsx("span",{className:De.elapsedLabel,children:"Elapsed time"}),a.jsx("span",{className:De.elapsedValue,children:r_e(r)})]}),a.jsx("div",{className:De.stageSummary,children:re?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:De.stageSummaryLabel,children:"Current stage"}),a.jsxs("div",{className:De.stageSummaryContent,children:[a.jsx("span",{className:De.stageSummaryName,children:re.stage.description}),a.jsxs("span",{className:De.stageSummaryDays,children:["Day ",re.dayNumber,re.stage.daysLabel?`  Target window ${re.stage.daysLabel}`:"",re.beyondDefinedRange?"  Beyond defined schedule":""]})]})]}):a.jsx("span",{className:De.stageSummaryPlaceholder,children:"Set a start time to see stage-based target ranges."})})]}),a.jsx(t5,{metricReports:z}),a.jsx(n5,{deviceOptions:q,selectedDeviceKey:R,onDeviceChange:k,availableMetrics:V,selectedMetricKey:P,onMetricChange:H,emptyStateLabel:"Germination",rangePreset:_,rangeOptions:n_e,onRangePreset:S,customFrom:j,customTo:E,onCustomFrom:A,onCustomTo:C,onRefresh:ue,chartError:L,chartLoading:G,chartSeries:je,chartYLabel:Ee,chartDomain:U}),a.jsxs("section",{className:`${De.sectionCard} ${De.cameraSection}`,children:[a.jsx("div",{className:De.sectionHeader,children:a.jsx("h2",{className:De.sectionTitle,children:"Germination Room Camera"})}),a.jsx("div",{className:De.cameraWrapper,children:a.jsx(yve,{})})]})]})}function Tf(e){return e==null?"":String(e).trim().toLowerCase()}function Pj(e,t){const n=Tf(t);if(!n)return!1;const r=Bf(e?.unitType),i=Tf(e?.unitId);return r!=="rack"?!1:i===n}function Iu(e){const t=fs(e);if(t)return t;const n=[e?.deviceId,e?.id,e?.serial];for(const r of n){if(r==null)continue;const i=ra(r);if(i)return i}return""}const sp="as7343_counts_",o_e=[{id:"blue",label:"Blue intensity",keys:["as7343_counts_405nm","as7343_counts_425nm","as7343_counts_450nm","as7343_counts_475nm"],tone:"neutral"},{id:"green",label:"Green balance",keys:["as7343_counts_515nm","as7343_counts_550nm","as7343_counts_555nm"],tone:"neutral"},{id:"red",label:"Red intensity",keys:["as7343_counts_600nm","as7343_counts_640nm","as7343_counts_690nm"],tone:"neutral"},{id:"far-red",label:"Far-Red / IR",keys:["as7343_counts_745nm","as7343_counts_855nm"],tone:"alert"}],qM="AS7343 summary",l_e=e=>{const t=e.filter(d=>(d.sensorType||d.measurementType)?.startsWith?.(sp));if(t.length===0)return{summaryReports:[],hasAs7343:!1,totalsByGroup:new Map};const n=new Map,r=new Map;t.forEach(d=>{const f=new Map;d.values.forEach(h=>{f.set(h.id,h),r.has(h.id)||r.set(h.id,{title:h.title,subtitle:h.subtitle,debugId:h.debugId})});const m=d.sensorType||d.measurementType;n.set(m,f)});const i=new Map,o=o_e.map(d=>{let f=!1;const m=new Map,h=Array.from(r.entries()).map(([g,v])=>{let x=0,w=!1,_=!1,S=!1,j=null;d.keys.forEach(E=>{const C=n.get(E);if(!C){f=!0;return}const T=C.get(g);if(!T||T.numericValue===null){f=!0;return}w=!0,x+=T.numericValue,T.status==="ERROR"&&(_=!0),T.status==="STALE"&&(S=!0),T.healthy===!1?j=!1:T.healthy===!0&&j!==!1&&(j=!0)});let A="STALE";return w&&(A=_?"ERROR":S?"STALE":"OK"),m.set(g,{total:w?x:null,status:A,healthy:j}),{id:g,title:v.title,subtitle:v.subtitle,debugId:v.debugId,displayValue:w?x.toFixed(1):"-",numericValue:w?x:null,healthy:j,status:A}});return i.set(d.id,m),{measurementType:`as7343_summary_${d.id}`,sensorModel:qM,label:f?`${d.label} (partial)`:d.label,range:null,rangeStatus:"none",stageDescription:"",stageDaysLabel:"",stageBeyondDefinedRange:!1,status:"Monitoring",tone:d.tone,values:h}}),c=Array.from(r.entries()).map(([d,f])=>{const m=i.get("blue"),h=i.get("red"),g=m?.get(d),v=h?.get(d),w=g?.total!==null&&v?.total!==null&&v.total!==0?g.total/v.total:null,_=[g?.status,v?.status].includes("ERROR"),S=[g?.status,v?.status].includes("STALE");let j="STALE";w!==null&&(j=_?"ERROR":S?"STALE":"OK");let A=null;return g?.healthy===!1||v?.healthy===!1?A=!1:(g?.healthy===!0||v?.healthy===!0)&&(A=!0),{id:d,title:f.title,subtitle:f.subtitle,debugId:f.debugId,displayValue:w!==null?w.toFixed(2):"-",numericValue:w,healthy:A,status:j}});return o.push({measurementType:"as7343_summary_ratio_blue_red",sensorModel:qM,label:"Blue : Red",range:null,rangeStatus:"none",stageDescription:"",stageDaysLabel:"",stageBeyondDefinedRange:!1,status:"Monitoring",tone:"neutral",values:c}),{summaryReports:o,hasAs7343:!0}};function c_e({rackId:e,aggregateAs7343:t=!0,selectedDeviceIds:n}){const r=Tf(e),[i,o]=p.useState(!1),c=p.useMemo(()=>!Array.isArray(n)||n.length===0?null:new Set(n.map(w=>String(w).trim())),[n]),d=p.useMemo(()=>w=>{if(!Pj(w,r))return!1;if(!c)return!0;const _=Iu(w);return!!_&&c.has(_)},[r,c]),{metricReports:f}=ug({filterDevice:d,scope:{unitType:"rack",unitId:r}}),m=p.useMemo(()=>f.filter(w=>(w.sensorType||w.measurementType)?.startsWith?.(sp)),[f]),{summaryReports:h,hasAs7343:g}=p.useMemo(()=>l_e(f),[f]),v=p.useMemo(()=>{if(!t||!g)return f;const w=i?f:f.filter(_=>!(_.sensorType||_.measurementType)?.startsWith?.(sp));return[...h,...w]},[t,g,f,i,h]);p.useEffect(()=>{if(!t)return;const w=v.filter(_=>(_.sensorType||_.measurementType)?.startsWith?.(sp));console.log("[LiveSensorsPanel] AS7343 aggregation",{totalMetrics:f.length,as7343Metrics:m.length,renderedCards:v.length,renderedAs7343:w.length,showAdvancedSpectrum:i})},[t,m.length,f.length,i,v]);const x=t&&g?a.jsxs("label",{className:De.headerToggle,children:[a.jsx("span",{className:De.headerToggleLabel,children:"Advanced spectrum (nm)"}),a.jsx("input",{type:"checkbox",className:De.headerToggleInput,checked:i,onChange:w=>o(w.target.checked)})]}):null;return a.jsx(t5,{metricReports:v,headerActions:x})}function r5(e){if(typeof e=="number")return Number.isFinite(e)?e:null;if(typeof e=="string"){const t=Date.parse(e);return Number.isNaN(t)?null:t}return null}function P0(e){if(!e||typeof e!="object")return null;const t=r5(e.timestamp??e.time??e.ts??e.t),n=e.value??e.metricValue??e.y,r=typeof n=="number"?n:Number(n);return!Number.isFinite(r)||t===null?null:{time:t,value:r}}function u_e(e,t){return e.map(n=>{const r=r5(n.timestamp??n.time??n.ts??n.t),i=e5(n,t);return r===null||i===null?null:{time:r,value:i}}).filter(Boolean)}async function a5({identity:e,metricKey:t,sensorType:n,from:r,to:i,signal:o}){const c=n||t,d=Ii(e||{}),f=new URLSearchParams({sensorType:c,from:r.toISOString(),to:i.toISOString()});Object.entries(d).forEach(([v,x])=>{x==null||x===""||f.set(v,String(x))});const m=await Ve(`${Ij.rest.historyAggregated}?${f.toString()}`,{signal:o});if(!m.ok)throw new Error(`Request failed with status ${m.status}`);const h=await m.json();if(Array.isArray(h))return h.map(P0).filter(Boolean);if(Array.isArray(h?.data))return h.data.map(P0).filter(Boolean);if(Array.isArray(h?.entries))return h.entries.map(P0).filter(Boolean);const g=z1(h);return u_e(g,t||c)}const d_e="as7343_counts_",af=[{id:"blue",label:"Blue",color:"#5b7cff",keys:["as7343_counts_405nm","as7343_counts_425nm","as7343_counts_450nm","as7343_counts_475nm"]},{id:"green",label:"Green",color:"#4fd38a",keys:["as7343_counts_515nm","as7343_counts_550nm","as7343_counts_555nm"]},{id:"red",label:"Red",color:"#ff6f5f",keys:["as7343_counts_600nm","as7343_counts_640nm","as7343_counts_690nm"]}],f_e=[{key:"1h",label:"Last 60 minutes"},{key:"24h",label:"Last 24 hours"}],zM=af.flatMap(e=>e.keys),FM=e=>/as7343/i.test(e?.sensorName||"")||/as7343/i.test(e?.source||""),m_e=e=>e?`${d_e}${e}`:null,h_e=e=>Number.isFinite(e)?Math.round(e).toLocaleString():"-",p_e=e=>Number.isFinite(e)?`${e.toFixed(1)}%`:"-",y_e=({active:e,payload:t,label:n,formatter:r})=>{if(!e||!t?.length)return null;const i=t[0]?.payload;return i?a.jsxs("div",{style:{backgroundColor:"rgba(7, 15, 32, 0.94)",border:"1px solid #31507f",borderRadius:8,color:"#e4ecff",boxShadow:"0 12px 28px rgba(4, 11, 26, 0.55)",padding:"0.75rem 0.9rem"},children:[a.jsx("div",{style:{color:"#9fb6ff",marginBottom:"0.4rem",fontWeight:600},children:r?r(n):n}),af.map(o=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a.jsx("span",{style:{color:o.color},children:o.label}),a.jsxs("span",{children:[p_e(i[`${o.id}Pct`])," (",h_e(i[`${o.id}Total`])," counts)"]})]},o.id))]}):null};function g_e({rackId:e,selectedDeviceIds:t}){const n=Tf(e),[r,i]=p.useState(""),[o,c]=p.useState("1h"),[d,f]=p.useState(0),[m,h]=p.useState(!1),[g,v]=p.useState(""),[x,w]=p.useState({}),[_,S]=p.useState(null),j=p.useMemo(()=>!Array.isArray(t)||t.length===0?null:new Set(t.map(M=>String(M).trim())),[t]),A=p.useMemo(()=>M=>{if(!Pj(M,n))return!1;if(!j)return!0;const q=Iu(M);return!!q&&j.has(q)},[n,j]),{devices:E,deviceOptions:C}=ug({filterDevice:A,scope:{unitType:"rack",unitId:n}}),T=p.useMemo(()=>C.filter(M=>M.sensors?.some(FM)),[C]);p.useEffect(()=>{if(!T.length){i("");return}(!r||!E[r])&&i(T[0].id)},[T,E,r]),p.useEffect(()=>{if(!r)return;T.some(q=>q.id===r)||i("")},[T,r]);const O=E[r]?.sensors||[],R=p.useMemo(()=>{const M=new Set;return O.forEach(q=>{if(!FM(q))return;const z=q?.sensorType||q?.valueType,V=m_e(z);V&&M.add(V)}),M},[O]),k=p.useMemo(()=>zM.filter(M=>!R.has(M)),[R]),P=!!r&&k.length>0,H=!!r&&k.some(M=>af.find(q=>q.id==="red")?.keys.includes(M)),K=()=>f(M=>M+1);p.useEffect(()=>{if(!n||!r){w({}),S(null);return}const M=Cf(o);let q=!1;const z=new AbortController;return(async()=>{h(!0),v("");try{const Y=await Promise.all(zM.map(async ee=>{const ie=await a5({identity:E[r],metricKey:ee,sensorType:ee,from:M.from,to:M.to,signal:z.signal});return[ee,ie]}));if(q)return;const Z=Y.reduce((ee,[ie,xe])=>(ee[ie]=xe,ee),{});w(Z),S([M.from.getTime(),M.to.getTime()])}catch(Y){if(q||z.signal.aborted)return;console.error("Failed to load AS7343 history",Y),v("Unable to load AS7343 spectrum history. Please try again."),w({}),S([M.from.getTime(),M.to.getTime()])}finally{q||h(!1)}})(),()=>{q=!0,z.abort()}},[E,n,o,d,r]);const B=p.useMemo(()=>{const M=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return q=>{if(q==null)return"";const z=q instanceof Date?q:new Date(q);return Number.isNaN(z.getTime())?"":M.format(z)}},[]),U=p.useMemo(()=>{const M=new Map;return Object.entries(x).forEach(([q,z])=>{Array.isArray(z)&&z.forEach(V=>{const Y=V?.time;if(!Number.isFinite(Y))return;const Z=M.get(Y)??{time:Y};Z[q]=V.value,M.set(Y,Z)})}),Array.from(M.values()).sort((q,z)=>q.time-z.time).map(q=>{const z={};let V=!0;af.forEach(Z=>{const ee=Z.keys.map(xe=>q[xe]),ie=ee.every(xe=>typeof xe=="number"&&Number.isFinite(xe));ie||(V=!1),z[Z.id]=ie?ee.reduce((xe,X)=>xe+X,0):null});const Y=V&&z.blue!==null&&z.green!==null&&z.red!==null?z.blue+z.green+z.red:null;return!Number.isFinite(Y)||Y<=0?{time:q.time,blueTotal:z.blue,greenTotal:z.green,redTotal:z.red,total:null,bluePct:null,greenPct:null,redPct:null}:{time:q.time,blueTotal:z.blue,greenTotal:z.green,redTotal:z.red,total:Y,bluePct:z.blue/Y*100,greenPct:z.green/Y*100,redPct:z.red/Y*100}})},[x]),I=p.useMemo(()=>U.filter(M=>Number.isFinite(M.total)),[U]),L=p.useMemo(()=>I.map(M=>{if(!Number.isFinite(M.redTotal)||M.redTotal<=0)return null;const q=M.blueTotal/M.redTotal;return{time:M.time,ratio:Number(q.toFixed(2))}}).filter(Boolean),[I]),$=p.useMemo(()=>L.length?[{name:"Blue : Red",data:L,yDataKey:"ratio",color:"#7fa6ff"}]:[],[L]),G=T.length>0,re=!!r?"No spectrum data available for the selected range.":"Select an AS7343 sensor node to view spectrum history.";return G?a.jsxs("section",{className:`${De.sectionCard} ${De.chartSection}`,children:[a.jsxs("div",{className:De.sectionHeader,children:[a.jsx("h2",{className:De.sectionTitle,children:"AS7343 Spectrum Balance"}),P&&a.jsx("span",{className:`${De.spectrumBadge} ${De.spectrumBadgeWarning}`,children:"Partial spectrum"})]}),a.jsxs("div",{className:De.chartControls,children:[a.jsx("div",{className:De.chartSelectors,children:a.jsxs("label",{className:De.chartLabel,children:["Sensor node",a.jsx("select",{className:De.chartSelect,value:r,onChange:M=>i(M.target.value),children:T.map(M=>a.jsx("option",{value:M.id,children:M.label},M.id))})]})}),a.jsxs("div",{className:De.rangeControls,children:[a.jsx("span",{className:De.rangeLabel,children:"Range"}),a.jsx("div",{className:De.rangeButtons,children:f_e.map(M=>a.jsx("button",{type:"button",className:`${De.rangeButton} ${o===M.key?De.rangeButtonActive:""}`,onClick:()=>c(M.key),children:M.label},M.key))})]}),a.jsx("button",{type:"button",className:De.refreshButton,onClick:K,children:"Refresh"})]}),g&&a.jsx("div",{className:De.errorMessage,children:g}),a.jsxs("div",{className:De.spectrumCharts,children:[a.jsx("div",{className:De.chartArea,children:m?a.jsx("div",{className:De.chartMessage,children:"Loading spectrum balance"}):I.length?a.jsx(ag,{width:"100%",height:320,debounce:200,children:a.jsxs(HB,{data:I,margin:{top:20,right:30,left:12,bottom:50},barGap:4,barCategoryGap:6,isAnimationActive:!1,children:[a.jsx(nm,{stroke:"#1f2a44",strokeDasharray:"4 4"}),a.jsx(Ru,{dataKey:"time",type:"number",scale:"time",domain:_??["auto","auto"],tickFormatter:B,stroke:"#2b3c5c",tick:{fontSize:12,fill:"#1f2d4d",fontWeight:500},angle:-20,textAnchor:"end",height:60,allowDataOverflow:!0}),a.jsx(Mu,{domain:[0,100],tick:{fontSize:12,fill:"#1f2d4d",fontWeight:500},stroke:"#2b3c5c",tickLine:{stroke:"#2b3c5c"}}),a.jsx(rg,{cursor:{fill:"rgba(111, 155, 255, 0.15)"},content:a.jsx(y_e,{formatter:B})}),a.jsx(Kf,{wrapperStyle:{paddingTop:12,color:"#d0dcff"}}),af.map(M=>a.jsx(ig,{dataKey:`${M.id}Pct`,name:M.label,stackId:"balance",fill:M.color,isAnimationActive:!1},M.id))]})}):a.jsx("div",{className:De.chartMessage,children:re})}),a.jsx("div",{className:De.chartArea,children:m?a.jsx("div",{className:De.chartMessage,children:"Loading Blue : Red ratio"}):H?a.jsx("div",{className:De.chartMessage,children:"Insufficient data (missing red channels)."}):$.length?a.jsx(Dj,{xDataKey:"time",series:$,yLabel:"Blue : Red ratio",xDomain:_,showLegend:!1}):a.jsx("div",{className:De.chartMessage,children:"No ratio data available for this range."})})]}),a.jsx("div",{className:De.spectrumNote,children:"Ratio trends are meaningful, but raw counts are not calibrated. Hover for raw values."})]}):null}const v_e=[{key:"1h",label:"Last hour"},{key:"6h",label:"Last 6 hours"},{key:"24h",label:"Last 24 hours"},{key:"custom",label:"Custom"}];function b_e({rackId:e,selectedDeviceIds:t}){const n=Tf(e),r=p.useMemo(()=>!Array.isArray(t)||t.length===0?null:new Set(t.map(z=>String(z).trim())),[t]),i=p.useMemo(()=>z=>{if(!Pj(z,n))return!1;if(!r)return!0;const V=Iu(z);return!!V&&r.has(V)},[n,r]),{devices:o,deviceOptions:c}=ug({filterDevice:i,scope:{unitType:"rack",unitId:n}}),[d,f]=p.useState(""),[m,h]=p.useState(""),[g,v]=p.useState("1h"),[x,w]=p.useState(()=>{const z=new Date,V=new Date(z.getTime()-360*60*1e3);return os(V)}),[_,S]=p.useState(()=>os(new Date)),[j,A]=p.useState(0),[E,C]=p.useState([]),[T,O]=p.useState(null),[R,k]=p.useState(""),[P,H]=p.useState(!1);p.useEffect(()=>{f(""),h(""),C([]),O(null)},[n]),p.useEffect(()=>{if(!c.length){f("");return}(!d||!o[d])&&f(c[0].id)},[c,o,d]);const K=p.useMemo(()=>{const z=o[d];if(!z)return[];const V=new Map;return(z.sensors||[]).forEach(Y=>{const Z=Y?.sensorType||Y?.valueType;if(!Z)return;const ee=Z.toLowerCase();if(V.has(ee))return;const ie=Y?.sensorName||Y?.source,xe=ie&&ie.toLowerCase()==="as7343",X=xe?`as7343_counts_${Z}`:Z,Ae=xe?`AS7343 ${Z}`:Z;V.set(ee,{key:ee,sensorType:X,unit:Y?.unit||"",label:Ae,historyKey:X})}),Array.from(V.values())},[o,d]);p.useEffect(()=>{if(!K.length){h("");return}K.some(V=>V.key===m)||h(K[0].key)},[K,m]);const B=p.useMemo(()=>{const z=K.find(V=>V.key===m);return z?{key:z.key,sensorType:z.sensorType,unit:z.unit,label:z.label,historyKey:z.historyKey}:null},[K,m]),U=B?.key??"",I=B?.sensorType??"",L=B?.historyKey??U,$=()=>{if(g==="custom"){const z=os(new Date);S(z)}A(z=>z+1)};p.useEffect(()=>{if(g!=="custom"||x&&_)return;const{from:z,to:V}=Cf("6h");w(os(z)),S(os(V))},[g,x,_]),p.useEffect(()=>{if(!n||!d||!U){C([]),O(null);return}const z=g==="custom"?(()=>{const ee=Kc(x),ie=Kc(_);return!ee||!ie||ee>=ie?null:{from:ee,to:ie}})():Cf(g);if(!z){C([]),O(null);return}let V=!1;const Y=new AbortController;return(async()=>{H(!0),k("");try{const ee=await a5({identity:o[d],metricKey:L,sensorType:I,from:z.from,to:z.to,signal:Y.signal});if(V)return;C(ee),O([z.from.getTime(),z.to.getTime()])}catch(ee){if(V||Y.signal.aborted)return;console.error("Failed to load historical data",ee),k("Unable to load historical data. Please try again."),C([]),O([z.from.getTime(),z.to.getTime()])}finally{V||H(!1)}})(),()=>{V=!0,Y.abort()}},[x,_,n,g,j,d,L,U,I]);const G=B?.label??"",te=B?.unit??"",re=G||I||U,M=p.useMemo(()=>!U||E.length===0?[]:[{name:re,data:E,yDataKey:"value"}],[E,re,U]),q=p.useMemo(()=>U?te?`${G} (${te})`:G||re:"",[re,U,G,te]);return a.jsx(n5,{deviceOptions:c,selectedDeviceKey:d,onDeviceChange:f,availableMetrics:K,selectedMetricKey:m,onMetricChange:h,rangePreset:g,rangeOptions:v_e,onRangePreset:v,customFrom:x,customTo:_,onCustomFrom:w,onCustomTo:S,onRefresh:$,chartError:R,chartLoading:P,chartSeries:M,chartYLabel:q,chartDomain:T,emptyStateMessage:"No sensors available for this rack yet."})}function s5({rackId:e,selectedDeviceIds:t}){const n=String(e??"").trim(),r=n.toLowerCase().includes("germination");return a.jsxs(a.Fragment,{children:[a.jsx(c_e,{rackId:n,selectedDeviceIds:t}),!r&&a.jsx(g_e,{rackId:n,selectedDeviceIds:t}),a.jsx(b_e,{rackId:n,selectedDeviceIds:t})]})}function __e(){const{rackId:e}=Ls(),t=String(e??"").trim(),n=t?`Rack ${t}`:"Rack Dashboard";return a.jsxs("div",{className:De.page,children:[a.jsx(gs,{title:n}),a.jsx(s5,{rackId:t})]})}const HM=e=>{const t=e?.timestamp??e?.ts??e?.time??e?.updatedAt??e?.updateTime??e?.createdAt??null,n=Number(t);if(Number.isFinite(n))return n;if(t){const r=new Date(t).getTime();if(Number.isFinite(r))return r}return null},uy=e=>{if(!e||typeof e!="object"||!("payload"in e))return e;const t=e.payload;if(typeof t=="string")try{return JSON.parse(t)}catch{return e}return t??e},l1=e=>{const t=uy(e);return Uf(t,e)},dy=e=>{const t=uy(e);return HM(t)??HM(e)},VM=e=>{if(!e)return{rackId:null,layer:null,deviceKind:null,timestamp:null,identity:null};const t=e.message??e,n=l1(t),r=Ii(n),i=r.unitType==="rack"?r.unitId:null,o=r.layerId||"No layer",c=r.deviceId?r.deviceId.charAt(0).toUpperCase():null,d=Number(e.timestamp??e.ts)||dy(t)||dy(e)||Date.now();return{rackId:i,layer:o,deviceKind:c,timestamp:d,identity:r}},KM=Bn(),x_e=2500,S_e=hJ,w_e=e=>{const t=I1(e);return t?.devices?.length?t.devices:Array.isArray(e)?e:Array.isArray(e?.devices)?e.devices:Array.isArray(e?.data)?e.data:Array.isArray(e?.data?.devices)?e.data.devices:Array.isArray(e?.catalog?.devices)?e.catalog.devices:[]},j_e=()=>({layers:new Set,layerCounts:new Map,deviceCounts:{C:0,T:0,R:0},deviceTotal:0,lastUpdate:0});function $j({enableFallback:e=!0,subscribeToTelemetry:t=!0}={}){const n=p.useRef(new Map),r=p.useRef({racks:new Map,unmappedCount:0}),[i,o]=p.useState([]),[c,d]=p.useState(0),[f,m]=p.useState(0),[h,g]=p.useState({loading:!1,error:""}),v=p.useRef(!1),x=p.useRef(!1),w=p.useCallback((E,C)=>{const T=(I,L,$,G)=>{if(L){const te=I.layerCounts.get(L)||0,re=Math.max(0,te+G);re===0?(I.layerCounts.delete(L),I.layers.delete(L)):(I.layerCounts.set(L,re),I.layers.add(L))}if($){const te=I.deviceCounts[$]||0,re=Math.max(0,te+G);I.deviceCounts[$]=re}},O=E?VM(E):null,R=C?VM(C):null,k=r.current;let P=!1;O?.rackId&&!R?.rackId?k.unmappedCount+=1:!O?.rackId&&R?.rackId&&(k.unmappedCount=Math.max(0,k.unmappedCount-1));const H=I=>{const L=k.racks.get(I);if(L)return L;const $=j_e();return k.racks.set(I,$),P=!0,$},K=I=>{if(!I?.rackId)return;const L=k.racks.get(I.rackId);L&&(T(L,I.layer,I.deviceKind,-1),L.deviceTotal=Math.max(0,L.deviceTotal-1),L.deviceTotal===0&&L.layerCounts.size===0&&(k.racks.delete(I.rackId),P=!0))},B=I=>{if(!I?.rackId)return;const L=H(I.rackId);T(L,I.layer,I.deviceKind,1),L.deviceTotal+=1,L.lastUpdate=Math.max(L.lastUpdate||0,I.timestamp||0)};if(!R?.rackId)return O?.rackId&&K(O),{rackListChanged:P};if(O?.rackId&&O.rackId!==R.rackId)return K(O),B(R),{rackListChanged:P};if(!O?.rackId)return B(R),{rackListChanged:P};const U=H(R.rackId);return O.layer!==R.layer&&(T(U,O.layer,null,-1),T(U,R.layer,null,1)),O.deviceKind!==R.deviceKind&&(T(U,null,O.deviceKind,-1),T(U,null,R.deviceKind,1)),U.lastUpdate=Math.max(U.lastUpdate||0,R.timestamp||0),{rackListChanged:P}},[]),_=p.useCallback(E=>{if(!E.length)return;let C=!1;E.forEach(({cacheKey:T,entry:O})=>{const R=n.current.get(T);n.current.set(T,O);const k=w(R,O);C=C||k.rackListChanged}),C&&d(T=>T+1),t&&(o(Array.from(n.current.values())),m(T=>T+1))},[t,w]),S=p.useCallback((E,C,T={})=>{const O=l1(C),R=Ii(O),k=fs(O);R.unitType==="rack"&&R.unitId;const P=R.layerId??null;console.log(`[WS][IN]
topic=${T.destination??E}
farmId=${R.farmId??"null"}
unitType=${R.unitType??"null"}
unitId=${R.unitId??"null"}
layerId=${P??"null"}`),console.log(`[IDENTITY]
key=${k??"null"}
identity=${JSON.stringify(R)}`),M1(O)&&(v.current=!0);const H=k||"UNMAPPED",K=dy(C)??Date.now(),B=uy(C);_([{cacheKey:H,entry:{deviceKey:k||null,identity:R,message:B??C,timestamp:K}}])},[_]);B1(S_e,S),p.useEffect(()=>{if(x.current||(x.current=!0,typeof window>"u"))return;window.__hlStomp||window.hydroLeafStomp||console.log(`[WS][STATUS]
providerActive=false
note=Monitoring provider not detected`)},[]);const j=p.useCallback(async()=>{if(KM){g({loading:!0,error:""});try{const E=await Ve(`${KM}/api/devices/all`),C=await at(E,"Device catalog unavailable"),T=w_e(C),O=Date.now(),R=T.map((k,P)=>{const H=l1(k),K=fs(H),B=K||`UNMAPPED-${P}`;return n.current.has(B)?null:{cacheKey:B,entry:{deviceKey:K||null,identity:Ii(H),message:uy(k)??k,timestamp:dy(k)??O}}}).filter(Boolean);_(R),g({loading:!1,error:""})}catch(E){g({loading:!1,error:E?.message??"Failed to load devices"})}}},[]);p.useEffect(()=>{if(!e)return;const E=setTimeout(()=>{v.current||j()},x_e);return()=>clearTimeout(E)},[e,j]);const A=p.useMemo(()=>r.current,[c,f]);return{cache:n.current,cacheEntries:i,inventory:A,unmappedCount:A.unmappedCount,fallbackStatus:h,inventoryVersion:c,telemetryVersion:f}}const N_e="_page_1jb2n_1",A_e="_section_1jb2n_17",E_e="_sectionHeader_1jb2n_39",C_e="_sectionTitle_1jb2n_55",T_e="_cardGrid_1jb2n_67",k_e="_card_1jb2n_67",O_e="_cardHeader_1jb2n_99",R_e="_cardTitle_1jb2n_113",M_e="_subtleText_1jb2n_125",I_e="_countRow_1jb2n_135",D_e="_layerChips_1jb2n_149",P_e="_chipButton_1jb2n_161",$_e="_actionRow_1jb2n_193",L_e="_actionButton_1jb2n_205",B_e="_breadcrumbs_1jb2n_239",U_e="_breadcrumbLink_1jb2n_255",q_e="_metricList_1jb2n_275",z_e="_metricRow_1jb2n_287",F_e="_metricKey_1jb2n_303",H_e="_deviceGroup_1jb2n_311",V_e="_deviceCard_1jb2n_323",K_e="_emptyState_1jb2n_343",G_e="_warning_1jb2n_353",ht={page:N_e,section:A_e,sectionHeader:E_e,sectionTitle:C_e,cardGrid:T_e,card:k_e,cardHeader:O_e,cardTitle:R_e,subtleText:M_e,countRow:I_e,layerChips:D_e,chipButton:P_e,actionRow:$_e,actionButton:L_e,breadcrumbs:B_e,breadcrumbLink:U_e,metricList:q_e,metricRow:z_e,metricKey:F_e,deviceGroup:H_e,deviceCard:V_e,emptyState:K_e,warning:G_e},W_e=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString()},GM=(e,t)=>{const n=Number(String(e).replace(/\D/g,"")),r=Number(String(t).replace(/\D/g,""));return Number.isFinite(n)&&Number.isFinite(r)&&n!==r?n-r:String(e).localeCompare(String(t))};function Y_e(){const e=Gr(),{inventory:t,unmappedCount:n,fallbackStatus:r,telemetryVersion:i}=$j(),o=p.useMemo(()=>Array.from(t.racks.entries()).map(([c,d])=>{const f=Array.from(d.layers).sort(GM);return{rackId:c,layers:f,counts:d.deviceCounts,lastUpdate:d.lastUpdate}}).sort((c,d)=>GM(c.rackId,d.rackId)),[t.racks,i]);return a.jsxs("div",{className:ht.page,children:[a.jsx(gs,{title:"Hall"}),a.jsxs("section",{className:ht.section,children:[a.jsxs("div",{className:ht.sectionHeader,children:[a.jsx("div",{className:ht.sectionTitle,children:"Racks"}),r.loading&&a.jsx("div",{className:ht.subtleText,children:"Loading inventory"})]}),o.length===0?a.jsx("div",{className:ht.emptyState,children:"No racks discovered yet."}):a.jsx("div",{className:ht.cardGrid,children:o.map(c=>a.jsxs("article",{className:ht.card,children:[a.jsxs("div",{className:ht.cardHeader,children:[a.jsxs("div",{className:ht.cardTitle,children:["Rack ",c.rackId]}),a.jsx("div",{className:ht.subtleText,children:W_e(c.lastUpdate)})]}),a.jsxs("div",{className:ht.countRow,children:[a.jsxs("span",{children:["C:",c.counts.C??0]}),a.jsxs("span",{children:["T:",c.counts.T??0]}),a.jsxs("span",{children:["R:",c.counts.R??0]})]}),a.jsx("div",{className:ht.layerChips,children:c.layers.map(d=>a.jsx("button",{type:"button",className:ht.chipButton,onClick:()=>e(`/monitoring/hall/racks/${c.rackId}/layers/${d==="No layer"?"no-layer":d}`),children:d},d))}),a.jsx("div",{className:ht.actionRow,children:a.jsx("button",{type:"button",className:ht.actionButton,onClick:()=>e(`/monitoring/hall/racks/${c.rackId}`),children:"Open Rack"})})]},c.rackId))}),n>0&&a.jsxs("div",{className:ht.warning,children:["Unmapped devices detected: ",n]}),r.error&&a.jsx("div",{className:ht.warning,children:r.error})]})]})}const $0=e=>e==null||e===""?null:Number(e),X_e=e=>String(e).replace(/[]/g,t=>"0123456789"["".indexOf(t)]);function WM(e){const n=X_e(String(e||"")).toLowerCase().replace(/[\s_-]/g,"");return n?["light","lux","illumination"].includes(n)?"light":["temperature","temp","tempc","temperaturec","airtemp","airtempc","airtemperature","airtemperaturec"].includes(n)?"temperature":["humidity","hum","rh","rhpct","humiditypct","humiditypercent","relativehumidity","relativehumiditypct","relativehumiditypercent"].includes(n)?"humidity":n==="co2"||n==="co2ppm"?"co2":n==="ph"?"pH":n==="do"||n==="dissolvedoxygen"?"dissolvedOxygen":n==="ec"||n==="dissolvedec"?"dissolvedEC":n==="tds"||n==="dissolvedtds"?"dissolvedTDS":n==="watertemp"||n==="dissolvedtemp"?"dissolvedTemp":e:null}function i5(e){const t={};if(!e)return t;if(Array.isArray(e)){for(const n of e){const r=WM(n?.sensorType??n?.type??n?.name),i=$0(n?.value),o=n?.unit||n?.units||n?.u;r&&i!=null&&(t[r]={value:i,unit:o})}return t}if(typeof e=="object")for(const[n,r]of Object.entries(e)){const i=WM(n);if(r&&typeof r=="object"){const o=$0(r.value??r.avg??r.average??r.v),c=r.unit||r.u;o!=null&&(t[i]={value:o,unit:c})}else r!=null&&(t[i]={value:$0(r)})}return t}const Q_e=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString()},Z_e=e=>{const t=Number(e?.value??e);if(!Number.isFinite(t))return null;const n=Math.abs(t),r=n>=100?0:n>=10||n>=1?1:2,i=e?.unit?` ${e.unit}`:"";return`${t.toFixed(r)}${i}`},J_e=e=>e?e.sensors?e.sensors:e.sensorData?e.sensorData:e.data?.sensors?e.data.sensors:e.payload?.sensors?e.payload.sensors:null:null;function exe(){const e=Gr(),{rackId:t}=Ls(),n=String(t??"").trim().toUpperCase(),{inventory:r,cacheEntries:i}=$j(),o=r.racks.get(n),c=p.useMemo(()=>o?Array.from(o.layers).map(m=>m||"No layer").sort((m,h)=>m.localeCompare(h)):[],[o,i]),f=p.useMemo(()=>i.map(m=>{const h=m?.identity;if(!h)return null;const g=String(h.unitType||"").trim().toUpperCase(),v=String(h.unitId||"").trim().toUpperCase();if(g!=="RACK"||v!==n)return null;const x=J_e(m.message),w=i5(x);return{deviceId:h.deviceId,layerId:h.layerId??null,lastUpdate:m.timestamp,metrics:w}}).filter(Boolean),[i,n]).filter(m=>Object.keys(m.metrics||{}).length>0);return a.jsxs("div",{className:ht.page,children:[a.jsx(gs,{title:`Hall Rack ${n||""}`.trim()}),a.jsx("section",{className:ht.section,children:a.jsxs("div",{className:ht.breadcrumbs,children:[a.jsx("button",{type:"button",className:ht.breadcrumbLink,onClick:()=>e("/monitoring/hall"),children:"Hall"}),a.jsx("span",{children:"/"}),a.jsxs("span",{children:["Rack ",n||""]})]})}),a.jsxs("section",{className:ht.section,children:[a.jsx("div",{className:ht.sectionHeader,children:a.jsx("div",{className:ht.sectionTitle,children:"Layers"})}),c.length===0?a.jsx("div",{className:ht.emptyState,children:"No layers discovered for this rack yet."}):a.jsx("div",{className:ht.layerChips,children:c.map(m=>a.jsx("button",{type:"button",className:ht.chipButton,onClick:()=>e(`/monitoring/hall/racks/${n}/layers/${m==="No layer"?"no-layer":m}`),children:m},m))})]}),a.jsxs("section",{className:ht.section,children:[a.jsx("div",{className:ht.sectionHeader,children:a.jsx("div",{className:ht.sectionTitle,children:"Latest metrics"})}),f.length===0?a.jsx("div",{className:ht.emptyState,children:"No metrics yet."}):a.jsx("div",{className:ht.cardGrid,children:f.map(m=>a.jsxs("article",{className:ht.card,children:[a.jsxs("div",{className:ht.cardHeader,children:[a.jsx("div",{className:ht.cardTitle,children:m.deviceId}),a.jsx("div",{className:ht.subtleText,children:Q_e(m.lastUpdate)})]}),a.jsx("div",{className:ht.metricList,children:Object.entries(m.metrics).slice(0,6).map(([h,g])=>a.jsxs("div",{className:ht.metricRow,children:[a.jsx("span",{className:ht.metricKey,children:h}),a.jsx("span",{children:Z_e(g)??""})]},h))})]},m.deviceId))})]})]})}const txe=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString()},nxe=e=>{const t=Number(e?.value??e);if(!Number.isFinite(t))return null;const n=Math.abs(t),r=n>=100?0:n>=10||n>=1?1:2,i=e?.unit?` ${e.unit}`:"";return`${t.toFixed(r)}${i}`},rxe=e=>e?e.sensors?e.sensors:e.sensorData?e.sensorData:e.data?.sensors?e.data.sensors:e.payload?.sensors?e.payload.sensors:null:null;function axe(){const e=Gr(),{rackId:t,layerId:n}=Ls(),r=String(t??"").trim().toUpperCase(),i=String(n??"").trim().toUpperCase(),o=i==="NO-LAYER",{cacheEntries:c}=$j(),d=p.useMemo(()=>{const m={C:[],T:[],R:[]};return c.forEach(h=>{const g=h?.identity;if(!g)return;const v=String(g.unitType||"").trim().toUpperCase(),x=String(g.unitId||"").trim().toUpperCase(),w=String(g.layerId||"").trim().toUpperCase();if(v!=="RACK"||x!==r)return;if(o){if(w)return}else if(w!==i)return;const _=i5(rxe(h.message)),S=g.deviceId?g.deviceId.charAt(0).toUpperCase():"D";m[S]=m[S]||[],m[S].push({deviceId:g.deviceId,deviceKind:S,lastUpdate:h.timestamp,metrics:_})}),m},[c,o,r,i]),f=Object.entries(d).filter(([,m])=>m.length>0);return a.jsxs("div",{className:ht.page,children:[a.jsx(gs,{title:`Hall Rack ${r} ${o?"No layer":i}`.trim()}),a.jsx("section",{className:ht.section,children:a.jsxs("div",{className:ht.breadcrumbs,children:[a.jsx("button",{type:"button",className:ht.breadcrumbLink,onClick:()=>e("/monitoring/hall"),children:"Hall"}),a.jsx("span",{children:"/"}),a.jsxs("button",{type:"button",className:ht.breadcrumbLink,onClick:()=>e(`/monitoring/hall/racks/${r}`),children:["Rack ",r||""]}),a.jsx("span",{children:"/"}),a.jsxs("span",{children:["Layer ",o?"No layer":i||""]})]})}),a.jsxs("section",{className:ht.section,children:[a.jsx("div",{className:ht.sectionHeader,children:a.jsx("div",{className:ht.sectionTitle,children:"Devices"})}),f.length===0?a.jsx("div",{className:ht.emptyState,children:"No devices discovered for this layer yet."}):a.jsx("div",{className:ht.deviceGroup,children:f.map(([m,h])=>a.jsxs("div",{className:ht.deviceGroup,children:[a.jsxs("div",{className:ht.cardTitle,children:[m," Devices (",h.length,")"]}),a.jsx("div",{className:ht.cardGrid,children:h.map(g=>a.jsxs("article",{className:ht.deviceCard,children:[a.jsxs("div",{className:ht.cardHeader,children:[a.jsx("div",{className:ht.cardTitle,children:g.deviceId}),a.jsx("div",{className:ht.subtleText,children:txe(g.lastUpdate)})]}),Object.keys(g.metrics||{}).length===0?a.jsx("div",{className:ht.emptyState,children:"No metrics yet."}):a.jsx("div",{className:ht.metricList,children:Object.entries(g.metrics).map(([v,x])=>a.jsxs("div",{className:ht.metricRow,children:[a.jsx("span",{className:ht.metricKey,children:v}),a.jsx("span",{children:nxe(x)??""})]},v))})]},g.deviceId))})]},m))})]})]})}const sxe="_page_fj6dh_5",ixe="_layout_fj6dh_29",oxe="_controls_fj6dh_45",lxe="_controlGroup_fj6dh_71",cxe="_controlLabel_fj6dh_87",uxe="_select_fj6dh_99",dxe="_modeGroup_fj6dh_117",fxe="_modeOptions_fj6dh_137",mxe="_modeOption_fj6dh_137",hxe="_playerCard_fj6dh_173",pxe="_playerHeader_fj6dh_199",yxe="_playerTitle_fj6dh_215",gxe="_playerSubtitle_fj6dh_227",vxe="_status_fj6dh_239",bxe="_statusLoading_fj6dh_255",_xe="_statusError_fj6dh_263",xxe="_statusOk_fj6dh_271",Sxe="_playerArea_fj6dh_279",wxe="_iframe_fj6dh_299",jxe="_video_fj6dh_301",Zn={page:sxe,layout:ixe,controls:oxe,controlGroup:lxe,controlLabel:cxe,select:uxe,modeGroup:dxe,modeOptions:fxe,modeOption:mxe,playerCard:hxe,playerHeader:pxe,playerTitle:yxe,playerSubtitle:gxe,status:vxe,statusLoading:bxe,statusError:_xe,statusOk:xxe,playerArea:Sxe,iframe:wxe,video:jxe},Nxe="_header_ohvcr_1",Axe="_light_ohvcr_21",Exe="_dark_ohvcr_43",Cxe="_content_ohvcr_65",Txe="_breadcrumb_ohvcr_79",kxe="_titleRow_ohvcr_155",Oxe="_title_ohvcr_155",Rxe="_statusPill_ohvcr_183",Mxe="_statusOnline_ohvcr_201",Ixe="_statusOffline_ohvcr_213",Dxe="_statusReconnecting_ohvcr_225",Pxe="_statusNeutral_ohvcr_237",$xe="_actions_ohvcr_249",Lxe="_actionButton_ohvcr_263",Bxe="_actionPrimary_ohvcr_297",Uxe="_actionGhost_ohvcr_309",qr={header:Nxe,light:Axe,dark:Exe,content:Cxe,breadcrumb:Txe,titleRow:kxe,title:Oxe,statusPill:Rxe,statusOnline:Mxe,statusOffline:Ixe,statusReconnecting:Dxe,statusNeutral:Pxe,actions:$xe,actionButton:Lxe,actionPrimary:Bxe,actionGhost:Uxe},qxe={online:qr.statusOnline,offline:qr.statusOffline,reconnecting:qr.statusReconnecting};function zxe({breadcrumbItems:e=[],title:t,status:n,actions:r=[],variant:i="light"}){const o=[qr.header,i==="dark"?qr.dark:qr.light].filter(Boolean).join(" ");return a.jsxs("header",{className:o,children:[a.jsxs("div",{className:qr.content,children:[e.length>0&&a.jsx("nav",{className:qr.breadcrumb,"aria-label":"Breadcrumb",children:a.jsx("ol",{children:e.map((c,d)=>{const f=d===e.length-1;return a.jsx("li",{children:c.to&&!f?a.jsx(nt,{to:c.to,children:c.label}):a.jsx("span",{"aria-current":f?"page":void 0,children:c.label})},`${c.label}-${d}`)})})}),a.jsxs("div",{className:qr.titleRow,children:[a.jsx("h1",{className:qr.title,children:t}),n?.label&&a.jsx("span",{className:`${qr.statusPill} ${qxe[n.tone]||qr.statusNeutral}`,children:n.label})]})]}),r.length>0&&a.jsx("div",{className:qr.actions,children:r.map(c=>{const d=[qr.actionButton,c.variant==="ghost"?qr.actionGhost:qr.actionPrimary].filter(Boolean).join(" ");return c.to?a.jsx(nt,{to:c.to,className:d,children:c.label},c.label):a.jsx("button",{type:"button",className:d,onClick:c.onClick,disabled:c.disabled,children:c.label},c.label)})})]})}function Fxe({whepUrl:e,onStateChange:t,onError:n,className:r}){const i=p.useRef(null);return p.useEffect(()=>{let o=null,c=!0;const d=new AbortController,f=i.current,m=v=>{t&&t(v)},h=()=>{if(!f?.srcObject)return;(f.srcObject.getTracks?.()??[]).forEach(x=>x.stop()),f.srcObject=null};return(async()=>{m("loading"),o=new RTCPeerConnection,o.addTransceiver("video",{direction:"recvonly"}),o.addTransceiver("audio",{direction:"recvonly"}),o.ontrack=_=>{if(!f)return;const[S]=_.streams;if(S)f.srcObject=S;else{const j=new MediaStream([_.track]);f.srcObject=j}};const v=await o.createOffer();await o.setLocalDescription(v);const x=await fetch(e,{method:"POST",headers:{"Content-Type":"application/sdp"},body:v.sdp,signal:d.signal});if(!x.ok)throw new Error(`WHEP request failed with status ${x.status}`);const w=await x.text();await o.setRemoteDescription({type:"answer",sdp:w}),c&&m("playing")})().catch(v=>{c&&(m("error"),n&&n(v))}),()=>{c=!1,d.abort(),h(),o&&(o.getSenders().forEach(v=>v.track?.stop()),o.getReceivers().forEach(v=>v.track?.stop()),o.close())}},[n,t,e]),a.jsx("video",{ref:i,className:r,autoPlay:!0,playsInline:!0,muted:!0})}const YM=["s01l01","S2L1","S2L2","S2L3","S2L4"],Hxe=e=>`https://cam.hydroleaf.se:8443/${e}/`,Vxe=e=>`https://cam.hydroleaf.se:8443/${e}/whep`,Kxe=[{value:"iframe",label:"iframe mode"},{value:"webrtc",label:"native WebRTC"}];function Gxe(){const[e,t]=p.useState(YM[0]),[n,r]=p.useState("iframe"),[i,o]=p.useState(!0),[c,d]=p.useState(""),f=p.useRef(null),m=p.useMemo(()=>Hxe(e),[e]),h=p.useMemo(()=>Vxe(e),[e]);p.useEffect(()=>(d(""),o(!0),f.current&&(clearTimeout(f.current),f.current=null),n==="iframe"&&(f.current=setTimeout(()=>{d("Timed out while loading the iframe stream."),o(!1)},12e3)),()=>{f.current&&(clearTimeout(f.current),f.current=null)}),[n,e]),p.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const g=()=>{f.current&&(clearTimeout(f.current),f.current=null),o(!1),d("")},v=()=>{f.current&&(clearTimeout(f.current),f.current=null),o(!1),d("Failed to load the iframe stream.")},x=_=>{_==="loading"&&o(!0),_==="playing"&&o(!1),_==="error"&&o(!1)},w=_=>{d(_?.message||String(_))};return a.jsx("div",{className:Zn.page,children:a.jsxs("div",{className:Zn.layout,children:[a.jsx(zxe,{breadcrumbItems:[{label:"Monitoring",to:"/monitoring"},{label:"Cameras",to:"/monitoring/cameras"}],title:"MediaMTX Cameras",variant:"dark"}),a.jsxs("section",{className:Zn.controls,children:[a.jsxs("div",{className:Zn.controlGroup,children:[a.jsx("label",{className:Zn.controlLabel,htmlFor:"camera-path",children:"Camera path"}),a.jsx("select",{id:"camera-path",className:Zn.select,value:e,onChange:_=>t(_.target.value),children:YM.map(_=>a.jsx("option",{value:_,children:_},_))})]}),a.jsxs("fieldset",{className:Zn.modeGroup,children:[a.jsx("legend",{className:Zn.controlLabel,children:"Mode"}),a.jsx("div",{className:Zn.modeOptions,children:Kxe.map(_=>a.jsxs("label",{className:Zn.modeOption,children:[a.jsx("input",{type:"radio",name:"stream-mode",value:_.value,checked:n===_.value,onChange:S=>r(S.target.value)}),a.jsx("span",{children:_.label})]},_.value))})]})]}),a.jsxs("section",{className:Zn.playerCard,children:[a.jsxs("div",{className:Zn.playerHeader,children:[a.jsxs("div",{children:[a.jsx("h2",{className:Zn.playerTitle,children:"Stream preview"}),a.jsx("p",{className:Zn.playerSubtitle,children:e})]}),a.jsxs("div",{className:Zn.status,children:[i&&a.jsx("span",{className:Zn.statusLoading,children:"Loading"}),!i&&c&&a.jsxs("span",{className:Zn.statusError,children:["Error: ",c]}),!i&&!c&&a.jsx("span",{className:Zn.statusOk,children:"Live"})]})]}),a.jsx("div",{className:Zn.playerArea,children:n==="iframe"?a.jsx("iframe",{title:`Camera ${e}`,src:m,className:Zn.iframe,onLoad:g,onError:v,allow:"autoplay; fullscreen"},e):a.jsx(Fxe,{whepUrl:h,onStateChange:x,onError:w,className:Zn.video})})]})]})})}const Wxe="_reportsContent_1wrgu_1",Yxe="_metricsGrid_1wrgu_13",Xxe="_metricCard_1wrgu_25",Qxe="_metricCardHeader_1wrgu_47",Zxe="_metricTitle_1wrgu_57",Jxe="_metricSubtitle_1wrgu_71",e0e="_metricChart_1wrgu_85",t0e="_metricEmpty_1wrgu_95",n0e="_emptyState_1wrgu_125",xi={reportsContent:Wxe,metricsGrid:Yxe,metricCard:Xxe,metricCardHeader:Qxe,metricTitle:Zxe,metricSubtitle:Jxe,metricChart:e0e,metricEmpty:t0e,emptyState:n0e},Ys=(e,t)=>Object.entries(e||{}).map(([n,r])=>({name:n,data:r,yDataKey:t})),XM=(e,t=[])=>Object.entries(e||{}).flatMap(([n,r])=>t.map(i=>({name:`${n} ${i}`,data:r,yDataKey:i,color:i1[i]||void 0}))),es=(e,t)=>t?`${e} (${t})`:e,r0e=(e=[])=>e.some(t=>Array.isArray(t.data)&&t.data.length),o5=["405nm","425nm","450nm","475nm","515nm"],l5=["550nm","555nm","600nm","640nm","690nm","745nm","NIR855"],a0e=new Set(o5.map(e=>e.toLowerCase())),s0e=new Set(l5.map(e=>e.toLowerCase())),i0e=new Set(["blue","bluelight","bluespectrum"]),o0e=new Set(["red","redlight","redspectrum"]),l0e=e=>{const t=q1(e);if(t)return String(t).replace(/[^a-z0-9]+/g,"");const n=String(e??"").trim().toLowerCase();if(!n)return"";const r=n.split(/[./]/).filter(Boolean);return(r.length?r[r.length-1]:n).replace(/[^a-z0-9]+/g,"")};function c0e({tempByCid:e,rangeByCid:t,phByCid:n,ecTdsByCid:r,doByCid:i,co2ByCid:o,selectedSensors:c=[],xDomain:d,selectedDevice:f}){const m=p.useMemo(()=>(c||[]).map(_=>({label:_,key:l0e(_)})),[c]),h=p.useMemo(()=>new Set(m.map(_=>_.key)),[m]),g=p.useMemo(()=>m.some(({key:_})=>a0e.has(_)||i0e.has(_)),[m]),v=p.useMemo(()=>m.some(({key:_})=>s0e.has(_)||o0e.has(_)),[m]),x=p.useMemo(()=>h.has("light")||h.has("lux"),[h]),w=p.useMemo(()=>[{id:"temperature",visible:h.has("temperature"),title:es("Temperature",f),description:"Monitor canopy-level temperature swings and react before plants feel the stress.",series:Ys(e,"temperature"),yLabel:"Temperature (C)"},{id:"humidity",visible:h.has("humidity"),title:es("Humidity",f),description:"Keep relative humidity within the ideal VPD range for faster growth.",series:Ys(e,"humidity"),yLabel:"Humidity (%)"},{id:"blueSpectrum",visible:g,title:es("Blue Spectrum",f),description:"Review short-wavelength intensity to understand structural development.",series:XM(t,o5),yLabel:"Intensity"},{id:"redSpectrum",visible:v,title:es("Red Spectrum",f),description:"Balance the bloom spectrum to drive flowering without wasting energy.",series:XM(t,l5),yLabel:"Intensity"},{id:"lux",visible:x,title:es("Lux",f),description:"Watch overall light levels to tune daily light integral (DLI).",series:Ys(t,"lux"),yLabel:"Lux"},{id:"vis1",visible:h.has("vis1"),title:es("VIS1 / FD1",f),description:"Track the primary VIS/FD1 photodiode to avoid saturation.",series:Ys(t,"VIS1"),yLabel:"VIS1"},{id:"vis2",visible:h.has("vis2"),title:es("VIS2",f),description:"Monitor VIS2 intensity for supplemental spectrum coverage.",series:Ys(t,"VIS2"),yLabel:"VIS2"},{id:"ph",visible:h.has("ph"),title:es("pH",f),description:"Maintain nutrient uptake by holding pH within your target band.",series:Ys(n,"ph"),yLabel:"pH"},{id:"ec",visible:h.has("dissolvedec")||h.has("ec"),title:es("Electrical Conductivity",f),description:"Spot dilution or concentration trends before EC drifts too far.",series:Ys(r,"ec"),yLabel:"EC (mS/cm)"},{id:"tds",visible:h.has("dissolvedtds")||h.has("tds"),title:es("Total Dissolved Solids",f),description:"Confirm nutrient dosing by tracking dissolved solids over time.",series:Ys(r,"tds"),yLabel:"TDS (ppm)"},{id:"do",visible:h.has("dissolvedoxygen")||h.has("do"),title:es("Dissolved Oxygen",f),description:"Protect root health with enough oxygenation in the solution.",series:Ys(i,"do"),yLabel:"Dissolved Oxygen (mg/L)"},{id:"co2",visible:h.has("co2"),title:es("CO",f),description:"Track CO levels to optimize photosynthesis and growth.",series:Ys(o,"co2"),yLabel:"CO (ppm)"}].filter(_=>_.visible),[i,r,g,x,v,o,n,t,f,h,e]);return a.jsx("div",{className:xi.reportsContent,children:w.length>0?a.jsx("div",{className:xi.metricsGrid,children:w.map(({id:_,title:S,description:j,series:A,yLabel:E})=>a.jsxs("article",{className:xi.metricCard,children:[a.jsx("header",{className:xi.metricCardHeader,children:a.jsxs("div",{children:[a.jsx("h3",{className:xi.metricTitle,children:S}),a.jsx("p",{className:xi.metricSubtitle,children:j})]})}),a.jsx("div",{className:xi.metricChart,children:r0e(A)?a.jsx(Dj,{xDataKey:"time",series:A,yLabel:E,xDomain:d}):a.jsx("div",{className:xi.metricEmpty,children:"No data available for the selected range."})})]},_))}):a.jsxs("div",{className:xi.emptyState,children:[a.jsx("h3",{children:"No metrics selected"}),a.jsx("p",{children:"Select at least one sensor in the filters to explore its performance over time."})]})})}const u0e="_rf_1xino_3",d0e="_rfPage_1xino_63",f0e="_layout_1xino_77",m0e="_sidebar_1xino_85",h0e="_content_1xino_93",p0e="_titleRow_1xino_101",y0e="_title_1xino_101",g0e="_titleActions_1xino_129",v0e="_summaryBar_1xino_139",b0e="_summaryItem_1xino_159",_0e="_summaryValue_1xino_173",x0e="_summaryMuted_1xino_189",S0e="_summaryChips_1xino_199",w0e="_summaryChip_1xino_199",j0e="_summaryDevices_1xino_237",N0e="_topicSensorsPanel_1xino_295",A0e="_topicDevicesPanel_1xino_329",E0e="_deviceActions_1xino_363",C0e="_deviceChecklist_1xino_375",T0e="_deviceFooter_1xino_387",k0e="_applyHint_1xino_403",O0e="_deviceOption_1xino_415",R0e="_deviceInfo_1xino_449",M0e="_deviceLabel_1xino_461",I0e="_deviceCid_1xino_471",D0e="_block_1xino_485",P0e="_sidebarFieldset_1xino_521",$0e="_field_1xino_533",L0e="_label_1xino_545",B0e="_group_1xino_593",U0e="_groupTitle_1xino_613",q0e="_allnone_1xino_625",z0e="_checklist_1xino_641",F0e="_radioList_1xino_665",H0e="_radioItem_1xino_677",V0e="_radioLabel_1xino_709",K0e="_item_1xino_717",G0e="_disabled_1xino_733",W0e="_emptyState_1xino_741",Y0e="_sensorGrid_1xino_753",X0e="_btn_1xino_765",Q0e="_primary_1xino_787",Z0e="_actionsBlock_1xino_799",J0e="_applyBar_1xino_823",eSe="_applyMessage_1xino_859",tSe="_summaryLabel_1xino_881",nSe="_compare_1xino_895",rSe="_compareHead_1xino_911",aSe="_compareItem_1xino_927",sSe="_itemTitle_1xino_945",iSe="_itemMeta_1xino_955",Qe={rf:u0e,rfPage:d0e,layout:f0e,sidebar:m0e,content:h0e,titleRow:p0e,title:y0e,titleActions:g0e,summaryBar:v0e,summaryItem:b0e,summaryValue:_0e,summaryMuted:x0e,summaryChips:S0e,summaryChip:w0e,summaryDevices:j0e,topicSensorsPanel:N0e,topicDevicesPanel:A0e,deviceActions:E0e,deviceChecklist:C0e,deviceFooter:T0e,applyHint:k0e,deviceOption:O0e,deviceInfo:R0e,deviceLabel:M0e,deviceCid:I0e,block:D0e,sidebarFieldset:P0e,field:$0e,label:L0e,group:B0e,groupTitle:U0e,allnone:q0e,checklist:z0e,radioList:F0e,radioItem:H0e,radioLabel:V0e,item:K0e,disabled:G0e,emptyState:W0e,sensorGrid:Y0e,btn:X0e,primary:Q0e,actionsBlock:Z0e,applyBar:J0e,applyMessage:eSe,summaryLabel:tSe,compare:nSe,compareHead:rSe,compareItem:aSe,itemTitle:sSe,itemMeta:iSe};function c5({name:e,onAll:t,onNone:n}){return a.jsxs("div",{className:Qe.allnone,children:[a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:e,onChange:t})," All"]}),a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:e,onChange:n})," None"]})]})}const u5=[{id:"blue",label:"blue light",values:["405nm","425nm","450nm","475nm","515nm"]},{id:"red",label:"red light",values:["550nm","555nm","600nm","640nm","690nm","745nm","855nm","NIR855"]}],oSe=new Map(u5.map(e=>[e.id,e])),d5=(()=>{const e=new Map;return u5.forEach(t=>{t.values.forEach(n=>{e.set(n,t)})}),e})(),lSe=e=>d5.get(e)?.label??null,c1=(e,t)=>lSe(e)??t,dg=e=>e==null?"":typeof e=="string"?e:e.value??e.id??e.label??"",cSe=e=>{const t=[],n=new Map;return e.forEach(r=>{if(!r)return;const i=dg(r),o=zt(i);if(!o)return;const c=typeof r=="string"?r:r.label??o,d=typeof r=="string"?!1:!!r.disabled,f=d5.get(o);if(f){n.has(f.id)||(n.set(f.id,{type:"group",groupId:f.id,label:f.label,value:f.label,presentValues:new Set,disabledCount:0,total:0}),t.push(n.get(f.id)));const m=n.get(f.id);m.presentValues.add(o),m.total+=1,d&&(m.disabledCount+=1);return}t.push({label:c,value:o,disabled:d})}),t.map(r=>{if(r?.type==="group"){const i=oSe.get(r.groupId),o=i?.values??Array.from(r.presentValues),c=Array.from(new Set(o.map(d=>zt(d)).filter(Boolean)));return{label:i?.label??r.label,value:i?.label??r.value,sensorValues:c,disabled:r.total>0?r.disabledCount>=r.total:!1}}return r})};function uSe({option:e,values:t=[],onToggle:n}){const r=p.useRef(null),i=Array.isArray(t)?t:[],o=dg(e),c=typeof e=="string"?e:e.label??o,d=typeof e=="string"?!1:!!e.disabled,f=Array.isArray(e?.sensorValues)?e.sensorValues:null,m=Array.isArray(f)&&f.length>0,h=m?f.every(_=>i.includes(_)):i.includes(o),g=m&&!h&&f.some(_=>i.includes(_));p.useEffect(()=>{r.current&&(r.current.indeterminate=g)},[g]);const v=()=>{n&&n(m?{type:"group",values:f,shouldSelect:!h}:o)},x=n?h:void 0,w=n?void 0:h;return a.jsxs("label",{className:`${Qe.item} ${d?Qe.disabled:""}`,children:[a.jsx("input",{ref:r,type:"checkbox",disabled:d,"aria-checked":g?"mixed":void 0,checked:x,defaultChecked:w,onChange:v}),c]})}function dSe({options:e=[],values:t=[],onToggle:n}){return a.jsx("div",{className:Qe.checklist,children:e.map(r=>{const i=dg(r);if(!i)return null;const o=typeof r=="string"?r:r.label??i,c=c1(i,o),d=typeof r=="object"&&r!==null?{...r,label:c}:{label:c,value:i};return a.jsx(uSe,{option:d,values:t,onToggle:n},i)})})}function fSe({title:e,name:t,options:n=[],values:r=[],onAll:i,onNone:o,onToggle:c}){const d=()=>i&&i(n),f=m=>{c&&c(m)};return a.jsxs("div",{className:Qe.group,children:[a.jsx("div",{className:Qe.groupTitle,children:e}),a.jsx(c5,{name:t,onAll:d,onNone:o}),a.jsx(dSe,{options:n,values:r,onToggle:f})]})}function mSe(e){const{className:t,fromDate:n,toDate:r,onFromDateChange:i,onToDateChange:o,onApply:c,autoRefreshValue:d="Off",onAutoRefreshValueChange:f=()=>{},onSystemChange:m,onLayerChange:h,onDeviceChange:g,onDeviceSelectionChange:v,topics:x=[],selectedTopics:w=[],onTopicToggle:_,onAllTopics:S=()=>{},onNoneTopics:j=()=>{},topicSensors:A={},topicDevices:E={},selectedTopicSensors:C={},selectedDeviceKeys:T=[],onToggleTopicSensor:O,onAllTopicSensors:R,onNoneTopicSensors:k,rangeLabel:P,compareItems:H=[],onClearCompare:K,onRemoveCompare:B,onReset:U,onAddCompare:I,catalog:L}=e,$=p.useMemo(()=>I1(L),[L]),G=p.useMemo(()=>Array.isArray(x)?x:[],[x]),te=p.useMemo(()=>new Set(Array.isArray(w)?w:[]),[w]),re=p.useMemo(()=>{const Ne={};return G.forEach(We=>{const ze=Array.isArray(A?.[We.id])?A[We.id]:[];Ne[We.id]=cSe(ze.map(lt=>{if(!lt)return null;if(typeof lt=="string")return{label:c1(lt,lt),value:lt};const Bt=dg(lt);return Bt?{label:c1(Bt,lt.label??Bt),value:Bt,disabled:lt.disabled}:null}).filter(Boolean))}),Ne},[G,A]),M=p.useMemo(()=>{const Ne={};return Object.entries(E||{}).forEach(([We,ze])=>{Ne[We]=Array.isArray(ze)?ze:[]}),Ne},[E]),q=p.useMemo(()=>{const Ne={};return Object.entries(C||{}).forEach(([We,ze])=>{Ne[We]=Array.isArray(ze)?ze:Array.from(ze||[])}),Ne},[C]),z=p.useMemo(()=>te.size&&te.values().next()?.value||null,[te]),V=p.useMemo(()=>z?M[z]||[]:[],[z,M]),Y=p.useMemo(()=>{const Ne=new Map;return(Array.isArray($?.devices)?$.devices:[]).forEach(ze=>{const lt=zt(ze.deviceKey)||fs(ze),Bt=zt(ze.farmId),Qt=zt(ze.unitType),kn=zt(ze.unitId),Ir=zt(ze.layerId),xs=zt(ze.deviceId);!lt||!Bt||!Qt||!kn||!xs||Ne.has(lt)||Ne.set(lt,{deviceKey:lt,farmId:Bt,unitType:Qt,unitId:kn,layerId:Ir,deviceId:xs,labels:{farm:zt(ze.farmName,Bt),unit:zt(ze.unitName,kn),layer:zt(ze.layerName,Ir),device:zt(ze.deviceName,xs)}})}),{deviceKeys:Array.from(Ne.keys()).sort(),deviceMeta:Ne}},[$]),{deviceKeys:Z,deviceMeta:ee}=Y,[ie,xe]=p.useState(()=>new Set(Array.isArray(T)?T:[])),X=p.useCallback((Ne=[])=>{xe(We=>{const ze=new Set(Ne);if(We.size===ze.size){let lt=!0;if(We.forEach(Bt=>{ze.has(Bt)||(lt=!1)}),lt)return We}return ze})},[]);p.useEffect(()=>{if(!z){X([]);return}const Ne=new Set(V.map(lt=>lt?.deviceKey).filter(Boolean)),ze=(Array.isArray(T)?T:[]).filter(lt=>Ne.has(lt));X(ze)},[T,z,V,X]),p.useEffect(()=>{typeof v=="function"&&v(Array.from(ie))},[ie,v]);const Ae=p.useMemo(()=>{const Ne=new Set,We=new Set,ze=new Set;for(const lt of ie){const Bt=ee.get(lt);Bt&&(Bt.farmId&&Ne.add(Bt.farmId),Bt.layerId&&We.add(Bt.layerId),Bt.deviceId&&ze.add(Bt.deviceId))}return{systems:Array.from(Ne),layers:Array.from(We),devices:Array.from(ze)}},[ie,ee]),he=Ae.systems,ue=Ae.layers,Xe=Ae.devices,Ue=(Ne=[],We=[],ze)=>{if(typeof ze!="function")return;const lt=new Set(Ne),Bt=new Set(We);We.forEach(Qt=>{lt.has(Qt)||ze({target:{value:Qt}})}),Ne.forEach(Qt=>{Bt.has(Qt)||ze({target:{value:Qt}})})},ye=p.useRef(he);p.useEffect(()=>{Ue(ye.current,he,m),ye.current=he},[he,m]);const je=p.useRef(ue);p.useEffect(()=>{Ue(je.current,ue,h),je.current=ue},[ue,h]);const Ee=p.useRef(Xe);p.useEffect(()=>{Ue(Ee.current,Xe,g),Ee.current=Xe},[Xe,g]);const qe=Ne=>{xe(We=>{const ze=new Set(We);return Ne(ze,We),ze})};p.useEffect(()=>{xe(Ne=>{const We=new Set;let ze=!1;for(const lt of Ne)ee.has(lt)?We.add(lt):ze=!0;return ze?We:Ne})},[ee]);const W=(Ne,We)=>{Ne&&qe(ze=>{We?ze.add(Ne.deviceKey):ze.delete(Ne.deviceKey)})},fe=()=>{if(z){const Ne=V.map(We=>We?.deviceKey).filter(Boolean);X(Ne);return}X(Z)},we=()=>{X([])},de=Ne=>ie.has(Ne),ve=ie.size,se=z?(M[z]||[]).length:Z.length,Re=p.useMemo(()=>{const Ne=new Map;return Object.values(M).forEach((We=[])=>{We.forEach(ze=>{const lt=zt(ze?.deviceKey);if(!lt||Ne.has(lt))return;const Bt=zt(ze?.label)||zt(ze?.deviceId)||lt;Ne.set(lt,Bt)})}),ee.forEach((We,ze)=>{if(!Ne.has(ze)){const lt=We?.labels?.device||ze;lt&&Ne.set(ze,lt)}}),Ne},[M,ee]),Je=p.useMemo(()=>{if(!ie.size)return[];const Ne=new Set;return ie.forEach(We=>{const ze=Re.get(We)||We;ze&&Ne.add(ze)}),Array.from(Ne)},[ie,Re]),le=p.useMemo(()=>z?G.find(We=>We.id===z)?.label||z:"No topic selected",[z,G]),Oe=p.useMemo(()=>{if(zt(P))return P;const Ne=zt(n)||"",We=zt(r)||"";return`${Ne}  ${We}`},[n,r,P]),Le=p.useMemo(()=>{if(!Je.length)return[];const Ne=Je.slice(0,3),We=Je.length-Ne.length;return We>0&&Ne.push(`+${We} more`),Ne},[Je]),ne=p.useCallback(()=>{typeof U=="function"&&U()},[U]),Se=p.useCallback(()=>{typeof I=="function"&&I()},[I]),Ge=p.useCallback(()=>{typeof c=="function"&&c()},[c]),vt=p.useMemo(()=>`${ve} of ${se||0}`,[ve,se]),Dt=[Qe.rf,Qe.rfPage,t||""].filter(Boolean).join(" ");return a.jsxs("div",{className:Dt,children:[a.jsxs("div",{className:Qe.titleRow,children:[a.jsx("div",{className:Qe.title,children:"Filters"}),a.jsxs("div",{className:`${Qe.actionsBlock} ${Qe.titleActions}`,children:[a.jsx("button",{type:"button",className:Qe.btn,onClick:ne,children:"Reset"}),a.jsx("button",{type:"button",className:`${Qe.btn} ${Qe.primary}`,onClick:Ge,children:"Refresh data"}),a.jsx("button",{type:"button",className:Qe.btn,onClick:Se,disabled:ve===0,children:"Add to compare"})]})]}),a.jsxs("div",{className:Qe.summaryBar,children:[a.jsxs("div",{className:Qe.summaryItem,children:[a.jsx("span",{className:Qe.summaryLabel,children:"Date range"}),a.jsx("span",{className:Qe.summaryValue,children:Oe})]}),a.jsxs("div",{className:Qe.summaryItem,children:[a.jsx("span",{className:Qe.summaryLabel,children:"Topic"}),a.jsx("span",{className:Qe.summaryValue,children:le})]}),a.jsxs("div",{className:Qe.summaryItem,children:[a.jsx("span",{className:Qe.summaryLabel,children:"Device IDs"}),a.jsx("span",{className:Qe.summaryValue,children:vt})]}),a.jsxs("div",{className:Qe.summaryItem,children:[a.jsx("span",{className:Qe.summaryLabel,children:"Auto refresh"}),a.jsx("span",{className:Qe.summaryValue,children:zt(d)||"Off"})]}),a.jsxs("div",{className:`${Qe.summaryItem} ${Qe.summaryDevices}`,children:[a.jsx("span",{className:Qe.summaryLabel,children:"Selected devices"}),Le.length?a.jsx("div",{className:Qe.summaryChips,children:Le.map(Ne=>a.jsx("span",{className:Qe.summaryChip,title:Ne,children:Ne},Ne))}):a.jsx("span",{className:Qe.summaryMuted,children:"No device selected"})]})]}),a.jsxs("div",{className:Qe.layout,children:[a.jsxs("aside",{className:Qe.sidebar,children:[a.jsxs("div",{className:Qe.block,children:[a.jsx("h4",{children:"Timing"}),a.jsxs("div",{className:Qe.sidebarFieldset,children:[a.jsxs("div",{className:Qe.field,children:[a.jsx("span",{className:Qe.label,children:"From"}),a.jsx("input",{type:"datetime-local",value:n,onChange:i})]}),a.jsxs("div",{className:Qe.field,children:[a.jsx("span",{className:Qe.label,children:"To"}),a.jsx("input",{type:"datetime-local",value:r,onChange:o})]}),a.jsxs("div",{className:Qe.field,children:[a.jsx("span",{className:Qe.label,children:"Auto refresh"}),a.jsx("select",{value:d,onChange:f,children:["Off","5s","30s","1m","5m"].map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))})]})]})]}),a.jsxs("div",{className:Qe.block,children:[a.jsx("h4",{children:"Topics"}),a.jsxs("div",{className:Qe.sidebarFieldset,children:[a.jsx(c5,{name:"topics-allnone",onAll:S,onNone:j}),a.jsxs("div",{className:Qe.radioList,children:[G.map(Ne=>a.jsxs("label",{className:Qe.radioItem,children:[a.jsx("input",{type:"radio",name:"report-topic",value:Ne.id,checked:z===Ne.id,onChange:()=>_&&_(Ne.id)}),a.jsx("span",{className:Qe.radioLabel,children:Ne.label})]},Ne.id)),!G.length&&a.jsx("span",{className:Qe.emptyState,children:"No topics available."})]})]})]})]}),a.jsxs("section",{className:Qe.content,children:[a.jsxs("div",{className:Qe.topicDevicesPanel,children:[a.jsx("h3",{children:"Select Device IDs"}),z?V.length===0?a.jsx("p",{className:Qe.emptyState,children:"No devices available for the selected topic."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Qe.deviceActions,children:[a.jsx("button",{type:"button",className:Qe.btn,onClick:fe,children:"Select all"}),a.jsx("button",{type:"button",className:Qe.btn,onClick:we,children:"Clear"})]}),a.jsx("div",{className:Qe.deviceChecklist,children:V.map(Ne=>{const We=zt(Ne?.deviceKey);return We?a.jsxs("label",{className:Qe.deviceOption,children:[a.jsx("input",{type:"checkbox",checked:de(We),onChange:ze=>W({...Ne,deviceKey:We},ze.target.checked)}),a.jsxs("span",{className:Qe.deviceInfo,children:[a.jsx("span",{className:Qe.deviceLabel,children:Ne?.label||Ne?.deviceId||We}),a.jsx("span",{className:Qe.deviceCid,children:We})]})]},We):null})}),a.jsx("div",{className:Qe.deviceFooter,children:a.jsx("span",{className:Qe.applyHint,children:"Confirm your device selection and use the Show charts button below to update the dashboard."})})]}):a.jsx("p",{className:Qe.emptyState,children:"Select a topic to load available devices."})]}),a.jsxs("div",{className:Qe.topicSensorsPanel,children:[a.jsx("h3",{children:"Select Sensor Types"}),z?a.jsx("div",{className:Qe.sensorGrid,children:(()=>{const Ne=re[z]||[],We=q[z]||[],ze=G.find(lt=>lt.id===z);return a.jsx(fSe,{title:ze?.label||z,name:`topic-${z}`,options:Ne,values:We,onAll:lt=>R&&R(z,lt),onNone:()=>k&&k(z),onToggle:lt=>O&&O(z,lt)},z)})()}):a.jsx("p",{className:Qe.emptyState,children:"Choose a topic to see available sensor types."})]}),H?.length>0&&a.jsxs("div",{className:Qe.compare,children:[a.jsxs("div",{className:Qe.compareHead,children:[a.jsx("strong",{children:"Compare List"}),a.jsx("button",{type:"button",className:Qe.btn,onClick:K,children:"Clear All"})]}),a.jsx("div",{children:H.map(Ne=>a.jsxs("div",{className:Qe.compareItem,children:[a.jsxs("div",{className:Qe.compareHead,children:[a.jsx("div",{className:Qe.itemTitle,children:Ne.title}),a.jsx("button",{type:"button",className:Qe.btn,onClick:()=>B&&B(Ne.id),children:"Remove"})]}),a.jsxs("div",{className:Qe.itemMeta,children:["Sensors: ",Ne.sensors?.join(", ")||"-"," | Time: ",Ne.from||"-","  ",Ne.to||"-"]})]},Ne.id))})]})]})]}),a.jsxs("div",{className:Qe.applyBar,children:[a.jsx("span",{className:Qe.applyMessage,children:"Once you finish choosing the timeframe, topic, devices, and sensors, click the button to update the charts."}),a.jsx("button",{type:"button",className:`${Qe.btn} ${Qe.primary}`,onClick:Ge,disabled:ve===0,children:"Show charts"})]})]})}const hSe="_page_3iwrg_1",pSe="_content_3iwrg_15",ySe="_filtersSection_3iwrg_29",gSe="_filtersIntro_3iwrg_41",vSe="_filtersBadges_3iwrg_87",bSe="_badge_3iwrg_101",_Se="_badgeMuted_3iwrg_131",xSe="_chartsSection_3iwrg_143",SSe="_errorMessage_3iwrg_165",ts={page:hSe,content:pSe,filtersSection:ySe,filtersIntro:gSe,filtersBadges:vSe,badge:bSe,badgeMuted:_Se,chartsSection:xSe,errorMessage:SSe},wSe={"5s":5e3,"30s":3e4,"1m":6e4,"5m":3e5},L0=()=>({tempByCid:Object.create(null),rangeByCid:Object.create(null),phByCid:Object.create(null),ecTdsByCid:Object.create(null),doByCid:Object.create(null),co2ByCid:Object.create(null)}),Co=e=>e?.value??0,jSe=(e=[])=>{const t=[],n=[],r=[],i=[],o=[],c=[];return z1({sensors:e}).forEach(d=>{const f=d.timestamp,m={...d,time:f,lux:Co(d.lux)};t.push(m),n.push({time:f,temperature:Co(d.temperature),humidity:Co(d.humidity)}),r.push({time:f,ph:Co(d.ph)}),i.push({time:f,ec:Co(d.ec),tds:Co(d.tds)}),o.push({time:f,do:Co(d.do)}),c.push({time:f,co2:Co(d.co2)})}),{range:t,temperature:n,ph:r,ecTds:i,dissolvedOxygen:o,co2:c}},NSe=(e,t,n)=>{const r=new URLSearchParams(t),i=Ii(e||{});return Object.entries(i).forEach(([o,c])=>{c==null||c===""||r.set(o,String(c))}),r.has("kind")||r.set("kind","telemetry"),n.forEach(o=>r.append("sensorType",o)),`${qc}/api/records/history/aggregated?${r.toString()}`};function ASe(){const{deviceMeta:e,fromDate:t,setFromDate:n,toDate:r,setToDate:i,autoRefreshValue:o,setAutoRefreshValue:c,systems:d,layers:f,deviceIds:m,handleSystemChange:h,handleLayerChange:g,handleDeviceChange:v,onReset:x,onAddCompare:w,onClearCompare:_,onRemoveCompare:S,compareItems:j,topics:A,selectedTopicIds:E,selectedTopicSensors:C,selectedSensorTypes:T,toggleTopicSelection:O,setAllTopics:R,clearTopics:k,availableTopicSensors:P,availableTopicDevices:H,toggleSensor:K,setAllSensors:B,addSensors:U,removeSensors:I,clearSensors:L,selectedDeviceFilters:$,selectedDeviceKeys:G,handleDeviceSelectionChange:te,deviceIdentityMap:re,registerApplyHandler:M,triggerApply:q}=kG(),z=p.useCallback(({target:ve})=>n(ve.value),[n]),V=p.useCallback(({target:ve})=>i(ve.value),[i]),Y=p.useCallback(({target:ve})=>c(ve.value),[c]),Z=p.useCallback((ve,se)=>{if(!(!ve||!se)){if(typeof se=="object"&&se.type==="group"){const Re=Array.isArray(se.values)?se.values:[];if(!Re.length)return;se.shouldSelect?U(ve,Re):I(ve,Re);return}K(ve,se)}},[U,I,K]),ee=p.useCallback((ve,se)=>B(ve,se),[B]),ie=p.useCallback(ve=>L(ve),[L]),[xe,X]=p.useState(()=>L0()),[Ae,he]=p.useState(""),[ue,Xe]=p.useState(!1),Ue=p.useRef(null),ye=p.useCallback(()=>{Ue.current&&Ue.current.abort();const ve=new AbortController;return Ue.current=ve,ve},[]),je=p.useCallback(async()=>{if(!$.length){Ue.current&&Ue.current.abort(),X(L0());return}try{he("");const{signal:ve}=ye(),se=ID(t,r),Re={from:gp(t),to:gp(r),bucket:se},Je=$.map(Le=>(async()=>{const ne=re.get(Le);if(!ne)throw new Error(`Device not found for key ${Le}`);const Se=NSe(ne,Re,T),Ge=await Ve(Se,{signal:ve});if(!Ge.ok){const Dt=await Ge.text().catch(()=>"");throw new Error(`Device ${Le} -> ${Ge.status} ${Dt}`)}const vt=await Ge.json();return{deviceKey:Le,data:vt}})()),Oe=(await Promise.all(Je)).reduce((Le,{deviceKey:ne,data:Se})=>{const{range:Ge,temperature:vt,ph:Dt,ecTds:Ne,dissolvedOxygen:We,co2:ze}=jSe(Se.sensors);return Le.rangeByCid[ne]=Ge,Le.tempByCid[ne]=vt,Le.phByCid[ne]=Dt,Le.ecTdsByCid[ne]=Ne,Le.doByCid[ne]=We,Le.co2ByCid[ne]=ze,Le},L0());X(Oe)}catch(ve){ve.name!=="AbortError"&&(console.error(ve),he(String(ve.message||ve)))}},[t,r,$,T,ye,re]),Ee=p.useCallback(()=>(Xe(!0),je()),[je]);p.useEffect(()=>(M(Ee),()=>M(void 0)),[M,Ee]),p.useEffect(()=>()=>{Ue.current&&Ue.current.abort()},[]),p.useEffect(()=>{if(!ue)return;const ve=wSe[o];if(!ve)return;const se=setInterval(()=>{je()},ve);return()=>clearInterval(se)},[o,je,ue]);const qe=p.useMemo(()=>{const ve=Date.parse(t),se=Date.parse(r);if(!(Number.isNaN(ve)||Number.isNaN(se)))return[ve,se]},[t,r]),W=p.useMemo(()=>$.length===1?$[0]:"",[$]),fe=p.useMemo(()=>{if(!t||!r)return"";const ve=Date.parse(t),se=Date.parse(r);if(Number.isNaN(ve)||Number.isNaN(se))return"";const Re=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return`${Re.format(ve)}  ${Re.format(se)}`},[t,r]),we=p.useMemo(()=>{const ve=$.length;return ve?`${ve} device${ve===1?"":"s"} selected`:"No devices selected yet"},[$]),de=p.useMemo(()=>!o||o==="Off"?"Auto refresh off":`Auto refresh ${o}`,[o]);return a.jsxs("div",{className:ts.page,children:[a.jsx(gs,{title:"Reports"}),a.jsxs("div",{className:ts.content,children:[a.jsxs("section",{className:ts.filtersSection,children:[a.jsxs("div",{className:ts.filtersIntro,children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Filter your telemetry"}),a.jsx("p",{children:"Choose the timeframe, devices, and sensor topics to explore performance trends across your hydroponic systems."})]}),a.jsxs("div",{className:ts.filtersBadges,children:[a.jsx("span",{className:ts.badge,children:fe||"Select a time range"}),a.jsx("span",{className:`${ts.badge} ${ts.badgeMuted}`,children:we}),a.jsx("span",{className:`${ts.badge} ${ts.badgeMuted}`,children:de})]})]}),a.jsx(mSe,{variant:"page",catalog:e,fromDate:t,toDate:r,onFromDateChange:z,onToDateChange:V,onApply:q,autoRefreshValue:o,onAutoRefreshValueChange:Y,systems:d,layers:f,devices:m,onSystemChange:h,onLayerChange:g,onDeviceChange:v,onDeviceSelectionChange:te,onReset:x,onAddCompare:w,rangeLabel:fe,compareItems:j,onClearCompare:_,onRemoveCompare:S,topics:A,selectedTopics:E,onTopicToggle:O,onAllTopics:R,onNoneTopics:k,topicSensors:P,topicDevices:H,selectedTopicSensors:C,onToggleTopicSensor:Z,onAllTopicSensors:ee,onNoneTopicSensors:ie,selectedDeviceKeys:G})]}),a.jsxs("section",{className:ts.chartsSection,children:[Ae&&a.jsx("div",{className:ts.errorMessage,children:Ae}),a.jsx(c0e,{tempByCid:xe.tempByCid,rangeByCid:xe.rangeByCid,phByCid:xe.phByCid,ecTdsByCid:xe.ecTdsByCid,doByCid:xe.doByCid,co2ByCid:xe.co2ByCid,selectedDevice:W,selectedSensors:T,xDomain:qe})]})]})]})}const ESe="_page_14mi4_1",CSe="_alert_14mi4_13",TSe="_card_14mi4_31",kSe="_cardHeader_14mi4_49",OSe="_cardTitle_14mi4_69",RSe="_form_14mi4_77",MSe="_label_14mi4_89",ISe="_input_14mi4_101",DSe="_textarea_14mi4_127",PSe="_actions_14mi4_137",$Se="_primary_14mi4_147",LSe="_ghost_14mi4_147",BSe="_toolbar_14mi4_187",USe="_search_14mi4_199",qSe="_select_14mi4_199",zSe="_empty_14mi4_213",FSe="_grid_14mi4_225",HSe="_noteCard_14mi4_265",VSe="_noteHeader_14mi4_283",KSe="_noteTitle_14mi4_297",GSe="_noteDate_14mi4_309",WSe="_noteBody_14mi4_319",YSe="_noteActions_14mi4_333",XSe="_iconBtn_14mi4_343",QSe="_iconBtnDanger_14mi4_343",un={page:ESe,alert:CSe,card:TSe,cardHeader:kSe,cardTitle:OSe,form:RSe,label:MSe,input:ISe,textarea:DSe,actions:PSe,primary:$Se,ghost:LSe,toolbar:BSe,search:USe,select:qSe,empty:zSe,grid:FSe,noteCard:HSe,noteHeader:VSe,noteTitle:KSe,noteDate:GSe,noteBody:WSe,noteActions:YSe,iconBtn:XSe,iconBtnDanger:QSe},Gh=Bn();function ZSe(){const[e,t]=p.useState([]),[n,r]=p.useState(""),[i,o]=p.useState(!0),[c,d]=p.useState({title:"",content:""}),[f,m]=p.useState(null),[h,g]=p.useState(""),[v,x]=p.useState({key:"date",dir:"desc"});p.useEffect(()=>{(async()=>{try{const C=await fetch(`${Gh}/api/notes`);if(!C.ok)throw new Error(`HTTP ${C.status}`);const T=await C.json();t(Array.isArray(T)?T:[])}catch(C){console.error(C),r("Failed to load notes.")}finally{o(!1)}})()},[]);const w=p.useMemo(()=>{const C=h.trim().toLowerCase();let T=C?e.filter(R=>R.title?.toLowerCase().includes(C)||R.content?.toLowerCase().includes(C)):e;const O=v.dir==="asc"?1:-1;return[...T].sort((R,k)=>{if(v.key==="title")return(R.title||"").localeCompare(k.title||"")*O;const P=new Date(R.date||0).getTime(),H=new Date(k.date||0).getTime();return(P-H)*O})},[e,h,v]),_=C=>d(T=>({...T,[C.target.name]:C.target.value})),S=()=>{m(null),d({title:"",content:""})},j=async C=>{C.preventDefault(),r("");const T={title:c.title.trim(),content:c.content.trim(),date:f?void 0:new Date().toISOString().split(".")[0]};try{if(f){const O=await fetch(`${Gh}/api/notes/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!O.ok)throw new Error(`HTTP ${O.status}`);const R=await O.json().catch(()=>({id:f,...T}));t(k=>k.map(P=>P.id===f?{...P,...R}:P))}else{const O=await fetch(`${Gh}/api/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!O.ok)throw new Error(`HTTP ${O.status}`);const R=await O.json().catch(()=>T);t(k=>[R,...k])}S()}catch(O){console.error(O),r("Save failed.")}},A=C=>{C?.id&&(m(C.id),d({title:C.title||"",content:C.content||""}),window.scrollTo?.({top:0,behavior:"smooth"}))},E=async C=>{if(!(!C?.id||!confirm("Delete this note?")))try{const O=await fetch(`${Gh}/api/notes/${C.id}`,{method:"DELETE"});if(!O.ok)throw new Error(`HTTP ${O.status}`);t(R=>R.filter(k=>k.id!==C.id)),f===C.id&&S()}catch(O){console.error(O),r("Delete failed.")}};return a.jsxs("div",{className:un.page,children:[a.jsx(gs,{title:"Daily Notes"}),n&&a.jsx("div",{role:"alert",className:un.alert,children:n}),a.jsxs("section",{className:un.card,children:[a.jsx("header",{className:un.cardHeader,children:a.jsx("div",{className:un.cardTitle,children:f?"Edit Note":"Add Note"})}),a.jsxs("form",{className:un.form,onSubmit:j,children:[a.jsxs("label",{className:un.label,children:[a.jsx("span",{children:"Title:"}),a.jsx("input",{className:un.input,name:"title",value:c.title,onChange:_,placeholder:"Note title",required:!0})]}),a.jsxs("label",{className:un.label,children:[a.jsx("span",{children:"Content:"}),a.jsx("textarea",{className:`${un.input} ${un.textarea}`,name:"content",value:c.content,onChange:_,placeholder:"Write your note...",rows:4,required:!0})]}),a.jsxs("div",{className:un.actions,children:[a.jsx("button",{className:un.primary,type:"submit",children:f?"Update":"Save"}),f&&a.jsx("button",{className:un.ghost,type:"button",onClick:S,children:"Cancel"})]})]})]}),a.jsxs("section",{className:un.card,children:[a.jsxs("header",{className:un.cardHeader,children:[a.jsx("div",{className:un.cardTitle,children:"Notes"}),a.jsxs("div",{className:un.toolbar,children:[a.jsx("input",{className:un.search,placeholder:"Search by title/content",value:h,onChange:C=>g(C.target.value)}),a.jsxs("select",{className:un.select,value:`${v.key}:${v.dir}`,onChange:C=>{const[T,O]=C.target.value.split(":");x({key:T,dir:O})},children:[a.jsx("option",{value:"date:desc",children:"Newest first"}),a.jsx("option",{value:"date:asc",children:"Oldest first"}),a.jsx("option",{value:"title:asc",children:"Title AZ"}),a.jsx("option",{value:"title:desc",children:"Title ZA"})]})]})]}),i?a.jsx("div",{className:un.empty,children:"Loading"}):w.length===0?a.jsx("div",{className:un.empty,children:"No notes found."}):a.jsx("div",{className:un.grid,children:w.map((C,T)=>a.jsxs("article",{className:un.noteCard,children:[a.jsxs("div",{className:un.noteHeader,children:[a.jsx("h3",{className:un.noteTitle,title:C.title,children:C.title||"Untitled"}),a.jsx("time",{className:un.noteDate,children:C.date?new Date(C.date).toLocaleString():""})]}),a.jsx("p",{className:un.noteBody,title:C.content,children:C.content}),a.jsx("div",{className:un.noteActions,children:C.id&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:un.iconBtn,type:"button",title:"Edit",onClick:()=>A(C),children:""}),a.jsx("button",{className:un.iconBtnDanger,type:"button",title:"Delete",onClick:()=>E(C),children:""})]})})]},C.id??T))})]})]})}const JSe="_page_zs8m9_7",e1e="_alert_zs8m9_27",t1e="_status_zs8m9_43",n1e="_card_zs8m9_63",r1e="_cardHeader_zs8m9_79",a1e="_cardTitle_zs8m9_97",s1e="_search_zs8m9_103",i1e="_form_zs8m9_119",o1e="_row_zs8m9_125",l1e="_label_zs8m9_137",c1e="_input_zs8m9_149",u1e="_textarea_zs8m9_171",d1e="_actions_zs8m9_177",f1e="_primary_zs8m9_187",m1e="_ghost_zs8m9_187",h1e="_tableWrap_zs8m9_225",p1e="_table_zs8m9_225",y1e="_typeCell_zs8m9_261",g1e="_descCell_zs8m9_263",v1e="_num_zs8m9_265",b1e="_empty_zs8m9_267",_1e="_sortBtn_zs8m9_273",x1e="_sortArrow_zs8m9_287",S1e="_desc_zs8m9_263",w1e="_active_zs8m9_307",j1e="_cellInput_zs8m9_313",N1e="_rangeBar_zs8m9_331",A1e="_rangeFill_zs8m9_349",E1e="_rangeMarks_zs8m9_363",C1e="_actionsCol_zs8m9_381",T1e="_iconBtn_zs8m9_383",k1e="_iconBtnDanger_zs8m9_385",O1e="_primarySm_zs8m9_387",R1e="_ghostSm_zs8m9_389",M1e="_ellipsis_zs8m9_419",St={page:JSe,alert:e1e,status:t1e,card:n1e,cardHeader:r1e,cardTitle:a1e,search:s1e,form:i1e,row:o1e,label:l1e,input:c1e,textarea:u1e,actions:d1e,primary:f1e,ghost:m1e,tableWrap:h1e,table:p1e,typeCell:y1e,descCell:g1e,num:v1e,empty:b1e,sortBtn:_1e,sortArrow:x1e,desc:S1e,active:w1e,cellInput:j1e,rangeBar:N1e,rangeFill:A1e,rangeMarks:E1e,actionsCol:C1e,iconBtn:T1e,iconBtnDanger:k1e,primarySm:O1e,ghostSm:R1e,ellipsis:M1e},QM={topic:"",metric:"",minValue:"",maxValue:"",description:""};function I1e(){const{configs:e,error:t,createConfig:n,updateConfig:r,deleteConfig:i}=K1(),o=p.useId(),c=p.useId(),d=p.useMemo(()=>`topics-${o.replace(/[^a-z0-9_-]/gi,"")||"list"}`,[o]),f=p.useMemo(()=>`metrics-${c.replace(/[^a-z0-9_-]/gi,"")||"list"}`,[c]),[m,h]=p.useState(QM),[g,v]=p.useState(null),[x,w]=p.useState(""),[_,S]=p.useState(""),[j,A]=p.useState({key:"sensorType",dir:"asc"}),E=p.useMemo(()=>{const M=new Set,q=[],z=V=>{const Y=(V||"").trim();if(!Y)return;const Z=Y.toLowerCase();M.has(Z)||(M.add(Z),q.push(Y))};return Object.values(e||{}).forEach(V=>z(V.topic)),z(m.topic),q.sort((V,Y)=>V.localeCompare(Y,void 0,{sensitivity:"base"}))},[e,m.topic]),C=p.useMemo(()=>{const M=m.topic?.trim();if(!M)return[];const q=new Map;return Object.values(e||{}).forEach(z=>{if((z.topic||"").trim()!==M)return;const V=(z.sensorType||"").trim();if(!V)return;const Y=V.toLowerCase();if(q.has(Y))return;const Z=$J(V,{topic:M})||V;q.set(Y,{value:V,label:Z})}),Array.from(q.values()).sort((z,V)=>z.label.localeCompare(V.label,void 0,{sensitivity:"base"}))},[e,m.topic]),[T,O]=p.useState(null),[R,k]=p.useState({minValue:"",maxValue:"",description:""}),P=p.useMemo(()=>{const M=Object.values(e||{}),q=_.trim().toLowerCase(),z=q?M.filter(Y=>{const Z=Y.topic||"";return Y.sensorType?.toLowerCase().includes(q)||Z.toLowerCase().includes(q)||Y.description?.toLowerCase().includes(q)}):M,V=j.dir==="asc"?1:-1;return[...z].sort((Y,Z)=>{const ee=j.key;if(ee==="minValue"||ee==="maxValue")return((Number(Y[ee])||0)-(Number(Z[ee])||0))*V;if(ee==="topic"){const X=(Y.topic||"").toString().toLowerCase(),Ae=(Z.topic||"").toString().toLowerCase();return X.localeCompare(Ae)*V}const ie=(Y?.[ee]??"").toString().toLowerCase(),xe=(Z?.[ee]??"").toString().toLowerCase();return ie.localeCompare(xe)*V})},[e,_,j]),H=M=>{const{name:q,value:z}=M.target;h(V=>q==="topic"?{...V,topic:z,metric:""}:{...V,[q]:z})},K=()=>{v(null),h(QM)},B=(M,q)=>{const z=Number(M),V=Number(q);return!Number.isFinite(z)||!Number.isFinite(V)?"Min/Max must be numbers":V<z?"Max must be greater than or equal to Min":""},U=async M=>{M.preventDefault(),w("");const q=m.topic.trim(),z=m.metric.trim(),V=!g&&(!q||!z)||m.minValue===""||m.maxValue===""||B(m.minValue,m.maxValue);if(V){w(typeof V=="string"?V:"Please fill required fields correctly");return}const Y=Number(m.minValue),Z=Number(m.maxValue),ee={minValue:Y,maxValue:Z,description:m.description?.trim()||""};try{g?await r(g,ee):await n({sensorType:z,topic:q,...ee}),w("Saved"),K()}catch(ie){w(ie?.message||"Failed to save")}},I=M=>{const q=e[M]||{};v(M),h({topic:q.topic??"",metric:q.sensorType??"",minValue:q.minValue??"",maxValue:q.maxValue??"",description:q.description??""}),window.scrollTo({top:0,behavior:"smooth"})},L=async M=>{w("");try{await i(M),w("Deleted"),g===M&&K()}catch(q){w(q?.message||"Failed to delete")}},$=M=>{O(M.id),k({minValue:M.minValue??"",maxValue:M.maxValue??"",description:M.description??""})},G=()=>{O(null),k({minValue:"",maxValue:"",description:""})},te=async M=>{const q=B(R.minValue,R.maxValue);if(q){w(q);return}try{await r(M,{minValue:Number(R.minValue),maxValue:Number(R.maxValue),description:R.description?.trim()||""}),w("Updated"),G()}catch(z){w(z?.message||"Failed to update")}},re=({id:M,children:q})=>a.jsxs("button",{type:"button",className:St.sortBtn,onClick:()=>A(z=>({key:M,dir:z.key===M&&z.dir==="asc"?"desc":"asc"})),"aria-label":`Sort by ${M}`,title:`Sort by ${M}`,children:[q,a.jsx("span",{className:`${St.sortArrow} ${j.key===M?St.active:""} ${j.dir==="desc"?St.desc:""}`})]});return a.jsxs("div",{className:St.page,children:[a.jsx(gs,{title:"Sensor Config"}),t&&a.jsx("div",{role:"alert",className:St.alert,children:t}),x&&a.jsx("div",{role:"status",className:St.status,children:x}),a.jsxs("section",{className:St.card,children:[a.jsx("header",{className:St.cardHeader,children:a.jsx("div",{className:St.cardTitle,children:g?`Edit: ${g}`:"Add New Sensor Config"})}),a.jsxs("form",{className:St.form,onSubmit:U,children:[a.jsxs("div",{className:St.row,children:[a.jsxs("label",{className:St.label,children:[a.jsx("span",{children:"Topic"}),a.jsx("input",{name:"topic",list:d,value:m.topic,onChange:H,className:St.input,disabled:!!g,required:!g,placeholder:E.length?"Select or type topic":"Type topic"}),a.jsx("datalist",{id:d,children:E.map(M=>a.jsx("option",{value:M,children:M},M))})]}),a.jsxs("label",{className:St.label,children:[a.jsx("span",{children:"Metric"}),a.jsx("input",{name:"metric",list:f,value:m.metric,onChange:H,className:St.input,required:!g,disabled:!m.topic||!!g,placeholder:m.topic?C.length?"Select or type metric":"Type metric":"Select topic first"}),a.jsx("datalist",{id:f,children:C.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value))})]}),a.jsxs("label",{className:St.label,children:[a.jsx("span",{children:"Min"}),a.jsx("input",{name:"minValue",type:"number",value:m.minValue,onChange:H,placeholder:"e.g. 5.8",className:St.input,required:!0})]}),a.jsxs("label",{className:St.label,children:[a.jsx("span",{children:"Max"}),a.jsx("input",{name:"maxValue",type:"number",value:m.maxValue,onChange:H,placeholder:"e.g. 6.5",className:St.input,required:!0})]})]}),a.jsxs("label",{className:St.label,children:[a.jsx("span",{children:"Description"}),a.jsx("textarea",{name:"description",value:m.description,onChange:H,placeholder:"Short note about the ideal range",className:`${St.input} ${St.textarea}`,rows:2})]}),a.jsxs("div",{className:St.actions,children:[a.jsx("button",{className:St.primary,type:"submit",children:g?"Update":"Create"}),g&&a.jsx("button",{className:St.ghost,type:"button",onClick:K,children:"Cancel"})]})]})]}),a.jsxs("section",{className:St.card,children:[a.jsxs("header",{className:St.cardHeader,children:[a.jsx("div",{className:St.cardTitle,children:"Configured Sensors"}),a.jsx("input",{className:St.search,placeholder:"Search metric...",value:_,onChange:M=>S(M.target.value)})]}),a.jsx("div",{className:St.tableWrap,children:a.jsxs("table",{className:St.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:a.jsx(re,{id:"sensorType",children:"Metric"})}),a.jsx("th",{children:a.jsx(re,{id:"topic",children:"Topic"})}),a.jsx("th",{className:St.num,children:a.jsx(re,{id:"minValue",children:"Min"})}),a.jsx("th",{className:St.num,children:a.jsx(re,{id:"maxValue",children:"Max"})}),a.jsx("th",{children:"Range"}),a.jsx("th",{children:"Description"}),a.jsx("th",{className:St.actionsCol,children:"Actions"})]})}),a.jsxs("tbody",{children:[P.map(M=>{const q=T===M.id,z=M.topic?M.topic:"",V=M.minValue??"",Y=M.maxValue??"";return a.jsxs("tr",{children:[a.jsx("td",{className:St.typeCell,children:M.sensorType}),a.jsx("td",{children:z}),a.jsx("td",{className:St.num,children:q?a.jsx("input",{className:St.cellInput,type:"number",value:R.minValue,onChange:Z=>k(ee=>({...ee,minValue:Z.target.value}))}):V}),a.jsx("td",{className:St.num,children:q?a.jsx("input",{className:St.cellInput,type:"number",value:R.maxValue,onChange:Z=>k(ee=>({...ee,maxValue:Z.target.value}))}):Y}),a.jsx("td",{children:a.jsxs("div",{className:St.rangeBar,title:`${V}  ${Y}`,children:[a.jsx("div",{className:St.rangeFill}),a.jsxs("div",{className:St.rangeMarks,children:[a.jsx("span",{children:V}),a.jsx("span",{children:Y})]})]})}),a.jsx("td",{className:St.descCell,children:q?a.jsx("input",{className:St.cellInput,type:"text",value:R.description,onChange:Z=>k(ee=>({...ee,description:Z.target.value})),placeholder:"Description"}):a.jsx("span",{className:St.ellipsis,title:M.description||"",children:M.description})}),a.jsx("td",{className:St.actionsCol,children:q?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:St.primarySm,type:"button",onClick:()=>te(M.id),children:"Save"}),a.jsx("button",{className:St.ghostSm,type:"button",onClick:G,children:"Cancel"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:St.iconBtn,type:"button",title:"Inline edit",onClick:()=>$(M),children:""}),a.jsx("button",{className:St.iconBtnDanger,type:"button",title:"Delete",onClick:()=>L(M.id),children:""}),a.jsx("button",{className:St.iconBtn,type:"button",title:"Edit in form",onClick:()=>I(M.id),children:""})]})})]},M.id)}),P.length===0&&a.jsx("tr",{children:a.jsx("td",{className:St.empty,colSpan:6,children:"No configs"})})]})]})})]})]})}const D1e="_page_12esw_1",P1e="_card_12esw_17",$1e="_metaRow_12esw_39",L1e="_label_12esw_53",B1e="_value_12esw_69",U1e="_statusMessage_12esw_81",q1e="_sectionHeader_12esw_93",z1e="_sectionActions_12esw_109",F1e="_sectionTitle_12esw_125",H1e="_sectionMeta_12esw_139",V1e="_sectionButton_12esw_149",K1e="_deviceList_12esw_193",G1e="_deviceItem_12esw_209",W1e="_deviceRow_12esw_223",Y1e="_deviceCheckbox_12esw_239",X1e="_actionButton_12esw_253",Q1e="_deviceName_12esw_261",Z1e="_deviceMeta_12esw_271",J1e="_deviceHeader_12esw_281",ewe="_deviceHeaderLabel_12esw_303",twe="_deviceIdentity_12esw_311",nwe="_deviceUptime_12esw_323",rwe="_resetColumn_12esw_333",awe="_resetButton_12esw_345",swe="_resetRequested_12esw_389",iwe="_resetError_12esw_399",owe="_tokenField_12esw_411",lwe="_tokenLabel_12esw_423",cwe="_tokenInput_12esw_439",uwe="_toast_12esw_467",dwe="_warningBox_12esw_485",fwe="_warningTitle_12esw_509",mwe="_warningMessage_12esw_525",yt={page:D1e,card:P1e,metaRow:$1e,label:L1e,value:B1e,statusMessage:U1e,sectionHeader:q1e,sectionActions:z1e,sectionTitle:F1e,sectionMeta:H1e,sectionButton:V1e,deviceList:K1e,deviceItem:G1e,deviceRow:W1e,deviceCheckbox:Y1e,actionButton:X1e,deviceName:Q1e,deviceMeta:Z1e,deviceHeader:J1e,deviceHeaderLabel:ewe,deviceIdentity:twe,deviceUptime:nwe,resetColumn:rwe,resetButton:awe,resetRequested:swe,resetError:iwe,tokenField:owe,tokenLabel:lwe,tokenInput:cwe,toast:uwe,warningBox:dwe,warningTitle:fwe,warningMessage:mwe},f5=Bn(),hwe=`${f5}/api/telemetry-targets/devices`,pwe=e=>[e?.title,e?.name,e?.pageTitle,e?.displayName].find(n=>typeof n=="string"&&n.trim())||"Monitoring Page",ywe=(e,t)=>{if(!e)return"";for(const n of t){const r=e?.[n];if(r!=null&&String(r).trim())return String(r).trim()}return""},ZM=e=>`${e||""}`.trim().toUpperCase(),gwe=e=>{const t=[e,e?.target,e?.telemetryTarget,e?.telemetry_target],n=r=>{for(const i of t){const o=ywe(i,r);if(o)return o}return""};return{farm:n(["farm","system","site","farmId","systemId","siteId"]),unitType:ZM(n(["unitType","unit_type","type","unit"])),unitId:n(["unitId","unit_id","unit"]),subUnitType:ZM(n(["subUnitType","sub_unit_type","subUnit"])),subUnitId:n(["subUnitId","sub_unit_id","subUnitId","sub_unit"])}},vwe=e=>{if(!e?.unitType||!e?.unitId)return"Not configured";const t=[`${e.unitType} ${e.unitId}`];return e.subUnitType&&e.subUnitId&&t.push(`${e.subUnitType} ${e.subUnitId}`),t.join("  ")},bwe=e=>[e?.farm,e?.unitType,e?.unitId,e?.subUnitType,e?.subUnitId].filter(Boolean).join("-"),_we=e=>{const t=new URLSearchParams;return e.farm&&t.set("farm",e.farm),e.unitType&&t.set("unitType",e.unitType),e.unitId&&t.set("unitId",e.unitId),e.subUnitType&&t.set("subUnitType",e.subUnitType),e.subUnitId&&t.set("subUnitId",e.subUnitId),t.toString()},xwe=e=>Array.isArray(e)?e:Array.isArray(e?.nodes)?e.nodes:Array.isArray(e?.devices)?e.devices:Array.isArray(e?.data)?e.data:Array.isArray(e?.data?.nodes)?e.data.nodes:Array.isArray(e?.data?.devices)?e.data.devices:[],JM=(e,t)=>{const r=[Iu(e),e?.id,e?.nodeId,e?.serial,e?.name,e?.label,e?.displayName].find(i=>i!=null);return r?String(r):`ID ${t+1}`},zd=e=>Iu(e),Swe=(e,t,n)=>Iu(e)||`${n||"target"}-${t}`,wwe=e=>{if(!Number.isFinite(e))return null;if(e<60)return`${Math.floor(e)}s`;const t=Math.floor(e/60);if(t<60)return`${t}m`;const n=Math.floor(e/3600);if(n<24){const o=Math.floor(e%3600/60);return`${n}h ${o}m`}const r=Math.floor(e/86400),i=Math.floor(e%86400/3600);return`${r}d ${i}h`},B0=e=>({bootId:e?.bootId??e?.boot_id??null,bootTime:e?.bootTime??e?.boot_time??null}),jwe=e=>e?.uptimeSeconds??e?.extra?.uptimeSeconds??null;function Nwe(){const{slug:e}=Ls(),t=p.useMemo(()=>String(e??"").trim(),[e]),[n,r]=p.useState(null),[i,o]=p.useState({farm:"",unitType:"",unitId:"",subUnitType:"",subUnitId:""}),[c,d]=p.useState(!0),[f,m]=p.useState(""),[h,g]=p.useState(!1),[v,x]=p.useState([]),[w,_]=p.useState(!1),[S,j]=p.useState(""),[A,E]=p.useState(()=>{try{return window.localStorage.getItem("monitoringCommandToken")||""}catch{return""}}),[C,T]=p.useState({}),[O,R]=p.useState(()=>new Set),[k,P]=p.useState(""),[H,K]=p.useState(()=>new Set),B=(!i.farm||!i.unitType||!i.unitId)&&!c&&!h&&!f,U=p.useMemo(()=>bwe(i),[i]),I=p.useMemo(()=>({farmId:i.farm,unitType:i.unitType,unitId:i.unitId,layerId:i.subUnitId}),[i]),{mergedDevices:L}=H1(xy,{scope:I});p.useEffect(()=>{if(!k)return;const q=window.setTimeout(()=>{P("")},3500);return()=>window.clearTimeout(q)},[k]),p.useEffect(()=>{try{window.localStorage.setItem("monitoringCommandToken",A)}catch{}},[A]),p.useEffect(()=>{if(!t){m("Missing page slug."),d(!1),g(!1),r(null),o({farm:"",unitType:"",unitId:"",subUnitType:"",subUnitId:""});return}let q=!1;const z=new AbortController;return(async()=>{d(!0),m(""),g(!1),r(null),o({farm:"",unitType:"",unitId:"",subUnitType:"",subUnitId:""});try{const Y=await J8(t,{signal:z.signal});if(q)return;r(Y),o(gwe(Y))}catch(Y){if(q||z.signal.aborted)return;Y?.status===404?(g(!0),m("")):(console.error("Failed to load monitoring page",Y),m("Unable to load this monitoring page.")),r(null),o({farm:"",unitType:"",unitId:"",subUnitType:"",subUnitId:""})}finally{q||d(!1)}})(),()=>{q=!0,z.abort()}},[t]),p.useEffect(()=>{if(!i.farm||!i.unitType||!i.unitId){x([]),_(!1),j("");return}let q=!1;const z=new AbortController;return(async()=>{_(!0),j("");try{const Y=_we(i),Z=await Ve(`${hwe}?${Y}`,{signal:z.signal}),ee=await at(Z,"Unable to load telemetry devices");if(q)return;x(xwe(ee))}catch(Y){if(q||z.signal.aborted)return;console.error("Failed to load telemetry devices",Y),j("Unable to load devices for this target."),x([])}finally{q||_(!1)}})(),()=>{q=!0,z.abort()}},[i]),p.useEffect(()=>{B&&console.warn("Telemetry target is missing required fields (farm, unitType, unitId). Devices will remain empty until configured.")},[B]),p.useEffect(()=>{if(!v||v.length===0){K(new Set);return}const q=new Set(v.map(z=>zd(z)).filter(z=>z));K(q)},[v,U]);const $=q=>{q&&K(z=>{const V=new Set(z);return V.has(q)?V.delete(q):V.add(q),V})},G=()=>{const q=new Set(v.map(z=>zd(z)).filter(z=>z));K(q)},te=()=>K(new Set);p.useEffect(()=>{!L||v.length===0||x(q=>{let z=!1;const V=q.map(Y=>{const Z=zd(Y);if(!Z)return Y;const ee=L[Z];if(!ee)return Y;const ie=jwe(ee),xe=B0(ee?.extra||ee);let X=Y;return ie!==null&&ie!==Y?.uptimeSeconds&&(X={...X,uptimeSeconds:ie},z=!0),xe.bootId!==null&&xe.bootId!==Y?.bootId&&(X={...X,bootId:xe.bootId},z=!0),xe.bootTime!==null&&xe.bootTime!==Y?.bootTime&&(X={...X,bootTime:xe.bootTime},z=!0),X});return z?V:q})},[v,L]),p.useEffect(()=>{L&&T(q=>{let z=!1;const V={...q};return Object.entries(q).forEach(([Y,Z])=>{if(Z?.status!=="requested")return;const ee=L[Y];if(!ee)return;const ie=B0(ee?.extra||ee);if(!(ie.bootId!==null||ie.bootTime!==null))return;const X=ie.bootId!==null&&ie.bootId!==Z?.bootId,Ae=ie.bootTime!==null&&ie.bootTime!==Z?.bootTime;(X||Ae)&&(V[Y]={...Z,status:""},z=!0)}),z?V:q})},[L]),p.useEffect(()=>{A.trim()&&T(q=>{let z=!1;const V={...q};return Object.entries(q).forEach(([Y,Z])=>{Z?.error==="Token required"&&(V[Y]={...Z,error:""},z=!0)}),z?V:q})},[A]);const re=async(q,z)=>{const V=zd(q);if(!V)return;const Y=A.trim();if(!Y){T(X=>({...X,[V]:{...X[V],error:"Token required"}}));return}const Z=JM(q,z);if(!window.confirm(`Reset device ${Z}?`))return;const ie=q?.deviceId??q?.id??null;if(!ie){T(X=>({...X,[V]:{...X[V],error:"Device ID missing"}}));return}const xe=B0(L?.[V]?.extra||q);R(X=>new Set(X).add(V)),T(X=>({...X,[V]:{...X[V],error:""}}));try{const X=await fetch(`${f5}/api/devices/${encodeURIComponent(ie)}/reset`,{method:"POST",headers:{Authorization:`Bearer ${Y}`}});if(X.status===401){T(Ae=>({...Ae,[V]:{...Ae[V],error:"Unauthorized (invalid token)"}}));return}if(!X.ok){T(Ae=>({...Ae,[V]:{...Ae[V],error:"Unable to request reset"}}));return}P("Reset requested"),T(Ae=>({...Ae,[V]:{status:"requested",error:"",bootId:xe.bootId,bootTime:xe.bootTime}}))}catch{T(X=>({...X,[V]:{...X[V],error:"Unable to request reset"}}))}finally{R(X=>{const Ae=new Set(X);return Ae.delete(V),Ae})}},M=pwe(n);return a.jsxs("div",{className:yt.page,children:[a.jsx(gs,{title:M}),a.jsxs("section",{className:yt.card,children:[a.jsxs("div",{className:yt.metaRow,children:[a.jsx("span",{className:yt.label,children:"Slug"}),a.jsx("span",{className:yt.value,children:t||""})]}),a.jsxs("div",{className:yt.metaRow,children:[a.jsx("span",{className:yt.label,children:"Telemetry target"}),a.jsx("span",{className:yt.value,children:vwe(i)})]}),a.jsxs("div",{className:yt.metaRow,children:[a.jsx("span",{className:yt.label,children:"Farm"}),a.jsx("span",{className:yt.value,children:i.farm||"Not configured"})]}),a.jsxs("div",{className:yt.metaRow,children:[a.jsx("span",{className:yt.label,children:"Unit type"}),a.jsx("span",{className:yt.value,children:i.unitType||"Not configured"})]}),a.jsxs("div",{className:yt.metaRow,children:[a.jsx("span",{className:yt.label,children:"Unit ID"}),a.jsx("span",{className:yt.value,children:i.unitId||"Not configured"})]}),i.subUnitType||i.subUnitId?a.jsxs("div",{className:yt.metaRow,children:[a.jsx("span",{className:yt.label,children:"Sub-unit"}),a.jsx("span",{className:yt.value,children:i.subUnitType&&i.subUnitId?`${i.subUnitType} ${i.subUnitId}`:"Not configured"})]}):null,c&&a.jsx("p",{className:yt.statusMessage,children:"Loading page configuration"}),h&&a.jsx("p",{className:yt.statusMessage,children:"Page not found."}),f&&a.jsx("p",{className:yt.statusMessage,children:f})]}),a.jsxs("section",{className:yt.card,children:[a.jsxs("div",{className:yt.sectionHeader,children:[a.jsx("h2",{className:yt.sectionTitle,children:"Devices"}),a.jsxs("div",{className:yt.sectionActions,children:[a.jsxs("label",{className:yt.tokenField,children:[a.jsx("span",{className:yt.tokenLabel,children:"Command token"}),a.jsx("input",{type:"password",className:yt.tokenInput,placeholder:"PASTE_TOKEN_HERE",value:A,onChange:q=>E(q.target.value),autoComplete:"off"})]}),a.jsxs("span",{className:yt.sectionMeta,children:[v.length," total"]}),a.jsx("button",{type:"button",className:`${yt.sectionButton} ${yt.actionButton}`,onClick:G,disabled:v.length===0,children:"Select all"}),a.jsx("button",{type:"button",className:`${yt.sectionButton} ${yt.actionButton}`,onClick:te,disabled:v.length===0,children:"Clear"})]})]}),B&&a.jsxs("div",{className:yt.warningBox,children:[a.jsx("p",{className:yt.warningTitle,children:"Telemetry target incomplete"}),a.jsx("p",{className:yt.warningMessage,children:"This page is missing required target details (farm, unit type, unit ID), so devices and telemetry cannot load yet."})]}),w&&a.jsx("p",{className:yt.statusMessage,children:"Loading devices"}),S&&a.jsx("p",{className:yt.statusMessage,children:S}),!w&&!S&&!B&&v.length===0&&a.jsx("p",{className:yt.statusMessage,children:"No devices found for this target."}),!w&&!S&&v.length>0&&a.jsxs(a.Fragment,{children:[k?a.jsx("div",{className:yt.toast,role:"status","aria-live":"polite",children:k}):null,a.jsxs("div",{className:yt.deviceHeader,children:[a.jsx("span",{className:yt.deviceHeaderLabel,children:"Device"}),a.jsx("span",{className:yt.deviceHeaderLabel,children:"Type"}),a.jsx("span",{className:yt.deviceHeaderLabel,children:"Uptime"}),a.jsx("span",{className:yt.deviceHeaderLabel,children:"Reset"})]}),a.jsx("ul",{className:yt.deviceList,children:v.map((q,z)=>{const V=zd(q),Y=Swe(q,z,U),Z=V?H.has(V):!1,ee=wwe(q?.uptimeSeconds),ie=V?C[V]:null,xe=V?O.has(V):!1;return a.jsxs("li",{className:yt.deviceItem,children:[a.jsxs("div",{className:yt.deviceRow,children:[a.jsxs("label",{className:yt.deviceIdentity,children:[a.jsx("input",{type:"checkbox",className:yt.deviceCheckbox,checked:Z,onChange:()=>$(V),disabled:!V}),a.jsx("span",{className:yt.deviceName,children:JM(q,z)})]}),a.jsx("span",{className:yt.deviceMeta,children:q?.type||q?.model||q?.category||"Device"}),a.jsx("span",{className:yt.deviceUptime,title:ee?void 0:"Uptime unknown",children:ee||""}),a.jsxs("div",{className:yt.resetColumn,children:[a.jsx("button",{type:"button",className:yt.resetButton,onClick:()=>re(q,z),disabled:xe,children:xe?"Resetting...":"Reset"}),ie?.status==="requested"?a.jsx("span",{className:yt.resetRequested,children:"Reset requested"}):null]})]}),ie?.error?a.jsx("div",{className:yt.resetError,children:ie.error}):null]},Y)})})]})]}),i.unitType==="RACK"&&i.unitId?a.jsx(s5,{rackId:i.unitId,selectedDeviceIds:Array.from(H)}):null]})}const Awe="_page_mf43c_1",Ewe="_header_mf43c_15",Cwe="_title_mf43c_31",Twe="_roomSelector_mf43c_43",kwe="_roomSelect_mf43c_43",Owe="_racksGrid_mf43c_71",Rwe="_rackCard_mf43c_83",Mwe="_rackHeader_mf43c_103",Iwe="_rackTitle_mf43c_115",Dwe="_socketsGrid_mf43c_127",Pwe="_socketCard_mf43c_139",$we="_socketHeader_mf43c_161",Lwe="_socketTitle_mf43c_175",Bwe="_badge_mf43c_187",Uwe="_badgeOnline_mf43c_201",qwe="_badgeOffline_mf43c_211",zwe="_metricRow_mf43c_221",Fwe="_metric_mf43c_221",Hwe="_controls_mf43c_243",Vwe="_primaryButton_mf43c_255",Kwe="_secondaryButton_mf43c_257",Gwe="_status_mf43c_293",Wwe="_statusDot_mf43c_307",Ywe="_statusOn_mf43c_321",Xwe="_statusOff_mf43c_329",Qwe="_automationSection_mf43c_337",Zwe="_automationList_mf43c_349",Jwe="_automationRow_mf43c_361",eje="_automationDetails_mf43c_381",tje="_automationLabel_mf43c_393",nje="_dangerButton_mf43c_401",rje="_modalOverlay_mf43c_419",aje="_modal_mf43c_419",sje="_modalHeader_mf43c_467",ije="_tabRow_mf43c_479",oje="_tabButton_mf43c_489",lje="_tabActive_mf43c_509",cje="_field_mf43c_521",uje="_input_mf43c_541",dje="_textInput_mf43c_545",fje="_modalActions_mf43c_557",mje="_helper_mf43c_569",hje="_checkboxRow_mf43c_579",st={page:Awe,header:Ewe,title:Cwe,roomSelector:Twe,roomSelect:kwe,racksGrid:Owe,rackCard:Rwe,rackHeader:Mwe,rackTitle:Iwe,socketsGrid:Dwe,socketCard:Pwe,socketHeader:$we,socketTitle:Lwe,badge:Bwe,badgeOnline:Uwe,badgeOffline:qwe,metricRow:zwe,metric:Fwe,controls:Hwe,primaryButton:Vwe,secondaryButton:Kwe,status:Gwe,statusDot:Wwe,statusOn:Ywe,statusOff:Xwe,automationSection:Qwe,automationList:Zwe,automationRow:Jwe,automationDetails:eje,automationLabel:tje,dangerButton:nje,modalOverlay:rje,modal:aje,modalHeader:sje,tabRow:ije,tabButton:oje,tabActive:lje,field:cje,input:uje,textInput:dje,modalActions:fje,helper:mje,checkboxRow:hje},pje=8e3;function yje({on:e}){return a.jsx("span",{className:`${st.statusDot} ${e?st.statusOn:st.statusOff}`})}function gje({socket:e,status:t,onToggle:n,onAutomation:r}){const i=t?.online??!0,o=!!t?.output;return a.jsxs("div",{className:st.socketCard,children:[a.jsxs("div",{className:st.socketHeader,children:[a.jsxs("div",{children:[a.jsx("h4",{className:st.socketTitle,children:e.name}),a.jsxs("div",{className:st.status,children:[a.jsx(yje,{on:!!i}),a.jsx("span",{children:i?"Online":"Offline"})]})]}),a.jsx("span",{className:`${st.badge} ${o?st.badgeOnline:st.badgeOffline}`,children:o?"ON":"OFF"})]}),a.jsxs("div",{className:st.metricRow,children:[a.jsxs("span",{className:st.metric,children:["ID: ",e.socketId||e.id]}),typeof t?.powerW=="number"&&a.jsxs("span",{className:st.metric,children:["Power: ",t.powerW.toFixed(1)," W"]}),typeof t?.voltageV=="number"&&a.jsxs("span",{className:st.metric,children:["Voltage: ",t.voltageV.toFixed(1)," V"]})]}),a.jsxs("div",{className:st.controls,children:[a.jsx("button",{className:st.primaryButton,type:"button",onClick:()=>n(e,t),disabled:!i,title:i?void 0:"Socket offline",children:o?"Turn OFF":"Turn ON"}),a.jsx("button",{className:st.secondaryButton,type:"button",onClick:()=>r(e),children:"Automation"})]})]})}function vje({socket:e,onClose:t,onSubmit:n}){const[r,i]=p.useState("TIME_RANGE"),[o,c]=p.useState({onTime:"06:00",offTime:"22:00",daysOfWeek:"",intervalMinutes:15,mode:"TOGGLE",pulseSeconds:5,durationMinutes:5,startNow:!0});p.useEffect(()=>{i("TIME_RANGE")},[e]);const d=(m,h)=>{c(g=>({...g,[m]:h}))},f=()=>{const m={socketId:e.socketId||e.id,type:r};if(r==="TIME_RANGE"){m.onTime=o.onTime,m.offTime=o.offTime;const h=o.daysOfWeek?.split(",").map(g=>g.trim().toUpperCase()).filter(Boolean);h?.length&&(m.daysOfWeek=h)}r==="INTERVAL_TOGGLE"&&(m.intervalMinutes=Number(o.intervalMinutes),m.mode=o.mode,o.mode==="PULSE"&&o.pulseSeconds&&(m.pulseSeconds=Number(o.pulseSeconds))),r==="AUTO_OFF"&&(m.durationMinutes=Number(o.durationMinutes),m.startNow=!!o.startNow),n(m)};return a.jsx("div",{className:st.modalOverlay,children:a.jsxs("div",{className:st.modal,children:[a.jsxs("div",{className:st.modalHeader,children:[a.jsxs("div",{children:[a.jsxs("h3",{className:st.title,children:["Automation for ",e.name]}),a.jsx("p",{className:st.helper,children:"Configure time windows, interval toggles, or auto-off timers."})]}),a.jsx("button",{className:st.secondaryButton,type:"button",onClick:t,children:"Close"})]}),a.jsx("div",{className:st.tabRow,children:[{id:"TIME_RANGE",label:"Time Range"},{id:"INTERVAL_TOGGLE",label:"Interval"},{id:"AUTO_OFF",label:"Auto-off"}].map(m=>a.jsx("button",{type:"button",className:`${st.tabButton} ${r===m.id?st.tabActive:""}`,onClick:()=>i(m.id),children:m.label},m.id))}),r==="TIME_RANGE"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"start",children:"Start time"}),a.jsx("input",{id:"start",className:st.input,type:"time",value:o.onTime,onChange:m=>d("onTime",m.target.value)})]}),a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"end",children:"End time"}),a.jsx("input",{id:"end",className:st.input,type:"time",value:o.offTime,onChange:m=>d("offTime",m.target.value)})]}),a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"days",children:"Days (optional, comma separated MON,TUE)"}),a.jsx("input",{id:"days",className:st.textInput,placeholder:"Leave empty for every day",value:o.daysOfWeek||"",onChange:m=>d("daysOfWeek",m.target.value)})]})]}),r==="INTERVAL_TOGGLE"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"interval",children:"Interval minutes"}),a.jsx("input",{id:"interval",className:st.input,type:"number",min:"1",value:o.intervalMinutes,onChange:m=>d("intervalMinutes",m.target.value)}),a.jsx("span",{className:st.helper,children:"Socket will toggle every N minutes."})]}),a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"mode",children:"Mode"}),a.jsxs("select",{id:"mode",className:st.input,value:o.mode,onChange:m=>d("mode",m.target.value),children:[a.jsx("option",{value:"TOGGLE",children:"Toggle"}),a.jsx("option",{value:"PULSE",children:"Pulse"})]})]}),o.mode==="PULSE"&&a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"pulse",children:"Pulse seconds"}),a.jsx("input",{id:"pulse",className:st.input,type:"number",min:"1",value:o.pulseSeconds,onChange:m=>d("pulseSeconds",m.target.value)}),a.jsx("span",{className:st.helper,children:"Duration to hold the pulse when pulsing."})]})]}),r==="AUTO_OFF"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:st.field,children:[a.jsx("label",{htmlFor:"autoOff",children:"Turn off after (minutes)"}),a.jsx("input",{id:"autoOff",className:st.input,type:"number",min:"1",value:o.durationMinutes,onChange:m=>d("durationMinutes",m.target.value)}),a.jsx("span",{className:st.helper,children:"Turns on immediately and powers down after the duration."})]}),a.jsxs("label",{className:st.checkboxRow,htmlFor:"startNow",children:[a.jsx("input",{id:"startNow",type:"checkbox",checked:o.startNow,onChange:m=>d("startNow",m.target.checked)}),a.jsx("span",{children:"Start now"})]})]}),a.jsxs("div",{className:st.modalActions,children:[a.jsx("button",{className:st.secondaryButton,type:"button",onClick:t,children:"Cancel"}),a.jsx("button",{className:st.primaryButton,type:"button",onClick:f,children:"Save automation"})]})]})})}function bje({automations:e,onDelete:t}){return e.length?a.jsx("div",{className:st.automationList,children:e.map(n=>a.jsxs("div",{className:st.automationRow,children:[a.jsxs("div",{className:st.automationDetails,children:[a.jsxs("span",{className:st.automationLabel,children:[n.type.replace("_"," "),"  ",n.socketId]}),n.type==="TIME_RANGE"&&a.jsxs("span",{className:st.helper,children:[n.onTime,"  ",n.offTime," ",n.daysOfWeek?.length?`(${n.daysOfWeek.join(",")})`:"(daily)"]}),n.type==="INTERVAL_TOGGLE"&&a.jsx("span",{className:st.helper,children:n.mode==="PULSE"?`Pulse every ${n.intervalMinutes} minutes (${n.pulseSeconds}s)`:`Toggle every ${n.intervalMinutes} minutes`}),n.type==="AUTO_OFF"&&a.jsxs("span",{className:st.helper,children:["Turn off after ",n.durationMinutes??n.autoOffMinutes," minutes"]})]}),a.jsx("button",{className:st.dangerButton,type:"button",onClick:()=>t(n.id),children:"Delete"})]},n.id))}):a.jsx("p",{className:st.helper,children:"No automations configured yet."})}function _je(){const[e,t]=p.useState([]),[n,r]=p.useState(),[i,o]=p.useState({}),[c,d]=p.useState([]),[f,m]=p.useState(null),[h,g]=p.useState(null);p.useEffect(()=>{JD().then(j=>{const A=j?.rooms||[];t(A),r(E=>E??A[0]?.id)}).catch(j=>g(j.message)),wk().then(d).catch(j=>g(j.message))},[]);const v=p.useMemo(()=>e.find(A=>A.id===n)?.racks?.flatMap(A=>A.sockets.map(E=>({...E,socketId:E.socketId||E.id,name:E.name||E.socketId||E.id,rackName:A.name})))||[],[e,n]),x=()=>{JQ().then(j=>{const E=(Array.isArray(j)?j:[]).reduce((C,T)=>(T?.socketId&&(C[T.socketId]=T),C),{});o(E)}).catch(j=>g(j.message))};p.useEffect(()=>{if(!v.length)return;x();const j=setInterval(x,pje);return()=>clearInterval(j)},[n,v.length]);const w=(j,A)=>{const E=j.socketId||j.id;if(A&&A.online===!1){g(`${E} is offline`);return}const C=!A?.output;o(T=>({...T,[E]:{...A,output:C}})),eP(E).then(T=>o(O=>({...O,[E]:T}))).catch(T=>{g(T.message),x()})},_=j=>{nP(j).then(A=>(d(E=>[...E.filter(C=>C.id!==A.id),A]),wk())).then(A=>{A&&d(A),m(null)}).catch(A=>g(A.message))},S=j=>{tZ(j).then(()=>d(A=>A.filter(E=>E.id!==j))).catch(A=>g(A.message))};return a.jsxs("div",{className:st.page,children:[a.jsxs("div",{className:st.header,children:[a.jsx("h2",{className:st.title,children:"Shelly Control"}),a.jsxs("div",{className:st.roomSelector,children:[a.jsx("span",{children:"Room"}),a.jsx("select",{className:st.roomSelect,value:n||"",onChange:j=>r(j.target.value),children:e.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))})]})]}),h&&a.jsx("div",{className:st.helper,style:{color:"#b91c1c"},children:h}),a.jsx("div",{className:st.racksGrid,children:e.find(j=>j.id===n)?.racks?.map(j=>a.jsxs("div",{className:st.rackCard,children:[a.jsxs("div",{className:st.rackHeader,children:[a.jsx("h3",{className:st.rackTitle,children:j.name}),a.jsxs("span",{className:st.helper,children:["Rack ID: ",j.id]})]}),a.jsx("div",{className:st.socketsGrid,children:j.sockets.map(A=>a.jsx(gje,{socket:A,status:i?.[A.socketId||A.id],onToggle:w,onAutomation:()=>m(A)},A.socketId||A.id))})]},j.id))}),a.jsxs("div",{className:st.automationSection,children:[a.jsx("h3",{className:st.rackTitle,children:"Automations"}),a.jsx(bje,{automations:c,onDelete:S})]}),f&&a.jsx(vje,{socket:f,onClose:()=>m(null),onSubmit:_})]})}const xje="_page_1y0ws_1",Sje="_card_1y0ws_25",wje="_title_1y0ws_45",jje="_subtitle_1y0ws_61",Nje="_form_1y0ws_77",Aje="_label_1y0ws_89",Eje="_labelHint_1y0ws_101",Cje="_input_1y0ws_115",Tje="_button_1y0ws_147",kje="_notice_1y0ws_201",Oje="_noticeError_1y0ws_221",Rje="_noticeSuccess_1y0ws_233",Mje="_invitee_1y0ws_245",Ije="_helperText_1y0ws_263",br={page:xje,card:Sje,title:wje,subtitle:jje,form:Nje,label:Aje,labelHint:Eje,input:Cje,button:Tje,notice:kje,noticeError:Oje,noticeSuccess:Rje,invitee:Mje,helperText:Ije};function U0(){const{logout:e}=Xt(),{token:t}=Ls(),[n]=xu(),r=p.useMemo(()=>(t||n.get("token")||"").trim(),[t,n]),[i,o]=p.useState(null),[c,d]=p.useState(r?"loading":"invalid"),[f,m]=p.useState(""),[h,g]=p.useState(r?"":"Invite token is missing.");p.useEffect(()=>{e({redirect:!1})},[e]),p.useEffect(()=>{let _=!0;return r?((async()=>{d("loading"),g("");try{const j=await p7(r);if(!_)return;o(j),d("ready")}catch(j){if(!_)return;const A=j?.payload?.message||j?.message||"Invite is invalid or expired.";g(A),d("invalid")}})(),()=>{_=!1}):()=>{_=!1}},[r]);const v=async _=>{if(_.preventDefault(),c!=="ready")return;const S=f.trim();if(!S){g("Password is required.");return}if(S.length<8){g("Password must be at least 8 characters long.");return}d("submitting"),g("");try{await y7(r,S),d("success")}catch(j){const A=j?.payload?.message||(j?.status===400?"Password must be at least 8 characters long.":"")||j?.message||"Could not complete invite.";g(A),d("ready")}},x=()=>c==="loading"?a.jsx("div",{className:br.notice,children:"Validating your invitation"}):c==="invalid"?a.jsx("div",{className:`${br.notice} ${br.noticeError}`,children:h||"This invite is invalid or has expired. Please ask a Super Admin to send a new one."}):c==="success"?a.jsxs("div",{className:`${br.notice} ${br.noticeSuccess}`,children:["Your invite is confirmed. You can now ",a.jsx(nt,{to:"/login",children:"sign in"})," with your new password."]}):null,w=i?.email||i?.invitee||null;return a.jsx("div",{className:br.page,children:a.jsxs("div",{className:br.card,children:[a.jsx("h1",{className:br.title,children:"Accept your admin invite"}),a.jsx("p",{className:br.subtitle,children:"Validate your invitation token, set a password, and finish activating your HydroLeaf admin account."}),x(),c==="ready"&&w&&a.jsxs("div",{className:br.invitee,children:["Invitation for ",a.jsx("strong",{children:w})]}),(c==="ready"||c==="submitting")&&a.jsxs("form",{className:br.form,onSubmit:v,children:[a.jsxs("label",{className:br.label,htmlFor:"password",children:["Create your password",a.jsx("span",{className:br.labelHint,children:"(min. 8 characters)"})]}),a.jsx("input",{id:"password",type:"password",className:br.input,value:f,onChange:_=>m(_.target.value),disabled:c==="submitting",autoComplete:"new-password"}),h&&a.jsx("div",{className:`${br.notice} ${br.noticeError}`,children:h}),a.jsx("button",{type:"submit",className:br.button,disabled:c==="submitting",children:c==="submitting"?"Submitting":"Set password and activate"})]}),c==="success"&&a.jsx("div",{className:br.helperText,children:"Head to the login page and sign in with the email on this invite. If you run into issues, ask a Super Admin to resend your invite."})]})})}const Dje="_page_18qoc_1",Pje="_card_18qoc_25",$je="_title_18qoc_45",Lje="_subtitle_18qoc_61",Bje="_form_18qoc_77",Uje="_label_18qoc_89",qje="_input_18qoc_101",zje="_inputError_18qoc_133",Fje="_fieldError_18qoc_143",Hje="_button_18qoc_155",Vje="_notice_18qoc_209",Kje="_noticeSuccess_18qoc_231",Gje="_noticeError_18qoc_243",Wje="_linkRow_18qoc_255",Yje="_link_18qoc_255",Br={page:Dje,card:Pje,title:$je,subtitle:Lje,form:Bje,label:Uje,input:qje,inputError:zje,fieldError:Fje,button:Hje,notice:Vje,noticeSuccess:Kje,noticeError:Gje,linkRow:Wje,link:Yje};function Xje(){const[e,t]=p.useState(""),[n,r]=p.useState(!1),[i,o]=p.useState(""),[c,d]=p.useState(""),[f,m]=p.useState(!1),h=v=>{const x=`${v?.payload?.message||v?.message||""}`.toLowerCase();return v?.status===404||x.includes("not found")?"We could not find an account with that email address.":v?.payload?.message||v?.message||"Unable to send reset link."},g=async v=>{if(v.preventDefault(),n||f)return;const x=e.trim();if(d(""),!x){o("Email address is required.");return}if(!_1(x)){o("Please enter a valid email address.");return}o(""),m(!0);try{await iD({email:x}),r(!0)}catch(w){d(h(w))}finally{m(!1)}};return a.jsx("div",{className:Br.page,children:a.jsxs("div",{className:Br.card,children:[a.jsx("h1",{className:Br.title,children:"Forgot your password?"}),a.jsx("p",{className:Br.subtitle,children:"Enter the email address associated with your account and we will send you a reset link."}),n&&a.jsx("div",{className:`${Br.notice} ${Br.noticeSuccess}`,children:"If this email is registered, well send you a reset link."}),c&&a.jsx("div",{className:`${Br.notice} ${Br.noticeError}`,children:c}),a.jsxs("form",{className:Br.form,onSubmit:g,children:[a.jsx("label",{className:Br.label,htmlFor:"email",children:"Email address"}),a.jsx("input",{id:"email",className:`${Br.input} ${i?Br.inputError:""}`,type:"email",value:e,onChange:v=>{t(v.target.value),i&&o(""),c&&d("")},required:!0,autoComplete:"email",disabled:n||f,"aria-invalid":!!i,"aria-describedby":i?"email-error":void 0}),i&&a.jsx("span",{className:Br.fieldError,id:"email-error",role:"alert",children:i}),a.jsx("button",{className:Br.button,type:"submit",disabled:n||f,children:n?"Email sent":f?"Sending":"Send reset link"})]}),a.jsxs("p",{className:Br.linkRow,children:["Remembered your password?"," ",a.jsx(nt,{className:Br.link,to:"/login",children:"Back to sign in"})]})]})})}const Qje="_page_q3ud4_1",Zje="_card_q3ud4_25",Jje="_title_q3ud4_45",eNe="_subtitle_q3ud4_61",tNe="_form_q3ud4_77",nNe="_label_q3ud4_89",rNe="_labelHint_q3ud4_101",aNe="_input_q3ud4_115",sNe="_inputError_q3ud4_147",iNe="_fieldError_q3ud4_157",oNe="_button_q3ud4_169",lNe="_notice_q3ud4_223",cNe="_noticeError_q3ud4_243",uNe="_noticeSuccess_q3ud4_255",dNe="_helperText_q3ud4_267",Kn={page:Qje,card:Zje,title:Jje,subtitle:eNe,form:tNe,label:nNe,labelHint:rNe,input:aNe,inputError:sNe,fieldError:iNe,button:oNe,notice:lNe,noticeError:cNe,noticeSuccess:uNe,helperText:dNe};function fNe(){const[e]=xu(),t=p.useMemo(()=>(e.get("token")||"").trim(),[e]),[n,r]=p.useState(""),[i,o]=p.useState(""),[c,d]=p.useState(t?"ready":"invalid"),[f,m]=p.useState(t?"":"Reset token is missing."),[h,g]=p.useState({}),v=_=>{const S=`${_?.payload?.message||_?.message||""}`.toLowerCase();return _?.status===401||_?.status===403||_?.status===404||S.includes("token")||S.includes("expired")||S.includes("invalid")?"Invalid or expired reset link. Please request a new one.":_?.payload?.message||_?.message||"Could not reset password."},x=async _=>{if(_.preventDefault(),c!=="ready")return;const S=n.trim(),j=i.trim(),A={};if(S?S.length<lp&&(A.password=`Password must be at least ${lp} characters long.`):A.password="Password is required.",S!==j&&(A.confirmPassword="Passwords do not match."),Object.keys(A).length>0){g(A),m("");return}Object.keys(h).length>0&&g({}),d("submitting"),m("");try{await b7(t,S),d("success")}catch(E){m(v(E)),d("ready")}},w=()=>c==="invalid"?a.jsx("div",{className:`${Kn.notice} ${Kn.noticeError}`,children:f||"Invalid or expired link. Please request a new password reset."}):c==="success"?a.jsxs("div",{className:`${Kn.notice} ${Kn.noticeSuccess}`,children:["Password reset successful. You can now ",a.jsx(nt,{to:"/login",children:"sign in"})," with your new password."]}):null;return a.jsx("div",{className:Kn.page,children:a.jsxs("div",{className:Kn.card,children:[a.jsx("h1",{className:Kn.title,children:"Reset your password"}),a.jsx("p",{className:Kn.subtitle,children:"Enter a new password to regain access to your HydroLeaf account."}),w(),(c==="ready"||c==="submitting")&&a.jsxs("form",{className:Kn.form,onSubmit:x,children:[a.jsxs("label",{className:Kn.label,htmlFor:"password",children:["New password",a.jsx("span",{className:Kn.labelHint,children:"(min. 8 characters)"})]}),a.jsx("input",{id:"password",type:"password",className:`${Kn.input} ${h.password?Kn.inputError:""}`,value:n,onChange:_=>{r(_.target.value),h.password&&g(S=>({...S,password:""})),f&&m("")},disabled:c==="submitting",autoComplete:"new-password","aria-invalid":!!h.password,"aria-describedby":h.password?"password-error":void 0}),h.password&&a.jsx("span",{className:Kn.fieldError,id:"password-error",role:"alert",children:h.password}),a.jsx("label",{className:Kn.label,htmlFor:"confirmPassword",children:"Confirm password"}),a.jsx("input",{id:"confirmPassword",type:"password",className:`${Kn.input} ${h.confirmPassword?Kn.inputError:""}`,value:i,onChange:_=>{o(_.target.value),h.confirmPassword&&g(S=>({...S,confirmPassword:""})),f&&m("")},disabled:c==="submitting",autoComplete:"new-password","aria-invalid":!!h.confirmPassword,"aria-describedby":h.confirmPassword?"confirm-password-error":void 0}),h.confirmPassword&&a.jsx("span",{className:Kn.fieldError,id:"confirm-password-error",role:"alert",children:h.confirmPassword}),f&&a.jsx("div",{className:`${Kn.notice} ${Kn.noticeError}`,children:f}),a.jsx("button",{type:"submit",className:Kn.button,disabled:c==="submitting",children:c==="submitting"?"Updating":"Update password"})]}),c==="success"&&a.jsx("div",{className:Kn.helperText,children:"If you requested this reset from a shared device, please ensure you sign out after logging in."})]})})}const mNe="_page_14b9k_1",hNe="_card_14b9k_25",pNe="_title_14b9k_45",yNe="_message_14b9k_57",gNe="_actions_14b9k_69",vNe="_button_14b9k_77",Lc={page:mNe,card:hNe,title:pNe,message:yNe,actions:gNe,button:vNe};function bNe(){const{completeOAuthLogin:e,isAuthenticated:t,role:n,roles:r,permissions:i}=Xt(),o=cr(),c=Gr(),[d,f]=p.useState("loading"),[m,h]=p.useState("Signing you in"),g=p.useMemo(()=>{const _=new URLSearchParams(o.search).get("returnUrl");return!_||!_.startsWith("/")?null:_},[o.search]),v=p.useMemo(()=>new URLSearchParams(o.search).get("error"),[o.search]),x=p.useMemo(()=>new URLSearchParams(o.search).get("code"),[o.search]),w=p.useMemo(()=>new URLSearchParams(o.search).get("state"),[o.search]);return p.useEffect(()=>{if(t){const _=g||cf({role:n,roles:r,permissions:i});c(_,{replace:!0})}},[t,c,i,g,n,r]),p.useEffect(()=>{if(t)return;if(v){f("error"),h("Sign-in failed.");return}const _=new AbortController;return(async()=>{if(f("loading"),h("Signing you in"),x&&w)try{await S7("google",{code:x,state:w,signal:_.signal})}catch(E){if(E?.name==="AbortError")return;f("error"),h(E?.message||"Sign-in failed.");return}const j=await e({signal:_.signal});if(!j.success){f("error"),h(j.message||"Sign-in failed.");return}const A=g||cf({role:j.role||n,roles:j.roles||r,permissions:j.permissions||i});c(A,{replace:!0})})(),()=>_.abort()},[x,e,v,t,c,i,g,n,r,w]),a.jsx("div",{className:Lc.page,children:a.jsxs("div",{className:Lc.card,children:[a.jsx("h1",{className:Lc.title,children:"Google sign-in"}),a.jsx("p",{className:Lc.message,children:m}),d==="error"&&a.jsx("div",{className:Lc.actions,children:a.jsx(nt,{className:Lc.button,to:`/login${g?`?returnUrl=${g}`:""}`,children:"Back to login"})})]})})}const _Ne="_stepper_11689_1",xNe="_compact_11689_27",SNe="_button_11689_37",wNe="_value_11689_105",Fd={stepper:_Ne,compact:xNe,button:SNe,value:wNe};function Lj({value:e=1,min:t=1,max:n,onChange:r,compact:i=!1,disabled:o=!1}){const c=d=>{Number.isNaN(d)||t!==void 0&&d<t||n!==void 0&&d>n||r?.(d)};return a.jsxs("div",{className:`${Fd.stepper} ${i?Fd.compact:""}`,children:[a.jsx("button",{type:"button",className:Fd.button,onClick:()=>c(e-1),disabled:o||e<=t,children:""}),a.jsx("div",{className:Fd.value,"aria-live":"polite",children:e}),a.jsx("button",{type:"button",className:Fd.button,onClick:()=>c(e+1),disabled:o||n!==void 0&&e>=n,children:"+"})]})}const jNe=e=>e?Array.isArray(e)?e:Array.isArray(e.items)?e.items:Array.isArray(e.nodes)?e.nodes:Array.isArray(e.data)?e.data:typeof e=="object"?Object.values(e):[]:[],mu=e=>{if(!e)return;const t=e.stock??e.stockQuantity??e.availableStock??e.inventory??e.inventoryQuantity??e.qtyAvailable;return t===null?void 0:t},NNe=(e,t="DEFAULT")=>{if(!e)return;const n=jD(e,t);if(n!=null)return n;const r=e.price??e.priceSek??e.unitPrice;if(r!=null)return r},kf=e=>{if(!e)return"";const t=e.label??e.name??e.title??e.weight??e.weightLabel??e.size??e.option;return t==null?"":String(t)},fg=e=>{const t=e?.variants??e?.variantOptions??e?.options??e?.weights??e?.sizes;return jNe(t).filter(r=>r&&r.active!==!1&&r.isActive!==!1)},m5=(e=[])=>{const t=Array.isArray(e)?e:[];return(t.find(i=>{const o=mu(i);return o!==void 0&&o>0})??t[0])?.id??null},Bj=e=>{const t=mu(e);return t===void 0||t>0},q0=e=>{const t=fg(e);if(t.length>0)return t.some(r=>Bj(r));const n=e?.stock;return n===void 0||n>0},Gc=e=>{const t=fg(e);if(t.length>0){const n=t.map(NNe).filter(r=>Number.isFinite(r));if(n.length>0)return Math.min(...n)}return e?.price??0},h5=e=>{const t=e?.name??"",n=e?.variant?.label??e?.variant?.name??e?.variantLabel??e?.variantName??e?.option??e?.size;return n?`${t}  ${n}`.trim():t},ANe="_item_14rmg_1",ENe="_meta_14rmg_17",CNe="_thumb_14rmg_37",TNe="_dot_14rmg_71",kNe="_name_14rmg_87",ONe="_price_14rmg_103",RNe="_note_14rmg_113",MNe="_unit_14rmg_125",INe="_controls_14rmg_139",DNe="_total_14rmg_153",PNe="_remove_14rmg_165",Ts={item:ANe,meta:ENe,thumb:CNe,dot:TNe,name:kNe,price:ONe,note:RNe,unit:MNe,controls:INe,total:DNe,remove:PNe};function p5({item:e,currency:t="SEK",onChangeQuantity:n,onRemove:r,pending:i,disabled:o=!1}){const{priceDisplayMode:c,vatRate:d}=Ko(),f=e?.quantity??e?.qty??1,m=e?.discountedUnitPrice??e?.unitPrice??e?.price??0,h=e?.discountedLineTotal??e?.lineTotal??e?.total??null,g=Jn(m,d,c),v=AD(m,f,d,c),x=h!==null?Jn(h,d,c):v,w=jt(g,t),_=jt(x,t),S=Ci(c),j=e?.stock??e?.availableStock??e?.product?.stock,A=h5(e),E=i||o,C=T=>{if(T<=0){r?.();return}n?.(T)};return a.jsxs("div",{className:Ts.item,children:[a.jsxs("div",{className:Ts.meta,children:[a.jsx("div",{className:Ts.thumb,children:e?.imageUrl?a.jsx("img",{src:e.imageUrl,alt:e.name}):a.jsx("span",{className:Ts.dot})}),a.jsxs("div",{children:[a.jsx("p",{className:Ts.name,children:A}),a.jsxs("p",{className:Ts.price,children:[w," (",S,")"]}),e?.shortDescription?a.jsx("p",{className:Ts.note,children:e.shortDescription}):null,a.jsx("p",{className:Ts.unit,children:eu(t)})]})]}),a.jsxs("div",{className:Ts.controls,children:[a.jsx(Lj,{value:f,min:0,max:j??void 0,onChange:C,compact:!0,disabled:E}),a.jsx("span",{className:Ts.total,children:_}),a.jsx("button",{type:"button",className:Ts.remove,onClick:r,disabled:E,children:"Remove"})]})]})}const $Ne="_backdrop_82y07_1",LNe="_open_82y07_21",BNe="_drawer_82y07_31",UNe="_drawerOpen_82y07_69",qNe="_header_82y07_77",zNe="_kicker_82y07_93",FNe="_title_82y07_109",HNe="_close_82y07_119",VNe="_content_82y07_141",KNe="_body_82y07_155",GNe="_empty_82y07_165",WNe="_closedNotice_82y07_201",YNe="_closedAction_82y07_229",XNe="_footer_82y07_249",QNe="_summaryRow_82y07_269",ZNe="_value_82y07_293",JNe="_totalRow_82y07_305",eAe="_total_82y07_305",tAe="_checkout_82y07_325",nAe="_meta_82y07_359",zn={backdrop:$Ne,open:LNe,drawer:BNe,drawerOpen:UNe,header:qNe,kicker:zNe,title:FNe,close:HNe,content:VNe,body:KNe,empty:GNe,closedNotice:WNe,closedAction:YNe,footer:XNe,summaryRow:QNe,value:ZNe,totalRow:JNe,total:eAe,checkout:tAe,meta:nAe};function rAe({open:e,onClose:t}){const n=Gr(),{cart:r,pendingItemId:i,updateItemQuantity:o,removeItem:c,startNewCart:d}=zi(),{priceDisplayMode:f,vatRate:m}=Ko(),h=r?.totals||{},g=h.currency||r?.currency||"SEK",v=(r?.items?.length??0)>0,x=!!(r?.status&&r.status!=="OPEN"),w=e&&r?.status==="OPEN",{net:_}=O1(h),S=Jn(_,m,f),j=Jn(_,m,f),A=Jn(h.shipping??0,m,f),E=(T,O)=>{w&&o(T,O)},C=T=>{w&&c(T)};return a.jsx("div",{className:`${zn.backdrop} ${e?zn.open:""}`,children:a.jsxs("aside",{className:`${zn.drawer} ${e?zn.drawerOpen:""}`,children:[a.jsxs("div",{className:zn.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:zn.kicker,children:"Your cart"}),a.jsx("h3",{className:zn.title,children:"Review items before checkout"})]}),a.jsx("button",{type:"button",className:zn.close,onClick:t,"aria-label":"Close cart",children:""})]}),a.jsxs("div",{className:zn.content,children:[a.jsxs("div",{className:zn.body,children:[x&&a.jsxs("div",{className:zn.closedNotice,role:"status",children:[a.jsx("span",{children:"Cart expired."}),a.jsx("button",{type:"button",className:zn.closedAction,onClick:d,children:"Start new cart"})]}),v?r.items.map(T=>a.jsx(p5,{item:T,currency:g,pending:i===T.id,disabled:x,onChangeQuantity:O=>E(T.id,O),onRemove:()=>C(T.id)},T.id||T.productId)):a.jsxs("div",{className:zn.empty,children:[a.jsx("p",{children:"Cart is empty."}),a.jsx("button",{type:"button",onClick:()=>{t?.(),n("/store")},children:"Continue shopping"})]})]}),a.jsxs("div",{className:zn.footer,children:[a.jsxs("div",{className:zn.summaryRow,children:[a.jsxs("span",{children:["Subtotal (",Ci(f),")"]}),a.jsx("span",{className:zn.value,children:jt(S,g)})]}),h.shipping!==void 0&&a.jsxs("div",{className:zn.summaryRow,children:[a.jsx("span",{children:"Shipping estimate"}),a.jsx("span",{className:zn.value,children:jt(A,g)})]}),a.jsxs("div",{className:`${zn.summaryRow} ${zn.totalRow}`,children:[a.jsxs("span",{children:["Total (",Ci(f),"  ",eu(g),")"]}),a.jsx("span",{className:zn.total,children:jt(j,g)})]}),a.jsx("button",{type:"button",className:zn.checkout,onClick:()=>{t?.(),n("/store/checkout")},disabled:!v||x,children:"Go to checkout"}),a.jsxs("p",{className:zn.meta,children:["Secure checkout  Prices in SEK (",Ci(f),")"]})]})]})]})})}const aAe="_toast_1doaq_1",sAe="_dismiss_1doaq_39",iAe="_success_1doaq_55",oAe="_error_1doaq_63",lAe="_warning_1doaq_71",cAe="_info_1doaq_79",Ml={toast:aAe,dismiss:sAe,success:iAe,error:oAe,warning:lAe,info:cAe},uAe={success:Ml.success,error:Ml.error,warning:Ml.warning,info:Ml.info};function dAe({toast:e,onDismiss:t}){if(p.useEffect(()=>{if(!e)return;const r=window.setTimeout(()=>t?.(),3600);return()=>window.clearTimeout(r)},[t,e]),!e)return null;const n=uAe[e.type]||Ml.info;return a.jsxs("div",{className:`${Ml.toast} ${n}`,role:"status","aria-live":"polite",children:[a.jsx("span",{children:e.message}),a.jsx("button",{type:"button",className:Ml.dismiss,onClick:t,"aria-label":"Dismiss",children:""})]})}const fAe="_footer_52zm7_1",mAe="_line_52zm7_21",hAe="_links_52zm7_29",Hd={footer:fAe,line:mAe,links:hAe};function pAe(){return a.jsxs("footer",{className:Hd.footer,children:[a.jsx("div",{className:Hd.line,children:"HydroLeaf AB  Stockholm, Sweden"}),a.jsx("div",{className:Hd.line,children:"Hydroponically grown  Indoor controlled farming"}),a.jsxs("div",{className:Hd.links,children:[a.jsx(nt,{to:"/contact",children:"Contact"}),a.jsx("span",{"aria-hidden":"true",children:""}),a.jsx(nt,{to:"/terms",children:"Terms"}),a.jsx("span",{"aria-hidden":"true",children:""}),a.jsx(nt,{to:"/privacy",children:"Privacy"})]}),a.jsx("div",{className:Hd.line,children:" 2025 HydroLeaf AB"})]})}const yAe="_shell_57tdz_1",gAe="_main_57tdz_47",vAe="_content_57tdz_63",z0={shell:yAe,main:gAe,content:vAe};function bl(){const{isCartOpen:e,closeCart:t,toast:n,clearToast:r}=zi();return a.jsxs("div",{className:z0.shell,children:[a.jsx("main",{className:z0.main,children:a.jsx("div",{className:z0.content,children:a.jsx(_u,{})})}),a.jsx(pAe,{}),a.jsx(rAe,{open:e,onClose:t}),a.jsx(dAe,{toast:n,onDismiss:r})]})}const bAe="_card_9om9j_1",_Ae="_media_9om9j_35",xAe="_cardClickable_9om9j_83",SAe="_body_9om9j_123",wAe="_headerRow_9om9j_141",jAe="_name_9om9j_155",NAe="_badge_9om9j_173",AAe="_price_9om9j_195",EAe="_priceWrap_9om9j_205",CAe="_priceValue_9om9j_221",TAe="_priceOldInvalid_9om9j_233",kAe="_priceNewValid_9om9j_251",OAe="_tierBadge_9om9j_259",RAe="_buyFooter_9om9j_273",MAe="_variantRow_9om9j_287",IAe="_variantLabel_9om9j_303",DAe="_variantSelect_9om9j_317",PAe="_variantChips_9om9j_335",$Ae="_variantChip_9om9j_335",LAe="_variantChipActive_9om9j_373",BAe="_variantChipMuted_9om9j_395",UAe="_buySection_9om9j_403",qAe="_stock_9om9j_415",zAe="_stockMuted_9om9j_441",FAe="_actions_9om9j_453",HAe="_addButton_9om9j_469",VAe="_trustCue_9om9j_497",KAe="_maxNotice_9om9j_529",GAe="_footer_9om9j_539",WAe="_link_9om9j_557",YAe="_cardSingle_9om9j_583",on={card:bAe,media:_Ae,cardClickable:xAe,body:SAe,headerRow:wAe,name:jAe,badge:NAe,price:AAe,priceWrap:EAe,priceValue:CAe,priceOldInvalid:TAe,priceNewValid:kAe,tierBadge:OAe,buyFooter:RAe,variantRow:MAe,variantLabel:IAe,variantSelect:DAe,variantChips:PAe,variantChip:$Ae,variantChipActive:LAe,variantChipMuted:BAe,buySection:UAe,stock:qAe,stockMuted:zAe,actions:FAe,addButton:HAe,trustCue:VAe,maxNotice:KAe,footer:GAe,link:WAe,cardSingle:YAe},XAe="/assets/hydroleaf_logo-CEBuJ_th.png",QAe=e=>{if(!Array.isArray(e)||e.length===0)return"";const t=e[0];return t?typeof t=="string"?t:t.url??t.imageUrl??t.src??"":""};function eI({product:e,onAdd:t,pending:n=!1,layout:r="grid"}){const{profile:i}=Xt(),[o,c]=p.useState(1),d=Gr(),f=p.useMemo(()=>fg(e),[e]),m=p.useMemo(()=>m5(f),[f]),[h,g]=p.useState(m),[v,x]=p.useState(null),{priceDisplayMode:w,vatRate:_}=Ko(),{name:S,id:j,currency:A}=e||{},E=v,C=k1(i),T=ND({variant:v,product:e,tier:C}),O=T.defaultCents!==null?T.defaultCents/100:e?.price??0,R=T.effectiveCents!==null?T.effectiveCents/100:O,k=Jn(O,_,w),P=Jn(R,_,w),H=T.appliedTier,K=T.showTierPrice,B=v?mu(v):e?.stock,U=B!==void 0&&B<=0,I=p.useMemo(()=>B===void 0?"In stock":B<=0?"Out of stock":B<=10?`Only ${B} left`:"In stock",[B]),L=p.useMemo(()=>jt(P,A||"SEK"),[A,P]),$=Ci(w),G=p.useMemo(()=>({VIP:"VIP price",SUPPORTER:"Supporter price",B2B:"B2B price"})[H]??"",[H]),{title:te,badge:re}=p.useMemo(()=>{const he=S?String(S).trim():"";if(!he)return{title:"",badge:""};const ue=he.split(/\s*[-]\s*/);if(ue.length<=1)return{title:he,badge:""};const[Xe,...Ue]=ue;return{title:Xe.trim(),badge:Ue.join(" - ").trim()}},[S]);p.useEffect(()=>{g(he=>he&&f.some(ue=>ue.id===he)?he:m)},[m,f]),p.useEffect(()=>{x(f.find(he=>he.id===h)??f[0]??null)},[h,f]),p.useEffect(()=>{B!==void 0&&B>0&&o>B&&c(B),B!==void 0&&B<=0&&c(1)},[o,B]);const M=B!==void 0&&B>0&&o>=B,q=f.length>1,z=f.length>4,V=j?`/store/product/${encodeURIComponent(j)}`:null,Y=v?.imageUrl??v?.image?.url,Z=e?.thumbnailUrl??e?.primaryImageUrl,ee=QAe(e?.images),ie=Y||Z||ee||XAe,xe=Y?"selectedVariant.imageUrl":Z?e?.thumbnailUrl?"product.thumbnailUrl":"product.primaryImageUrl":ee?"product.images[0].url":"placeholderImage";p.useEffect(()=>{},[j,xe,ie,h]);const X=he=>{if(!V||he.defaultPrevented)return;const ue=he.target.closest('a, button, input, select, textarea, [role="button"]');ue&&ue!==he.currentTarget||d(V)},Ae=he=>{V&&(he.key!=="Enter"&&he.key!==" "||(he.preventDefault(),d(V)))};return a.jsxs("article",{className:`${on.card} ${V?on.cardClickable:""} ${r==="single"?on.cardSingle:""}`,onClick:X,onKeyDown:Ae,role:V?"button":void 0,tabIndex:V?0:void 0,"aria-label":V?`View details for ${te}`:void 0,children:[a.jsxs("div",{className:on.media,children:[a.jsx("img",{src:ie,alt:S,"data-image-source":xe,loading:"lazy"}),null]}),a.jsxs("div",{className:on.body,children:[a.jsxs("div",{className:on.headerRow,children:[a.jsxs("div",{children:[a.jsx("h3",{className:on.name,children:te}),re?a.jsx("span",{className:on.badge,children:re}):null]}),a.jsx("div",{className:on.price,children:a.jsxs("div",{className:on.priceWrap,children:[K?a.jsx("span",{className:on.priceOldInvalid,children:jt(k,A||"SEK")}):null,a.jsx("span",{className:`${on.priceValue} ${K?on.priceNewValid:""}`,children:L}),K&&G?a.jsx("span",{className:on.tierBadge,children:G}):null,a.jsx("span",{className:on.tierBadge,children:$})]})})]}),a.jsxs("div",{className:on.buyFooter,children:[q?a.jsxs("div",{className:on.variantRow,children:[a.jsx("span",{className:on.variantLabel,children:"Weight"}),z?a.jsx("select",{className:on.variantSelect,value:h??"",onChange:he=>g(he.target.value),children:f.map(he=>a.jsx("option",{value:he.id,children:kf(he)},he.id))}):a.jsx("div",{className:on.variantChips,role:"group","aria-label":"Select weight",children:f.map(he=>{const ue=kf(he),Xe=he.id===h,Ue=Bj(he);return a.jsx("button",{type:"button",className:`${on.variantChip} ${Xe?on.variantChipActive:""} ${Ue?"":on.variantChipMuted}`,onClick:()=>g(he.id),children:ue},he.id)})})]}):null,a.jsxs("div",{className:on.buySection,children:[a.jsx("span",{className:`${on.stock} ${U?on.stockMuted:""}`,children:I}),a.jsxs("div",{className:on.actions,children:[a.jsx(Lj,{value:o,min:1,max:B??void 0,onChange:c,compact:!0,disabled:n||U}),a.jsx("button",{type:"button",className:on.addButton,onClick:()=>t?.({quantity:o,variantId:E?.id}),disabled:n||U,children:n?"Adding":"Add"})]}),a.jsx("span",{className:on.trustCue,children:"Pesticide-free"}),M?a.jsxs("span",{className:on.maxNotice,children:["Max available: ",B]}):null]}),a.jsx("footer",{className:on.footer,children:V?a.jsx(nt,{to:V,className:on.link,"aria-label":`View details for ${te}`,children:"View details "}):null})]})]})]})}const ZAe="_hero_128fx_1",JAe="_overlay_128fx_33",eEe="_content_128fx_45",tEe="_kicker_128fx_65",nEe="_subtitle_128fx_93",rEe="_cta_128fx_109",_l={hero:ZAe,overlay:JAe,content:eEe,kicker:tEe,subtitle:nEe,cta:rEe},aEe=(e="")=>{if(!e)return{external:!1,href:""};if(!/^https?:\/\//i.test(e))return{external:!1,href:e};if(typeof window>"u")return{external:!0,href:e};const t=new URL(e,window.location.origin);return t.origin===window.location.origin?{external:!1,href:`${t.pathname}${t.search}${t.hash}`}:{external:!0,href:e}};function sEe({banner:e}){if(!e)return null;const t=e?.title?.trim()||"HydroLeaf Store",n=e?.subtitle?.trim()||e?.description?.trim()||"",r=e?.imageUrl?.trim()||"",i=e?.buttonText?.trim()||"",o=e?.buttonUrl?.trim()||"",c=aEe(o);return a.jsxs("section",{className:_l.hero,style:r?{"--hero-image":`url(${r})`}:void 0,"aria-label":"Store spotlight",children:[a.jsx("div",{className:_l.overlay}),a.jsxs("div",{className:_l.content,children:[a.jsx("p",{className:_l.kicker,children:"HydroLeaf Store"}),a.jsx("h1",{children:t}),n?a.jsx("p",{className:_l.subtitle,children:n}):null,i&&o?c.external?a.jsx("a",{href:c.href,target:"_blank",rel:"noreferrer",className:_l.cta,children:i}):a.jsx(nt,{to:c.href,className:_l.cta,children:i}):null]})]})}const iEe="_section_1ogyz_1",oEe="_header_1ogyz_11",lEe="_grid_1ogyz_37",cEe="_card_1ogyz_49",uEe="_image_1ogyz_67",dEe="_body_1ogyz_81",Jc={section:iEe,header:oEe,grid:lEe,card:cEe,image:uEe,body:dEe},fEe=(e="")=>{if(!e)return{external:!1,href:""};if(!/^https?:\/\//i.test(e))return{external:!1,href:e};if(typeof window>"u")return{external:!0,href:e};const t=new URL(e,window.location.origin);return t.origin===window.location.origin?{external:!1,href:`${t.pathname}${t.search}${t.hash}`}:{external:!0,href:e}};function mEe({banner:e}){const t=e?.title?.trim()||"",n=e?.description?.trim()||e?.subtitle?.trim()||"",r=e?.imageUrl?.trim()||"",i=e?.buttonText?.trim()||"",o=e?.buttonUrl?.trim()||"",c=fEe(o);return a.jsxs("article",{className:Jc.card,children:[r?a.jsx("img",{src:r,alt:t||"Banner",className:Jc.image,loading:"lazy"}):null,a.jsxs("div",{className:Jc.body,children:[t?a.jsx("h3",{children:t}):null,n?a.jsx("p",{children:n}):null,i&&o?c.external?a.jsx("a",{href:c.href,target:"_blank",rel:"noreferrer",children:i}):a.jsx(nt,{to:c.href,children:i}):null]})]})}function hEe({banners:e=[]}){return!Array.isArray(e)||e.length===0?null:a.jsxs("section",{className:Jc.section,"aria-label":"Store highlights",children:[a.jsxs("div",{className:Jc.header,children:[a.jsx("p",{children:"Highlights"}),a.jsx("h2",{children:"What's new at HydroLeaf"})]}),a.jsx("div",{className:Jc.grid,children:e.map(t=>a.jsx(mEe,{banner:t},t.id||`${t.title}-${t.position}`))})]})}const pEe="_page_pn7d2_1",yEe="_comingSoonBar_pn7d2_49",gEe="_alert_pn7d2_69",vEe="_section_pn7d2_111",bEe="_sectionHead_pn7d2_131",_Ee="_sectionKicker_pn7d2_145",xEe="_sectionNote_pn7d2_171",SEe="_controls_pn7d2_183",wEe="_note_pn7d2_205",jEe="_noteText_pn7d2_217",NEe="_filters_pn7d2_227",AEe="_field_pn7d2_243",EEe="_grid_pn7d2_283",CEe="_singleGrid_pn7d2_297",TEe="_loading_pn7d2_305",kEe="_emptyState_pn7d2_315",OEe="_emptyStateLink_pn7d2_343",On={page:pEe,comingSoonBar:yEe,alert:gEe,section:vEe,sectionHead:bEe,sectionKicker:_Ee,sectionNote:xEe,controls:SEe,note:wEe,noteText:jEe,filters:NEe,field:AEe,grid:EEe,singleGrid:CEe,loading:TEe,emptyState:kEe,emptyStateLink:OEe},REe=e=>(Array.isArray(e)?e:Array.isArray(e?.banners)?e.banners:[]).map(n=>({...n,id:n?.id??n?.bannerId??n?._id??"",type:String(n?.type??"PROMO").toUpperCase(),active:n?.active!==!1,position:Number.isFinite(Number(n?.position))?Number(n.position):0})).filter(n=>n.active).sort((n,r)=>n.position-r.position);function MEe(){const{addToCart:e,pendingProductId:t}=zi(),{priceDisplayMode:n}=Ko(),{isAuthenticated:r,isBootstrapping:i}=Xt(),[o,c]=p.useState([]),[d,f]=p.useState([]),[m,h]=p.useState(!0),[g,v]=p.useState(null),[x,w]=p.useState("name"),[_,S]=p.useState("all"),[j,A]=p.useState("all"),E=p.useMemo(()=>d.find(L=>L.type==="HERO")||null,[d]),C=p.useMemo(()=>d.filter(L=>L.type!=="HERO"),[d]),T=p.useMemo(()=>{const L=Array.isArray(o)?[...o]:[];return x==="price"?L.sort(($,G)=>Gc($)-Gc(G)):L.sort(($,G)=>($?.name||"").localeCompare(G?.name||""))},[o,x]),O=p.useMemo(()=>{const L=new Set;return T.forEach($=>{($?.tags||[]).forEach(G=>L.add(G))}),Array.from(L).sort(($,G)=>$.localeCompare(G))},[T]),R=p.useMemo(()=>T.filter(L=>{const $=q0(L),G=_==="all"||_==="inStock"&&$||_==="outOfStock"&&!$,te=j==="all"||(L?.tags||[]).includes(j);return G&&te}),[_,T,j]),k=o?.length??0,P=k===1,H=k>1,K=k>=3,B=p.useMemo(()=>R.filter(L=>q0(L)),[R]),U=p.useMemo(()=>R.filter(L=>!q0(L)),[R]),I=async()=>{h(!0),v(null);try{const[L,$]=await Promise.all([rz(),az()]),G=L?.products??L??[];c(Array.isArray(G)?G:[]),f(REe($))}catch(L){v(L?.message||"Unable to load store data.")}finally{h(!1)}};return p.useEffect(()=>{i||I()},[r,i]),a.jsxs("div",{className:On.page,children:[E?a.jsx(sEe,{banner:E}):null,C.length>0?a.jsx(hEe,{banners:C}):null,g&&a.jsxs("div",{className:On.alert,role:"alert",children:[a.jsx("span",{children:g}),a.jsx("button",{type:"button",onClick:I,children:"Retry"})]}),a.jsxs("section",{className:On.section,id:"products",children:[a.jsxs("div",{className:On.sectionHead,children:[a.jsxs("div",{children:[a.jsx("p",{className:On.sectionKicker,children:"Available now"}),a.jsx("h2",{children:"Products in stock"})]}),a.jsxs("div",{className:On.controls,children:[a.jsxs("div",{className:On.filters,children:[K?a.jsxs("div",{className:On.field,children:[a.jsx("label",{htmlFor:"availability",children:"Availability"}),a.jsxs("select",{id:"availability",value:_,onChange:L=>S(L.target.value),children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"inStock",children:"In stock"}),a.jsx("option",{value:"outOfStock",children:"Out of stock"})]})]}):null,O.length>0?a.jsxs("div",{className:On.field,children:[a.jsx("label",{htmlFor:"tag",children:"Tag"}),a.jsxs("select",{id:"tag",value:j,onChange:L=>A(L.target.value),children:[a.jsx("option",{value:"all",children:"All"}),O.map(L=>a.jsx("option",{value:L,children:L},L))]})]}):null,H?a.jsxs("div",{className:On.field,children:[a.jsx("label",{htmlFor:"sort",children:"Sort"}),a.jsxs("select",{id:"sort",value:x,onChange:L=>w(L.target.value),children:[a.jsx("option",{value:"name",children:"Name"}),a.jsx("option",{value:"price",children:"Price"})]})]}):null]}),a.jsx("div",{className:On.note,children:a.jsxs("span",{className:On.noteText,children:["Prices in SEK (",Ci(n),")  Stock updated in real time"]})})]})]}),m?a.jsx("div",{className:On.loading,children:"Loading products"}):(o?.length??0)===0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:On.comingSoonBar,role:"status","aria-live":"polite",children:"New products are coming soon  check back shortly."}),a.jsxs("div",{className:On.emptyState,children:[a.jsx("p",{children:"No products available right now."}),a.jsx(nt,{to:"/contact",className:On.emptyStateLink,children:"Contact us"})]})]}):B.length>0?a.jsx("div",{className:`${On.grid} ${P?On.singleGrid:""}`,children:B.map(L=>a.jsx(eI,{product:L,pending:t===L.id,onAdd:({quantity:$,variantId:G})=>e(G,$,L.id),layout:P?"single":"grid"},L.id))}):a.jsx("div",{className:On.emptyState,children:"No products match your filters."})]}),U.length>0&&a.jsxs("section",{className:On.section,children:[a.jsxs("div",{className:On.sectionHead,children:[a.jsxs("div",{children:[a.jsx("p",{className:On.sectionKicker,children:"Restocking"}),a.jsx("h2",{children:"More items on the way"})]}),a.jsx("p",{className:On.sectionNote,children:"We'll make these available again shortly."})]}),a.jsx("div",{className:`${On.grid} ${P?On.singleGrid:""}`,children:U.map(L=>a.jsx(eI,{product:L,pending:t===L.id,onAdd:({quantity:$,variantId:G})=>e(G,$,L.id),layout:P?"single":"grid"},L.id))})]})]})}const u1=e=>{const t=e?.name||"",n=e?.category||"";return/basil|herb/i.test(t)||/basil|herb/i.test(n)},y5=e=>{const t=e?.weight??e?.netWeight;if(t!=null&&t!=="")return typeof t=="number"?`${t}g`:String(t);const n=e?.unitLabel||e?.packSize||e?.size;return n?String(n):null},IEe=e=>{const t=y5(e),n=[];return n.push(t||"Per item"),u1(e)&&n.push("Controlled handling"),n.join("  ")},DEe=e=>{const t=y5(e),r=[`What it is: ${e?.name?e.name.trim():"Store item"}${t?`  ${t}`:""}`],i=u1(e)?"Storage: keep refrigerated at 48C.":"Storage: keep in a clean, dry place.";return r.push(i),u1(e)&&r.push("Handling: handled in a controlled environment."),r},PEe="_page_1b8r2_1",$Ee="_breadcrumbs_1b8r2_13",LEe="_current_1b8r2_37",BEe="_layout_1b8r2_47",UEe="_media_1b8r2_59",qEe="_imageButton_1b8r2_79",zEe="_placeholder_1b8r2_113",FEe="_panel_1b8r2_129",HEe="_backLink_1b8r2_149",VEe="_kicker_1b8r2_171",KEe="_title_1b8r2_185",GEe="_subtitle_1b8r2_195",WEe="_priceBlock_1b8r2_203",YEe="_priceWrap_1b8r2_217",XEe="_variantRow_1b8r2_231",QEe="_variantLabel_1b8r2_247",ZEe="_variantSelect_1b8r2_261",JEe="_variantChips_1b8r2_279",eCe="_variantChip_1b8r2_279",tCe="_variantChipActive_1b8r2_317",nCe="_variantChipMuted_1b8r2_339",rCe="_priceOldInvalid_1b8r2_349",aCe="_price_1b8r2_203",sCe="_priceNewValid_1b8r2_377",iCe="_currency_1b8r2_385",oCe="_tierBadge_1b8r2_397",lCe="_priceMeta_1b8r2_411",cCe="_badge_1b8r2_425",uCe="_badgePositive_1b8r2_439",dCe="_badgeMuted_1b8r2_451",fCe="_list_1b8r2_463",mCe="_actions_1b8r2_507",hCe="_add_1b8r2_519",pCe="_meta_1b8r2_549",yCe="_loading_1b8r2_559",gCe="_error_1b8r2_561",vCe="_modalOverlay_1b8r2_597",bCe="_modalImage_1b8r2_617",_Ce="_modalClose_1b8r2_637",Vt={page:PEe,breadcrumbs:$Ee,current:LEe,layout:BEe,media:UEe,imageButton:qEe,placeholder:zEe,panel:FEe,backLink:HEe,kicker:VEe,title:KEe,subtitle:GEe,priceBlock:WEe,priceWrap:YEe,variantRow:XEe,variantLabel:QEe,variantSelect:ZEe,variantChips:JEe,variantChip:eCe,variantChipActive:tCe,variantChipMuted:nCe,priceOldInvalid:rCe,price:aCe,priceNewValid:sCe,currency:iCe,tierBadge:oCe,priceMeta:lCe,badge:cCe,badgePositive:uCe,badgeMuted:dCe,list:fCe,actions:mCe,add:hCe,meta:pCe,loading:yCe,error:gCe,modalOverlay:vCe,modalImage:bCe,modalClose:_Ce};function xCe(){const{productId:e}=Ls(),t=Gr(),{addToCart:n,pendingProductId:r}=zi(),{profile:i,isAuthenticated:o}=Xt(),{priceDisplayMode:c,vatRate:d}=Ko(),[f,m]=p.useState(null),[h,g]=p.useState(!0),[v,x]=p.useState(null),[w,_]=p.useState(1),S=p.useMemo(()=>fg(f),[f]),j=p.useMemo(()=>m5(S),[S]),[A,E]=p.useState(j),[C,T]=p.useState(null),[O,R]=p.useState(!1);p.useEffect(()=>{let ie=!0;return(async()=>{g(!0),x(null);try{const X=await iz(e);if(!ie)return;m(X?.product??X)}catch(X){if(!ie)return;x(X?.message||"Unable to load product.")}finally{ie&&g(!1)}})(),()=>{ie=!1}},[o,e]),p.useEffect(()=>{E(ie=>ie&&S.some(xe=>xe.id===ie)?ie:j)},[j,S]),p.useEffect(()=>{T(S.find(ie=>ie.id===A)??S[0]??null)},[A,S]);const k=C?mu(C):f?.stock,P=k!==void 0&&k<=0,H=f?.currency||C?.currency||"SEK",K=k1(i),B=ND({variant:C,product:f,tier:K}),U=B.defaultCents!==null?B.defaultCents/100:f?.price??0,I=B.effectiveCents!==null?B.effectiveCents/100:U,L=Jn(U,d,c),$=Jn(I,d,c),G=B.appliedTier,te=B.showTierPrice,re=jt($,H),M=IEe(C??f),q=Ci(c),z=DEe(C??f),V=p.useMemo(()=>({VIP:"VIP price",SUPPORTER:"Supporter price",B2B:"B2B price"})[G]??"",[G]),Y=S.length>1,Z=S.length>4,ee=C?.imageUrl??f?.imageUrl;return p.useEffect(()=>{k!==void 0&&k>0&&w>k&&_(k),k!==void 0&&k<=0&&_(1)},[w,k]),p.useEffect(()=>{if(!O)return;const ie=xe=>{xe.key==="Escape"&&R(!1)};return window.addEventListener("keydown",ie),()=>{window.removeEventListener("keydown",ie)}},[O]),a.jsxs("div",{className:Vt.page,children:[a.jsxs("div",{className:Vt.breadcrumbs,children:[a.jsx(nt,{to:"/store",children:"Products"}),a.jsx("span",{children:"/"}),a.jsx("span",{className:Vt.current,children:f?.name??"Loading"})]}),h?a.jsx("div",{className:Vt.loading,children:"Loading product"}):v?a.jsxs("div",{className:Vt.error,children:[a.jsx("p",{children:v}),a.jsx("button",{type:"button",onClick:()=>t("/store"),children:"Back to products"})]}):a.jsxs("div",{className:Vt.layout,children:[a.jsx("div",{className:Vt.media,children:ee?a.jsx("button",{type:"button",className:Vt.imageButton,onClick:()=>R(!0),"aria-label":"Open product image",children:a.jsx("img",{src:ee,alt:f.name,onError:ie=>{f?.imageUrl&&ie.currentTarget.src!==f.imageUrl&&(ie.currentTarget.src=f.imageUrl)}})}):a.jsx("div",{className:Vt.placeholder,"aria-hidden":"true"})}),a.jsxs("div",{className:Vt.panel,children:[a.jsx(nt,{to:"/store",className:Vt.backLink,children:" Back to store"}),a.jsx("p",{className:Vt.kicker,children:"In the HydroLeaf store"}),a.jsx("h1",{className:Vt.title,children:f?.name}),a.jsx("p",{className:Vt.subtitle,children:"Product details"}),a.jsxs("div",{className:Vt.priceBlock,children:[a.jsxs("div",{className:Vt.priceWrap,children:[te?a.jsx("span",{className:Vt.priceOldInvalid,children:jt(L,H)}):null,a.jsx("span",{className:`${Vt.price} ${te?Vt.priceNewValid:""}`,children:re}),a.jsx("span",{className:Vt.currency,children:eu(H)}),te&&V?a.jsx("span",{className:Vt.tierBadge,children:V}):null]}),a.jsx("span",{className:Vt.priceMeta,children:te?V:`${M}  ${q}`}),k!==void 0&&a.jsx("span",{className:`${Vt.badge} ${P?Vt.badgeMuted:Vt.badgePositive}`,children:P?"Out of stock":`${k} in stock`})]}),Y?a.jsxs("div",{className:Vt.variantRow,children:[a.jsx("span",{className:Vt.variantLabel,children:"Weight"}),Z?a.jsx("select",{className:Vt.variantSelect,value:A??"",onChange:ie=>E(ie.target.value),children:S.map(ie=>a.jsx("option",{value:ie.id,children:kf(ie)},ie.id))}):a.jsx("div",{className:Vt.variantChips,role:"group","aria-label":"Select weight",children:S.map(ie=>{const xe=kf(ie),X=ie.id===A,Ae=Bj(ie);return a.jsx("button",{type:"button",className:`${Vt.variantChip} ${X?Vt.variantChipActive:""} ${Ae?"":Vt.variantChipMuted}`,onClick:()=>E(ie.id),children:xe},ie.id)})})]}):null,a.jsx("ul",{className:Vt.list,children:z.map(ie=>a.jsx("li",{children:ie},ie))}),a.jsxs("div",{className:Vt.actions,children:[a.jsx(Lj,{value:w,min:1,max:k??void 0,onChange:_,disabled:r===e||P}),a.jsx("button",{type:"button",className:Vt.add,disabled:r===e||P,onClick:()=>n(C?.id,w,f.id),children:r===e?"Adding":"Add to cart"})]}),a.jsx("p",{className:Vt.meta,children:"Shipping estimates and totals update after each cart change."})]})]}),O&&ee?a.jsxs("div",{className:Vt.modalOverlay,role:"dialog","aria-modal":"true","aria-label":"Product image preview",onClick:()=>R(!1),children:[a.jsx("button",{type:"button",className:Vt.modalClose,onClick:()=>R(!1),"aria-label":"Close image preview",children:""}),a.jsx("img",{className:Vt.modalImage,src:ee,alt:f?.name,onClick:ie=>ie.stopPropagation()})]}):null]})}const SCe="_page_1ynpy_1",wCe="_header_1ynpy_13",jCe="_kicker_1ynpy_27",NCe="_subtitle_1ynpy_41",ACe="_link_1ynpy_49",ECe="_layout_1ynpy_67",CCe="_list_1ynpy_79",TCe="_summary_1ynpy_95",kCe="_row_1ynpy_113",OCe="_total_1ynpy_125",RCe="_cta_1ynpy_137",MCe="_closedNotice_1ynpy_171",ICe="_closedAction_1ynpy_199",DCe="_empty_1ynpy_219",PCe="_primary_1ynpy_237",sr={page:SCe,header:wCe,kicker:jCe,subtitle:NCe,link:ACe,layout:ECe,list:CCe,summary:TCe,row:kCe,total:OCe,cta:RCe,closedNotice:MCe,closedAction:ICe,empty:DCe,primary:PCe};function $Ce(){const e=Gr(),{cart:t,pendingItemId:n,updateItemQuantity:r,removeItem:i,startNewCart:o}=zi(),{customerType:c,priceDisplayMode:d,vatRate:f}=Ko(),m=t?.totals||{},h=m.currency||t?.currency||"SEK",g=(t?.items?.length??0)>0,v=!!(t?.status&&t.status!=="OPEN"),x=O1(m),w=x.vat,_=x.net,S=c==="B2B",j=Ci(d),A=Jn(_,f,d),E=Jn(m.shipping??0,f,d);return a.jsxs("div",{className:sr.page,children:[a.jsxs("header",{className:sr.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:sr.kicker,children:"Cart"}),a.jsx("h1",{children:"Your items"}),a.jsx("p",{className:sr.subtitle,children:"Quantities and totals update automatically."})]}),a.jsx(nt,{to:"/store",className:sr.link,children:"Continue shopping"})]}),g?a.jsxs("div",{className:sr.layout,children:[a.jsxs("div",{className:sr.list,children:[v&&a.jsxs("div",{className:sr.closedNotice,role:"status",children:[a.jsx("span",{children:"Cart expired."}),a.jsx("button",{type:"button",className:sr.closedAction,onClick:o,children:"Start new cart"})]}),t.items.map(C=>a.jsx(p5,{item:C,currency:h,pending:n===C.id,disabled:v,onChangeQuantity:T=>r(C.id,T),onRemove:()=>i(C.id)},C.id||C.productId))]}),a.jsxs("aside",{className:sr.summary,children:[a.jsx("h3",{children:"Order summary"}),a.jsxs("div",{className:sr.row,children:[a.jsx("span",{children:S?"Netto (exkl. moms)":"Delsumma (inkl. moms)"}),a.jsx("span",{children:jt(Jn(_,f,d),h)})]}),m.shipping!==void 0&&a.jsxs("div",{className:sr.row,children:[a.jsx("span",{children:"Frakt"}),a.jsx("span",{children:jt(E,h)})]}),S?a.jsxs("div",{className:sr.row,children:[a.jsx("span",{children:"Moms"}),a.jsx("span",{children:jt(w,h)})]}):null,a.jsxs("div",{className:`${sr.row} ${sr.total}`,children:[a.jsxs("span",{children:["Att betala (",j,"  ",eu(h),")"]}),a.jsx("span",{children:jt(A,h)})]}),a.jsx("button",{type:"button",className:sr.cta,onClick:()=>{e("/store/checkout")},disabled:!g||v,children:"Proceed to checkout"})]})]}):a.jsxs("div",{className:sr.empty,children:[v&&a.jsxs("div",{className:sr.closedNotice,role:"status",children:[a.jsx("span",{children:"Cart expired."}),a.jsx("button",{type:"button",className:sr.closedAction,onClick:o,children:"Start new cart"})]}),a.jsx("p",{children:"Cart is empty."}),a.jsx(nt,{to:"/store",className:sr.primary,children:"Browse products"})]})]})}const LCe="_page_1o9i5_1",BCe="_header_1o9i5_13",UCe="_kicker_1o9i5_27",qCe="_subtitle_1o9i5_41",zCe="_link_1o9i5_51",FCe="_layout_1o9i5_69",HCe="_form_1o9i5_81",VCe="_card_1o9i5_91",KCe="_cardTitle_1o9i5_111",GCe="_companyPanel_1o9i5_121",WCe="_fieldGroup_1o9i5_129",YCe="_radioOption_1o9i5_169",XCe="_subsectionTitle_1o9i5_181",QCe="_guestIntro_1o9i5_201",ZCe="_guestTitle_1o9i5_219",JCe="_guestSubtitle_1o9i5_229",eTe="_guestLink_1o9i5_241",tTe="_accountNote_1o9i5_289",nTe="_logoutLink_1o9i5_313",rTe="_addressCard_1o9i5_333",aTe="_addressTitle_1o9i5_351",sTe="_addressLine_1o9i5_363",iTe="_addressActions_1o9i5_373",oTe="_addressToggle_1o9i5_383",lTe="_customerTypeFieldset_1o9i5_409",cTe="_companyLoginPrompt_1o9i5_453",uTe="_infoBox_1o9i5_489",dTe="_mutedInfo_1o9i5_517",fTe="_couponRow_1o9i5_527",mTe="_applyCoupon_1o9i5_539",hTe="_badge_1o9i5_569",pTe="_checkboxRow_1o9i5_593",yTe="_submit_1o9i5_609",gTe="_stickyCta_1o9i5_629",vTe="_submitContent_1o9i5_641",bTe="_spinner_1o9i5_653",_Te="_error_1o9i5_693",xTe="_status_1o9i5_709",STe="_summary_1o9i5_725",wTe="_items_1o9i5_743",jTe="_item_1o9i5_743",NTe="_itemName_1o9i5_765",ATe="_itemMeta_1o9i5_775",ETe="_row_1o9i5_785",CTe="_pickupNote_1o9i5_797",TTe="_total_1o9i5_807",kTe="_divider_1o9i5_819",OTe="_empty_1o9i5_829",RTe="_primary_1o9i5_847",He={page:LCe,header:BCe,kicker:UCe,subtitle:qCe,link:zCe,layout:FCe,form:HCe,card:VCe,cardTitle:KCe,companyPanel:GCe,fieldGroup:WCe,radioOption:YCe,subsectionTitle:XCe,guestIntro:QCe,guestTitle:ZCe,guestSubtitle:JCe,guestLink:eTe,accountNote:tTe,logoutLink:nTe,addressCard:rTe,addressTitle:aTe,addressLine:sTe,addressActions:iTe,addressToggle:oTe,customerTypeFieldset:lTe,companyLoginPrompt:cTe,infoBox:uTe,mutedInfo:dTe,couponRow:fTe,applyCoupon:mTe,badge:hTe,checkboxRow:pTe,submit:yTe,stickyCta:gTe,submitContent:vTe,spinner:bTe,error:_Te,status:xTe,summary:STe,items:wTe,item:jTe,itemName:NTe,itemMeta:ATe,row:ETe,pickupNote:CTe,total:TTe,divider:kTe,empty:OTe,primary:RTe},MTe={email:"",fullName:"",phone:"",notes:"",customerType:"B2C",companyName:"",orgNumber:"",vatNumber:"",invoiceEmail:"",addressLine1:"",addressLine2:"",postalCode:"",city:"",state:"",country:"SE"},ITe=e=>{const t=e?.user??e??{},n=t?.company??t?.business??t?.organization??{},r=t.email??t.username??"",i=t.fullName??t.name??t.displayName??"",o=t.phone??t.phoneNumber??"",c=t?.companyName??n?.name??"",d=t?.orgNumber??t?.organizationNumber??n?.orgNumber??n?.organizationNumber??"",f=t?.vatNumber??n?.vatNumber??"",m=t?.invoiceEmail??n?.invoiceEmail??"";return{email:r,fullName:i,phone:o,companyName:c,orgNumber:d,vatNumber:f,invoiceEmail:m}},DTe=e=>({fullName:e.fullName?.trim()||null,street1:e.addressLine1?.trim()||"",street2:e.addressLine2?.trim()||null,postalCode:e.postalCode?.trim()||"",city:e.city?.trim()||"",region:e.state?.trim()||null,countryCode:(e.country||"").trim().length===2?e.country.trim().toUpperCase():"",phoneNumber:e.phone?.trim()||null}),PTe=e=>{const t=e?.status;return t===401||t===403?"Please sign in again.":t===409?"Cart changed, refresh cart.":t===422?e?.message||"Invalid cart.":t>=500?"Checkout unavailable, try again later.":e?.message||"Checkout failed. Please try again."},$Te=e=>{const t=e?.payload??{},n=Array.isArray(t?.errors)?t.errors:[],r=`${t?.code??t?.errorCode??t?.error?.code??""}`.trim().toUpperCase(),i=`${n[0]?.code??n[0]?.errorCode??""}`.trim().toUpperCase(),o=r||i,c=`${t?.message??t?.error?.message??""}`.trim(),d=`${n[0]?.message??n[0]?.msg??n[0]?.detail??""}`.trim(),f=c||d;return(e?.status===401||e?.status===403)&&o==="COUPON_LOGIN_REQUIRED"?"Please log in to use your coupon":f||(o==="COUPON_EXPIRED"?"Coupon expired":o==="COUPON_ALREADY_REDEEMED"?"Coupon already redeemed":o==="COUPON_NOT_APPLICABLE"?"Coupon not applicable to this product":o==="COUPON_NOT_ACTIVE"?"Coupon not active":o||"Invalid coupon code")},LTe=(e,t={})=>{if(!e)return null;const n=uf(e,t);if(n?.totals||Array.isArray(n?.items))return n;const r=e?.cart??e?.data?.cart??e?.result?.cart??e?.checkout?.cart??null;return uf(r,t)},BTe=e=>{const t=typeof e?.payload=="string"?e.payload:e?.payload?.message;console.error("Checkout session creation failed.",{status:e?.status,message:e?.message,payloadMessage:t})};function UTe(){const e=Gr(),{cart:t,cartId:n,sessionId:r,notify:i,refreshCart:o}=zi(),{isAuthenticated:c,token:d,logout:f,profile:m}=Xt(),{customerType:h,priceDisplayMode:g,vatRate:v,setCustomerType:x,setCompanyProfile:w}=Ko(),_=gy(),[S,j]=p.useState(MTe),[A,E]=p.useState(!1),[C,T]=p.useState(null),[O,R]=p.useState(""),[k,P]=p.useState(null),[H,K]=p.useState(!1),[B,U]=p.useState([]),[I,L]=p.useState(null),[$,G]=p.useState("new"),[te,re]=p.useState(!1),[M,q]=p.useState(null),[z,V]=p.useState(!0),[Y,Z]=p.useState(""),[ee,ie]=p.useState("idle"),[xe,X]=p.useState(!1),[Ae,he]=p.useState(""),[ue,Xe]=p.useState(""),[Ue,ye]=p.useState(null),[je,Ee]=p.useState("PAY_NOW"),qe=p.useRef(!1),W=Ue||t,fe=p.useMemo(()=>W?.totals??{},[W?.totals]),we=fe.currency||W?.currency||"SEK",de=(W?.items?.length??0)>0,ve=p.useMemo(()=>W?.items??[],[W?.items]),se=k?.email||"",Re=c?se:S.email,Je=mf(m),le=S.customerType==="B2B",Oe=h==="B2B"||le||Je,Le=S.companyName.trim(),ne=S.orgNumber.trim(),Se=p.useMemo(()=>le&&ne?kD(ne):null,[le,ne]),Ge=Se?.normalized??R1(ne),vt=S.invoiceEmail.trim(),Ne=k1(m)!=="DEFAULT",We=ee==="loading",ze=le&&!c,lt=de&&!A&&!We&&!xe&&(!c||!!Re)&&!ze&&(!le||!!Le&&!!ne&&(Se?.isValid??!1)),Bt=p.useMemo(()=>B.find(Be=>String(Be.id)===String(I)),[B,I]),Qt=p.useMemo(()=>JSON.stringify((t?.items||[]).map(Be=>({id:Be.id||Be.productId||Be.variantId,quantity:Be.quantity??Be.qty??1}))),[t?.items]),kn=we,Ir=fe.discount??0,xs=fe.shipping??0,Dr=p.useMemo(()=>O1(fe),[fe]),er=Dr.vat,rn=Dr.net,Us=Jn(rn,v,g),Ss=rn,ai=Jn(xs,v,g),Yr=Jn(Ir,v,g),Fn=er,An=Jn(rn,v,"INKL_MOMS"),za=Ci(g),ba=Oe&&er<=0,_a=ba?Us:An,Ce=je==="INVOICE_PAY_LATER"?`Place order & receive invoice  ${jt(_a,kn)}`:`Proceed to payment  ${jt(_a,kn)}`,et=p.useMemo(()=>{const Be=W?.invoice??W?.checkout?.invoice??{},Ot=W?.invoicePayLaterEligible??W?.canPayByInvoice??Be?.eligible,Lt=W?.invoicePayLaterMessage??W?.invoiceEligibilityMessage??Be?.message,an=typeof Ot=="boolean"?Ot:Oe;return{enabled:an,reason:an?"":Lt||"Invoice is available only for approved business customers."}},[W,Oe]);p.useEffect(()=>{je==="INVOICE_PAY_LATER"&&!et.enabled&&Ee("PAY_NOW")},[et.enabled,je]),p.useEffect(()=>{Je&&j(Be=>Be.customerType==="B2B"?Be:{...Be,customerType:"B2B"})},[Je]),p.useEffect(()=>{j(Be=>Be.customerType===h?Be:{...Be,customerType:h})},[h]);const Mt=p.useCallback(Be=>{Be&&j(Ot=>({...Ot,fullName:Ot.fullName||Be.fullName,phone:Ot.phone||Be.phone,addressLine1:Be.line1||"",addressLine2:Be.line2||"",postalCode:Be.postalCode||"",city:Be.city||"",state:Be.state||"",country:Be.country||Ot.country||"SE"}))},[]),$t=p.useCallback(()=>{j(Be=>({...Be,addressLine1:"",addressLine2:"",postalCode:"",city:"",state:"",country:Be.country||"SE"}))},[]);p.useEffect(()=>{if(!c||!d){P(null);return}const Be=new AbortController;return K(!0),hD(d,{signal:Be.signal,onUnauthorized:_}).then(Ot=>{if(!Ot)return;const Lt=ITe(Ot);P(Lt),j(an=>({...an,fullName:an.fullName||Lt.fullName,phone:an.phone||Lt.phone,companyName:an.companyName||Lt.companyName||"",orgNumber:an.orgNumber||Lt.orgNumber||"",vatNumber:an.vatNumber||Lt.vatNumber||"",invoiceEmail:an.invoiceEmail||Lt.invoiceEmail||""}))}).catch(Ot=>{Ot?.name!=="AbortError"&&T(Ot?.message||"Unable to load your account details.")}).finally(()=>K(!1)),()=>Be.abort()},[c,_,d]),p.useEffect(()=>{if(!c||!d){U([]),L(null),G("new"),q(null),re(!1);return}const Be=new AbortController;return re(!0),q(null),A1(d,{signal:Be.signal,onUnauthorized:_}).then(Ot=>{if(Ot===null)return;const Lt=C1(Ot).map(fp);if(U(Lt),Lt.length===0){L(null),G("new"),$t();return}const an=Lt.length===1?Lt[0]:Lt.find(Wn=>Wn.isDefault)||Lt[0];L(an.id),G("saved"),Mt(an)}).catch(Ot=>{Ot?.name!=="AbortError"&&(Ot?.isUnsupported?q("Address book is not enabled yet."):q(Ot?.message||"Unable to load addresses."),U([]),L(null),G("new"))}).finally(()=>re(!1)),()=>Be.abort()},[Mt,$t,c,_,d]);const At=Be=>{const{name:Ot,value:Lt}=Be.target;if(j(an=>({...an,[Ot]:Lt})),Ot==="customerType"){x(Lt,{persistProfile:c});return}["companyName","orgNumber","vatNumber","invoiceEmail"].includes(Ot)&&w({[Ot]:Lt},{persistProfile:!1})},Jt=Be=>{const Ot=Be.target.value;L(Ot),G("saved");const Lt=B.find(an=>String(an.id)===String(Ot));Lt&&Mt(Lt)},pr=()=>{G("new"),$t()},nn=()=>{const Be=Bt||B[0];Be&&(L(Be.id),Mt(Be)),G("saved")},vn=p.useCallback(()=>{ye(null),Z(""),Xe(""),ie("idle"),he("")},[]);p.useEffect(()=>{vn()},[Qt,vn]);const xa=async()=>{const Be=Y.trim();if(!(!Be||!n||We||xe)){ie("loading"),he(""),X(!0);try{let Ot=null;try{Ot=await fz(d,{cartId:n,sessionId:r,couponCode:Be})}catch(Wn){if(Wn?.status!==404&&Wn?.status!==405)throw Wn}const Lt={cartId:n,sessionId:r};let an=LTe(Ot,Lt);if(!an){const Wn=await yD(n,r);an=uf(Wn,Lt)}if(!an)throw new Error("Failed to refresh cart totals after applying coupon.");ye(an),Xe(Be),ie("success"),he("Coupon applied"),o().catch(()=>{})}catch(Ot){ie("error"),he($Te(Ot))}finally{X(!1)}}},Fa=async Be=>{if(Be.preventDefault(),!qe.current){if(qe.current=!0,E(!0),T(null),R(""),!Re){T("Please provide an email address to continue."),E(!1),qe.current=!1;return}if(!de){T("Your cart is empty."),E(!1),qe.current=!1;return}if(le&&(!Le||!ne)){T("Company name and org number are required for company checkout."),E(!1),qe.current=!1;return}if(ze){T("Please log in to buy as a company."),E(!1),qe.current=!1;return}if(le&&!Se?.isValid){T(Se?.message||"Please enter a valid organization number."),E(!1),qe.current=!1;return}try{if(c&&d&&$==="new"&&z)try{const Wn=B.length===0,Qr=DTe(S),Sa=await SD(d,Qr,{onUnauthorized:_});if(Sa){const In=fp(Sa);if(In?.id&&(Wn&&(In.isDefault=!0),U(Q=>[...Q,In]),L(In.id),G("saved"),Wn))try{await wD(d,In.id,{onUnauthorized:_}),U(Q=>Q.map(_e=>({..._e,isDefault:String(_e.id)===String(In.id)})))}catch(Q){Q?.isUnsupported?q("Address book is not enabled yet."):q(Q?.message||"Unable to set a default address.")}}}catch(Wn){Wn?.isUnsupported?q("Address book is not enabled yet."):q(Wn?.message||"Unable to save your address.")}const Ot={name:S.fullName?.trim()||"",phone:S.phone?.trim()||"",addressLine1:S.addressLine1?.trim()||"",addressLine2:S.addressLine2?.trim()||"",postalCode:S.postalCode?.trim()||"",city:S.city?.trim()||"",state:S.state?.trim()||"",country:(S.country||"SE").trim()},Lt=le?{companyName:Le,orgNumber:Ge||ne,vatNumber:S.vatNumber.trim()||void 0,invoiceEmail:vt||Re}:void 0;if(await x(le?"B2B":"B2C",{persistProfile:c,companyProfile:Lt}),Lt&&await w(Lt,{persistProfile:c}),je==="INVOICE_PAY_LATER"){i("info","Placing invoice order"),R("Submitting invoice order");const Wn=await dz(n,{cartId:n,sessionId:r,email:Re,shippingAddress:Ot,couponCode:Ne?void 0:ue||void 0,customerType:le?"B2B":"B2C",company:Lt,paymentMode:"INVOICE_PAY_LATER"}),Qr=Wn?.order??Wn,Sa=Wn?.orderId??Qr?.id??Qr?.orderId;if(!Sa)throw new Error("Invoice checkout did not return an order ID.");const In=new URLSearchParams({order_id:String(Sa),payment_mode:"INVOICE_PAY_LATER"});r&&In.set("session_id",String(r));const Q=Qr?.invoiceNumber??Qr?.invoice?.number,_e=Qr?.invoiceDueDate??Qr?.invoice?.dueDate;Q&&In.set("invoice_number",String(Q)),_e&&In.set("invoice_due_date",String(_e)),i("success","Order placed. Invoice issued."),e(`/store/checkout/success?${In.toString()}`);return}i("info","Starting Stripe Checkout"),R("Requesting Stripe Checkout");const an=await mz(d,{cartId:n,sessionId:r,email:Re,shippingAddress:Ot,couponCode:Ne?void 0:ue||void 0,customerType:le?"B2B":"B2C",company:Lt,paymentMode:"PAY_NOW"});if(R("Redirecting to Stripe Checkout"),i("success","Checkout session created. Redirecting"),an?.checkoutUrl){window.location.assign(an.checkoutUrl);return}throw new Error("Checkout session did not return a Stripe URL.")}catch(Ot){BTe(Ot);const Lt=PTe(Ot);T(Lt),i("error",Lt)}finally{E(!1),R(""),qe.current=!1}}},Xr=()=>{const Be=`${window.location.pathname}${window.location.search}`;_(Be)};return a.jsxs("div",{className:He.page,children:[a.jsxs("header",{className:He.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:He.kicker,children:"Checkout"}),a.jsx("h1",{children:"Confirm your order"}),a.jsx("p",{className:He.subtitle,children:"Share your contact details for local pickup in Stockholm."})]}),a.jsx(nt,{to:"/store/cart",className:He.link,children:"View cart"})]}),de?a.jsxs("div",{className:He.layout,children:[a.jsxs("form",{className:He.form,onSubmit:Fa,children:[a.jsxs("section",{className:He.card,children:[a.jsx("h2",{className:He.cardTitle,children:"Contact"}),c?a.jsxs("div",{className:He.accountNote,children:[a.jsxs("span",{children:["Signed in as ",se||"your account"]}),a.jsx("button",{type:"button",className:He.logoutLink,onClick:()=>f({redirect:!1}),children:"Log out"})]}):a.jsxs("div",{className:He.guestIntro,children:[a.jsx("h3",{className:He.guestTitle,children:"Checkout as guest"}),a.jsx("p",{className:He.guestSubtitle,children:"No account needed. Enter your email to receive order updates."}),a.jsx(nt,{className:He.guestLink,to:"/login?next=/store/checkout",children:"Have an account? Log in"})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:Re,onChange:At,readOnly:c})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"fullName",children:"Full name"}),a.jsx("input",{id:"fullName",name:"fullName",type:"text",required:!0,value:S.fullName,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"phone",children:"Phone"}),a.jsx("input",{id:"phone",name:"phone",type:"tel",value:S.phone,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{children:"Purchase type"}),a.jsxs("fieldset",{className:He.customerTypeFieldset,children:[a.jsxs("label",{className:He.radioOption,htmlFor:"customerType-b2c",children:[a.jsx("input",{id:"customerType-b2c",type:"radio",name:"customerType",value:"B2C",checked:S.customerType==="B2C",onChange:At}),"Private (B2C)"]}),a.jsxs("label",{className:He.radioOption,htmlFor:"customerType-b2b",children:[a.jsx("input",{id:"customerType-b2b",type:"radio",name:"customerType",value:"B2B",checked:S.customerType==="B2B",onChange:At}),"Company / Restaurant (B2B)"]})]}),ze?a.jsxs("div",{className:He.companyLoginPrompt,role:"status",children:[a.jsx("p",{children:"Please log in to buy as a company."}),a.jsx("button",{type:"button",className:He.guestLink,onClick:Xr,children:"Log in and continue"})]}):null]})]}),a.jsxs("section",{className:He.card,children:[a.jsx("h2",{className:He.cardTitle,children:"Delivery"}),c?a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"saved-address",children:"Saved address"}),te?a.jsx("p",{children:"Loading saved addresses"}):null,M?a.jsx("p",{className:He.error,role:"alert",children:M}):null,!te&&B.length===0?a.jsx("p",{children:"Add a new address below to save time next time."}):null,!te&&B.length===1?a.jsxs("div",{className:He.addressCard,children:[a.jsx("p",{className:He.addressTitle,children:B[0].label||"Default address"}),a.jsx("p",{className:He.addressLine,children:df(B[0])})]}):null,!te&&B.length>1?a.jsx("select",{id:"saved-address",name:"saved-address",value:I??"",onChange:Jt,children:B.map(Be=>a.jsx("option",{value:Be.id,children:Be.label||df(Be)||"Saved address"},Be.id))}):null,!te&&B.length>0?a.jsx("div",{className:He.addressActions,children:$==="saved"?a.jsx("button",{type:"button",className:He.addressToggle,onClick:pr,children:"Use a different address"}):a.jsx("button",{type:"button",className:He.addressToggle,onClick:nn,children:"Use saved address"})}):null]}):null,!c||$==="new"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"addressLine1",children:"Address line 1"}),a.jsx("input",{id:"addressLine1",name:"addressLine1",type:"text",required:!0,value:S.addressLine1,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"addressLine2",children:"Address line 2 (optional)"}),a.jsx("input",{id:"addressLine2",name:"addressLine2",type:"text",value:S.addressLine2,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"postalCode",children:"Postal code"}),a.jsx("input",{id:"postalCode",name:"postalCode",type:"text",required:!0,value:S.postalCode,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"city",children:"City"}),a.jsx("input",{id:"city",name:"city",type:"text",required:!0,value:S.city,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"country",children:"Country (ISO code)"}),a.jsx("input",{id:"country",name:"country",type:"text",required:!0,maxLength:2,value:S.country,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"state",children:"State/Region (optional)"}),a.jsx("input",{id:"state",name:"state",type:"text",value:S.state,onChange:At})]}),c?a.jsxs("label",{className:He.checkboxRow,htmlFor:"saveAddress",children:[a.jsx("input",{id:"saveAddress",name:"saveAddress",type:"checkbox",checked:z,onChange:Be=>V(Be.target.checked)}),"Save this address"]}):null]}):null]}),Oe?a.jsxs("section",{className:`${He.card} ${He.companyPanel}`,children:[a.jsx("h2",{className:He.cardTitle,children:"Business purchase"}),a.jsxs("div",{className:He.infoBox,children:[a.jsx("p",{children:"Company invoice details will be included on your invoice."}),a.jsx("p",{className:He.mutedInfo,children:"Please make sure company data and invoice email are correct before placing your order."})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"companyName",children:"Company name"}),a.jsx("input",{id:"companyName",name:"companyName",type:"text",required:Oe,value:S.companyName,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"orgNumber",children:"Organization number"}),a.jsx("input",{id:"orgNumber",name:"orgNumber",type:"text",required:Oe,value:S.orgNumber,inputMode:"numeric",placeholder:"556677-8899",onChange:At}),le&&ne&&!Se?.isValid?a.jsx("p",{className:He.error,role:"alert",children:Se?.message}):null]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"vatNumber",children:"VAT number (optional)"}),a.jsx("input",{id:"vatNumber",name:"vatNumber",type:"text",value:S.vatNumber,onChange:At})]}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"invoiceEmail",children:"Invoice email (optional)"}),a.jsx("input",{id:"invoiceEmail",name:"invoiceEmail",type:"email",value:S.invoiceEmail,placeholder:Re||"Defaults to contact email",onChange:At,onBlur:()=>{!S.invoiceEmail.trim()&&Re&&j(Be=>({...Be,invoiceEmail:Re}))}})]}),a.jsx("div",{className:He.divider}),a.jsx("h3",{className:He.subsectionTitle,children:"Payment timing"}),a.jsxs("fieldset",{className:He.customerTypeFieldset,children:[a.jsxs("label",{className:He.radioOption,children:[a.jsx("input",{type:"radio",name:"paymentMode",value:"PAY_NOW",checked:je==="PAY_NOW",onChange:()=>Ee("PAY_NOW")}),"Pay now"]}),a.jsxs("label",{className:He.radioOption,children:[a.jsx("input",{type:"radio",name:"paymentMode",value:"INVOICE_PAY_LATER",checked:je==="INVOICE_PAY_LATER",onChange:()=>Ee("INVOICE_PAY_LATER"),disabled:!et.enabled}),"Invoice (pay later)"]})]}),je==="INVOICE_PAY_LATER"?a.jsxs("div",{className:He.infoBox,children:[a.jsx("p",{children:"You'll receive an invoice and pay later."}),a.jsx("p",{children:"Only for approved business customers."}),a.jsx("p",{className:He.mutedInfo,children:"Typical terms: 14 days."})]}):null,et.enabled?null:a.jsx("p",{className:He.error,children:et.reason})]}):null,a.jsxs("section",{className:He.card,children:[a.jsx("h2",{className:He.cardTitle,children:"Coupon"}),Ne?a.jsx("span",{className:He.badge,children:"Supporter price applied"}):a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"couponCode",children:"Coupon code"}),a.jsxs("div",{className:He.couponRow,children:[a.jsx("input",{id:"couponCode",name:"couponCode",type:"text",value:Y,onChange:Be=>{Z(Be.target.value),Xe(""),ye(null),ie("idle"),he("")},placeholder:"Enter coupon"}),a.jsx("button",{type:"button",className:He.applyCoupon,onClick:xa,disabled:We||xe||!Y.trim()||!n,children:We||xe?"Applying":"Apply"})]}),ee==="success"&&Ae?a.jsx("p",{className:He.status,children:Ae}):null,ee==="error"&&Ae?a.jsx("p",{className:He.error,children:Ae}):null]})]}),a.jsxs("section",{className:He.card,children:[a.jsx("h2",{className:He.cardTitle,children:"Notes"}),a.jsxs("div",{className:He.fieldGroup,children:[a.jsx("label",{htmlFor:"notes",children:"Notes"}),a.jsx("textarea",{id:"notes",name:"notes",value:S.notes,onChange:At,rows:3})]})]}),C?a.jsx("p",{className:He.error,children:C}):null,O?a.jsx("p",{className:He.status,children:O}):null,a.jsx("button",{type:"submit",className:`${He.submit} ${He.stickyCta}`,disabled:!lt||H,children:A?a.jsxs("span",{className:He.submitContent,children:[a.jsx("span",{className:He.spinner,"aria-hidden":"true"}),a.jsx("span",{children:je==="INVOICE_PAY_LATER"?"Placing invoice order":"Starting checkout"})]}):Ce})]}),a.jsxs("aside",{className:He.summary,children:[a.jsx("h3",{children:"Order summary"}),a.jsx("div",{className:He.items,children:ve.map(Be=>a.jsxs("div",{className:He.item,children:[a.jsxs("div",{children:[a.jsx("p",{className:He.itemName,children:h5(Be)}),a.jsxs("p",{className:He.itemMeta,children:[Be.quantity??Be.qty??1,"  ",jt(Jn(Be.discountedUnitPrice??Be.price??Be.unitPrice??0,v,g),we)]})]}),a.jsx("span",{children:jt(Be.discountedLineTotal!==void 0&&Be.discountedLineTotal!==null?Jn(Be.discountedLineTotal,v,g):Be.total!==void 0&&Be.total!==null?Jn(Be.total,v,g):Be.lineTotal!==void 0&&Be.lineTotal!==null?Jn(Be.lineTotal,v,g):AD(Be.discountedUnitPrice??Be.price??Be.unitPrice??0,Be.quantity??Be.qty??1,v,g),we)})]},Be.id||Be.productId))}),a.jsxs("p",{className:He.mutedInfo,children:["Price mode: ",za,"."]}),a.jsxs("div",{className:He.row,children:[a.jsx("span",{children:"Net subtotal (excl. VAT)"}),a.jsx("span",{children:jt(Ss,kn)})]}),Ir>0?a.jsxs("div",{className:He.row,children:[a.jsx("span",{children:Ne?"You saved":"Discount"}),a.jsxs("span",{children:["-",jt(Yr,kn)]})]}):null,a.jsxs("div",{className:He.row,children:[a.jsx("span",{children:"Shipping/Pickup fee"}),a.jsx("span",{children:jt(ai,kn)})]}),a.jsxs("div",{className:He.row,children:[a.jsxs("span",{children:["VAT",ba?a.jsx("span",{className:He.mutedInfo,children:"  VAT will be calculated on invoice"}):null]}),a.jsx("span",{children:jt(Fn,kn)})]}),a.jsxs("div",{className:He.row,children:[a.jsx("span",{children:"Gross total (incl. VAT)"}),a.jsx("span",{children:jt(An,kn)})]}),a.jsx("div",{className:He.pickupNote,children:je==="INVOICE_PAY_LATER"?"Pickup confirmation is shared by email with your invoice details.":"Pickup confirmed after payment. We'll email the details."}),a.jsx("div",{className:He.divider}),a.jsxs("div",{className:`${He.row} ${He.total}`,children:[a.jsx("span",{children:ba?`Att betala (exkl. moms  ${eu(kn)})`:`Att betala (inkl. moms  ${eu(kn)})`}),a.jsx("span",{children:jt(_a,kn)})]})]})]}):a.jsxs("div",{className:He.empty,children:[a.jsx("p",{children:"Your cart is empty."}),a.jsx(nt,{to:"/store",className:He.primary,children:"Browse products"})]})]})}const qTe="_page_1aym0_1",zTe="_card_1aym0_17",FTe="_kicker_1aym0_35",HTe="_title_1aym0_51",VTe="_subtitle_1aym0_63",KTe="_statusCard_1aym0_75",GTe="_statusRow_1aym0_91",WTe="_statusLabel_1aym0_107",YTe="_statusValue_1aym0_117",XTe="_statusMessage_1aym0_127",QTe="_errorMessage_1aym0_137",ZTe="_actions_1aym0_149",JTe="_primary_1aym0_161",eke="_secondary_1aym0_179",tke="_retryButton_1aym0_197",nke="_paymentDetailsCard_1aym0_219",rke="_paymentDetailsTitle_1aym0_235",ake="_statusValueWithAction_1aym0_247",ske="_copyButton_1aym0_263",xt={page:qTe,card:zTe,kicker:FTe,title:HTe,subtitle:VTe,statusCard:KTe,statusRow:GTe,statusLabel:WTe,statusValue:YTe,statusMessage:XTe,errorMessage:QTe,actions:ZTe,primary:JTe,secondary:eke,retryButton:tke,paymentDetailsCard:nke,paymentDetailsTitle:rke,statusValueWithAction:ake,copyButton:ske};function ike(){return a.jsx("div",{className:xt.page,children:a.jsxs("div",{className:xt.card,children:[a.jsx("p",{className:xt.kicker,children:"Payment cancelled"}),a.jsx("h1",{className:xt.title,children:"Payment cancelled"}),a.jsx("p",{className:xt.subtitle,children:"Your payment was cancelled. You can return to your cart to try again whenever you are ready."}),a.jsxs("div",{className:xt.actions,children:[a.jsx(nt,{to:"/store/cart",className:xt.primary,children:"Return to cart"}),a.jsx(nt,{to:"/store",className:xt.secondary,children:"Continue shopping"})]})]})})}const tI=e=>e?.paymentStatus??e?.status??e?.state??e?.payment_state??"Unknown",nI=e=>{if(!e)return!1;const t=`${e}`.toLowerCase();return["paid","confirmed","succeeded","complete","completed"].includes(t)},rI=e=>{if(!e)return!1;const t=`${e}`.toLowerCase();return["failed","canceled","cancelled"].includes(t)},oke=e=>{if(!e)return!0;const t=`${e}`.toLowerCase();return["pending","processing","requires_payment_method","requires_action","unpaid","open"].includes(t)},lke=2e3,aI=6e4,cke=3,uke=1e4,dke=e=>{const t=e?.retryAfter??e?.retry_after??e?.pollAfterMs??e?.poll_after_ms,n=Number(t);return!Number.isFinite(n)||n<=0?null:n>=1e3?n:n*1e3},fke=e=>{const t=Number(e?.status);if(!Number.isFinite(t)||t<400||t>=500)return!1;const n=`${e?.message||""}`.toLowerCase();return`${e?.code||e?.payload?.code||e?.payload?.error?.code||""}`.toUpperCase()==="CART_CLOSED"||n.includes("cart is no longer open")||n.includes("no longer open")||t===401||t===403||t===404||t===409},mke=e=>e?Array.isArray(e)?e[0]??null:e?.order?e.order:Array.isArray(e?.orders)?e.orders[0]??null:Array.isArray(e?.content)?e.content[0]??null:e:null;function hke(){const[e]=xu(),t=e.get("session_id"),n=e.get("order_id"),r=e.get("payment_mode"),i=e.get("invoice_number"),o=e.get("invoice_due_date"),{clearCart:c}=zi(),[d,f]=p.useState(null),[m,h]=p.useState(!1),[g,v]=p.useState(null),[x,w]=p.useState(!1),[_,S]=p.useState(!1),[j,A]=p.useState(!1),[E,C]=p.useState(!1),[T,O]=p.useState(null),[R,k]=p.useState(null),[P,H]=p.useState(""),K=p.useRef(null),B=p.useRef(null),U=p.useRef(null),I=p.useRef(0),[L,$]=p.useState(0);p.useEffect(()=>{t&&console.info("Checkout success session observed.",{sessionId:t}),n&&console.info("Checkout success order observed.",{orderId:n})},[n,t]),p.useEffect(()=>{R&&console.info("Checkout status request correlation id received.",{correlationId:R})},[R]);const G=()=>{C(!0),$(Ue=>Ue+1)},te=async(Ue,ye)=>{if(!(!ye||!navigator?.clipboard?.writeText))try{await navigator.clipboard.writeText(`${ye}`),H(Ue),window.setTimeout(()=>{H(je=>je===Ue?"":je)},1500)}catch(je){console.error(`Failed to copy ${Ue}.`,je)}};p.useEffect(()=>{if(!t&&!n)return;let Ue=!0;const ye=Date.now();let je=0;S(!1),A(!1),O(null),v(null),w(!1),f(null),U.current=null,I.current=0,C(!1);const Ee=()=>{K.current&&(clearTimeout(K.current),K.current=null),B.current&&(B.current.abort(),B.current=null),A(!0)},qe=async()=>{if(!Ue)return;B.current=new AbortController,h(!0);let W=null,fe=null;try{const se=t?await hz(t,{signal:B.current.signal}):await j1(n,{signal:B.current.signal}),{data:Re,correlationId:Je,status:le}=se;if(!Ue)return;if(fe=le??200,O(le??200),W=mke(Re),f(W),U.current=W,v(null),w(!1),je=0,`${W?.paymentMode??W?.payment_mode??r??""}`.toUpperCase()==="INVOICE_PAY_LATER"){Ee();return}Je&&k(ne=>ne===Je?ne:Je)}catch(se){if(!Ue||se?.name==="AbortError")return;if(fe=se?.status??null,O(se?.status??null),se?.status===404&&w(!0),se?.correlationId&&k(Re=>Re===se.correlationId?Re:se.correlationId),fke(se)){se?.status===401||se?.status===403?v("Please sign in again to view your order status."):v(se?.status===404?null:se?.message||"Unable to load order status."),Ee();return}if(se?.status>=500&&(je+=1,je>=cke)){v("Unable to confirm payment right now. Please try again."),Ee();return}}finally{B.current=null,Ue&&h(!1)}const we=tI(W??U.current),de=Date.now()-ye;if(de<aI&&!nI(we)&&!rI(we)){const se=lke,Re=fe===202?dke(W??U.current):null,Je=fe===202?Math.min(se*2**I.current,uke):se,le=Re??Je;K.current=setTimeout(qe,le),I.current=fe===202?I.current+1:0}else if(Ue)de>=aI&&(S(!0),v("We are still processing your payment. Please retry in a moment.")),Ee();else return};return qe(),()=>{Ue=!1,B.current&&(B.current.abort(),B.current=null),K.current&&(clearTimeout(K.current),K.current=null)}},[n,L,r,t]);const re=p.useMemo(()=>tI(d),[d]),q=`${d?.paymentMode??d?.payment_mode??d?.invoice?.paymentMode??r??""}`.toUpperCase()==="INVOICE_PAY_LATER",z=d?.invoiceNumber??d?.invoice?.number??i,V=d?.invoiceDueDate??d?.invoice?.dueDate??o,Y=d?.bankgiro??d?.invoice?.bankgiro??null,Z=d?.invoiceOcr??d?.invoice?.ocr??null,ee=d?.totals?.grossTotal??d?.totals?.gross??d?.totals?.total??null,ie=d?.totals?.currency??d?.currency??"SEK",xe=nI(re),X=rI(re),Ae=(oke(re)||x||T===202)&&!X&&!xe,he=Lf(re).label,ue=q?"Order placed. Invoice issued.":xe?"Order confirmed":X?"Payment failed":"Payment received / processing",Xe=q?"Your order was placed with invoice payment terms.":xe?"Payment confirmed. A receipt has been sent to your email.":X?"Your payment did not complete. Please contact support if the issue persists, or return to your cart to try again.":"Thanks for your order! We are confirming your payment with Stripe and will update your order shortly.";return p.useEffect(()=>{!xe&&!q||c()},[c,q,xe]),a.jsx("div",{className:xt.page,children:a.jsxs("div",{className:xt.card,children:[a.jsx("p",{className:xt.kicker,children:q?"Invoice order placed":"Payment received"}),a.jsx("h1",{className:xt.title,children:ue}),a.jsx("p",{className:xt.subtitle,children:Xe}),a.jsxs("div",{className:xt.statusCard,children:[a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:t?"Checkout session":"Order"}),a.jsx("span",{className:xt.statusValue,children:t||n||"Pending"})]}),R?a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Reference ID"}),a.jsx("span",{className:xt.statusValue,children:R})]}):null,a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Status"}),a.jsx("span",{className:xt.statusValue,children:m?"Loading":Ae?"Processing":he})]}),q&&z?a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Invoice number"}),a.jsx("span",{className:xt.statusValue,children:z})]}):null,q&&V?a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Due date"}),a.jsx("span",{className:xt.statusValue,children:new Date(V).toLocaleDateString()})]}):null,m?a.jsx("p",{className:xt.statusMessage,children:"Fetching latest status"}):null,Ae&&!m?a.jsx("p",{className:xt.statusMessage,children:x?"Processing":"Awaiting confirmation"}):null,_?a.jsx("p",{className:xt.statusMessage,children:"Confirmation pending; you'll receive an email once confirmed."}):null,xe||q?a.jsx("p",{className:xt.statusMessage,children:"Your cart has been checked out."}):null,g?a.jsx("p",{className:xt.errorMessage,children:g}):null,j&&g?a.jsx("button",{type:"button",className:xt.retryButton,onClick:G,children:E?"Retrying":"Retry"}):null]}),q?a.jsxs("div",{className:xt.paymentDetailsCard,children:[a.jsx("h2",{className:xt.paymentDetailsTitle,children:"Pay by bank transfer"}),a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Bankgiro"}),a.jsxs("span",{className:xt.statusValueWithAction,children:[a.jsx("span",{children:Y||"Pending"}),Y?a.jsx("button",{type:"button",className:xt.copyButton,onClick:()=>te("bankgiro",Y),children:P==="bankgiro"?"Copied":"Copy"}):null]})]}),a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"OCR"}),a.jsxs("span",{className:xt.statusValueWithAction,children:[a.jsx("span",{children:Z||"Pending"}),Z?a.jsx("button",{type:"button",className:xt.copyButton,onClick:()=>te("ocr",Z),children:P==="ocr"?"Copied":"Copy"}):null]})]}),a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Due date"}),a.jsx("span",{className:xt.statusValue,children:V?new Date(V).toLocaleDateString():"Pending"})]}),a.jsxs("div",{className:xt.statusRow,children:[a.jsx("span",{className:xt.statusLabel,children:"Amount"}),a.jsx("span",{className:xt.statusValue,children:ee!=null?jt(ee,ie):"Pending"})]})]}):null,a.jsxs("div",{className:xt.actions,children:[X?a.jsx(nt,{to:"/store/cart",className:xt.primary,children:"Return to cart"}):a.jsx(nt,{to:"/store",className:xt.primary,children:"Continue shopping"}),a.jsx(nt,{to:"/store/cart",className:xt.secondary,children:"View cart"})]})]})})}const g5=Bn(),Jo=`${g5}/api/admin/store/products`,Gl=()=>new Date().toISOString(),Yi=e=>({"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}),mg=e=>{if(!e)return e;const t=e.id||e.productId||e._id||e.sku||null;return{...e,id:t}},pke=e=>(Array.isArray(e)?e:Array.isArray(e?.products)?e.products:[]).map(mg),cs=[{id:"basil-001",name:"Genovese Basil",sku:"BASIL-GEN-001",description:"Fragrant basil bundle harvested this week.",price:59,currency:"SEK",stock:24,category:"Basil",imageUrl:"",active:!0,vatRate:12,updatedAt:Gl(),variants:[{id:"basil-001-50",weight:50,price:39,stock:14,sku:"BASIL-GEN-50",active:!0},{id:"basil-001-70",weight:70,price:49,stock:10,sku:"BASIL-GEN-70",active:!0}]},{id:"pack-10l",name:"Hydro pack 10L",sku:"PACK-10L",description:"Packaging set for leafy greens.",price:129,currency:"SEK",stock:12,category:"Packaging",imageUrl:"",active:!1,vatRate:25,updatedAt:Gl(),variants:[]}],Xi=e=>!1;async function v5(e,{signal:t}={}){try{const n=await Ve(`${Jo}?includeVariants=true`,{method:"GET",headers:Yi(e),signal:t},{token:e}),r=await at(n,"Failed to load products");return pke(r)}catch(n){if(Xi())return console.warn("Using mock products fallback until backend endpoint is available.",n),cs;throw n}}async function yke(e,t){try{const n=await Ve(Jo,{method:"POST",headers:Yi(t),body:JSON.stringify(e)},{token:t}),r=await at(n,"Failed to create product");return mg(r)}catch(n){if(Xi()){console.warn("Mocking product creation until backend endpoint is ready.",n);const r={...e,id:e.id||globalThis.crypto?.randomUUID?.()||Date.now().toString(),updatedAt:Gl()};return cs.unshift(r),r}throw n}}async function sI(e,t,n){if(!e)throw new Error("Product ID is required");try{const r=await Ve(`${Jo}/${encodeURIComponent(e)}`,{method:"PUT",headers:Yi(n),body:JSON.stringify(t)},{token:n}),i=await at(r,"Failed to update product");return mg(i)}catch(r){if(Xi()){console.warn("Mocking product update until backend endpoint is ready.",r);const i=cs.findIndex(d=>d.id===e),c={...i>=0?cs[i]:{id:e},...t,updatedAt:Gl()};return i>=0?cs[i]=c:cs.unshift(c),c}throw r}}async function gke(e,t,n){if(!e)throw new Error("Product ID is required");try{const r=await Ve(`${Jo}/${encodeURIComponent(e)}/active`,{method:"PATCH",headers:Yi(n),body:JSON.stringify({active:t})},{token:n}),i=await at(r,"Failed to update status");return mg(i)}catch(r){if(Xi()){console.warn("Mocking product active toggle until backend endpoint is ready.",r);const i=cs.find(o=>o.id===e);return i&&(i.active=t),i||{id:e,active:t}}throw r}}async function iI(e,t){if(!e)throw new Error("Product ID is required");try{const n=await Ve(`${Jo}/${encodeURIComponent(e)}`,{method:"DELETE",headers:Yi(t)},{token:t});return at(n,"Failed to delete product")}catch(n){if(Xi()){console.warn("Mocking product removal until backend endpoint is ready.",n);const r=cs.findIndex(i=>i.id===e);return r>=0&&cs.splice(r,1),{id:e,deleted:!0}}throw n}}async function vke(e,t,n){if(!e)throw new Error("Product ID is required");try{const r=await Ve(`${Jo}/${encodeURIComponent(e)}/variants`,{method:"POST",headers:Yi(n),body:JSON.stringify(t)},{token:n});return at(r,"Failed to create variant")}catch(r){if(Xi()){console.warn("Mocking variant creation until backend endpoint is ready.",r);const i=cs.find(c=>c.id===e),o={...t,id:t.id||globalThis.crypto?.randomUUID?.()||Date.now().toString()};return i&&(i.variants=Array.isArray(i.variants)?i.variants:[],i.variants.push(o),i.updatedAt=Gl()),o}throw r}}async function bke(e,t,n,r){if(!e)throw new Error("Product ID is required");if(!t)throw new Error("Variant ID is required");try{const i=await Ve(`${Jo}/${encodeURIComponent(e)}/variants/${encodeURIComponent(t)}`,{method:"PUT",headers:Yi(r),body:JSON.stringify(n)},{token:r});return at(i,"Failed to update variant")}catch(i){if(Xi()){console.warn("Mocking variant update until backend endpoint is ready.",i);const o=cs.find(c=>c.id===e);if(o){o.variants=Array.isArray(o.variants)?o.variants:[];const c=o.variants.findIndex(m=>m.id===t),f={...c>=0?o.variants[c]:{id:t},...n};return c>=0?o.variants[c]=f:o.variants.push(f),o.updatedAt=Gl(),f}return{id:t,...n}}throw i}}async function _ke(e,t,n){if(!e)throw new Error("Product ID is required");if(!t)throw new Error("Variant ID is required");try{const r=await Ve(`${Jo}/${encodeURIComponent(e)}/variants/${encodeURIComponent(t)}`,{method:"DELETE",headers:Yi(n)},{token:n});return at(r,"Failed to delete variant")}catch(r){if(Xi()){console.warn("Mocking variant removal until backend endpoint is ready.",r);const i=cs.find(o=>o.id===e);return i&&Array.isArray(i.variants)&&(i.variants=i.variants.filter(o=>o.id!==t),i.updatedAt=Gl()),{id:t,deleted:!0}}throw r}}async function xke(e,t,n){if(!e)throw new Error("Variant ID is required");try{const r=await Ve(`${g5}/api/admin/variants/${encodeURIComponent(e)}/prices`,{method:"PUT",headers:Yi(n),body:JSON.stringify(t)},{token:n});return at(r,"Failed to update variant tier prices")}catch(r){if(Xi())return console.warn("Mocking variant tier pricing update until backend endpoint is ready.",r),{id:e,...t};throw r}}const Ske="_wrapper_10kje_1",wke="_card_10kje_19",jke="_kicker_10kje_39",Nke="_title_10kje_55",Ake="_message_10kje_67",Eke="_actions_10kje_77",Cke="_primary_10kje_89",Tke="_secondary_10kje_113",To={wrapper:Ske,card:wke,kicker:jke,title:Nke,message:Ake,actions:Eke,primary:Cke,secondary:Tke};function kke({title:e="Access denied",message:t="You do not have permission to view this page.",actionHref:n="/monitoring/overview",actionLabel:r="Back to monitoring",secondaryActionHref:i="/login",secondaryActionLabel:o="Login again"}){return a.jsx("div",{className:To.wrapper,children:a.jsxs("div",{className:To.card,role:"alert","aria-live":"polite",children:[a.jsx("p",{className:To.kicker,children:"Restricted"}),a.jsx("h1",{className:To.title,children:e}),a.jsx("p",{className:To.message,children:t}),a.jsxs("div",{className:To.actions,children:[n&&a.jsx(nt,{className:To.primary,to:n,children:r}),i&&a.jsx(nt,{className:To.secondary,to:i,children:o})]})]})})}const Oke="_page_1eet2_1",Rke="_listHeader_1eet2_11",Mke="_detailHeader_1eet2_13",Ike="_filtersRow_1eet2_27",Dke="_input_1eet2_59",Pke="_searchInput_1eet2_69",$ke="_statusSelect_1eet2_77",Lke="_filterSelect_1eet2_85",Bke="_table_1eet2_117",Uke="_variantsTableScroll_1eet2_161",qke="_variantsTable_1eet2_161",zke="_actions_1eet2_203",Fke="_variantCellInput_1eet2_229",Hke="_truncateCell_1eet2_241",Vke="_colSku_1eet2_261",Kke="_colImageUrl_1eet2_263",Gke="_primaryButton_1eet2_271",Wke="_secondaryButton_1eet2_273",Yke="_linkButton_1eet2_275",Xke="_dangerLink_1eet2_277",Qke="_tab_1eet2_117",Zke="_activeTab_1eet2_281",Jke="_badgeOn_1eet2_325",eOe="_badgeOff_1eet2_327",tOe="_tabs_1eet2_353",nOe="_cards_1eet2_379",rOe="_card_1eet2_379",aOe="_formGrid_1eet2_401",sOe="_notice_1eet2_419",iOe="_error_1eet2_421",oOe="_variantToolbar_1eet2_431",lOe="_stickySaveBar_1eet2_439",cOe="_cellEditor_1eet2_465",uOe="_inlineError_1eet2_477",Ye={page:Oke,listHeader:Rke,detailHeader:Mke,filtersRow:Ike,input:Dke,searchInput:Pke,statusSelect:$ke,filterSelect:Lke,table:Bke,variantsTableScroll:Uke,variantsTable:qke,actions:zke,variantCellInput:Fke,truncateCell:Hke,colSku:Vke,colImageUrl:Kke,primaryButton:Gke,secondaryButton:Wke,linkButton:Yke,dangerLink:Xke,tab:Qke,activeTab:Zke,badgeOn:Jke,badgeOff:eOe,tabs:tOe,cards:nOe,card:rOe,formGrid:aOe,notice:sOe,error:iOe,variantToolbar:oOe,stickySaveBar:lOe,cellEditor:cOe,inlineError:uOe},d1=["Basil","Packaging","Hydroponic gear"],dOe=[{value:"updated_desc",label:"Updated (newest)"},{value:"price_desc",label:"Price (high to low)"},{value:"price_asc",label:"Price (low to high)"}],Bc={name:"",description:"",currency:"SEK",category:d1[0],imageUrl:"",sku:"",active:!0,vatRate:"12"},F0=()=>({id:null,localId:globalThis.crypto?.randomUUID?.()||`new-${Date.now()}`,weight:"",price:"",stock:"",sku:"",imageUrl:"",active:!0,tierPrices:{}}),fOe=e=>Array.isArray(e)?e:e?.products||[],H0=e=>Array.isArray(e)?e:e?.items||e?.nodes||e?.data||[],V0=e=>{const t=(e??"").trim();return t.length?t:null},oI=e=>Number(e?.priceSek??e?.price??e?.unitPrice??0),lI=e=>["VIP","SUPPORTER","B2B"].reduce((n,r)=>{const i=jD(e,r);return i!=null&&(n[r]=i),n},{}),sf=/^\d*(?:[.,]\d*)?$/,fy=/^\d*$/,mOe=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,hOe=e=>mOe.test(`${e??""}`.trim()),pOe=(e=[])=>{const t=new Set;for(const n of e){if(!(n?.id||n?.localId))continue;const i=Of(n?.weight??n?.weightGrams);if(Number.isFinite(i)){if(t.has(i))return!0;t.add(i)}}return!1},Oo=e=>e===""||e===null||e===void 0?0:Number.parseFloat(`${e}`.replace(",",".")),Of=e=>e===""||e===null||e===void 0?0:Number.parseInt(`${e}`,10),K0=e=>{const t={};fy.test(`${e.weight??""}`)||(t.weight="Weight must be a whole number."),fy.test(`${e.stock??""}`)||(t.stock="Stock must be a whole number."),sf.test(`${e.price??""}`)||(t.price="Use numbers like 29.90 or 29,9."),["VIP","SUPPORTER","B2B"].forEach(o=>{const c=`${e.tierPrices?.[o]??""}`;c&&!sf.test(c)&&(t[o]="Use numbers like 29.90 or 29,9.")});const n=Of(e.weight);(Number.isNaN(n)||n<0)&&(t.weight="Weight must be 0 or greater.");const r=Of(e.stock);(Number.isNaN(r)||r<0)&&(t.stock="Stock must be 0 or greater.");const i=Oo(e.price);return(Number.isNaN(i)||i<0)&&(t.price="Price must be 0 or greater."),["VIP","SUPPORTER","B2B"].forEach(o=>{const c=Oo(e.tierPrices?.[o]);(Number.isNaN(c)||c<0)&&(t[o]="Price must be 0 or greater.")}),t};function cI(){const{isAuthenticated:e,token:t,permissions:n}=Xt(),r=Gr(),{productId:i}=Ls(),[o,c]=p.useState([]),[d,f]=p.useState(!1),[m,h]=p.useState(!1),[g,v]=p.useState(""),[x,w]=p.useState(""),[_,S]=p.useState("all"),[j,A]=p.useState("all"),[E,C]=p.useState("updated_desc"),[T,O]=p.useState("overview"),[R,k]=p.useState(Bc),[P,H]=p.useState(""),[K,B]=p.useState([]),[U,I]=p.useState(""),[L,$]=p.useState(null),[G,te]=p.useState({}),[re,M]=p.useState({}),[q,z]=p.useState({}),V=us({permissions:n},kt.PRODUCTS_MANAGE),Y=i==="new",Z=p.useCallback(async()=>{if(t){f(!0),v("");try{const W=await v5(t);c(fOe(W))}catch(W){console.error(W),v("Unable to load products right now.")}finally{f(!1)}}},[t]);p.useEffect(()=>{Z()},[Z]);const ee=p.useMemo(()=>o.find(W=>W.id===i)||null,[i,o]);p.useEffect(()=>{if(Y){k(Bc),B([]),$(null),H(JSON.stringify(Bc)),I(JSON.stringify({defaultVariantId:null,variants:[]}));return}if(!ee)return;const W={...Bc,...ee,active:ee.active!==!1},fe=H0(ee.variants).map(de=>({...F0(),...de,localId:de.id||globalThis.crypto?.randomUUID?.(),weight:de.weight??de.weightGrams??"",price:oI(de),stock:mu(de)??"",imageUrl:de.imageUrl??"",tierPrices:lI(de),active:de.active!==!1})),we=ee.defaultVariantId||fe[0]?.id||fe[0]?.localId||null;k(W),B(fe),$(we),te({}),M({}),z({}),H(JSON.stringify(W)),I(JSON.stringify({defaultVariantId:we,variants:fe}))},[Y,ee]);const ie=p.useCallback((W,fe,we)=>{M(de=>{const se={...de[W]||{},[fe]:we},Re=K0(se);return z(Je=>({...Je,[W]:Re})),{...de,[W]:se}})},[]),xe=p.useCallback((W,fe,we)=>{M(de=>{const ve=de[W]||{},se={...ve,tierPrices:{...ve.tierPrices||{},[fe]:we}},Re=K0(se);return z(Je=>({...Je,[W]:Re})),{...de,[W]:se}})},[]),X=p.useCallback(W=>{const fe=W.id||W.localId;te(we=>({...we,[fe]:!0})),M(we=>({...we,[fe]:{...W,weight:W.weight??W.weightGrams??"",price:W.price??W.priceSek??"",stock:W.stock??W.stockQuantity??"",sku:W.sku??"",imageUrl:W.imageUrl??"",active:W.active!==!1,tierPrices:{VIP:W.tierPrices?.VIP??0,SUPPORTER:W.tierPrices?.SUPPORTER??0,B2B:W.tierPrices?.B2B??0}}})),z(we=>({...we,[fe]:{}}))},[]),Ae=p.useCallback(W=>{te(fe=>{const we={...fe};return delete we[W],we}),M(fe=>{const we={...fe};return delete we[W],we}),z(fe=>{const we={...fe};return delete we[W],we})},[]),he=p.useCallback(W=>{const fe=re[W];if(!fe)return;const we=K0(fe);z(de=>({...de,[W]:we})),!(Object.keys(we).length>0)&&(B(de=>de.map(ve=>(ve.id||ve.localId)===W?{...fe}:ve)),Ae(W))},[Ae,re]),ue=p.useMemo(()=>{const W=x.trim().toLowerCase();return[...o].filter(fe=>!(W&&![fe.name,fe.sku].some(we=>`${we||""}`.toLowerCase().includes(W))||_!=="all"&&(fe.active??!0)!==(_==="active")||j!=="all"&&fe.category!==j)).sort((fe,we)=>E==="price_desc"?Gc(we)-Gc(fe):E==="price_asc"?Gc(fe)-Gc(we):new Date(we.updatedAt||we.updated||we.createdAt||0).getTime()-new Date(fe.updatedAt||fe.updated||fe.createdAt||0).getTime())},[j,o,x,E,_]),Xe=JSON.stringify(R)!==P,Ue=JSON.stringify({defaultVariantId:L,variants:K})!==U,ye=Xe||Ue,je=Y?null:ee?.id,Ee=async()=>{if(!m){if(Ue&&pOe(K)){v("A variant with this weight already exists."),O("variants");return}v(""),h(!0);try{let W=je;if(Xe){const fe={name:R.name.trim(),description:R.description?.trim()||"",currency:R.currency||"SEK",category:R.category,imageUrl:R.imageUrl?.trim()||"",sku:R.sku?.trim()||"",active:R.active!==!1,vatRate:Oo(R.vatRate)};W=(W?await sI(W,fe,t):await yke(fe,t))?.id||W}if(W&&Ue){for(const[fe,we]of K.entries()){const de=Of(we.weight);if(!de||de<=0){v("Weight must be greater than zero"),O("variants");return}const ve={weightGrams:de,priceSek:Oo(we.price),stockQuantity:Of(we.stock),sku:we.sku||"",imageUrl:V0(we.imageUrl),active:we.active!==!1,sortOrder:fe},Re=(hOe(we.id)?await bke(W,we.id,ve,t):await vke(W,ve,t))?.id||we.id;Re&&await xke(Re,{DEFAULT:Oo(we.price),VIP:Oo(we.tierPrices?.VIP),SUPPORTER:Oo(we.tierPrices?.SUPPORTER),B2B:Oo(we.tierPrices?.B2B)},t),we.id=Re}await sI(W,{defaultVariantId:L||K[0]?.id||null},t)}await Z(),!je&&W&&r(`/store/admin/products/${W}`,{replace:!0})}finally{h(!1)}}},qe=()=>{if(Y){k(Bc),B([]),$(null);return}if(!ee)return;const W={...Bc,...ee,active:ee.active!==!1};k(W);const fe=H0(ee.variants).map(we=>({...F0(),...we,localId:we.id||globalThis.crypto?.randomUUID?.(),weight:we.weight??"",price:oI(we),stock:mu(we)??"",imageUrl:we.imageUrl??"",tierPrices:lI(we),active:we.active!==!1}));B(fe),$(ee.defaultVariantId||fe[0]?.id||null),te({}),M({}),z({})};return e?V?a.jsxs("div",{className:Ye.page,children:[i?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Ye.detailHeader,children:[a.jsx("button",{className:Ye.linkButton,onClick:()=>r("/store/admin/products"),children:" Products"}),a.jsx("h1",{children:Y?"New product":ee?.name||"Product"}),a.jsx("span",{className:R.active===!1?Ye.badgeOff:Ye.badgeOn,children:R.active===!1?"Inactive":"Active"}),a.jsxs("div",{className:Ye.headerActions,children:[a.jsx("button",{className:Ye.secondaryButton,onClick:()=>k(W=>({...W,active:!W.active})),children:R.active?"Deactivate":"Activate"}),je&&a.jsx("button",{className:Ye.dangerLink,onClick:async()=>{window.confirm("Delete this product?")&&(await iI(je,t),r("/store/admin/products"))},children:"Delete"})]})]}),a.jsxs("div",{className:Ye.tabs,children:[a.jsx("button",{className:T==="overview"?Ye.activeTab:Ye.tab,onClick:()=>O("overview"),children:"Overview"}),a.jsx("button",{className:T==="details"?Ye.activeTab:Ye.tab,onClick:()=>O("details"),children:"Product details"}),a.jsx("button",{className:T==="variants"?Ye.activeTab:Ye.tab,disabled:!je,onClick:()=>O("variants"),children:"Variants & pricing"})]}),T==="overview"&&a.jsxs("div",{className:Ye.cards,children:[a.jsxs("article",{className:Ye.card,children:[a.jsx("h3",{children:"Default price"}),a.jsxs("p",{children:[K[0]?.price||0," SEK"]})]}),a.jsxs("article",{className:Ye.card,children:[a.jsx("h3",{children:"Total stock"}),a.jsx("p",{children:K.reduce((W,fe)=>W+Number(fe.stock||0),0)})]}),a.jsxs("article",{className:Ye.card,children:[a.jsx("h3",{children:"Variants"}),a.jsx("p",{children:K.length})]})]}),T==="details"&&a.jsxs("div",{className:Ye.formGrid,children:[a.jsxs("label",{children:["Name",a.jsx("input",{className:Ye.input,value:R.name,onChange:W=>k(fe=>({...fe,name:W.target.value}))})]}),a.jsxs("label",{children:["SKU",a.jsx("input",{className:Ye.input,value:R.sku,onChange:W=>k(fe=>({...fe,sku:W.target.value}))})]}),a.jsxs("label",{children:["Category",a.jsx("select",{className:Ye.input,value:R.category,onChange:W=>k(fe=>({...fe,category:W.target.value})),children:d1.map(W=>a.jsx("option",{value:W,children:W},W))})]}),a.jsxs("label",{children:["VAT rate (%)",a.jsx("input",{className:Ye.input,inputMode:"decimal",value:R.vatRate??"",onChange:W=>{sf.test(W.target.value)&&k(fe=>({...fe,vatRate:W.target.value}))}})]}),a.jsxs("label",{children:["Description",a.jsx("textarea",{className:Ye.input,rows:4,value:R.description,onChange:W=>k(fe=>({...fe,description:W.target.value}))})]})]}),T==="variants"&&(je?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:Ye.variantToolbar,children:a.jsx("button",{className:Ye.secondaryButton,onClick:()=>B(W=>[...W,F0()]),children:"Add variant"})}),a.jsx("div",{className:Ye.variantsTableScroll,children:a.jsxs("table",{className:`${Ye.table} ${Ye.variantsTable}`,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Default"}),a.jsx("th",{children:"Weight"}),a.jsx("th",{children:"Price (SEK)"}),a.jsx("th",{children:"VIP"}),a.jsx("th",{children:"Supporter"}),a.jsx("th",{children:"B2B"}),a.jsx("th",{children:"Stock"}),a.jsx("th",{className:Ye.colSku,children:"SKU"}),a.jsx("th",{className:Ye.colImageUrl,children:"Image URL"}),a.jsx("th",{children:"Active"}),a.jsx("th",{className:Ye.actions,children:"Actions"})]})}),a.jsx("tbody",{children:K.map(W=>{const fe=W.id||W.localId,we=!!G[fe],de=we&&re[fe]||W,ve=q[fe]||{};return a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("input",{type:"radio",name:"default",checked:L===fe||L===W.id,onChange:()=>$(fe)})}),a.jsx("td",{children:we?a.jsxs("div",{className:Ye.cellEditor,children:[a.jsx("input",{className:`${Ye.input} ${Ye.variantCellInput}`,inputMode:"numeric",value:re[fe]?.weight??W.weight??W.weightGrams??"",onChange:se=>{fy.test(se.target.value)&&ie(fe,"weight",se.target.value)}}),ve.weight&&a.jsx("span",{className:Ye.inlineError,children:ve.weight})]}):kf(W)}),a.jsx("td",{children:we?a.jsxs("div",{className:Ye.cellEditor,children:[a.jsx("input",{className:`${Ye.input} ${Ye.variantCellInput}`,inputMode:"decimal",value:de.price??"",onChange:se=>{sf.test(se.target.value)&&ie(fe,"price",se.target.value)}}),ve.price&&a.jsx("span",{className:Ye.inlineError,children:ve.price})]}):W.priceSek??W.price??0}),[["VIP","VIP"],["SUPPORTER","Supporter"],["B2B","B2B"]].map(([se,Re])=>a.jsx("td",{children:we?a.jsxs("div",{className:Ye.cellEditor,children:[a.jsx("input",{className:`${Ye.input} ${Ye.variantCellInput}`,"aria-label":Re,inputMode:"decimal",value:de.tierPrices?.[se]??"",onChange:Je=>{sf.test(Je.target.value)&&xe(fe,se,Je.target.value)}}),ve[se]&&a.jsx("span",{className:Ye.inlineError,children:ve[se]})]}):W.tierPrices?.[se]||0},se)),a.jsx("td",{children:we?a.jsxs("div",{className:Ye.cellEditor,children:[a.jsx("input",{className:`${Ye.input} ${Ye.variantCellInput}`,inputMode:"numeric",value:de.stock??"",onChange:se=>{fy.test(se.target.value)&&ie(fe,"stock",se.target.value)}}),ve.stock&&a.jsx("span",{className:Ye.inlineError,children:ve.stock})]}):W.stock||0}),a.jsx("td",{className:Ye.colSku,children:we?a.jsx("input",{className:`${Ye.input} ${Ye.variantCellInput}`,value:de.sku||"",onChange:se=>ie(fe,"sku",se.target.value)}):a.jsx("span",{className:Ye.truncateCell,title:W.sku||"",children:W.sku||""})}),a.jsx("td",{className:Ye.colImageUrl,children:we?a.jsx("input",{className:`${Ye.input} ${Ye.variantCellInput}`,type:"url",placeholder:"https://...",value:de.imageUrl||"",onChange:se=>ie(fe,"imageUrl",se.target.value)}):a.jsx("span",{className:Ye.truncateCell,title:V0(W.imageUrl)||"",children:V0(W.imageUrl)||""})}),a.jsx("td",{children:we?a.jsx("input",{type:"checkbox",checked:de.active!==!1,onChange:se=>ie(fe,"active",se.target.checked)}):W.active===!1?"No":"Yes"}),a.jsxs("td",{className:Ye.actions,children:[we?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:Ye.linkButton,onClick:()=>Ae(fe),children:"Cancel"}),a.jsx("button",{className:Ye.linkButton,onClick:()=>he(fe),children:"Apply"})]}):a.jsx("button",{className:Ye.linkButton,onClick:()=>X(W),children:"Edit"}),a.jsx("button",{className:Ye.dangerLink,onClick:async()=>{W.id&&await _ke(je,W.id,t),B(se=>se.filter(Re=>(Re.id||Re.localId)!==fe))},children:"Delete"})]})]},fe)})})]})})]}):a.jsx("p",{className:Ye.notice,children:"Variants require saved product. Save product details first."}))]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Ye.listHeader,children:[a.jsx("h1",{children:"Products"}),a.jsx("button",{className:Ye.primaryButton,onClick:()=>r("/store/admin/products/new"),children:"New product"})]}),a.jsxs("div",{className:Ye.filtersRow,children:[a.jsx("input",{className:`${Ye.input} ${Ye.searchInput}`,placeholder:"Search name or SKU",value:x,onChange:W=>w(W.target.value)}),a.jsxs("select",{className:`${Ye.input} ${Ye.statusSelect}`,value:_,onChange:W=>S(W.target.value),children:[a.jsx("option",{value:"all",children:"All status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]}),a.jsxs("select",{className:`${Ye.input} ${Ye.filterSelect}`,value:j,onChange:W=>A(W.target.value),children:[a.jsx("option",{value:"all",children:"All categories"}),d1.map(W=>a.jsx("option",{value:W,children:W},W))]}),a.jsx("select",{className:`${Ye.input} ${Ye.filterSelect}`,value:E,onChange:W=>C(W.target.value),children:dOe.map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))})]}),g&&a.jsx("p",{className:Ye.error,children:g}),a.jsxs("table",{className:Ye.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"SKU"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Updated"}),a.jsx("th",{children:"Variants"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ue.map(W=>a.jsxs("tr",{onClick:()=>r(`/store/admin/products/${W.id}`),children:[a.jsx("td",{children:W.name}),a.jsx("td",{children:W.sku||""}),a.jsx("td",{children:W.category||""}),a.jsx("td",{children:a.jsx("span",{className:W.active===!1?Ye.badgeOff:Ye.badgeOn,children:W.active===!1?"Inactive":"Active"})}),a.jsx("td",{children:new Date(W.updatedAt||W.updated||W.createdAt||Date.now()).toLocaleDateString()}),a.jsx("td",{children:H0(W.variants).length}),a.jsxs("td",{children:[a.jsx("button",{type:"button",className:Ye.linkButton,onClick:fe=>{fe.stopPropagation(),r(`/store/admin/products/${W.id}`)},children:"Edit"}),a.jsx("button",{type:"button",className:Ye.linkButton,onClick:async fe=>{fe.stopPropagation(),await gke(W.id,!(W.active??!0),t),Z()},children:W.active===!1?"Activate":"Deactivate"}),a.jsx("button",{type:"button",className:Ye.dangerLink,onClick:async fe=>{fe.stopPropagation(),window.confirm(`Delete ${W.name}?`)&&(await iI(W.id,t),Z())},children:"Delete"})]})]},W.id))})]}),d&&a.jsx("p",{children:"Loading"})]}),ye&&a.jsxs("div",{className:Ye.stickySaveBar,children:[a.jsx("span",{children:"Unsaved changes"}),a.jsxs("div",{children:[a.jsx("button",{className:Ye.secondaryButton,onClick:qe,children:"Discard"}),a.jsx("button",{className:Ye.primaryButton,onClick:Ee,disabled:m,children:m?"Saving":"Save changes"})]})]})]}):a.jsx(kke,{title:"Product access required",message:"You need products permission to access this page."}):a.jsx(Rn,{to:"/login",replace:!0})}const yOe=Bn(),Qi=`${yOe}/api/admin/customers`,hg=e=>{const t=`${e??""}`.trim();return t||""},el=e=>{const t=hg(e);if(!t)throw new Error("Invalid customer id");return t},gOe=e=>{if(!e)return"";const t=`${e}`.trim();if(!t)return"";const n=t.toLowerCase();return n==="active"?"Active":n==="inactive"?"Inactive":n==="at_risk"||n==="atrisk"||n==="at risk"?"At risk":t.charAt(0).toUpperCase()+t.slice(1)},vOe=e=>{if(!e)return"";const t=`${e}`.trim();if(!t)return"";const n=t.toLowerCase();return n==="wholesale"?"Wholesale":n==="retail"?"Retail":n==="subscriber"||n==="subscription"?"Subscriber":t.charAt(0).toUpperCase()+t.slice(1)},bOe=e=>{const t=e?.name??e?.fullName;if(t)return t;const n=e?.firstName??e?.givenName,r=e?.lastName??e?.familyName;return[n,r].filter(Boolean).join(" ")},_Oe=e=>{if(!e)return"";if(typeof e.items=="string")return e.items;if(typeof e.itemsSummary=="string")return e.itemsSummary;if(typeof e.summary=="string")return e.summary;const t=Array.isArray(e.items)?e.items:Array.isArray(e.lineItems)?e.lineItems:[];return t.length===0?"":t.map(r=>r?.name||r?.title||r?.sku).filter(Boolean).join(", ")},Uj=e=>{if(e==null||e==="")return null;const t=Number(e);return Number.isFinite(t)?t:null},xOe=e=>{const t=Uj(e);return t===null?null:t/100},Rf=({amount:e,amountCents:t})=>{const n=xOe(t);return n!==null?n:Uj(e)??0},SOe=e=>{const t=Array.isArray(e?.items)?e.items:Array.isArray(e?.lineItems)?e.lineItems:[];return t.length?t.reduce((n,r)=>{const i=Rf({amount:r?.lineTotal??r?.total??r?.amount,amountCents:r?.lineTotalCents??r?.totalCents??r?.amountCents});if(i>0)return n+i;const o=Uj(r?.quantity??r?.qty)??1,c=Rf({amount:r?.unitPrice??r?.price,amountCents:r?.unitPriceCents??r?.priceCents});return n+c*o},0):0},wOe=(e=[])=>(Array.isArray(e)?e:[]).map(n=>{const r=SOe(n),i=Rf({amount:n?.paidTotal??n?.paidAmount,amountCents:n?.paidTotalCents??n?.paidAmountCents}),o=Rf({amount:n?.total??n?.amount??n?.totalAmount??n?.totalPrice,amountCents:n?.totalCents}),c=i??o??r;return{id:n?.id??n?.orderId??n?._id??`${n?.date??n?.createdAt??""}-${n?.total??""}`,date:n?.date??n?.createdAt??n?.orderedAt??n?.submittedAt??"",items:_Oe(n),status:n?.status??n?.state??"",total:c,paidTotal:i,totalBeforeDiscount:o,currency:n?.currency??n?.totalCurrency??""}}),pg=e=>{if(!e)return null;const t=hg(e?.id??e?.customerId??e?._id??e?.userId),n=wOe(e?.orders??e?.orderHistory??e?.recentOrders),r=e?.userId??e?.user_id??e?.authUserId??e?.identityId??e?.uid??e?.id??e?.customerId??e?._id??"",i=e?.lastLoginAt??e?.lastLogin??e?.lastLoginDate??e?.lastSignInAt??e?.latestLoginAt??"",o=Rf({amount:e?.totalSpent??e?.lifetimeValue??e?.totalValue??e?.totalSpend,amountCents:e?.totalSpentCents??e?.lifetimeValueCents??e?.totalValueCents??e?.totalSpendCents});return{...e,id:t,userId:r,name:bOe(e),email:e?.email??e?.contactEmail??"",status:gOe(e?.status??e?.state),type:vOe(e?.type??e?.customerType),lastLoginAt:i,lastOrderDate:e?.lastOrderDate??e?.lastOrderAt??e?.lastOrder??e?.lastOrderTime??(n[0]?.date||""),totalSpent:o,currency:e?.currency??e?.totalCurrency??e?.spendCurrency??"",orders:n,pricingTier:Vo(e?.pricingTier??e?.tier??e?.customerTier),invoiceEligible:!!(e?.invoiceEligible??e?.invoicePaymentEligible??e?.isInvoiceEligible)}},jOe=e=>(Array.isArray(e)?e:Array.isArray(e?.customers)?e.customers:Array.isArray(e?.items)?e.items:Array.isArray(e?.data)?e.data:[]).map(pg).filter(Boolean),NOe=(e,t,n)=>{const r=e?.meta??e?.pagination??e?.page??e?.paging??{},i=e?.total??e?.totalCount??e?.totalElements??r?.total??r?.totalCount??r?.totalElements??null,o=e?.page??r?.page??r?.currentPage??t,c=e?.size??r?.size??r?.pageSize??n,f=e?.totalPages??r?.totalPages??r?.pageCount??null??(i&&c?Math.ceil(i/c):null);return{total:i,page:o??t,size:c??n,totalPages:f}},AOe=(e,t,n)=>{const r=e?.summary??e?.kpis??e?.stats??e?.metrics??{},i=r?.totalCustomers??r?.total??r?.customers??n??t.length,o=r?.activeCustomers??r?.active??t.filter(c=>c.status==="Active").length;return{totalCustomers:i,activeCustomers:o}},EOe=(e,t)=>{const n=`${e??t?.status??t?.state??""}`.trim().toUpperCase();if(n==="DELETED"||n==="ARCHIVED"||n==="INACTIVE")return"Deleted";if(n==="REDEEMED"||n==="USED")return"Redeemed";if(n==="EXPIRED")return"Expired";if(n==="ACTIVE")return"Active";if(t?.deletedAt||t?.archivedAt||t?.removedAt||t?.deactivatedAt)return"Deleted";const r=t?.expiresAt??t?.expiryDate??t?.expirationDate??"";if(r){const i=new Date(r);if(!Number.isNaN(i.getTime())&&i.getTime()<Date.now())return"Expired"}return t?.redeemedAt||t?.usedAt?"Redeemed":"Active"},hu=e=>{if(!e)return null;const t=e?.amountOffCents??e?.discountAmountCents??e?.amountOff??e?.discountAmount??0;return{...e,id:e?.id??e?.couponId??e?._id??"",codeValue:e?.codeValue??e?.couponCode??e?.code??"",couponCode:e?.couponCode??e?.codeValue??e?.code??"",codeAvailable:typeof e?.codeAvailable=="boolean"?e.codeAvailable:!!`${e?.codeValue??e?.couponCode??e?.code??""}`.trim(),variantId:e?.variantId??e?.productVariantId??"",variantLabel:e?.variantLabel??e?.variantName??e?.productVariantLabel??"",amountOffCents:t,status:EOe(e?.status,e),createdAt:e?.createdAt??e?.created??e?.issuedAt??"",expiresAt:e?.expiresAt??e?.expiryDate??e?.expirationDate??"",lastSentAt:e?.lastSentAt??e?.sentAt??e?.lastEmailedAt??e?.updatedAt??""}},COe=e=>(Array.isArray(e)?e:Array.isArray(e?.coupons)?e.coupons:Array.isArray(e?.items)?e.items:Array.isArray(e?.data)?e.data:[]).map(hu).filter(Boolean);async function TOe(e,t={},{signal:n}={}){if(!e)throw new Error("Authentication is required to load customers");const r={sort:"last_order_desc",page:1,size:6,...t},i=new URLSearchParams;r.q&&i.set("q",r.q),r.status&&r.status!=="all"&&i.set("status",r.status),r.type&&r.type!=="all"&&i.set("type",r.type),r.sort&&i.set("sort",r.sort),r.page&&i.set("page",r.page),r.size&&i.set("size",r.size);const o=`${Qi}${i.toString()?`?${i.toString()}`:""}`,c=await Ve(o,{method:"GET",headers:Zt(e),signal:n},{token:e}),d=await at(c,"Failed to load customers"),f=jOe(d),m=r.size??(f.length||1),h=NOe(d,r.page??1,m),g=AOe(d,f,h.total);return{customers:f,...h,...g}}async function kOe(e,t,{signal:n}={}){if(!t)throw new Error("Authentication is required to load customer details");const r=el(e),i=await Ve(`${Qi}/${encodeURIComponent(r)}`,{method:"GET",headers:Zt(t),signal:n},{token:t}),o=await at(i,"Failed to load customer");return pg(o?.customer??o?.data??o)}async function OOe(e,t,{signal:n}={}){if(!t)throw new Error("Authentication is required to load customer coupons");const r=el(e),i=await Ve(`${Qi}/${encodeURIComponent(r)}/coupons`,{method:"GET",headers:Zt(t),signal:n},{token:t}),o=await at(i,"Failed to load customer coupons");return COe(o)}async function ROe(e,t,n,{signal:r}={}){if(!n)throw new Error("Authentication is required to create customer coupons");const i=el(e),o=await Ve(`${Qi}/${encodeURIComponent(i)}/coupons`,{method:"POST",headers:Zt(n),signal:r,body:JSON.stringify(t)},{token:n}),c=await at(o,"Failed to create coupon");return hu(c?.coupon??c?.data??c)}async function MOe(e,t,n,{signal:r}={}){if(!n)throw new Error("Authentication is required to resend customer coupons");const i=el(e),o=`${t??""}`.trim();if(!o)throw new Error("Invalid coupon id");const c=await Ve(`${Qi}/${encodeURIComponent(i)}/coupons/${encodeURIComponent(o)}/resend`,{method:"POST",headers:Zt(n),signal:r},{token:n}),d=await at(c,"Failed to resend coupon");return{coupon:hu(d?.coupon??d?.newCoupon??d?.data?.coupon??d?.data?.newCoupon??d?.data),replacedCoupon:hu(d?.replacedCoupon??d?.oldCoupon??d?.data?.replacedCoupon),regenerated:!!(d?.regenerated??d?.data?.regenerated),raw:d}}async function IOe(e,t,n,r,{signal:i}={}){if(!r)throw new Error("Authentication is required to renew customer coupons");const o=el(e),c=`${t??""}`.trim();if(!c)throw new Error("Invalid coupon id");const d=await Ve(`${Qi}/${encodeURIComponent(o)}/coupons/${encodeURIComponent(c)}/renew`,{method:"POST",headers:Zt(r),signal:i,body:JSON.stringify(n)},{token:r}),f=await at(d,"Failed to renew coupon");return{coupon:hu(f?.coupon??f?.newCoupon??f?.data?.coupon??f?.data?.newCoupon??f?.data),replacedCoupon:hu(f?.replacedCoupon??f?.oldCoupon??f?.data?.replacedCoupon),raw:f}}async function DOe(e,t,n,{signal:r}={}){if(!n)throw new Error("Authentication is required to delete customer coupons");const i=el(e),o=`${t??""}`.trim();if(!o)throw new Error("Invalid coupon id");const c=await Ve(`${Qi}/${encodeURIComponent(i)}/coupons/${encodeURIComponent(o)}`,{method:"DELETE",headers:Zt(n),signal:r},{token:n});return c.status===204?null:at(c,"Failed to delete coupon")}async function POe(e,t,n,{signal:r}={}){if(!n)throw new Error("Authentication is required to update customer tier");const i=el(e),o=Vo(t),c=await Ve(`${Qi}/${encodeURIComponent(i)}/pricing-tier`,{method:"PATCH",headers:Zt(n),signal:r,body:JSON.stringify({pricingTier:o})},{token:n}),d=await at(c,"Failed to update customer tier");return pg(d?.customer??d?.data??d)}async function $Oe(e,t,n,{signal:r}={}){if(!n)throw new Error("Authentication is required to update invoice eligibility");const i=el(e),o=await Ve(`${Qi}/${encodeURIComponent(i)}/invoice-eligibility`,{method:"PATCH",headers:Zt(n),signal:r,body:JSON.stringify({invoiceEligible:!!t})},{token:n}),c=await at(o,"Failed to update invoice eligibility");return pg(c?.customer??c?.data??c)}const LOe="_wrapper_gquns_1",BOe="_header_gquns_13",UOe="_eyebrow_gquns_29",qOe="_subtitle_gquns_45",zOe="_summary_gquns_55",FOe="_summaryLabel_gquns_75",HOe="_summaryValue_gquns_91",VOe="_filters_gquns_101",KOe="_searchField_gquns_149",GOe="_filterLabel_gquns_157",WOe="_tableWrapper_gquns_165",YOe="_colCustomer_gquns_197",XOe="_colStatus_gquns_205",QOe="_colType_gquns_207",ZOe="_colUserId_gquns_215",JOe="_colLastLogin_gquns_217",eRe="_colLastOrder_gquns_225",tRe="_colTotalSpent_gquns_227",nRe="_colAction_gquns_235",rRe="_stickyColumn_gquns_287",aRe="_numericCell_gquns_309",sRe="_actionHeader_gquns_317",iRe="_actionCell_gquns_319",oRe="_customerCell_gquns_327",lRe="_customerName_gquns_339",cRe="_customerNameRow_gquns_351",uRe="_tierBadge_gquns_363",dRe="_customerEmail_gquns_393",fRe="_monoText_gquns_407",mRe="_status_gquns_419",hRe="_statusActive_gquns_443",pRe="_statusAtrisk_gquns_453",yRe="_statusInactive_gquns_463",gRe="_detailLink_gquns_473",vRe="_emptyState_gquns_493",bRe="_pagination_gquns_505",_Re="_pageInfo_gquns_545",It={wrapper:LOe,header:BOe,eyebrow:UOe,subtitle:qOe,summary:zOe,summaryLabel:FOe,summaryValue:HOe,filters:VOe,searchField:KOe,filterLabel:GOe,tableWrapper:WOe,colCustomer:YOe,colStatus:XOe,colType:QOe,colUserId:ZOe,colLastLogin:JOe,colLastOrder:eRe,colTotalSpent:tRe,colAction:nRe,stickyColumn:rRe,numericCell:aRe,actionHeader:sRe,actionCell:iRe,customerCell:oRe,customerName:lRe,customerNameRow:cRe,tierBadge:uRe,customerEmail:dRe,monoText:fRe,status:mRe,statusActive:hRe,statusAtrisk:pRe,statusInactive:yRe,detailLink:gRe,emptyState:vRe,pagination:bRe,pageInfo:_Re},Wh=[{value:"all",label:"All statuses"},{value:"active",label:"Active",queryValue:"ACTIVE"},{value:"at_risk",label:"At risk",queryValue:"AT_RISK"},{value:"inactive",label:"Inactive",queryValue:"INACTIVE"}],Yh=[{value:"all",label:"All types"},{value:"retail",label:"Retail",queryValue:"RETAIL"},{value:"wholesale",label:"Wholesale",queryValue:"WHOLESALE"},{value:"subscriber",label:"Subscriber",queryValue:"SUBSCRIBER"}],uI=[{value:"last_order_desc",label:"Last order (newest)"},{value:"last_order_asc",label:"Last order (oldest)"},{value:"total_spent_desc",label:"Total spent (high to low)"},{value:"total_spent_asc",label:"Total spent (low to high)"}],dI=6,xRe=300,SRe=e=>{const t=Vo(e);return t==="DEFAULT"?"Default":t},fI=(e,{includeTime:t=!1}={})=>{if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString("sv-SE",{year:"numeric",month:"short",day:"numeric",...t?{hour:"2-digit",minute:"2-digit"}:{}})};function wRe(){const{token:e}=Xt(),[t,n]=xu(),r=t.toString(),i=p.useRef(!1),[o,c]=p.useState(""),[d,f]=p.useState(""),[m,h]=p.useState("all"),[g,v]=p.useState("all"),[x,w]=p.useState("last_order_desc"),[_,S]=p.useState(1),[j,A]=p.useState([]),[E,C]=p.useState({totalCustomers:0,activeCustomers:0}),[T,O]=p.useState(1),[R,k]=p.useState(!1),[P,H]=p.useState("");p.useEffect(()=>{console.debug("[CustomersList] mounted")},[]),p.useEffect(()=>{if(i.current)return;const B=t.get("q")??"",U=t.get("status"),I=t.get("type"),L=t.get("sort"),$=Number(t.get("page")),G=Wh.find(M=>M.queryValue?.toLowerCase()===U?.toLowerCase())?.value??"all",te=Yh.find(M=>M.queryValue?.toLowerCase()===I?.toLowerCase())?.value??"all",re=uI.some(M=>M.value===L)?L:"last_order_desc";c(B),f(B),h(G),v(te),w(re),Number.isInteger($)&&$>0&&S($),i.current=!0},[r]),p.useEffect(()=>{const B=setTimeout(()=>{f(o.trim())},xRe);return()=>clearTimeout(B)},[o]),p.useEffect(()=>{if(!i.current)return;const B=new URLSearchParams;d&&B.set("q",d);const U=Wh.find($=>$.value===m);U?.queryValue&&B.set("status",U.queryValue);const I=Yh.find($=>$.value===g);I?.queryValue&&B.set("type",I.queryValue),x&&B.set("sort",x),B.set("page",_),B.set("size",dI),B.toString()!==r&&n(B,{replace:!0})},[_,r,d,n,x,m,g]),p.useEffect(()=>{if(!e||!i.current)return;const B=new AbortController,U=Wh.find($=>$.value===m),I=Yh.find($=>$.value===g),L={q:d.trim()||void 0,status:U?.queryValue,type:I?.queryValue,sort:x,page:_,size:dI};return k(!0),H(""),console.count("Customers fetch triggered"),TOe(e,L,{signal:B.signal}).then($=>{A($.customers),C({totalCustomers:$.totalCustomers??$.total??$.customers.length,activeCustomers:$.activeCustomers??$.customers.filter(G=>G.status==="Active").length}),O(Math.max(1,$.totalPages??1))}).catch($=>{$?.name!=="AbortError"&&(console.error("Failed to load customers",$),H($?.message||"Unable to load customers right now. Please try again."),A([]),C({totalCustomers:0,activeCustomers:0}),O(1))}).finally(()=>{B.signal.aborted||k(!1)}),()=>{B.abort()}},[_,d,x,m,e,g]),p.useEffect(()=>{_>T&&S(T)},[_,T]);const K=B=>{const U=Math.min(Math.max(B,1),T);S(U)};return a.jsxs("section",{className:It.wrapper,children:[a.jsxs("div",{className:It.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:It.eyebrow,children:"Store  Customers"}),a.jsx("h1",{children:"Customers"}),a.jsx("p",{className:It.subtitle,children:"Read-only CRM view with GDPR-safe customer insights."})]}),a.jsxs("div",{className:It.summary,children:[a.jsxs("div",{children:[a.jsx("span",{className:It.summaryLabel,children:"Total customers"}),a.jsx("span",{className:It.summaryValue,children:E.totalCustomers})]}),a.jsxs("div",{children:[a.jsx("span",{className:It.summaryLabel,children:"Active"}),a.jsx("span",{className:It.summaryValue,children:E.activeCustomers})]})]})]}),a.jsxs("div",{className:It.filters,children:[a.jsxs("label",{className:It.searchField,children:[a.jsx("span",{className:It.filterLabel,children:"Search"}),a.jsx("input",{type:"search",placeholder:"Search by name or email",value:o,onChange:B=>{c(B.target.value),S(1)}})]}),a.jsxs("label",{children:[a.jsx("span",{className:It.filterLabel,children:"Status"}),a.jsx("select",{value:m,onChange:B=>{h(B.target.value),S(1)},children:Wh.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value))})]}),a.jsxs("label",{children:[a.jsx("span",{className:It.filterLabel,children:"Customer type"}),a.jsx("select",{value:g,onChange:B=>{v(B.target.value),S(1)},children:Yh.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value))})]}),a.jsxs("label",{children:[a.jsx("span",{className:It.filterLabel,children:"Sort by"}),a.jsx("select",{value:x,onChange:B=>{w(B.target.value),S(1)},children:uI.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),a.jsxs("div",{className:It.tableWrapper,children:[P&&a.jsx("div",{className:It.emptyState,children:P}),R&&a.jsx("div",{className:It.emptyState,children:"Loading customers"}),a.jsxs("table",{children:[a.jsxs("colgroup",{children:[a.jsx("col",{className:It.colCustomer}),a.jsx("col",{className:It.colStatus}),a.jsx("col",{className:It.colType}),a.jsx("col",{className:It.colUserId}),a.jsx("col",{className:It.colLastLogin}),a.jsx("col",{className:It.colLastOrder}),a.jsx("col",{className:It.colTotalSpent}),a.jsx("col",{className:It.colAction})]}),a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:It.stickyColumn,children:"Customer"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"User ID"}),a.jsx("th",{children:"Last login"}),a.jsx("th",{className:It.numericCell,children:"Last order"}),a.jsx("th",{className:It.numericCell,children:"Total spent"}),a.jsx("th",{className:It.actionHeader,children:"Actions"})]})}),a.jsx("tbody",{children:j.map((B,U)=>{const I=hg(B.id);if(!I)return null;const L=B.status||"",$=`${B.status||""}`.replace(" ",""),G=B.id||`customer-row-${U}`;return a.jsxs("tr",{children:[a.jsx("td",{className:It.stickyColumn,children:a.jsxs("div",{className:It.customerCell,children:[a.jsxs("div",{className:It.customerNameRow,children:[a.jsx("div",{className:It.customerName,children:B.name}),a.jsx("span",{className:It.tierBadge,children:SRe(B.pricingTier)})]}),a.jsx("div",{className:It.customerEmail,children:B.email})]})}),a.jsx("td",{children:a.jsx("span",{className:`${It.status} ${It[`status${$}`]}`,children:L})}),a.jsx("td",{children:B.type||""}),a.jsx("td",{className:It.monoText,children:B.userId||""}),a.jsx("td",{children:fI(B.lastLoginAt,{includeTime:!0})}),a.jsx("td",{className:It.numericCell,children:fI(B.lastOrderDate)}),a.jsx("td",{className:It.numericCell,children:jt(B.totalSpent,B.currency||"SEK")}),a.jsx("td",{className:It.actionCell,children:a.jsx(nt,{to:`/store/admin/customers/${I}`,className:It.detailLink,children:"View details"})})]},G)})})]}),!P&&!R&&j.length===0&&a.jsx("div",{className:It.emptyState,children:d||m!=="all"||g!=="all"?"No customers match your filters.":"No customers yet."})]}),a.jsxs("div",{className:It.pagination,children:[a.jsx("button",{type:"button",onClick:()=>K(_-1),disabled:_===1||R,children:"Previous"}),a.jsxs("div",{className:It.pageInfo,children:["Page ",_," of ",T]}),a.jsx("button",{type:"button",onClick:()=>K(_+1),disabled:_>=T||R,children:"Next"})]})]})}const jRe="_wrapper_3xxxn_1",NRe="_backLink_3xxxn_13",ARe="_header_3xxxn_33",ERe="_eyebrow_3xxxn_47",CRe="_subtitle_3xxxn_63",TRe="_status_3xxxn_73",kRe="_statusActive_3xxxn_97",ORe="_statusAtrisk_3xxxn_107",RRe="_statusInactive_3xxxn_117",MRe="_profileGrid_3xxxn_127",IRe="_profileCard_3xxxn_139",DRe="_ordersSection_3xxxn_209",PRe="_ordersHeader_3xxxn_221",$Re="_orderCount_3xxxn_233",LRe="_ordersTable_3xxxn_243",BRe="_couponCodeCell_3xxxn_301",URe="_tableActions_3xxxn_325",qRe="_inlineCodeAction_3xxxn_339",zRe="_tableActionButton_3xxxn_349",FRe="_tableActionLink_3xxxn_375",HRe="_iconActionButton_3xxxn_403",VRe="_primaryActionButton_3xxxn_441",KRe="_dangerActionButton_3xxxn_463",GRe="_orderStatus_3xxxn_485",WRe="_emptyState_3xxxn_505",YRe="_couponSection_3xxxn_533",XRe="_couponForm_3xxxn_545",QRe="_errorMessage_3xxxn_633",ZRe="_successMessage_3xxxn_643",JRe="_generatedCodeWrap_3xxxn_653",e2e="_copyFeedback_3xxxn_723",t2e="_modalBackdrop_3xxxn_733",n2e="_modalPanel_3xxxn_753",r2e="_modalHeader_3xxxn_769",a2e="_renewForm_3xxxn_777",s2e="_radioLabel_3xxxn_833",i2e="_checkboxLabel_3xxxn_835",o2e="_modalActions_3xxxn_849",l2e="_primaryButton_3xxxn_861",c2e="_deleteModalBody_3xxxn_891",u2e="_warningText_3xxxn_913",d2e="_tierRow_3xxxn_923",f2e="_toggleLabel_3xxxn_935",m2e="_tierFeedbackSuccess_3xxxn_949",h2e="_tierFeedbackError_3xxxn_961",tt={wrapper:jRe,backLink:NRe,header:ARe,eyebrow:ERe,subtitle:CRe,status:TRe,statusActive:kRe,statusAtrisk:ORe,statusInactive:RRe,profileGrid:MRe,profileCard:IRe,ordersSection:DRe,ordersHeader:PRe,orderCount:$Re,ordersTable:LRe,couponCodeCell:BRe,tableActions:URe,inlineCodeAction:qRe,tableActionButton:zRe,tableActionLink:FRe,iconActionButton:HRe,primaryActionButton:VRe,dangerActionButton:KRe,orderStatus:GRe,emptyState:WRe,couponSection:YRe,couponForm:XRe,errorMessage:QRe,successMessage:ZRe,generatedCodeWrap:JRe,copyFeedback:e2e,modalBackdrop:t2e,modalPanel:n2e,modalHeader:r2e,renewForm:a2e,radioLabel:s2e,checkboxLabel:i2e,modalActions:o2e,primaryButton:l2e,deleteModalBody:c2e,warningText:u2e,tierRow:d2e,toggleLabel:f2e,tierFeedbackSuccess:m2e,tierFeedbackError:h2e},mI=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString("sv-SE",{year:"numeric",month:"short",day:"numeric"})},Xh=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString("sv-SE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},Si=(e,t)=>{if(!e)return t;if(e.status===401||e.status===403)return"Admin permission required";const n=e?.payload?.errors;if(Array.isArray(n)&&n.length>0){const r=n.map(i=>i?.message||i?.msg||i?.detail||i).filter(Boolean).join(", ");if(r)return r}return typeof n=="string"?n:e?.message||t},p2e=e=>{if(e?.status!==409)return!1;const t=e?.payload??{};return`${t?.code??t?.errorCode??t?.data?.code??""}`.trim().toUpperCase()==="COUPON_CODE_NOT_AVAILABLE"?!0:(Array.isArray(t?.errors)?t.errors:[]).some(i=>`${i?.code??i?.errorCode??""}`.trim().toUpperCase()==="COUPON_CODE_NOT_AVAILABLE")},hI=e=>{const t=new Date;return t.setDate(t.getDate()+e),t},pI=e=>{const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},y2e=(e=[])=>e.flatMap(t=>(Array.isArray(t?.variants)?t.variants:[]).map(r=>{const i=`${r?.id??r?.variantId??r?._id??""}`.trim();return{variant:r,variantId:i}}).filter(({variantId:r})=>!!r).map(({variant:r,variantId:i})=>{const o=r?.weight??r?.weightGrams??r?.weightInGrams??r?.grams,c=Number.isFinite(Number(o))&&Number(o)>0,d=r?.name??r?.label??r?.title??r?.option??"",f=c?`${Number(o)}g`:`${d}`.trim();return{id:i,productId:`${t?.id??t?.productId??t?._id??""}`.trim(),label:`${t?.name||"Product"} ${f}`.trim()}})),yI=e=>{if(!e)return"";const t=`${e}`;if(t.length<=4)return"";const n=t.slice(-4);return`${"".repeat(Math.max(4,t.length-4))}${n}`};function g2e(){const{customerId:e}=Ls(),t=hg(e),{token:n,role:r,roles:i}=Xt(),[o,c]=p.useState(null),[d,f]=p.useState(!0),[m,h]=p.useState(""),[g,v]=p.useState([]),[x,w]=p.useState(""),[_,S]=p.useState(""),[j,A]=p.useState(""),[E,C]=p.useState(""),[T,O]=p.useState(!1),[R,k]=p.useState(""),[P,H]=p.useState(""),[K,B]=p.useState("DEFAULT"),[U,I]=p.useState(!1),[L,$]=p.useState(null),[G,te]=p.useState(!1),[re,M]=p.useState(!1),[q,z]=p.useState(null),[V,Y]=p.useState(""),[Z,ee]=p.useState("idle"),[ie,xe]=p.useState([]),[X,Ae]=p.useState(!1),[he,ue]=p.useState(""),[Xe,Ue]=p.useState(""),[ye,je]=p.useState(null),[Ee,qe]=p.useState(""),[W,fe]=p.useState(""),[we,de]=p.useState(""),[ve,se]=p.useState(null),[Re,Je]=p.useState(null),[le,Oe]=p.useState(!0),[Le,ne]=p.useState(()=>pI(hI(30))),[Se,Ge]=p.useState(!0),[vt,Dt]=p.useState("");p.useEffect(()=>{if(!n||!t)return;const Ce=new AbortController;return(async()=>{f(!0),h("");try{const Mt=await kOe(t,n,{signal:Ce.signal});c(Mt),B(Mt?.pricingTier||"DEFAULT"),te(!!Mt?.invoiceEligible)}catch(Mt){console.error("Failed to load customer details",Mt),h(Si(Mt,"Unable to load customer details right now.")),c(null)}finally{f(!1)}})(),()=>Ce.abort()},[t,n]),p.useEffect(()=>{if(!n)return;const Ce=new AbortController;return v5(n,{signal:Ce.signal}).then(et=>{const Mt=y2e(et);v(Mt),!_&&Mt.length>0&&S(Mt[0].id)}).catch(et=>{console.error("Failed to load variants for coupon creation",et),k(Si(et,"Unable to load variants."))}),()=>Ce.abort()},[_,n]);const Ne=p.useCallback(async Ce=>{if(!(!n||!t)){Ae(!0),ue("");try{const et=await OOe(t,n,{signal:Ce});xe(et)}catch(et){console.error("Failed to load coupons",et),ue(Si(et,"Unable to load customer coupons.")),xe([])}finally{Ae(!1)}}},[t,n]);p.useEffect(()=>{const Ce=new AbortController;return Ne(Ce.signal),()=>Ce.abort()},[Ne]);const We=p.useMemo(()=>{const Ce=x.trim().toLowerCase();return Ce?g.filter(et=>et.label.toLowerCase().includes(Ce)):g},[x,g]),ze=p.useMemo(()=>g.find(Ce=>Ce.id===_)||null,[_,g]),lt=p.useMemo(()=>[r,...Array.isArray(i)?i:[]].filter(Boolean).map(et=>`${et}`.trim().toUpperCase()).some(et=>et.includes("ADMIN")),[r,i]),Bt=async()=>{if(o?.id){I(!0),$(null);try{const Ce=await POe(o.id,K,n);Ce&&(c(Ce),B(Ce.pricingTier||K)),$({type:"success",message:"Saved"})}catch(Ce){$({type:"error",message:Si(Ce,"Unable to update pricing tier.")})}finally{I(!1)}}},Qt=async()=>{if(o?.id){M(!0),z(null);try{const Ce=await $Oe(o.id,G,n);Ce&&(c(Ce),te(!!Ce.invoiceEligible)),z({type:"success",message:"Saved"})}catch(Ce){z({type:"error",message:Si(Ce,"Unable to update invoice eligibility.")})}finally{M(!1)}}},kn=async Ce=>{if(Ce.preventDefault(),k(""),H(""),Y(""),ee("idle"),!_){k("Select a variant before generating a code.");return}const et=Number.parseFloat(j);if(!Number.isFinite(et)||et<=0){k("Enter a valid amount off in SEK.");return}const Mt=Math.round(et*100),$t={variantId:`${_}`.trim(),productVariantId:`${_}`.trim(),amountOffCents:Mt,discountAmountCents:Mt,amountOff:Number(et.toFixed(2)),discountAmount:Number(et.toFixed(2)),...ze?.productId?{productId:ze.productId}:{},...E?{expiresAt:new Date(E).toISOString()}:{}};O(!0);try{const Jt=(await ROe(t,$t,n))?.couponCode||"";Y(Jt),H("Code generated. Share it with the customer."),await Ne()}catch(At){console.error("Failed to create coupon",At),k(Si(At,"Unable to generate discount code."))}finally{O(!1)}},Ir=async()=>{if(V)try{await navigator.clipboard.writeText(V),ee("copied")}catch{ee("failed")}},xs=async(Ce,et)=>{const Mt=`${et||""}`.trim();if(Mt)try{await navigator.clipboard.writeText(Mt),Ue(Ce),window.setTimeout(()=>{Ue($t=>$t===Ce?"":$t)},1800)}catch{ue("Copy failed. Please copy manually.")}},Dr=p.useCallback((Ce,et)=>{je({type:Ce,message:et})},[]);p.useEffect(()=>{if(!ye)return;const Ce=window.setTimeout(()=>{je(null)},3500);return()=>window.clearTimeout(Ce)},[ye]);const er=p.useCallback((Ce,et)=>{et&&xe(Mt=>Mt.map($t=>($t.id||`${$t.variantId}-${$t.createdAt}`)===Ce?{...$t,...et}:$t))},[]),rn=p.useCallback((Ce,et,Mt)=>{et&&xe($t=>{const At=$t.findIndex(nn=>(nn.id||`${nn.variantId}-${nn.createdAt}`)===Ce),Jt=[...$t];return Mt&&At>=0&&(Jt[At]={...Jt[At],...Mt}),et.id&&Jt.some(nn=>nn.id===et.id)?Jt.map(nn=>nn.id===et.id?{...nn,...et}:nn):At>=0?(Jt[At]={...Jt[At],...et},Jt):[et,...Jt]})},[]),Us=p.useCallback((Ce,et,Mt)=>{et&&xe($t=>{const At=$t.findIndex(nn=>(nn.id||`${nn.variantId}-${nn.createdAt}`)===Ce),Jt=[...$t];Mt&&At>=0&&(Jt[At]={...Jt[At],...Mt});const pr=Jt.findIndex(nn=>nn.id&&et.id&&nn.id===et.id);if(pr>=0){const nn={...Jt[pr],...et};return Jt.splice(pr,1),[nn,...Jt]}return[et,...Jt]})},[]),Ss=async Ce=>{const et=Ce.id||`${Ce.variantId}-${Ce.createdAt}`;if(window.confirm(`Resend this code to ${o.email}?`)){ue(""),qe(et);try{const{coupon:$t,replacedCoupon:At,regenerated:Jt}=await MOe(t,Ce.id,n);Jt?(Us(et,$t,At),Dr("success","Resent (new code generated)")):(er(et,$t),Dr("success",`Sent to ${o.email}`))}catch($t){$t?.status===429?Dr("error","Already sent recently. Try again later."):p2e($t)?(Dr("error","Code value isnt available for this legacy coupon. Use Renew to generate a new code."),ai(Ce)):Dr("error",Si($t,"Unable to resend coupon right now."))}finally{qe("")}}},ai=Ce=>{se(Ce),Oe(!0),ne(pI(hI(30))),Ge(!0),Dt("")},Yr=()=>{W||(se(null),Dt(""))},Fn=Ce=>{Je(Ce)},An=()=>{we||Je(null)},za=async()=>{if(!Re?.id)return;const Ce=Re.id||`${Re.variantId}-${Re.createdAt}`;ue(""),de(Ce);try{await DOe(t,Re.id,n),xe(et=>et.filter(Mt=>(Mt.id||`${Mt.variantId}-${Mt.createdAt}`)!==Ce)),Je(null),Dr("success","Coupon deleted.")}catch(et){Dr("error",Si(et,"Unable to delete coupon right now."))}finally{de("")}},ba=async Ce=>{if(Ce.preventDefault(),!ve)return;const et=ve.id||`${ve.variantId}-${ve.createdAt}`,Mt={regenerateCode:le,sendEmail:Se,...Le?{newExpiryAt:new Date(`${Le}T23:59:59`).toISOString()}:{}};Dt(""),ue(""),fe(et);try{const{coupon:$t,replacedCoupon:At}=await IOe(t,ve.id,Mt,n);rn(et,$t,At),Dr("success",Se?"Coupon renewed and sent.":"Coupon renewed."),se(null)}catch($t){const At=Si($t,"Unable to renew coupon.");Dt(At)}finally{fe("")}};if(!t)return a.jsxs("section",{className:tt.wrapper,children:[a.jsx(nt,{to:"/store/admin/customers",className:tt.backLink,children:" Back to customers"}),a.jsxs("div",{className:tt.emptyState,children:[a.jsx("h1",{children:"Customer not found"}),a.jsx("p",{children:"Invalid customer id."})]})]});if(d)return a.jsxs("section",{className:tt.wrapper,children:[a.jsx(nt,{to:"/store/admin/customers",className:tt.backLink,children:" Back to customers"}),a.jsxs("div",{className:tt.emptyState,children:[a.jsx("h1",{children:"Loading customer"}),a.jsx("p",{children:"Fetching the latest customer details"})]})]});if(m||!o)return a.jsxs("section",{className:tt.wrapper,children:[a.jsx(nt,{to:"/store/admin/customers",className:tt.backLink,children:" Back to customers"}),a.jsxs("div",{className:tt.emptyState,children:[a.jsx("h1",{children:"Customer not found"}),a.jsx("p",{children:m||"We couldnt locate that customer. Please return to the list and try again."})]})]});const _a=`${o.status||""}`.replace(" ","");return a.jsxs("section",{className:tt.wrapper,children:[a.jsx(nt,{to:"/store/admin/customers",className:tt.backLink,children:" Back to customers"}),a.jsxs("div",{className:tt.header,children:[a.jsxs("div",{children:[a.jsx("p",{className:tt.eyebrow,children:"Store  Customers"}),a.jsx("h1",{children:o.name}),a.jsx("p",{className:tt.subtitle,children:"Read-only profile overview and order history."})]}),a.jsx("span",{className:`${tt.status} ${tt[`status${_a}`]}`,children:o.status||""})]}),a.jsxs("div",{className:tt.profileGrid,children:[a.jsxs("div",{className:tt.profileCard,children:[a.jsx("h2",{children:"Profile"}),a.jsxs("dl",{children:[a.jsxs("div",{children:[a.jsx("dt",{children:"Name"}),a.jsx("dd",{children:o.name})]}),a.jsxs("div",{children:[a.jsx("dt",{children:"Email"}),a.jsx("dd",{children:o.email})]}),a.jsxs("div",{children:[a.jsx("dt",{children:"Customer type"}),a.jsx("dd",{children:o.type||""})]}),a.jsxs("div",{children:[a.jsx("dt",{children:"Last order"}),a.jsx("dd",{children:mI(o.lastOrderDate)})]}),a.jsxs("div",{children:[a.jsx("dt",{children:"Total spent"}),a.jsx("dd",{children:jt(o.totalSpent,o.currency||"SEK")})]}),a.jsxs("div",{children:[a.jsx("dt",{children:"Pricing tier"}),a.jsx("dd",{children:a.jsxs("div",{className:tt.tierRow,children:[a.jsx("select",{value:K,onChange:Ce=>{B(Ce.target.value),$(null)},children:JV.map(Ce=>a.jsx("option",{value:Ce,children:Ce},Ce))}),a.jsx("button",{type:"button",onClick:Bt,disabled:U,children:U?"Saving":"Save"}),L?a.jsx("span",{className:L.type==="error"?tt.tierFeedbackError:tt.tierFeedbackSuccess,role:"status",children:L.message}):null]})})]}),a.jsxs("div",{children:[a.jsx("dt",{children:"Invoice payment eligible"}),a.jsx("dd",{children:a.jsxs("div",{className:tt.tierRow,children:[a.jsxs("label",{className:tt.toggleLabel,children:[a.jsx("input",{type:"checkbox",checked:G,onChange:Ce=>{te(Ce.target.checked),z(null)}}),a.jsx("span",{children:G?"Enabled":"Disabled"})]}),a.jsx("button",{type:"button",onClick:Qt,disabled:re,children:re?"Saving":"Save"}),q?a.jsx("span",{className:q.type==="error"?tt.tierFeedbackError:tt.tierFeedbackSuccess,role:"status",children:q.message}):null]})})]})]})]}),a.jsxs("div",{className:tt.profileCard,children:[a.jsx("h2",{children:"GDPR-safe notes"}),a.jsxs("ul",{children:[a.jsx("li",{children:"No payment details stored in this view."}),a.jsx("li",{children:"No passwords or technical identifiers shown."}),a.jsx("li",{children:"Orders are read-only for compliance."})]})]})]}),a.jsxs("div",{className:tt.couponSection,children:[a.jsx("div",{className:tt.ordersHeader,children:a.jsx("h2",{children:"Generate discount code"})}),a.jsxs("form",{className:tt.couponForm,onSubmit:kn,children:[a.jsxs("label",{children:[a.jsx("span",{children:"Search variants"}),a.jsx("input",{type:"search",placeholder:"Search by product or weight",value:x,onChange:Ce=>w(Ce.target.value)})]}),a.jsxs("label",{children:[a.jsx("span",{children:"Variant"}),a.jsxs("select",{value:_,onChange:Ce=>S(Ce.target.value),disabled:T,required:!0,children:[We.length?null:a.jsx("option",{value:"",children:"No variants found"}),We.map(Ce=>a.jsx("option",{value:Ce.id,children:Ce.label},Ce.id))]})]}),a.jsxs("label",{children:[a.jsx("span",{children:"Amount off (SEK)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",min:"0",value:j,onChange:Ce=>A(Ce.target.value),disabled:T,required:!0})]}),a.jsxs("label",{children:[a.jsx("span",{children:"Expiry date/time (optional)"}),a.jsx("input",{type:"datetime-local",value:E,onChange:Ce=>C(Ce.target.value),disabled:T})]}),a.jsx("button",{type:"submit",disabled:T||!_,children:T?"Generating":"Generate discount code"})]}),R?a.jsx("p",{className:tt.errorMessage,children:R}):null,P?a.jsx("p",{className:tt.successMessage,children:P}):null,V?a.jsxs("div",{className:tt.generatedCodeWrap,children:[a.jsxs("label",{children:[a.jsx("span",{children:"Generated code"}),a.jsx("input",{type:"text",value:V,readOnly:!0})]}),a.jsx("button",{type:"button",onClick:Ir,children:"Copy"}),Z==="copied"?a.jsx("span",{className:tt.copyFeedback,children:"Copied"}):null,Z==="failed"?a.jsx("span",{className:tt.errorMessage,children:"Copy failed. Please copy manually."}):null]}):null,a.jsx("div",{className:tt.ordersHeader,children:a.jsx("h3",{children:"Existing customer coupons"})}),ye?a.jsx("p",{className:ye.type==="error"?tt.errorMessage:tt.successMessage,children:ye.message}):null,he?a.jsx("p",{className:tt.errorMessage,children:he}):null,X?a.jsx("div",{className:tt.emptyState,children:"Loading coupons"}):null,!X&&!he?a.jsxs("div",{className:tt.ordersTable,children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Product / Variant"}),a.jsx("th",{children:"Amount off"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Expiry"}),a.jsx("th",{children:"Last sent"}),a.jsx("th",{children:"Code"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ie.map(Ce=>{const et=Ce.id||`${Ce.variantId}-${Ce.createdAt}`,Mt=!!`${Ce.couponCode||""}`.trim(),$t=`${Ce.status||"Active"}`,At=$t.toLowerCase(),Jt=$t.toLowerCase()==="expired",pr=At==="redeemed",nn=At==="deleted",vn=!!`${Ce.codeValue||""}`.trim(),xa=Ce.codeAvailable===!1||!vn,Fa=Ce.autoRenewOnResend===!0||Ce.resendAutoRenewSupported===!0||Ce.canResendWithoutCode===!0,Xr=Jt?"Expired  renew to send":pr?"Redeemed coupon cannot be resent":nn?"Deleted coupon cannot be resent":xa&&!Fa?"Code value isnt available for this legacy coupon. Use Renew to generate a new code.":"",Be=Ee===et||W===et||we===et,Ot=!!Ce.id&&!Xr,Lt=nn?"Deleted coupon cannot be renewed":"",an=Ce.variantDisplay||(Ce.productName&&Ce.variantLabel?`${Ce.productName} ${Ce.variantLabel}`:Ce.variantLabel||"");return a.jsxs("tr",{children:[a.jsx("td",{children:an}),a.jsx("td",{children:`-${jt((Ce.amountOffCents||0)/100,"SEK")}`}),a.jsx("td",{children:a.jsx("span",{className:tt.orderStatus,children:Ce.status||"Active"})}),a.jsx("td",{children:Xh(Ce.createdAt)}),a.jsx("td",{children:Xh(Ce.expiresAt)}),a.jsx("td",{children:Xh(Ce.lastSentAt)}),a.jsxs("td",{className:tt.couponCodeCell,children:[a.jsx("code",{children:yI(Ce.couponCode)}),Mt?a.jsx("button",{type:"button",className:`${tt.iconActionButton} ${tt.inlineCodeAction}`,onClick:()=>xs(et,Ce.couponCode),disabled:Be,title:"Copy coupon code","aria-label":"Copy coupon code",children:""}):null,Xe===et?a.jsx("span",{className:tt.copyFeedback,children:"Copied"}):null]}),a.jsx("td",{children:a.jsxs("div",{className:tt.tableActions,children:[a.jsx("button",{type:"button",className:tt.tableActionButton,onClick:()=>Ss(Ce),disabled:!Ot||Be,title:Xr||"",children:Ee===et?"Resending":"Resend"}),a.jsx("button",{type:"button",className:tt.tableActionButton,onClick:()=>ai(Ce),disabled:!Ce.id||nn||Be,title:Lt,children:W===et?"Renewing":"Renew"}),lt?a.jsx("button",{type:"button",className:`${tt.iconActionButton} ${tt.dangerActionButton}`,onClick:()=>Fn(Ce),disabled:Be||!Ce.id,title:"Delete coupon","aria-label":"Delete coupon",children:we===et?"":""}):null]})})]},et)})})]}),ie.length?null:a.jsx("div",{className:tt.emptyState,children:"No coupons created for this customer yet."})]}):null]}),ve?a.jsx("div",{className:tt.modalBackdrop,role:"presentation",onClick:Yr,children:a.jsxs("aside",{className:tt.modalPanel,role:"dialog","aria-modal":"true","aria-label":"Renew coupon",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("header",{className:tt.modalHeader,children:a.jsxs("h3",{children:["Renew coupon for ",o.email]})}),a.jsxs("form",{className:tt.renewForm,onSubmit:ba,children:[a.jsxs("fieldset",{disabled:!!W,children:[a.jsxs("label",{className:tt.radioLabel,children:[a.jsx("input",{type:"radio",name:"renewType",checked:le,onChange:()=>Oe(!0)}),"Generate a new code (recommended)"]}),a.jsxs("label",{className:tt.radioLabel,children:[a.jsx("input",{type:"radio",name:"renewType",checked:!le,onChange:()=>Oe(!1)}),"Extend expiry for same code"]}),a.jsxs("label",{children:[a.jsx("span",{children:"Expiry date"}),a.jsx("input",{type:"date",value:Le,onChange:Ce=>ne(Ce.target.value)})]}),a.jsxs("label",{className:tt.checkboxLabel,children:[a.jsx("input",{type:"checkbox",checked:Se,onChange:Ce=>Ge(Ce.target.checked)}),"Send email after renew"]})]}),vt?a.jsx("p",{className:tt.errorMessage,children:vt}):null,a.jsxs("div",{className:tt.modalActions,children:[a.jsx("button",{type:"button",className:tt.tableActionButton,onClick:Yr,children:"Cancel"}),a.jsx("button",{type:"submit",className:tt.primaryButton,children:W?"Renewing":Se?"Renew & Send":"Renew"})]})]})]})}):null,Re?a.jsx("div",{className:tt.modalBackdrop,role:"presentation",onClick:An,children:a.jsxs("aside",{className:tt.modalPanel,role:"dialog","aria-modal":"true","aria-label":"Delete coupon",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("header",{className:tt.modalHeader,children:a.jsx("h3",{children:"Delete coupon?"})}),a.jsxs("div",{className:tt.deleteModalBody,children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Code:"})," ",yI(Re.couponCode)]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Product/Variant:"})," ",Re.variantDisplay||(Re.productName&&Re.variantLabel?`${Re.productName} ${Re.variantLabel}`:Re.variantLabel||"")]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Amount off:"})," ",`-${jt((Re.amountOffCents||0)/100,"SEK")}`]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Expiry:"})," ",Xh(Re.expiresAt)]}),a.jsx("p",{className:tt.warningText,children:"This will deactivate the coupon and remove it from the list. It wont affect past orders."})]}),a.jsxs("div",{className:tt.modalActions,children:[a.jsx("button",{type:"button",className:tt.tableActionButton,onClick:An,children:"Cancel"}),a.jsx("button",{type:"button",className:`${tt.tableActionButton} ${tt.dangerActionButton}`,onClick:za,disabled:!!we,children:we?"Deleting":"Delete"})]})]})}):null,a.jsxs("div",{className:tt.ordersSection,children:[a.jsxs("div",{className:tt.ordersHeader,children:[a.jsx("h2",{children:"Orders"}),a.jsxs("span",{className:tt.orderCount,children:[o.orders?.length??0," total"]})]}),a.jsxs("div",{className:tt.ordersTable,children:[a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Items"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Paid total"})]})}),a.jsx("tbody",{children:(o.orders||[]).map(Ce=>a.jsxs("tr",{children:[a.jsx("td",{children:mI(Ce.date)}),a.jsx("td",{children:Ce.items||""}),a.jsx("td",{children:a.jsx("span",{className:tt.orderStatus,children:Lf(Ce.status).label})}),a.jsx("td",{children:jt(Ce.total,Ce.currency||o.currency||"SEK")})]},Ce.id||`${o.id}-${Ce.date}-${Ce.total}`))})]}),!o.orders?.length&&a.jsx("div",{className:tt.emptyState,children:"No orders found for this customer."})]})]})]})}const Mf=Bn(),qj=`${Mf}/api/admin/store/orders`,zj=e=>({"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}),Fj=[{id:"ord_1001",orderNumber:"1001",createdAt:new Date().toISOString(),status:"RECEIVED",paymentStatus:"PAID",paymentReference:"pi_43JKS",paymentMethod:"Card",customer:{name:"Alex Karlsson",email:"alex@example.com",phone:"+46701234567"},fulfillmentType:"SHIPPING",shippingAddress:{line1:"Kammakargatan 12",city:"Solna",postalCode:"16974",country:"Sweden"},items:[{id:"li_1",name:"Genovese Basil 50g",quantity:2,unitPrice:39,lineTotal:78}],totals:{subtotal:78,shipping:49,tax:0,discount:0,total:127,currency:"SEK"},internalNotes:""}],Hj=e=>!1,gI=e=>{const t=Number(e);return Number.isFinite(t)?t:null},El=(e,t)=>{const n=gI(t);return n!==null?n/100:gI(e)??0},v2e=(e,...t)=>{for(const n of t)if(Array.isArray(e?.[n]))return e[n];return Array.isArray(e)?e:[]},vI=e=>e?typeof e=="string"?{line1:e}:{line1:e.line1??e.address1??"",line2:e.line2??e.address2??"",city:e.city??"",state:e.state??e.province??"",postalCode:e.postalCode??e.zip??"",country:e.country??""}:null,b2e=e=>(Array.isArray(e)?e:[]).map((n,r)=>{const i=Number(n?.quantity??n?.qty??1)||1,o=El(n?.unitPrice??n?.price??n?.amount,n?.unitPriceCents??n?.priceCents??n?.amountCents),c=El(n?.lineTotal??n?.total,n?.lineTotalCents??n?.totalCents)||i*o;return{id:n?.id??n?.lineId??`${r}`,name:n?.name??n?.title??n?.sku??"Item",quantity:i,unitPrice:o,lineTotal:c,sku:n?.sku??""}}),_2e=e=>{const t=String(e||"").trim();return t?t.replace(/^HL-HL-/i,"HL-"):""},Ll=(e={})=>{const t=e?.id??e?.orderId??e?._id??e?.orderNumber??"",n=b2e(e?.items??e?.lineItems??e?.lines),r=n.reduce((h,g)=>h+g.lineTotal,0),i=e?.totals??e?.summary??e?.amounts??{},o=e?.customer??e?.customerInfo??{},c=e?.payment??{},d=e?.fulfillment??{},f=e?.fulfillmentType??e?.deliveryType??d?.type,m=f?String(f):e?.shippingAddress?"SHIPPING":"PICKUP";return{id:t,formattedOrderNumber:_2e(e?.formattedOrderNumber??e?.formatted_order_number??e?.displayOrderNumber),orderNumber:e?.orderNumber??t,createdAt:e?.createdAt??e?.placedAt??e?.date??"",status:e?.status??e?.deliveryStatus??e?.fulfillmentStatus??"RECEIVED",paymentStatus:e?.paymentStatus??c?.status??e?.status??"PENDING",paymentReference:c?.reference??c?.id??e?.paymentReference??"",paymentMethod:c?.method??e?.paymentMethod??"",paymentMode:e?.paymentMode??e?.payment_mode??c?.mode??"",invoiceStatus:e?.invoiceStatus??e?.invoice?.status??c?.invoiceStatus??"",invoiceNumber:e?.invoiceNumber??e?.invoice?.number??c?.invoiceNumber??"",invoiceDueDate:e?.invoiceDueDate??e?.invoice?.dueDate??c?.invoiceDueDate??"",customer:{name:o?.name??o?.fullName??e?.customerName??"",email:o?.email??e?.email??"",phone:o?.phone??e?.phone??""},fulfillmentType:m,pickupLocation:d?.pickupLocation??e?.pickupLocation??"",shippingAddress:vI(e?.shippingAddress??e?.address??d?.address),billingAddress:vI(e?.billingAddress??c?.billingAddress),items:n,totals:{subtotal:El(e?.subtotal??i?.subtotal,e?.subtotalCents??i?.subtotalCents)||r,shipping:El(e?.shipping??i?.shipping??i?.shippingTotal,e?.shippingCents??i?.shippingCents),tax:El(e?.tax??i?.tax??i?.taxTotal,e?.taxCents??i?.taxCents),discount:El(e?.discount??i?.discount,e?.discountCents??i?.discountCents),total:El(e?.paidTotal??e?.total??i?.total,e?.paidTotalCents??e?.totalCents??i?.totalCents)||r,currency:e?.currency??i?.currency??"SEK"},internalNotes:e?.internalNotes??e?.adminNote??"",raw:e}},x2e=e=>e?.order??e?.data??e;async function S2e(e,{includeCancelled:t,status:n,paymentStatus:r,q:i,dateFrom:o,dateTo:c,page:d,size:f,sort:m,signal:h}={}){const g=new URLSearchParams;Object.entries({includeCancelled:t,status:n,paymentStatus:r,q:i,dateFrom:o,dateTo:c,page:d,size:f,sort:m}).forEach(([S,j])=>{j==null||j===""||g.append(S,String(j))});const x=g.toString(),w=[`${qj}${x?`?${x}`:""}`,`${Mf}/api/admin/orders${x?`?${x}`:""}`,`${Mf}/api/store/admin/orders${x?`?${x}`:""}`];let _=null;for(const S of w)try{const j=await Ve(S,{method:"GET",headers:zj(e),signal:h},{token:e}),A=await at(j,"Failed to load orders");return v2e(A,"orders","data","items").map(Ll)}catch(j){_=j}if(Hj())return Fj.map(Ll);throw _||new Error("Failed to load orders")}async function w2e(e,t,n,{note:r}={}){if(!t)throw new Error("Order ID is required");if(!n)throw new Error("Status is required");const i={status:n,...r?{note:r}:{}},o=[`${qj}/${encodeURIComponent(t)}/status`,`${Mf}/api/admin/orders/${encodeURIComponent(t)}/status`];let c=null;for(const d of o)try{const f=await Ve(d,{method:"PATCH",headers:zj(e),body:JSON.stringify(i)},{token:e}),m=await at(f,"Failed to update order status");return Ll(m?.order??m??{id:t,status:n})}catch(f){c=f}if(Hj()){const d=Fj.find(f=>String(f.id)===String(t));return d?(d.status=n,r!=null&&(d.internalNotes=r),Ll(d)):Ll({id:t,status:n})}throw c||new Error("Failed to update order status")}async function j2e(e,t,{signal:n}={}){if(!t)throw new Error("Order ID is required");const r=encodeURIComponent(t),i=[`${qj}/${r}`,`${Mf}/api/admin/orders/${r}`];let o=null;for(const c of i)try{const d=await Ve(c,{method:"GET",headers:zj(e),signal:n},{token:e}),f=await at(d,"Failed to load order details");return Ll(x2e(f))}catch(d){o=d}if(Hj()){const c=Fj.find(d=>String(d.id)===String(t));if(c)return Ll(c)}throw o||new Error("Failed to load order details")}const N2e="_page_5o854_1",A2e="_header_5o854_25",E2e="_filtersRow_5o854_29",C2e="_section_5o854_61",T2e="_statusRow_5o854_63",k2e="_searchInput_5o854_77",O2e="_statusSelect_5o854_79",R2e="_filterSelect_5o854_81",M2e="_toggleLabel_5o854_85",I2e="_densityToggle_5o854_101",D2e="_densityBtn_5o854_103",P2e="_densityBtnActive_5o854_105",$2e="_muted_5o854_109",L2e="_badge_5o854_113",B2e="_badgeGreen_5o854_137",U2e="_badgeYellow_5o854_139",q2e="_badgeRed_5o854_141",z2e="_badgeRedSoft_5o854_143",F2e="_badgeBlue_5o854_145",H2e="_badgePurple_5o854_147",V2e="_badgeNeutral_5o854_149",K2e="_openBtn_5o854_153",G2e="_drawer_5o854_157",W2e="_drawerOpen_5o854_181",Y2e="_drawerHeader_5o854_183",X2e="_drawerContent_5o854_209",Q2e="_cancelledWarning_5o854_215",Z2e="_row_5o854_239",J2e="_mono_5o854_273",eMe="_lineItem_5o854_277",tMe="_toast_5o854_279",nMe="_toastSuccess_5o854_281",rMe="_toastError_5o854_283",aMe="_empty_5o854_285",sMe="_skeletonCard_5o854_287",iMe="_error_5o854_289",oMe="_noAccess_5o854_291",lMe="_drawerPlaceholder_5o854_293",cMe="_detailsErrorBox_5o854_297",uMe="_drawerLoading_5o854_317",dMe="_drawerSkeleton_5o854_319",fMe="_boardWrap_5o854_323",mMe="_boardWrapCompact_5o854_349",hMe="_boardWrapWithDrawer_5o854_351",pMe="_board_5o854_323",yMe="_boardCompact_5o854_377",gMe="_column_5o854_381",vMe="_columnHeader_5o854_403",bMe="_rowCancelled_5o854_427",_Me="_columnContent_5o854_431",xMe="_orderCard_5o854_451",SMe="_orderCardCompact_5o854_471",wMe="_cardOrder_5o854_475",jMe="_cardCustomer_5o854_477",NMe="_cardTotal_5o854_479",AMe="_cardBadges_5o854_501",Fe={page:N2e,header:A2e,filtersRow:E2e,section:C2e,statusRow:T2e,searchInput:k2e,statusSelect:O2e,filterSelect:R2e,toggleLabel:M2e,densityToggle:I2e,densityBtn:D2e,densityBtnActive:P2e,muted:$2e,badge:L2e,badgeGreen:B2e,badgeYellow:U2e,badgeRed:q2e,badgeRedSoft:z2e,badgeBlue:F2e,badgePurple:H2e,badgeNeutral:V2e,openBtn:K2e,drawer:G2e,drawerOpen:W2e,drawerHeader:Y2e,drawerContent:X2e,cancelledWarning:Q2e,row:Z2e,mono:J2e,lineItem:eMe,toast:tMe,toastSuccess:nMe,toastError:rMe,empty:aMe,skeletonCard:sMe,error:iMe,noAccess:oMe,drawerPlaceholder:lMe,detailsErrorBox:cMe,drawerLoading:uMe,drawerSkeleton:dMe,boardWrap:fMe,boardWrapCompact:mMe,boardWrapWithDrawer:hMe,board:pMe,boardCompact:yMe,column:gMe,columnHeader:vMe,rowCancelled:bMe,columnContent:_Me,orderCard:xMe,orderCardCompact:SMe,cardOrder:wMe,cardCustomer:jMe,cardTotal:NMe,cardBadges:AMe},Qh=["RECEIVED","PREPARING","SHIPPING","READY_FOR_PICKUP","DELIVERED","CANCELLED"],EMe=["ALL","PAID","PENDING","FAILED"],bI="admin-orders-board-density",_I="admin-orders-compact-stages",ma=e=>String(e||"").trim().toUpperCase().replace(/[\s-]+/g,"_"),rs=e=>e==null?"":String(e).trim()||"",of=e=>ma(e?.fulfillmentType).includes("PICKUP"),b5=e=>["CANCELLED_BY_CUSTOMER","CANCELLED"].includes(ma(e)),Zh=e=>b5(e?.status),CMe=e=>{const t=ma(e);return b5(e)?"CANCELLED":t==="COMPLETED"?"DELIVERED":t},TMe={RECEIVED:"Received",PREPARING:"Preparing",SHIPPING:"Shipping",READY_FOR_PICKUP:"Preparing",DELIVERED:"Delivered",COMPLETED:"Delivered",CANCELLED:"Cancelled",CANCELLED_BY_CUSTOMER:"Cancelled"},xI=e=>{const t=ma(e);return TMe[t]||"Received"},kMe=e=>of(e)?"PICKUP":"SHIPPING",OMe=e=>{const t=ma(e?.paymentStatus),n=ma(e?.paymentMode);return["PAID","PAYMENT_SUCCEEDED","COMPLETED","PROCESSING"].includes(t)?"PAID":["PAY_LATER","INVOICE"].includes(n)?"INVOICE":"UNPAID"},RMe=e=>{const t=ma(e);return["CANCELLED_BY_CUSTOMER","CANCELLED"].includes(t)?Fe.badgeRed:["DELIVERED","COMPLETED"].includes(t)?Fe.badgeGreen:["SHIPPING","READY_FOR_PICKUP","IN_TRANSIT"].includes(t)?Fe.badgeBlue:["PREPARING"].includes(t)?Fe.badgeYellow:Fe.badgeNeutral},MMe=e=>e==="PAID"?Fe.badgeGreen:e==="INVOICE"?Fe.badgePurple:Fe.badgeRedSoft,IMe=e=>of(e)?Fe.badgePurple:Fe.badgeBlue,Vd=e=>e?.formattedOrderNumber||rs(e?.orderNumber),SI=e=>{if(!e)return[];const t=[e.postalCode,e.city].filter(Boolean).join(" ");return[e.line1,e.line2,t,e.state,e.country].filter(Boolean)},DMe=(e,t)=>{if(!t?.from&&!t?.to)return!0;const n=new Date(e||0).getTime();if(!n)return!1;const r=t.from?new Date(t.from).getTime():null,i=t.to?new Date(`${t.to}T23:59:59`).getTime():null;return!(r&&n<r||i&&n>i)},PMe={RECEIVED:["PREPARING"],PREPARING:["SHIPPING","READY_FOR_PICKUP"],SHIPPING:["DELIVERED"],READY_FOR_PICKUP:["DELIVERED"],DELIVERED:[]};function $Me(){const{token:e,permissions:t}=Xt(),[n,r]=p.useState([]),[i,o]=p.useState(!0),[c,d]=p.useState(""),[f,m]=p.useState(null),[h,g]=p.useState(null),[v,x]=p.useState(!1),[w,_]=p.useState(""),[S,j]=p.useState(""),[A,E]=p.useState(""),[C,T]=p.useState(!1),[O,R]=p.useState(null),[k,P]=p.useState(""),[H,K]=p.useState("ALL"),[B,U]=p.useState("ALL"),[I,L]=p.useState(!1),[$,G]=p.useState({from:"",to:""}),[te,re]=p.useState("newest"),[M,q]=p.useState(()=>typeof window>"u"?"comfortable":window.localStorage.getItem(bI)==="compact"?"compact":"comfortable"),[z,V]=p.useState(()=>typeof window>"u"?!0:window.localStorage.getItem(_I)!=="off"),Y=us({permissions:t},kt.ORDERS_MANAGE),Z=(de,ve)=>{R({type:de,message:ve,id:Date.now()}),setTimeout(()=>R(null),2600)},ee=p.useCallback(async()=>{if(!e)return;const de=I||H==="CANCELLED",ve=H!=="ALL"?H==="CANCELLED"?null:H:null;o(!0),d("");try{const se=await S2e(e,{includeCancelled:de,status:ve,paymentStatus:B!=="ALL"?B:null,q:k.trim()||null,dateFrom:$.from||null,dateTo:$.to||null,sort:te||null});r(se)}catch(se){d(se?.message||"Unable to load orders")}finally{o(!1)}},[$.from,$.to,B,k,I,te,H,e]),ie=p.useCallback(async de=>{if(!(!e||!de)){x(!0),_("");try{const ve=await j2e(e,de);g(ve),r(se=>se.map(Re=>String(Re.id)===String(ve.id)?{...Re,...ve}:Re))}catch(ve){_(ve?.message||"Failed to load order details"),g(null)}finally{x(!1)}}},[e]);p.useEffect(()=>{ee()},[ee]);const xe=p.useMemo(()=>n.find(de=>String(de.id)===String(f))||null,[n,f]),X=h&&String(h.id)===String(f)?h:xe,Ae=X?.raw?.payment??{},he=Zh(X);p.useEffect(()=>{X&&(j(ma(X.status)),E(X.internalNotes||""))},[X]),p.useEffect(()=>{window.localStorage.setItem(bI,M)},[M]),p.useEffect(()=>{window.localStorage.setItem(_I,z?"on":"off")},[z]);const ue=p.useMemo(()=>{const de=k.trim().toLowerCase();let ve=[...n];return de&&(ve=ve.filter(se=>[Vd(se),se.customer?.name,se.customer?.email].map(Je=>`${Je||""}`.toLowerCase()).some(Je=>Je.includes(de)))),H!=="ALL"?ve=ve.filter(se=>H==="CANCELLED"?Zh(se):ma(se.status)===H):I||(ve=ve.filter(se=>!Zh(se))),B!=="ALL"&&(ve=ve.filter(se=>{const Re=ma(se.paymentStatus);return B==="PENDING"?!["PAID","PAYMENT_SUCCEEDED","FAILED","PAYMENT_FAILED"].includes(Re):B==="FAILED"?["FAILED","PAYMENT_FAILED"].includes(Re):["PAID","PAYMENT_SUCCEEDED"].includes(Re)})),ve=ve.filter(se=>DMe(se.createdAt,$)),ve.sort((se,Re)=>te==="oldest"?new Date(se.createdAt||0).getTime()-new Date(Re.createdAt||0).getTime():te==="total"?(Re.totals?.total||0)-(se.totals?.total||0):new Date(Re.createdAt||0).getTime()-new Date(se.createdAt||0).getTime()),ve},[$,n,B,k,I,te,H]),Xe=p.useMemo(()=>{const de=Qh.reduce((ve,se)=>({...ve,[se]:[]}),{});return ue.forEach(ve=>{const se=CMe(ve.status);de[se]&&de[se].push(ve)}),de},[ue]),Ue=p.useMemo(()=>z?[{key:"RECEIVED",label:"Received",orders:Xe.RECEIVED||[]},{key:"IN_PROGRESS",label:"In progress",orders:[...Xe.PREPARING||[],...Xe.SHIPPING||[],...Xe.READY_FOR_PICKUP||[]]},{key:"DONE",label:"Done",orders:[...Xe.DELIVERED||[],...Xe.CANCELLED||[]]}]:Qh.map(de=>({key:de,label:de==="CANCELLED"?"Cancelled":de.replaceAll("_"," "),orders:Xe[de]||[]})),[z,Xe]),ye=(de,ve,se)=>{const Re=ma(de),Je=ma(ve);return Re===Je?!0:Re==="PREPARING"?(of(se)?["READY_FOR_PICKUP"]:["SHIPPING"]).includes(Je):(PMe[Re]||[]).includes(Je)},je=de=>{m(de),g(null),_(""),ie(de)},Ee=()=>{f&&ie(f)},qe=async(de,ve)=>{try{const se=String(de||"").trim();if(!se){Z("error",`No ${ve} to copy.`);return}await navigator.clipboard.writeText(se),Z("success",`${ve} copied.`)}catch{Z("error","Clipboard is unavailable.")}},W=async()=>{if(!X||!S||he)return;const de=X;if(!ye(de.status,S,X)){Z("error","Invalid status transition for this order.");return}const ve=ma(X.paymentStatus);if(S==="DELIVERED"&&["FAILED","PAYMENT_FAILED","PENDING","PENDING_PAYMENT"].includes(ve)&&!window.confirm("Payment is pending/failed. Are you sure you want to mark this order as delivered?"))return;const se={...X,status:S,internalNotes:A};r(Re=>Re.map(Je=>String(Je.id)===String(se.id)?se:Je)),g(Re=>Re&&String(Re.id)===String(se.id)?se:Re),T(!0);try{const Re=await w2e(e,X.id,S,{note:A});r(Je=>Je.map(le=>String(le.id)===String(Re.id)?{...le,...Re}:le)),g(Je=>Je&&String(Je.id)===String(Re.id)?{...Je,...Re}:Je),Z("success","Order status updated.")}catch(Re){r(Je=>Je.map(le=>String(le.id)===String(de.id)?de:le)),g(Je=>Je&&String(Je.id)===String(de.id)?de:Je),Z("error",Re?.message||"Failed to update order status.")}finally{T(!1)}},fe=he?"Cancelled by customer (read-only).":"",we=M==="compact";return Y?a.jsxs("div",{className:Fe.page,children:[a.jsxs("header",{className:Fe.header,children:[a.jsx("h1",{children:"Orders"}),a.jsx("p",{children:"Track every order, payment, and fulfillment status in one place."})]}),a.jsxs("section",{className:Fe.filtersRow,children:[a.jsx("input",{className:Fe.searchInput,value:k,onChange:de=>P(de.target.value),placeholder:"Search #, email, or customer"}),a.jsxs("select",{className:Fe.statusSelect,value:H,onChange:de=>K(de.target.value),children:[a.jsx("option",{value:"ALL",children:"All statuses"}),Qh.map(de=>a.jsx("option",{value:de,children:de==="CANCELLED"?"Cancelled":de.replaceAll("_"," ")},de))]}),a.jsx("select",{className:Fe.filterSelect,value:B,onChange:de=>U(de.target.value),children:EMe.map(de=>a.jsx("option",{value:de,children:de},de))}),a.jsx("input",{className:Fe.filterSelect,type:"date",value:$.from,onChange:de=>G(ve=>({...ve,from:de.target.value}))}),a.jsx("input",{className:Fe.filterSelect,type:"date",value:$.to,onChange:de=>G(ve=>({...ve,to:de.target.value}))}),a.jsxs("select",{className:Fe.filterSelect,value:te,onChange:de=>re(de.target.value),children:[a.jsx("option",{value:"newest",children:"Newest"}),a.jsx("option",{value:"oldest",children:"Oldest"}),a.jsx("option",{value:"total",children:"Total"})]}),a.jsxs("label",{className:Fe.toggleLabel,children:[a.jsx("input",{type:"checkbox",checked:I,onChange:de=>L(de.target.checked)}),"Show cancelled orders"]}),a.jsxs("div",{className:Fe.densityToggle,role:"group","aria-label":"Card density",children:[a.jsx("button",{type:"button",className:`${Fe.densityBtn} ${we?"":Fe.densityBtnActive}`,onClick:()=>q("comfortable"),children:"Comfortable"}),a.jsx("button",{type:"button",className:`${Fe.densityBtn} ${we?Fe.densityBtnActive:""}`,onClick:()=>q("compact"),children:"Compact"})]}),a.jsxs("label",{className:Fe.toggleLabel,children:[a.jsx("input",{type:"checkbox",checked:z,onChange:de=>V(de.target.checked)}),"Compact stages"]})]}),c?a.jsx("div",{className:Fe.error,children:c}):null,a.jsx("div",{className:`${Fe.boardWrap} ${z?Fe.boardWrapCompact:""} ${X?Fe.boardWrapWithDrawer:""}`,children:a.jsx("div",{className:`${Fe.board} ${z?Fe.boardCompact:""}`,children:Ue.map(de=>{const ve=de.orders||[];return a.jsxs("section",{className:Fe.column,children:[a.jsxs("header",{className:Fe.columnHeader,children:[a.jsx("h3",{children:de.label}),a.jsx("span",{children:ve.length})]}),a.jsx("div",{className:Fe.columnContent,children:i?Array.from({length:4},(se,Re)=>a.jsx("div",{className:Fe.skeletonCard},`${de.key}-loading-${Re}`)):ve.length===0?a.jsx("p",{className:Fe.empty,children:"No orders"}):ve.map(se=>{const Re=OMe(se);return a.jsxs("article",{className:`${Fe.orderCard} ${we?Fe.orderCardCompact:""} ${Zh(se)?Fe.rowCancelled:""}`,children:[a.jsxs("p",{className:Fe.cardOrder,children:["#",Vd(se)]}),a.jsx("p",{className:Fe.cardCustomer,title:rs(se.customer?.name),children:rs(se.customer?.name)}),a.jsx("p",{className:Fe.cardTotal,children:jt(se.totals?.total||0,se.totals?.currency||"SEK")}),a.jsxs("div",{className:Fe.cardBadges,children:[a.jsxs("span",{className:`${Fe.badge} ${RMe(se.status)}`,children:["Status: ",xI(se.status)]}),a.jsxs("span",{className:`${Fe.badge} ${MMe(Re)}`,children:["Payment: ",Re]}),we?null:a.jsxs("span",{className:`${Fe.badge} ${IMe(se)}`,children:["Delivery: ",kMe(se)]})]}),we?null:a.jsx("p",{className:Fe.muted,children:se.createdAt?new Date(se.createdAt).toLocaleString():""}),a.jsx("button",{type:"button",onClick:()=>je(se.id),className:Fe.openBtn,children:"Open"})]},se.id)})})]},de.key)})})}),a.jsx("aside",{className:`${Fe.drawer} ${X?Fe.drawerOpen:""}`,children:X?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Fe.drawerHeader,children:[a.jsxs("h2",{children:["Order #",Vd(X)]}),a.jsx("button",{type:"button",onClick:()=>m(null),children:"Close"})]}),a.jsxs("div",{className:Fe.drawerContent,children:[w?a.jsxs("div",{className:Fe.detailsErrorBox,children:[a.jsx("p",{children:"Failed to load order details."}),a.jsx("button",{type:"button",onClick:Ee,children:"Retry"})]}):null,v?a.jsxs("div",{className:Fe.drawerLoading,children:[a.jsx("div",{className:Fe.drawerSkeleton}),a.jsx("div",{className:Fe.drawerSkeleton}),a.jsx("div",{className:Fe.drawerSkeleton})]}):null,v?null:a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Order"}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Order #"}),a.jsx("span",{children:Vd(X)}),a.jsx("button",{type:"button",onClick:()=>qe(Vd(X),"Order number"),children:"Copy"})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Order ID"}),a.jsx("span",{className:Fe.mono,children:rs(X.id)}),a.jsx("button",{type:"button",onClick:()=>qe(X.id,"Order ID"),children:"Copy"})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Created"}),a.jsx("span",{children:X.createdAt?new Date(X.createdAt).toLocaleString():""})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Updated"}),a.jsx("span",{children:X.updatedAt?new Date(X.updatedAt).toLocaleString():""})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Status"}),a.jsx("span",{children:xI(X.status)})]}),a.jsxs("div",{className:Fe.statusRow,children:[a.jsx("select",{value:S,onChange:de=>j(de.target.value),disabled:he||C,children:Qh.map(de=>a.jsx("option",{value:de,disabled:!ye(X.status,de,X),children:de.replaceAll("_"," ")},de))}),a.jsx("button",{type:"button",onClick:W,disabled:he||C,children:C?"Saving":"Save"})]})]}),fe?a.jsx("p",{className:Fe.cancelledWarning,children:fe}):null,a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Payment"}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Status"}),a.jsx("span",{children:rs(X.paymentStatus)})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Mode"}),a.jsx("span",{children:rs(X.paymentMode||"PAY_NOW")})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Method"}),a.jsx("span",{children:rs(X.paymentMethod??Ae?.method)})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Reference"}),a.jsx("span",{children:rs(X.paymentReference??Ae?.reference)})]})]}),a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Customer"}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Name"}),a.jsx("span",{children:rs(X.customer?.name)})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Email"}),a.jsx("span",{children:rs(X.customer?.email)})]}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Phone"}),a.jsx("span",{children:rs(X.customer?.phone)})]})]}),a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Fulfillment"}),a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Type"}),a.jsx("span",{children:of(X)?"Pickup":"Shipping"})]}),of(X)?a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Location"}),a.jsx("span",{children:rs(X.pickupLocation)})]}):a.jsx(a.Fragment,{children:SI(X.shippingAddress).length>0?SI(X.shippingAddress).map(de=>a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Address"}),a.jsx("span",{children:de})]},de)):a.jsxs("div",{className:Fe.row,children:[a.jsx("span",{children:"Address"}),a.jsx("span",{children:""})]})})]}),a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Items"}),(X.items||[]).map(de=>a.jsxs("div",{className:Fe.lineItem,children:[a.jsxs("span",{children:[de.name,"  ",de.quantity]}),a.jsx("span",{children:jt(de.lineTotal,X.totals?.currency||"SEK")})]},de.id))]}),a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Totals"}),a.jsxs("div",{className:Fe.lineItem,children:[a.jsx("span",{children:"Subtotal"}),a.jsx("span",{children:jt(X.totals?.subtotal||0,X.totals?.currency||"SEK")})]}),(X.totals?.shipping??0)>0?a.jsxs("div",{className:Fe.lineItem,children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:jt(X.totals?.shipping||0,X.totals?.currency||"SEK")})]}):null,(X.totals?.tax??0)>0?a.jsxs("div",{className:Fe.lineItem,children:[a.jsx("span",{children:"VAT"}),a.jsx("span",{children:jt(X.totals?.tax||0,X.totals?.currency||"SEK")})]}):null,a.jsxs("div",{className:Fe.lineItem,children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:jt(X.totals?.total||0,X.totals?.currency||"SEK")})]}),a.jsxs("div",{className:Fe.lineItem,children:[a.jsx("span",{children:"Paid"}),a.jsx("span",{children:ma(X.paymentStatus)==="PAID"?jt(X.totals?.total||0,X.totals?.currency||"SEK"):""})]})]}),a.jsxs("section",{className:Fe.section,children:[a.jsx("h4",{children:"Internal notes"}),a.jsx("textarea",{value:A,onChange:de=>E(de.target.value),rows:4,disabled:he})]})]})]})]}):a.jsx("div",{className:Fe.drawerPlaceholder,children:"Open an order to see details."})}),O?a.jsx("div",{className:`${Fe.toast} ${O.type==="error"?Fe.toastError:Fe.toastSuccess}`,children:O.message}):null]}):a.jsx("div",{className:Fe.noAccess,children:"You need Orders Manage permission to view this page."})}const LMe=Bn(),yg=`${LMe}/api/admin/store/banners`,gg=e=>({"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}),Vj=(e={})=>({...e,id:e?.id??e?.bannerId??e?._id??"",title:e?.title??"",type:e?.type??"PROMO",active:e?.active!==!1,position:Number.isFinite(Number(e?.position))?Number(e.position):0}),BMe=e=>(Array.isArray(e)?e:Array.isArray(e?.banners)?e.banners:[]).map(Vj);async function UMe(e,{signal:t}={}){const n=await Ve(yg,{method:"GET",headers:gg(e),signal:t},{token:e}),r=await at(n,"Failed to load banners");return BMe(r)}async function qMe(e,t){const n=await Ve(yg,{method:"POST",headers:gg(e),body:JSON.stringify(t)},{token:e}),r=await at(n,"Failed to create banner");return Vj(r)}async function zMe(e,t,n){if(!t)throw new Error("Banner ID is required");const r=await Ve(`${yg}/${encodeURIComponent(t)}`,{method:"PUT",headers:gg(e),body:JSON.stringify(n)},{token:e}),i=await at(r,"Failed to update banner");return Vj(i)}async function FMe(e,t){if(!t)throw new Error("Banner ID is required");const n=await Ve(`${yg}/${encodeURIComponent(t)}`,{method:"DELETE",headers:gg(e)},{token:e});return at(n,"Failed to delete banner")}const HMe="_page_1aoxh_1",VMe="_header_1aoxh_15",KMe="_actions_1aoxh_51",GMe="_modalActions_1aoxh_53",WMe="_toolbar_1aoxh_69",YMe="_modal_1aoxh_53",XMe="_tableWrap_1aoxh_119",QMe="_table_1aoxh_119",ZMe="_thumb_1aoxh_163",JMe="_deleteBtn_1aoxh_189",eIe="_alert_1aoxh_197",tIe="_empty_1aoxh_213",nIe="_noAccess_1aoxh_223",rIe="_backdrop_1aoxh_237",aIe="_grid2_1aoxh_299",sIe="_grid3_1aoxh_301",iIe="_checkbox_1aoxh_337",mr={page:HMe,header:VMe,actions:KMe,modalActions:GMe,toolbar:WMe,modal:YMe,tableWrap:XMe,table:QMe,thumb:ZMe,deleteBtn:JMe,alert:eIe,empty:tIe,noAccess:nIe,backdrop:rIe,grid2:aIe,grid3:sIe,checkbox:iIe},wI=["HERO","PROMO","INFO","NEWS"],jI={id:null,type:"PROMO",title:"",subtitle:"",description:"",imageUrl:"",buttonText:"",buttonUrl:"",position:0,active:!0,startAt:"",endAt:""},NI=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset()*6e4;return new Date(t.getTime()-n).toISOString().slice(0,16)},AI=e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t.toISOString()};function oIe(){const{token:e,permissions:t}=Xt(),n=us({permissions:t},kt.PRODUCTS_MANAGE),[r,i]=p.useState([]),[o,c]=p.useState(!1),[d,f]=p.useState(""),[m,h]=p.useState(""),[g,v]=p.useState("all"),[x,w]=p.useState("all"),[_,S]=p.useState(!1),[j,A]=p.useState(jI),[E,C]=p.useState(""),[T,O]=p.useState(!1),R=p.useCallback(async()=>{if(e){c(!0),f("");try{const I=await UMe(e);i(I)}catch(I){f(I?.message||"Unable to load banners.")}finally{c(!1)}}},[e]);p.useEffect(()=>{R()},[R]);const k=p.useMemo(()=>r.filter(I=>{const L=I?.title?.toLowerCase()||"",$=!m.trim()||L.includes(m.trim().toLowerCase()),G=g==="all"||I.type===g,te=x==="all"||x==="active"&&I.active||x==="inactive"&&!I.active;return $&&G&&te}).sort((I,L)=>(I.position??0)-(L.position??0)),[x,r,m,g]),P=()=>{A(jI),C(""),S(!0)},H=I=>{A({id:I.id,type:I.type||"PROMO",title:I.title||"",subtitle:I.subtitle||"",description:I.description||"",imageUrl:I.imageUrl||"",buttonText:I.buttonText||"",buttonUrl:I.buttonUrl||"",position:Number(I.position||0),active:I.active!==!1,startAt:NI(I.startAt),endAt:NI(I.endAt)}),C(""),S(!0)},K=()=>{if(!j.title.trim())return"Title is required.";if(j.buttonText.trim()&&!j.buttonUrl.trim())return"Button URL is required when button text is set.";if(j.startAt&&j.endAt){const I=new Date(j.startAt),L=new Date(j.endAt);if(I>L)return"Start date must be before end date."}return""},B=async I=>{I.preventDefault();const L=K();if(L){C(L);return}O(!0),C("");const $={type:j.type,title:j.title.trim(),subtitle:j.subtitle.trim()||null,description:j.description.trim()||null,imageUrl:j.imageUrl.trim()||null,buttonText:j.buttonText.trim()||null,buttonUrl:j.buttonUrl.trim()||null,position:Number(j.position||0),active:!!j.active,startAt:AI(j.startAt),endAt:AI(j.endAt)};try{j.id?await zMe(e,j.id,$):await qMe(e,$),S(!1),await R()}catch(G){C(G?.message||"Unable to save banner.")}finally{O(!1)}},U=async I=>{if(!(!I||!window.confirm("Delete this banner?")))try{await FMe(e,I),await R()}catch($){f($?.message||"Unable to delete banner.")}};return n?a.jsxs("div",{className:mr.page,children:[a.jsxs("header",{className:mr.header,children:[a.jsxs("div",{children:[a.jsx("p",{children:"Store  Banners"}),a.jsx("h1",{children:"Banners"})]}),a.jsx("button",{type:"button",onClick:P,children:"Create banner"})]}),a.jsxs("section",{className:mr.toolbar,children:[a.jsx("input",{type:"search",value:m,onChange:I=>h(I.target.value),placeholder:"Search title"}),a.jsxs("select",{value:g,onChange:I=>v(I.target.value),children:[a.jsx("option",{value:"all",children:"All types"}),wI.map(I=>a.jsx("option",{value:I,children:I},I))]}),a.jsxs("select",{value:x,onChange:I=>w(I.target.value),children:[a.jsx("option",{value:"all",children:"All statuses"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),d?a.jsx("div",{className:mr.alert,children:d}):null,a.jsx("section",{className:mr.tableWrap,children:a.jsxs("table",{className:mr.table,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Preview"}),a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Active"}),a.jsx("th",{children:"Position"}),a.jsx("th",{children:"Date range"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:mr.empty,children:"Loading banners"})}):k.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:mr.empty,children:"No banners found."})}):k.map(I=>a.jsxs("tr",{children:[a.jsx("td",{children:I.imageUrl?a.jsx("img",{src:I.imageUrl,alt:I.title||"Banner",className:mr.thumb}):""}),a.jsx("td",{children:I.title}),a.jsx("td",{children:I.type}),a.jsx("td",{children:I.active?"Yes":"No"}),a.jsx("td",{children:I.position??0}),a.jsx("td",{children:I.startAt||I.endAt?`${I.startAt||""}  ${I.endAt||""}`:"Always"}),a.jsx("td",{children:a.jsxs("div",{className:mr.actions,children:[a.jsx("button",{type:"button",onClick:()=>H(I),children:"Edit"}),a.jsx("button",{type:"button",className:mr.deleteBtn,onClick:()=>U(I.id),children:"Delete"})]})})]},I.id))})]})}),_?a.jsx("div",{className:mr.backdrop,children:a.jsxs("form",{className:mr.modal,onSubmit:B,children:[a.jsx("h2",{children:j.id?"Edit banner":"Create banner"}),a.jsxs("label",{children:["Type",a.jsx("select",{value:j.type,onChange:I=>A(L=>({...L,type:I.target.value})),children:wI.map(I=>a.jsx("option",{value:I,children:I},I))})]}),a.jsxs("label",{children:["Title",a.jsx("input",{value:j.title,onChange:I=>A(L=>({...L,title:I.target.value})),required:!0})]}),a.jsxs("label",{children:["Subtitle",a.jsx("input",{value:j.subtitle,onChange:I=>A(L=>({...L,subtitle:I.target.value}))})]}),a.jsxs("label",{children:["Description",a.jsx("textarea",{value:j.description,onChange:I=>A(L=>({...L,description:I.target.value})),rows:3})]}),a.jsxs("label",{children:["Image URL",a.jsx("input",{value:j.imageUrl,onChange:I=>A(L=>({...L,imageUrl:I.target.value}))})]}),a.jsxs("div",{className:mr.grid2,children:[a.jsxs("label",{children:["Button text",a.jsx("input",{value:j.buttonText,onChange:I=>A(L=>({...L,buttonText:I.target.value}))})]}),a.jsxs("label",{children:["Button URL",a.jsx("input",{value:j.buttonUrl,onChange:I=>A(L=>({...L,buttonUrl:I.target.value}))})]})]}),a.jsxs("div",{className:mr.grid3,children:[a.jsxs("label",{children:["Position",a.jsx("input",{type:"number",value:j.position,onChange:I=>A(L=>({...L,position:I.target.value}))})]}),a.jsxs("label",{children:["Start at",a.jsx("input",{type:"datetime-local",value:j.startAt,onChange:I=>A(L=>({...L,startAt:I.target.value}))})]}),a.jsxs("label",{children:["End at",a.jsx("input",{type:"datetime-local",value:j.endAt,onChange:I=>A(L=>({...L,endAt:I.target.value}))})]})]}),a.jsxs("label",{className:mr.checkbox,children:[a.jsx("input",{type:"checkbox",checked:j.active,onChange:I=>A(L=>({...L,active:I.target.checked}))}),"Active"]}),E?a.jsx("div",{className:mr.alert,children:E}):null,a.jsxs("div",{className:mr.modalActions,children:[a.jsx("button",{type:"button",onClick:()=>S(!1),children:"Cancel"}),a.jsx("button",{type:"submit",disabled:T,children:T?"Saving":"Save"})]})]})}):null]}):a.jsx("div",{className:mr.noAccess,children:"You need Products Manage permission to view this page."})}const lIe="_page_1s1rg_1",cIe="_title_1s1rg_15",uIe="_text_1s1rg_25",dIe="_cards_1s1rg_35",fIe="_card_1s1rg_35",mIe="_cardTitle_1s1rg_63",hIe="_cardText_1s1rg_75",pIe="_addressLine_1s1rg_91",yIe="_link_1s1rg_99",gIe="_formSection_1s1rg_121",vIe="_sectionHeader_1s1rg_133",bIe="_sectionTitle_1s1rg_143",_Ie="_sectionSubtitle_1s1rg_153",xIe="_formCard_1s1rg_163",SIe="_form_1s1rg_121",wIe="_formGrid_1s1rg_183",jIe="_field_1s1rg_195",NIe="_fieldFull_1s1rg_205",AIe="_fieldLabel_1s1rg_213",EIe="_fieldControl_1s1rg_223",CIe="_fieldControlError_1s1rg_253",TIe="_textarea_1s1rg_263",kIe="_fieldError_1s1rg_271",OIe="_honeypot_1s1rg_281",RIe="_turnstile_1s1rg_299",MIe="_retryButton_1s1rg_307",IIe="_alert_1s1rg_339",DIe="_alertSuccess_1s1rg_351",PIe="_alertError_1s1rg_363",$Ie="_submitButton_1s1rg_375",LIe="_hero_1s1rg_405",BIe="_lead_1s1rg_417",UIe="_section_1s1rg_133",qIe="_sectionText_1s1rg_443",zIe="_bullets_1s1rg_455",FIe="_cardGrid_1s1rg_479",HIe="_addressGrid_1s1rg_491",VIe="_addressCard_1s1rg_503",KIe="_addressLabel_1s1rg_517",GIe="_addressValue_1s1rg_529",WIe="_sectionFootnote_1s1rg_539",YIe="_ctaSection_1s1rg_549",XIe="_ctaActions_1s1rg_573",QIe="_ctaPrimary_1s1rg_585",ZIe="_ctaSecondary_1s1rg_605",Te={page:lIe,title:cIe,text:uIe,cards:dIe,card:fIe,cardTitle:mIe,cardText:hIe,addressLine:pIe,link:yIe,formSection:gIe,sectionHeader:vIe,sectionTitle:bIe,sectionSubtitle:_Ie,formCard:xIe,form:SIe,formGrid:wIe,field:jIe,fieldFull:NIe,fieldLabel:AIe,fieldControl:EIe,fieldControlError:CIe,textarea:TIe,fieldError:kIe,honeypot:OIe,turnstile:RIe,retryButton:MIe,alert:IIe,alertSuccess:DIe,alertError:PIe,submitButton:$Ie,hero:LIe,lead:BIe,section:UIe,sectionText:qIe,bullets:zIe,cardGrid:FIe,addressGrid:HIe,addressCard:VIe,addressLabel:KIe,addressValue:GIe,sectionFootnote:WIe,ctaSection:YIe,ctaActions:XIe,ctaPrimary:QIe,ctaSecondary:ZIe},JIe={},eDe=[{value:"ORDER",label:"Order"},{value:"SUPPORT",label:"Support"},{value:"PARTNERSHIP",label:"Partnership"},{value:"OTHER",label:"Other"}],G0={fullName:"",email:"",subject:"ORDER",message:"",phone:"",companyWebsite:""},tDe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Jh="faxNumber";function nDe(){const[e,t]=p.useState(G0),[n,r]=p.useState({}),[i,o]=p.useState(null),[c,d]=p.useState(!1),[f,m]=p.useState(""),[h,g]=p.useState(""),[v,x]=p.useState(0),w=p.useRef(null),_=p.useRef(null),S=JIe?.VITE_TURNSTILE_SITE_KEY||"",j=!1;p.useEffect(()=>{if(!S)return;let O=!0;const R=()=>{if(O){if(!w.current||!window.turnstile){m(""),g("Verification failed to load. Please retry."),r(H=>({...H,turnstileToken:"Verification failed to load. Please retry."}));return}if(_.current!==null){window.turnstile.reset(_.current);return}_.current=window.turnstile.render(w.current,{sitekey:S,theme:"light",callback:H=>{O&&(m(H),g(""),r(K=>({...K,turnstileToken:void 0})))},"error-callback":()=>{O&&(m(""),r(H=>({...H,turnstileToken:"Verification failed. Please try again."})))},"expired-callback":()=>{O&&m("")}})}};if(window.turnstile)return R(),()=>{O=!1};const k=document.querySelector("script[data-turnstile]");if(k)return k.addEventListener("load",R),k.addEventListener("error",R),()=>{O=!1,k.removeEventListener("load",R),k.removeEventListener("error",R)};const P=document.createElement("script");return P.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",P.async=!0,P.defer=!0,P.dataset.turnstile="true",P.addEventListener("load",R),P.addEventListener("error",()=>{O&&(m(""),g("Verification failed to load. Please retry."),r(H=>({...H,turnstileToken:"Verification failed to load. Please retry."})))}),document.body.appendChild(P),()=>{O=!1,P.removeEventListener("load",R)}},[S,v]);const A=O=>{const{name:R,value:k}=O.target;R===Jh?(t(P=>({...P,companyWebsite:k})),n.companyWebsite&&r(P=>({...P,companyWebsite:void 0}))):(t(P=>({...P,[R]:k})),n[R]&&r(P=>({...P,[R]:void 0})))},E=O=>{const R={};(!O.fullName.trim()||O.fullName.trim().length<2)&&(R.fullName="Please enter your full name."),O.email.trim()?tDe.test(O.email.trim())||(R.email="Please enter a valid email address."):R.email="Please enter your email address.",O.subject||(R.subject="Please select a subject.");const k=O.message.trim().length;return k?k<20?R.message="Your message must be at least 20 characters.":k>2e3&&(R.message="Your message must be under 2000 characters."):R.message="Please enter your message.",O.companyWebsite&&(R.companyWebsite="Please leave this field blank."),S?h?R.turnstileToken=h:f||(R.turnstileToken="Please complete the verification."):j||(R.turnstileToken="Verification is unavailable due to a configuration issue."),R},C=()=>{m(""),g(""),r(R=>({...R,turnstileToken:void 0})),_.current!==null&&window.turnstile?.remove&&(window.turnstile.remove(_.current),_.current=null),w.current&&(w.current.innerHTML="");const O=document.querySelector("script[data-turnstile]");O&&O.remove(),x(R=>R+1)},T=async O=>{O.preventDefault(),o(null);const R=E(e);if(Object.keys(R).length>0){r(R);return}d(!0);try{const k=await fetch(`${D1}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e.fullName.trim(),email:e.email.trim(),phone:e.phone.trim()||"",subject:e.subject,message:e.message.trim(),companyWebsite:e.companyWebsite.trim(),turnstileToken:f})});if(k.ok){t(G0),r({}),o({type:"success",message:"Message sent. We'll reply to your email."}),m(""),window.turnstile&&_.current!==null&&window.turnstile.reset(_.current);return}if(k.status===400){let P=null;try{P=await k.json()}catch{P=null}const H=[...Object.keys(G0),"turnstileToken"],K=P?.errors||P?.fieldErrors||P;if(K&&typeof K=="object"){const B=H.reduce((U,I)=>(typeof K[I]=="string"&&(U[I]=K[I]),U),{});if(Object.keys(B).length>0){r(B),o({type:"error",message:"Please review the highlighted fields and try again."});return}}o({type:"error",message:P?.message||"We could not send your message. Please try again."});return}if(k.status===429){o({type:"error",message:"Too many requests. Please try again in a minute."});return}o({type:"error",message:"Something went wrong on our side. Please try again shortly."})}catch{o({type:"error",message:"We could not send your message. Please check your connection and try again."})}finally{d(!1)}};return a.jsxs("section",{className:Te.page,children:[a.jsx("h1",{className:Te.title,children:"Contact HydroLeaf"}),a.jsx("p",{className:Te.text,children:"Reach out to HydroLeaf using the contact details below. We are happy to help with questions about our products, orders, or partnerships."}),a.jsxs("div",{className:Te.cards,children:[a.jsxs("section",{className:Te.card,children:[a.jsx("h2",{className:Te.cardTitle,children:"Email"}),a.jsx("p",{className:Te.cardText,children:a.jsx("a",{className:Te.link,href:"mailto:info@hydroleaf.se",children:"info@hydroleaf.se"})})]}),a.jsxs("section",{className:Te.card,children:[a.jsx("h2",{className:Te.cardTitle,children:"Phone"}),a.jsx("p",{className:Te.cardText,children:a.jsx("a",{className:Te.link,href:"tel:+46724492009",children:"+46 72 449 2009"})})]}),a.jsxs("section",{className:Te.card,children:[a.jsx("h2",{className:Te.cardTitle,children:"Registered address / Head office"}),a.jsxs("div",{className:Te.cardText,children:[a.jsx("p",{className:Te.addressLine,children:"Company: HydroLeaf AB"}),a.jsx("p",{className:Te.addressLine,children:"Street: Gustav III:s Boulevard 92"}),a.jsx("p",{className:Te.addressLine,children:"Postal/City: 169 74 Solna"}),a.jsx("p",{className:Te.addressLine,children:"Country: Sweden"})]})]}),a.jsxs("section",{className:Te.card,children:[a.jsx("h2",{className:Te.cardTitle,children:"Greenhouse / Production site"}),a.jsxs("div",{className:Te.cardText,children:[a.jsx("p",{className:Te.addressLine,children:"Street: Isafjordsgatan 39B"}),a.jsx("p",{className:Te.addressLine,children:"Postal/City: 164 40 Kista"}),a.jsx("p",{className:Te.addressLine,children:"Country: Sweden"})]})]})]}),a.jsxs("section",{className:Te.formSection,children:[a.jsxs("div",{className:Te.sectionHeader,children:[a.jsx("h2",{className:Te.sectionTitle,children:"Send us a message"}),a.jsx("p",{className:Te.sectionSubtitle,children:"We usually reply within 1 business day."})]}),a.jsx("section",{className:`${Te.card} ${Te.formCard}`,children:a.jsxs("form",{className:Te.form,onSubmit:T,noValidate:!0,children:[a.jsxs("div",{className:Te.formGrid,children:[a.jsxs("div",{className:Te.field,children:[a.jsx("label",{className:Te.fieldLabel,htmlFor:"fullName",children:"Full name *"}),a.jsx("input",{className:`${Te.fieldControl} ${n.fullName?Te.fieldControlError:""}`,id:"fullName",name:"fullName",type:"text",value:e.fullName,onChange:A,disabled:c,autoComplete:"name",required:!0,minLength:2,"aria-invalid":!!n.fullName,"aria-describedby":n.fullName?"fullName-error":void 0}),n.fullName?a.jsx("span",{className:Te.fieldError,id:"fullName-error",children:n.fullName}):null]}),a.jsxs("div",{className:Te.field,children:[a.jsx("label",{className:Te.fieldLabel,htmlFor:"email",children:"Email *"}),a.jsx("input",{className:`${Te.fieldControl} ${n.email?Te.fieldControlError:""}`,id:"email",name:"email",type:"email",value:e.email,onChange:A,disabled:c,autoComplete:"email",required:!0,"aria-invalid":!!n.email,"aria-describedby":n.email?"email-error":void 0}),n.email?a.jsx("span",{className:Te.fieldError,id:"email-error",children:n.email}):null]}),a.jsxs("div",{className:Te.field,children:[a.jsx("label",{className:Te.fieldLabel,htmlFor:"phone",children:"Phone"}),a.jsx("input",{className:Te.fieldControl,id:"phone",name:"phone",type:"tel",value:e.phone,onChange:A,disabled:c,autoComplete:"tel"})]}),a.jsxs("div",{className:Te.field,children:[a.jsx("label",{className:Te.fieldLabel,htmlFor:"subject",children:"Subject *"}),a.jsx("select",{className:`${Te.fieldControl} ${n.subject?Te.fieldControlError:""}`,id:"subject",name:"subject",value:e.subject,onChange:A,disabled:c,required:!0,"aria-invalid":!!n.subject,"aria-describedby":n.subject?"subject-error":void 0,children:eDe.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))}),n.subject?a.jsx("span",{className:Te.fieldError,id:"subject-error",children:n.subject}):null]}),a.jsxs("div",{className:`${Te.field} ${Te.fieldFull}`,children:[a.jsx("label",{className:Te.fieldLabel,htmlFor:"message",children:"Message *"}),a.jsx("textarea",{className:`${Te.fieldControl} ${Te.textarea} ${n.message?Te.fieldControlError:""}`,id:"message",name:"message",value:e.message,onChange:A,disabled:c,required:!0,minLength:20,maxLength:2e3,rows:6,"aria-invalid":!!n.message,"aria-describedby":n.message?"message-error":void 0}),n.message?a.jsx("span",{className:Te.fieldError,id:"message-error",children:n.message}):null]})]}),a.jsxs("div",{className:Te.honeypot,children:[a.jsx("label",{htmlFor:Jh,children:"Fax number"}),a.jsx("input",{id:Jh,name:Jh,type:"text",value:e.companyWebsite,onChange:A,autoComplete:"off",tabIndex:-1,"aria-hidden":"true",inputMode:"none"})]}),n.companyWebsite?a.jsx("span",{className:Te.fieldError,children:n.companyWebsite}):null,a.jsx("div",{className:Te.turnstile,children:a.jsx("div",{ref:w})}),n.turnstileToken?a.jsx("span",{className:Te.fieldError,children:n.turnstileToken}):null,S&&h?a.jsx("button",{className:Te.retryButton,type:"button",onClick:C,disabled:c,children:"Retry verification"}):null,i?a.jsx("div",{className:`${Te.alert} ${i.type==="success"?Te.alertSuccess:Te.alertError}`,role:"status",children:i.message}):null,a.jsx("button",{className:Te.submitButton,type:"submit",disabled:c,children:c?"Sending...":"Send message"})]})})]})]})}function rDe(){return a.jsxs("section",{className:Te.page,children:[a.jsxs("header",{className:Te.hero,children:[a.jsx("h1",{className:Te.title,children:"About HydroLeaf"}),a.jsx("p",{className:Te.lead,children:"HydroLeaf is a Stockholm-based grower focused on fresh basil and leafy greens. We use modern hydroponics and careful monitoring to deliver clean, consistent produce with minimal waste."})]}),a.jsxs("section",{className:Te.section,children:[a.jsxs("div",{className:Te.sectionHeader,children:[a.jsx("h2",{className:Te.sectionTitle,children:"Our mission"}),a.jsx("p",{className:Te.sectionText,children:"Our mission is simple: grow fresh greens locally, reduce unnecessary transport, and deliver consistent quality you can trust."})]}),a.jsxs("ul",{className:Te.bullets,children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Freshness:"})," harvested close to delivery and stored properly."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Sustainability:"})," efficient water use and reduced food miles."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Consistency:"})," controlled conditions and data-driven monitoring."]})]})]}),a.jsxs("section",{className:Te.section,children:[a.jsx("h2",{className:Te.sectionTitle,children:"How we grow"}),a.jsxs("div",{className:Te.cardGrid,children:[a.jsxs("article",{className:Te.card,children:[a.jsx("h3",{className:Te.cardTitle,children:"Controlled environment"}),a.jsx("p",{className:Te.cardText,children:"We cultivate indoors where light, temperature, and humidity are tuned for healthy growth."})]}),a.jsxs("article",{className:Te.card,children:[a.jsx("h3",{className:Te.cardTitle,children:"Hydroponic growing"}),a.jsx("p",{className:Te.cardText,children:"No soil needed. Nutrient-rich water keeps roots fed while minimizing waste."})]}),a.jsxs("article",{className:Te.card,children:[a.jsx("h3",{className:Te.cardTitle,children:"Clean water + monitoring"}),a.jsx("p",{className:Te.cardText,children:"We monitor key metrics continuously to keep the system balanced and predictable."})]}),a.jsxs("article",{className:Te.card,children:[a.jsx("h3",{className:Te.cardTitle,children:"Harvest & handling"}),a.jsx("p",{className:Te.cardText,children:"Greens are harvested to order and handled with care to preserve freshness."})]})]})]}),a.jsxs("section",{className:Te.section,children:[a.jsx("h2",{className:Te.sectionTitle,children:"Quality & handling"}),a.jsx("p",{className:Te.sectionText,children:"We take product quality seriously. From cultivation to harvest and packing, we prioritize clean handling and aim for pesticide-free growing through controlled conditions. We also keep clear batch records to support traceability."})]}),a.jsxs("section",{className:Te.section,children:[a.jsx("h2",{className:Te.sectionTitle,children:"Where we operate"}),a.jsxs("div",{className:Te.addressGrid,children:[a.jsxs("div",{className:Te.addressCard,children:[a.jsx("p",{className:Te.addressLabel,children:"Registered address / Head office"}),a.jsxs("div",{className:Te.addressValue,children:[a.jsx("p",{className:Te.addressLine,children:"Company: HydroLeaf AB"}),a.jsx("p",{className:Te.addressLine,children:"Street: Gustav III:s Boulevard 92"}),a.jsx("p",{className:Te.addressLine,children:"Postal/City: 169 74 Solna"}),a.jsx("p",{className:Te.addressLine,children:"Country: Sweden"})]})]}),a.jsxs("div",{className:Te.addressCard,children:[a.jsx("p",{className:Te.addressLabel,children:"Greenhouse / Production site"}),a.jsxs("div",{className:Te.addressValue,children:[a.jsx("p",{className:Te.addressLine,children:"Street: Isafjordsgatan 39B"}),a.jsx("p",{className:Te.addressLine,children:"Postal/City: 164 40 Kista"}),a.jsx("p",{className:Te.addressLine,children:"Country: Sweden"})]})]})]}),a.jsxs("p",{className:Te.sectionFootnote,children:["For official contact details and full addresses, please visit our ",a.jsx(nt,{to:"/contact",className:Te.link,children:"Contact page"}),"."]})]}),a.jsxs("section",{className:Te.ctaSection,children:[a.jsxs("div",{children:[a.jsx("h2",{className:Te.sectionTitle,children:"Ready to try HydroLeaf?"}),a.jsx("p",{className:Te.sectionText,children:"Shop our products or contact us if you have questions about orders or partnerships."})]}),a.jsxs("div",{className:Te.ctaActions,children:[a.jsx(nt,{to:"/store",className:Te.ctaPrimary,children:"Shop products"}),a.jsx(nt,{to:"/contact",className:Te.ctaSecondary,children:"Contact us"})]})]})]})}function aDe(){return a.jsxs("section",{className:Te.page,children:[a.jsx("h1",{className:Te.title,children:"FAQ"}),a.jsx("p",{className:Te.text,children:"This is a placeholder FAQ page. Add common questions about ordering, payment, and pickup here."})]})}function sDe(){return a.jsxs("section",{className:Te.page,children:[a.jsx("h1",{className:Te.title,children:"Shipping & Returns"}),a.jsx("p",{className:Te.text,children:"This is a placeholder page for shipping options, pickup details, and the return policy."})]})}function iDe(){return a.jsxs("section",{className:Te.page,children:[a.jsx("h1",{className:Te.title,children:"Terms"}),a.jsx("p",{className:Te.text,children:"This is a placeholder page for HydroLeaf AB terms and conditions."})]})}function oDe(){return a.jsxs("section",{className:Te.page,children:[a.jsx("h1",{className:Te.title,children:"Privacy"}),a.jsx("p",{className:Te.text,children:"This is a placeholder page for HydroLeaf AB privacy information."})]})}const lDe="_section_1d28q_1",cDe="_sectionHeader_1d28q_21",uDe="_sectionTitle_1d28q_37",dDe="_sectionNote_1d28q_47",fDe="_loadingMessage_1d28q_59",mDe="_helperMessage_1d28q_71",hDe="_grid_1d28q_83",pDe="_card_1d28q_95",yDe="_cardHeader_1d28q_115",gDe="_reloadButton_1d28q_141",vDe="_videoFrame_1d28q_161",bDe="_video_1d28q_161",_De="_videoPlaceholder_1d28q_189",xDe="_errorMessage_1d28q_199",ta={section:lDe,sectionHeader:cDe,sectionTitle:uDe,sectionNote:dDe,loadingMessage:fDe,helperMessage:mDe,grid:hDe,card:pDe,cardHeader:yDe,reloadButton:gDe,videoFrame:vDe,video:bDe,videoPlaceholder:_De,errorMessage:xDe},EI=Bn(),SDe=EI?`${EI}/api/timelapse/index`:"/api/timelapse/index",_5=(e,t)=>!e||!t?"":`${t}/${e}/latest.mp4`,CI=e=>cy.map(t=>({cameraId:t.id,title:t.name,latestMp4:_5(t.id,e)}));function wDe({camera:e,timelapseBaseUrl:t}){const n=p.useRef(null),[r,i]=p.useState(!1),[o,c]=p.useState(!1),[d,f]=p.useState(""),[m,h]=p.useState(()=>Date.now()),g=p.useMemo(()=>{if(!r)return"";const x=e.latestMp4?.startsWith("http")?e.latestMp4:t?`${t}${e.latestMp4}`:"";return x?`${x}?v=${m}`:""},[e.latestMp4,m,r,t]);p.useEffect(()=>{if(!n.current||r)return;if(typeof IntersectionObserver>"u"){i(!0);return}const x=new IntersectionObserver(w=>{w.forEach(_=>{_.isIntersecting&&(i(!0),x.disconnect())})},{rootMargin:"100px"});return x.observe(n.current),()=>x.disconnect()},[r]);const v=()=>{c(!1),f(""),h(Date.now())};return a.jsxs("article",{className:ta.card,ref:n,children:[a.jsxs("header",{className:ta.cardHeader,children:[a.jsx("h3",{children:e.title}),a.jsx("button",{type:"button",onClick:v,className:ta.reloadButton,children:"Reload"})]}),a.jsx("div",{className:ta.videoFrame,children:g?a.jsx("video",{className:ta.video,controls:!0,muted:!0,preload:"metadata",playsInline:!0,onError:()=>{c(!0),f("Timelapse not found yet.")},children:a.jsx("source",{src:g,type:"video/mp4"})},g):a.jsx("div",{className:ta.videoPlaceholder,"aria-hidden":"true"})}),o&&a.jsx("p",{className:ta.errorMessage,children:d||"Timelapse unavailable"})]})}function jDe(){const[e,t]=p.useState([]),[n,r]=p.useState(!0),[i,o]=p.useState(""),c=Yge();p.useEffect(()=>{let m=!0;const h=new AbortController;return(async()=>{r(!0),o("");try{const v=await fetch(SDe,{signal:h.signal});if(!v.ok)throw new Error(`Timelapse index unavailable (${v.status})`);const x=await v.json(),w=Array.isArray(x)?x:x?.items||[];if(!m)return;t(w)}catch(v){if(!m)return;console.warn("[TimelapseGallery] Falling back to default list.",v),t(CI(c)),o("Using the default camera list.")}finally{m&&r(!1)}})(),()=>{m=!1,h.abort()}},[]);const d=!!c,f=e.length>0?e:CI(c);return a.jsxs("section",{className:ta.section,children:[a.jsx("div",{className:ta.sectionHeader,children:a.jsxs("div",{children:[a.jsx("h2",{className:ta.sectionTitle,children:"Timelapse"}),a.jsx("p",{className:ta.sectionNote,children:"Latest hourly timelapse (auto-updates)."})]})}),!d&&a.jsx("p",{className:ta.errorMessage,children:"Timelapse base URL is not configured. Set VITE_CAM_BASE_URL to enable playback."}),n&&a.jsx("p",{className:ta.loadingMessage,children:"Loading timelapse list"}),i&&a.jsx("p",{className:ta.helperMessage,children:i}),a.jsx("div",{className:ta.grid,children:f.map(m=>a.jsx(wDe,{camera:{cameraId:m.cameraId||m.id,latestMp4:m.latestMp4||_5(m.cameraId||m.id,c),title:m.title||m.name||m.cameraId||m.id},timelapseBaseUrl:c},m.cameraId||m.id))})]})}const NDe="_page_1vdtc_1",ADe="_header_1vdtc_13",TI={page:NDe,header:ADe};function EDe(){return a.jsxs("div",{className:TI.page,children:[a.jsxs("header",{className:TI.header,children:[a.jsx("h1",{children:"Timelapse"}),a.jsx("p",{children:"Browse the latest greenhouse timelapse clips."})]}),a.jsx(jDe,{})]})}const CDe="_page_vwt7v_1",TDe="_card_vwt7v_19",kDe="_kicker_vwt7v_35",ODe="_title_vwt7v_51",RDe="_subtitle_vwt7v_63",MDe="_statusCard_vwt7v_73",IDe="_statusRow_vwt7v_89",DDe="_statusLabel_vwt7v_107",PDe="_statusValue_vwt7v_117",$De="_actions_vwt7v_127",LDe="_primary_vwt7v_139",BDe="_secondary_vwt7v_157",UDe="_notice_vwt7v_175",qDe="_error_vwt7v_187",zDe="_loading_vwt7v_197",FDe="_orderSummary_vwt7v_205",HDe="_items_vwt7v_233",VDe="_itemRow_vwt7v_245",KDe="_itemName_vwt7v_257",GDe="_itemMeta_vwt7v_269",WDe="_itemTotal_vwt7v_279",YDe="_summaryRow_vwt7v_289",XDe="_summaryRowTotal_vwt7v_303",wt={page:CDe,card:TDe,kicker:kDe,title:ODe,subtitle:RDe,statusCard:MDe,statusRow:IDe,statusLabel:DDe,statusValue:PDe,actions:$De,primary:LDe,secondary:BDe,notice:UDe,error:qDe,loading:zDe,orderSummary:FDe,items:HDe,itemRow:VDe,itemName:KDe,itemMeta:GDe,itemTotal:WDe,summaryRow:YDe,summaryRowTotal:XDe},kI=e=>e?.paymentStatus??e?.status??e?.state??e?.payment_state??"Unknown",QDe=e=>e?.items??e?.lineItems??e?.orderItems??[],ZDe=e=>({currency:e?.currency??e?.totals?.currency??"SEK",subtotal:e?.subtotal??e?.totals?.subtotal??null,total:e?.total??e?.totals?.total??null}),JDe=e=>{if(!e)return!1;const t=`${e}`.toLowerCase();return["paid","confirmed","succeeded","complete","completed"].includes(t)},OI=e=>{if(!e)return!0;const t=`${e}`.toLowerCase();return["pending","processing","requires_payment_method","requires_action","unpaid","open"].includes(t)},ePe=4e3,RI=18e4;function tPe(){const{orderId:e}=Ls(),{clearCart:t}=zi(),[n,r]=p.useState(null),[i,o]=p.useState(!1),[c,d]=p.useState(null),[f,m]=p.useState(0),[h]=p.useState(Date.now()),[g,v]=p.useState(null);p.useEffect(()=>{g&&console.info("Order status request correlation id received.",{correlationId:g})},[g]),p.useEffect(()=>{if(!e)return;let O=!0;const R=new AbortController;return o(!0),d(null),j1(e,{signal:R.signal}).then(({data:P,correlationId:H})=>{O&&(r(P),H&&v(K=>K===H?K:H))}).catch(P=>{O&&P?.name!=="AbortError"&&(P?.status===404&&Date.now()-h<RI||(d(P?.message||"Unable to load order status."),P?.correlationId&&v(H=>H===P.correlationId?H:P.correlationId)))}).finally(()=>{O&&o(!1)}),()=>{O=!1,R.abort()}},[e,f]),p.useEffect(()=>{const O=kI(n);if(!OI(O)||Date.now()-h>RI)return;const R=setTimeout(()=>m(k=>k+1),ePe);return()=>clearTimeout(R)},[n,h]);const x=kI(n),w=JDe(x),_=OI(x),S=Lf(x).label,j=QDe(n),A=ZDe(n),E=A.currency||"SEK",C=w?"Order confirmed":_?"   ":"Payment status updated",T=w?"Payment received. Your order is confirmed.":_?"   . We are confirming your payment with our provider.":"Your payment status was updated. Please contact support if you need help.";return p.useEffect(()=>{w&&t()},[t,w]),a.jsx("div",{className:wt.page,children:a.jsxs("div",{className:wt.card,children:[a.jsx("p",{className:wt.kicker,children:"Payment completed"}),a.jsx("h1",{className:wt.title,children:C}),a.jsx("p",{className:wt.subtitle,children:T}),a.jsxs("div",{className:wt.statusCard,children:[a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Checkout session"}),a.jsx("span",{className:wt.statusValue,children:"Handled by Stripe"})]}),a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Order ID"}),a.jsx("span",{className:wt.statusValue,children:n?.id||e||"Pending"})]}),g?a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Reference ID"}),a.jsx("span",{className:wt.statusValue,children:g})]}):null,a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Order status"}),a.jsx("span",{className:wt.statusValue,children:i?"Loading":S})]}),i?a.jsx("p",{className:wt.loading,children:"Fetching latest status"}):null,_&&!i?a.jsx("p",{className:wt.loading,children:"Confirmation pending; well email you when confirmed."}):null,c?a.jsx("p",{className:wt.error,children:c}):null]}),w&&j.length?a.jsxs("div",{className:wt.orderSummary,children:[a.jsx("h2",{children:"Order summary"}),a.jsx("div",{className:wt.items,children:j.map((O,R)=>a.jsxs("div",{className:wt.itemRow,children:[a.jsxs("div",{children:[a.jsx("p",{className:wt.itemName,children:O.name||O.title||"Item"}),a.jsxs("p",{className:wt.itemMeta,children:[O.quantity??O.qty??1,"  ",jt(O.unitPrice??O.price??0,E)]})]}),a.jsx("span",{className:wt.itemTotal,children:jt(O.total??O.lineTotal??0,E)})]},O.id||`${O.productId}-${O.variantId}-${R}`))}),a.jsxs("div",{className:wt.summaryRow,children:[a.jsx("span",{children:"Subtotal"}),a.jsx("span",{children:jt(A.subtotal??0,E)})]}),a.jsxs("div",{className:wt.summaryRowTotal,children:[a.jsx("span",{children:"Total"}),a.jsx("span",{children:jt(A.total??A.subtotal??0,E)})]})]}):null,a.jsxs("div",{className:wt.actions,children:[a.jsx(nt,{to:"/store",className:wt.primary,children:"Continue shopping"}),a.jsx(nt,{to:"/store/checkout",className:wt.secondary,children:"View checkout"})]}),a.jsx("p",{className:wt.notice,children:"Payment completion is verified by the backend. Please wait for the final order status update."})]})})}function nPe(){const{orderId:e}=Ls(),[t,n]=p.useState(null),[r,i]=p.useState(null);return p.useEffect(()=>{if(!e)return;const o=new AbortController;return j1(e,{signal:o.signal}).then(({data:c})=>n(c)).catch(c=>{c?.name!=="AbortError"&&i(c?.message||"Unable to load order status.")}),()=>o.abort()},[e]),a.jsx("div",{className:wt.page,children:a.jsxs("div",{className:wt.card,children:[a.jsx("p",{className:wt.kicker,children:"Payment canceled"}),a.jsx("h1",{className:wt.title,children:"  "}),a.jsx("p",{className:wt.subtitle,children:"Payment canceled. Your payment was not completed, so you can retry when you are ready."}),a.jsxs("div",{className:wt.statusCard,children:[a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Checkout session"}),a.jsx("span",{className:wt.statusValue,children:"Handled by Stripe"})]}),a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Order ID"}),a.jsx("span",{className:wt.statusValue,children:t?.id||e||"Not provided"})]}),t?.status?a.jsxs("div",{className:wt.statusRow,children:[a.jsx("span",{className:wt.statusLabel,children:"Order status"}),a.jsx("span",{className:wt.statusValue,children:Lf(t.status).label})]}):null,r?a.jsx("p",{className:wt.error,children:r}):null]}),a.jsxs("div",{className:wt.actions,children:[a.jsx(nt,{to:"/store/checkout",className:wt.primary,children:"Retry payment"}),a.jsx(nt,{to:"/store",className:wt.secondary,children:"Continue shopping"})]}),a.jsx("p",{className:wt.notice,children:"Order payment status is determined by the backend. This page does not mark orders as paid."})]})})}function rPe({streamName:e="stream"}){const t=p.useRef(null);return p.useRef(new MediaStream),p.useEffect(()=>{new RTCPeerConnection,new AbortController;{console.error("WebRTC signaling base URL is not configured. Set VITE_WEBRTC_SIGNALING_URL (no /v2/webrtc).");return}},[e]),a.jsxs("div",{children:[a.jsx("h1",{children:"WebRTC Connectivity Test"}),a.jsx("p",{children:"Open the console to see connection state logs."}),a.jsx("video",{ref:t,autoPlay:!0,playsInline:!0})]})}function MI({requiredRoles:e=[],requiredPermissions:t=[]}){return a.jsx(Ur,{requiredRoles:e,requiredPermissions:t,children:a.jsx(_u,{})})}function aPe(){const e=cr(),t=e.pathname.replace(/^\/my-page/,"/account");return a.jsx(Rn,{to:`${t}${e.search}${e.hash}`,replace:!0})}function sPe(){const{role:e,roles:t,permissions:n}=Xt();return(t?.length?t:e?[e]:[]).includes("SUPER_ADMIN")?a.jsx(Rn,{to:"home",replace:!0}):us({permissions:n},kt.ADMIN_OVERVIEW_VIEW)?a.jsx(Rn,{to:"overview",replace:!0}):a.jsx(Rn,{to:"/not-authorized",replace:!0})}function iPe(){return a.jsx(n7,{basename:"/",children:a.jsx(oPe,{})})}function oPe(){const e=cr(),t=Gr();return p.useEffect(()=>{const n=sessionStorage.getItem("redirect");if(!n)return;sessionStorage.removeItem("redirect");const r=`${e.pathname}${e.search}${e.hash}`;n!==r&&t(n,{replace:!0})},[e.hash,e.pathname,e.search,t]),a.jsx(BJ,{locationPath:e.pathname,children:a.jsxs(O9,{children:[a.jsxs(Ke,{element:a.jsx(PG,{}),children:[a.jsx(Ke,{path:"/",element:a.jsx(Rn,{to:"/store",replace:!0})}),a.jsx(Ke,{path:"/timelapse",element:a.jsx(EDe,{})}),a.jsx(Ke,{path:"/webrtc-test",element:a.jsx(rPe,{})}),a.jsx(Ke,{path:"/login",element:a.jsx(sq,{})}),a.jsx(Ke,{path:"/register",element:a.jsx(iq,{})}),a.jsx(Ke,{path:"/not-authorized",element:a.jsx(fq,{})}),a.jsx(Ke,{path:"/invite/:token",element:a.jsx(U0,{})}),a.jsx(Ke,{path:"/auth/accept-invite",element:a.jsx(U0,{})}),a.jsx(Ke,{path:"/auth/accept-invite/:token",element:a.jsx(U0,{})}),a.jsx(Ke,{path:"/auth/callback",element:a.jsx(bNe,{})}),a.jsx(Ke,{path:"/forgot-password",element:a.jsx(Xje,{})}),a.jsx(Ke,{path:"/reset-password",element:a.jsx(fNe,{})})]}),a.jsxs(Ke,{element:a.jsx($G,{}),children:[a.jsxs(Ke,{path:"/store",element:a.jsx(bl,{}),children:[a.jsx(Ke,{index:!0,element:a.jsx(MEe,{})}),a.jsx(Ke,{path:"product/:productId",element:a.jsx(xCe,{})}),a.jsx(Ke,{path:"cart",element:a.jsx($Ce,{})}),a.jsx(Ke,{path:"checkout",element:a.jsx(UTe,{})}),a.jsx(Ke,{path:"checkout/success",element:a.jsx(hke,{})}),a.jsx(Ke,{path:"checkout/cancel",element:a.jsx(ike,{})}),a.jsx(Ke,{path:"order/:orderId/success",element:a.jsx(tPe,{})}),a.jsx(Ke,{path:"order/:orderId/cancel",element:a.jsx(nPe,{})}),a.jsx(Ke,{path:"admin/products",element:a.jsx(Ur,{requiredPermissions:[kt.PRODUCTS_MANAGE],children:a.jsx(cI,{})})}),a.jsx(Ke,{path:"admin/products/:productId",element:a.jsx(Ur,{requiredPermissions:[kt.PRODUCTS_MANAGE],children:a.jsx(cI,{})})}),a.jsx(Ke,{path:"admin/manage-products",element:a.jsx(Rn,{to:"/store/admin/products",replace:!0})}),a.jsx(Ke,{path:"admin/customers",element:a.jsx(Ur,{requiredPermissions:[kt.CUSTOMERS_VIEW],children:a.jsx(wRe,{})})}),a.jsx(Ke,{path:"admin/customers/:customerId",element:a.jsx(Ur,{requiredPermissions:[kt.CUSTOMERS_VIEW],children:a.jsx(g2e,{})})}),a.jsx(Ke,{path:"admin/orders",element:a.jsx(Ur,{requiredPermissions:[kt.ORDERS_MANAGE],children:a.jsx($Me,{})})}),a.jsx(Ke,{path:"admin/banners",element:a.jsx(Ur,{requiredPermissions:[kt.PRODUCTS_MANAGE],children:a.jsx(oIe,{})})})]}),a.jsx(Ke,{path:"/contact",element:a.jsx(bl,{}),children:a.jsx(Ke,{index:!0,element:a.jsx(nDe,{})})}),a.jsx(Ke,{path:"/about",element:a.jsx(bl,{}),children:a.jsx(Ke,{index:!0,element:a.jsx(rDe,{})})}),a.jsx(Ke,{path:"/faq",element:a.jsx(bl,{}),children:a.jsx(Ke,{index:!0,element:a.jsx(aDe,{})})}),a.jsx(Ke,{path:"/shipping-returns",element:a.jsx(bl,{}),children:a.jsx(Ke,{index:!0,element:a.jsx(sDe,{})})}),a.jsx(Ke,{path:"/terms",element:a.jsx(bl,{}),children:a.jsx(Ke,{index:!0,element:a.jsx(iDe,{})})}),a.jsx(Ke,{path:"/privacy",element:a.jsx(bl,{}),children:a.jsx(Ke,{index:!0,element:a.jsx(oDe,{})})})]}),a.jsxs(Ke,{element:a.jsx(DG,{}),children:[a.jsxs(Ke,{path:"/monitoring",element:a.jsx(MI,{requiredPermissions:[kt.MONITORING_VIEW]}),children:[a.jsx(Ke,{index:!0,element:a.jsx(Rn,{to:"overview",replace:!0})}),a.jsx(Ke,{path:"overview",element:a.jsx(QQ,{})}),a.jsx(Ke,{path:"control-panel",element:a.jsx(aJ,{})}),a.jsx(Ke,{path:"shelly-control",element:a.jsx(_je,{})}),a.jsx(Ke,{path:"live",element:a.jsx(Lge,{})}),a.jsx(Ke,{path:"germination",element:a.jsx(i_e,{})}),a.jsx(Ke,{path:"hall",element:a.jsx(Y_e,{})}),a.jsx(Ke,{path:"hall/racks/:rackId",element:a.jsx(exe,{})}),a.jsx(Ke,{path:"hall/racks/:rackId/layers/:layerId",element:a.jsx(axe,{})}),a.jsx(Ke,{path:"pages/:slug",element:a.jsx(Nwe,{})}),a.jsx(Ke,{path:"cameras",element:a.jsx(Gxe,{})}),a.jsx(Ke,{path:"reports",element:a.jsx(Ur,{requiredPermissions:[kt.MONITORING_VIEW],children:a.jsx(ASe,{})})}),a.jsx(Ke,{path:"note",element:a.jsx(ZSe,{})}),a.jsx(Ke,{path:"sensor-config",element:a.jsx(I1e,{})})]}),a.jsx(Ke,{path:"/racks/:rackId",element:a.jsx(Ur,{requiredPermissions:[kt.MONITORING_VIEW],children:a.jsx(__e,{})})}),a.jsxs(Ke,{path:"/admin",element:a.jsx(MI,{requiredPermissions:[kt.ADMIN_OVERVIEW_VIEW]}),children:[a.jsx(Ke,{index:!0,element:a.jsx(sPe,{})}),a.jsx(Ke,{path:"home",element:a.jsx(Ur,{requiredRoles:["SUPER_ADMIN"],children:a.jsx(Y8,{})})}),a.jsx(Ke,{path:"overview",element:a.jsx(Ur,{requiredPermissions:[kt.ADMIN_OVERVIEW_VIEW],children:a.jsx(I8,{})})}),a.jsx(Ke,{path:"team",element:a.jsx(Ur,{requiredPermissions:[kt.ADMIN_PERMISSIONS_MANAGE],children:a.jsx(D8,{})})}),a.jsx(Ke,{path:"tools",element:a.jsx(Ur,{requiredRoles:["SUPER_ADMIN"],children:a.jsx(yq,{})})}),a.jsx(Ke,{path:"directory",element:a.jsx(Ur,{requiredRoles:["SUPER_ADMIN"],children:a.jsx(O8,{})})}),a.jsx(Ke,{path:"rack-pages",element:a.jsx(Ur,{requiredPermissions:[kt.ADMIN_OVERVIEW_VIEW],children:a.jsx(q6,{})})})]}),a.jsx(Ke,{path:"/worker/dashboard",element:a.jsx(Ur,{requiredPermissions:[kt.MONITORING_VIEW],children:a.jsx(V6,{})})})]}),a.jsxs(Ke,{path:"/account/*",element:a.jsx(M7,{children:a.jsx(MF,{})}),children:[a.jsx(Ke,{index:!0,element:a.jsx(NH,{})}),a.jsx(Ke,{path:"orders",element:a.jsx(MH,{})}),a.jsx(Ke,{path:"orders/:orderId",element:a.jsx(NV,{})}),a.jsx(Ke,{path:"addresses",element:a.jsx(ZV,{})}),a.jsx(Ke,{path:"settings",element:a.jsx(kK,{})}),a.jsx(Ke,{path:"security",element:a.jsx(qK,{})})]}),a.jsx(Ke,{path:"/my-page/*",element:a.jsx(aPe,{})}),a.jsx(Ke,{path:"/dashboard/*",element:a.jsx(Rn,{to:"/monitoring/overview",replace:!0})}),a.jsx(Ke,{path:"/monitoring/admin/products",element:a.jsx(Rn,{to:"/store/admin/products",replace:!0})}),a.jsx(Ke,{path:"/admin/dashboard",element:a.jsx(Rn,{to:"/admin/overview",replace:!0})}),a.jsx(Ke,{path:"/team",element:a.jsx(Rn,{to:"/admin/team",replace:!0})}),a.jsx(Ke,{path:"/super-admin",element:a.jsx(Rn,{to:"/admin/home",replace:!0})}),a.jsx(Ke,{path:"/super-admin/admins",element:a.jsx(Rn,{to:"/admin/directory",replace:!0})}),a.jsx(Ke,{path:"/store/home",element:a.jsx(Rn,{to:"/store",replace:!0})}),a.jsx(Ke,{path:"*",element:a.jsx(Rn,{to:"/store",replace:!0})})]})})}MU.createRoot(document.getElementById("root")).render(a.jsx(my.StrictMode,{children:a.jsx(k7,{children:a.jsx(vz,{children:a.jsx(aK,{children:a.jsx(iPe,{})})})})}));
