# مبانی HLS

HLS (HTTP Live Streaming) پروتکلی است که ویدیو را به قطعات کوچک تقسیم می‌کند و از طریق HTTP سرو می‌کند. مرورگر ابتدا فایل manifest (`index.m3u8`) را می‌گیرد و سپس قطعات (`.ts`) را به ترتیب دانلود و پخش می‌کند.

## اجزا

- **Playlist (m3u8)**: لیست قطعات و متادیتا.
- **Segments (.ts)**: ویدیوهای تکه‌تکه‌شده.
- **Target duration**: طول متوسط قطعات.
- **Live window**: تعداد قطعات در بافر لیست.

## مزایا

- کار می‌کند روی HTTP استاندارد.
- کش‌پذیری خوب.
- سازگار با CDN و پروکسی‌ها.

## معایب

- تأخیر ذاتی نسبت به RTSP.
- نیاز به تنظیم دقیق برای latency پایین.

## نکات تنظیماتی رایج

- **segment duration** کوتاه‌تر = تأخیر کمتر، اما درخواست‌های بیشتر.
- **playlist size** کوچک‌تر = latency پایین‌تر.
- **حفظ سازگاری**: تنظیمات باید با مرورگرهای هدف و شرایط شبکه هم‌خوان باشند.

## خطاهای رایج

- دریافت نشدن قطعات به‌دلیل CORS یا TLS.
- اشتباه بودن مسیر `index.m3u8`.
- زمان‌بندی قطعات بسیار طولانی یا بسیار کوتاه.
